def p():
    while True:
        pass;
    ;
    @cs: pass;    # critical section
;
flags = dict{ 0: False, 1: False };
spawn p(), 0;
spawn p(), 1;
