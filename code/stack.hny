def Stack():
    result = []

def push(st, v):
    atomically (!st)[len(!st)] = v

def pop(st) returns value:
    atomically:
        if !st == []:
            value = None
        else:
            let n = len(!st) - 1:
                value = (!st)[n]
                del (!st)[n]
