\>{\tiny 1}\'\>\texttt{\textbf{def}}~tas(\textit{lk}):\\

\>{\tiny 2}\'\>~~~~\texttt{\textbf{atomic}}:\\

\>{\tiny 3}\'\>~~~~~~~~\textit{result}~=~!\textit{lk}\\

\>{\tiny 4}\'\>~~~~~~~~!\textit{lk}~=~\texttt{\textbf{True}}\\

\>{\tiny 5}\'\>\\

\>{\tiny 6}\'\>\texttt{\textbf{def}}~BinSema(\textit{acquired}):\\

\>{\tiny 7}\'\>~~~~\textit{result}~=~\textit{acquired}\\

\>{\tiny 8}\'\>\\

\>{\tiny 9}\'\>\texttt{\textbf{def}}~Lock():\\

\>{\tiny 10}\'\>~~~~\textit{result}~=~BinSema(\texttt{\textbf{False}})\\

\>{\tiny 11}\'\>\\

\>{\tiny 12}\'\>\texttt{\textbf{def}}~acquire(\textit{binsema}):\\

\>{\tiny 13}\'\>~~~~\texttt{\textbf{await}}~\texttt{\textbf{not}}~tas(\textit{binsema})\\

\>{\tiny 14}\'\>\\

\>{\tiny 15}\'\>\texttt{\textbf{def}}~release(\textit{binsema}):\\

\>{\tiny 16}\'\>~~~~\texttt{\textbf{assert}}~\textit{binsema}\\

\>{\tiny 17}\'\>~~~~!\textit{binsema}~=~\texttt{\textbf{False}}\\

\>{\tiny 18}\'\>\\

\>{\tiny 19}\'\>\texttt{\textbf{def}}~held(\textit{binsema}):\\

\>{\tiny 20}\'\>~~~~\textit{result}~=~!\textit{binsema}