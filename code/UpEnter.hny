def incrementer(self):
    entered[self] = True;
    if entered[1 - self]:           # if the other process has already started
        while not done[1 - self]:   # wait until it is done
            pass;
        ;
    ;
    count = count + 1;
    done[self] = True;
;
def main():
    while not all(done):
        pass;
    ;
    assert count == 2, count;
;
count = 0;
entered = [ False, False ];
done = [ False, False ];
spawn incrementer(0);
spawn incrementer(1);
spawn main();
