\>{\tiny 1}\'\>\texttt{\textbf{from}}~synch~\texttt{\textbf{import}}~Queue,~\textit{put},~\textit{get}\\

\>{\tiny 2}\'\>\\

\>{\tiny 3}\'\>\texttt{\textbf{const}}~N~=~3~~~~~~~~\emph{\# number of threads}\\

\>{\tiny 4}\'\>\texttt{\textbf{const}}~R~=~4~~~~~~~~\emph{\# number of rounds}\\

\>{\tiny 5}\'\>\\

\>{\tiny 6}\'\>\textit{round}~=~[0,]~*~N\\

\>{\tiny 7}\'\>\textit{q}~=~[Queue(),]~*~N\\

\>{\tiny 8}\'\>\\

\>{\tiny 9}\'\>\texttt{\textbf{def}}~thread(\textit{self}):\\

\>{\tiny 10}\'\>~~~~\texttt{\textbf{for}}~\textit{r}~\texttt{\textbf{in}}~\{1..R\}:\\

\>{\tiny 11}\'\>~~~~~~~~\texttt{\textbf{for}}~\textit{i}~\texttt{\textbf{in}}~\{0..N--1\}~\texttt{\textbf{where}}~\textit{i}~!=~\textit{self}:\\

\>{\tiny 12}\'\>~~~~~~~~~~~~\textit{put}(?\textit{q}[\textit{i}],~\texttt{\textbf{None}})\\

\>{\tiny 13}\'\>~~~~~~~~\texttt{\textbf{for}}~\textit{i}~\texttt{\textbf{in}}~\{0..N--1\}~\texttt{\textbf{where}}~\textit{i}~!=~\textit{self}:\\

\>{\tiny 14}\'\>~~~~~~~~~~~~\textit{get}(?\textit{q}[\textit{self}])\\

\>{\tiny 15}\'\>~~~~~~~~\textit{round}[\textit{self}]~=~(\textit{round}[\textit{self}]~+~1)\\

\>{\tiny 16}\'\>~~~~~~~~\texttt{\textbf{assert}}~(\texttt{\textbf{max}}(\textit{round})~--~\texttt{\textbf{min}}(\textit{round}))~$<=$~1\\

\>{\tiny 17}\'\>\\

\>{\tiny 18}\'\>\texttt{\textbf{for}}~\textit{i}~\texttt{\textbf{in}}~\{0..N--1\}:\\

\>{\tiny 19}\'\>~~~~\texttt{\textbf{spawn}}~thread(\textit{i})