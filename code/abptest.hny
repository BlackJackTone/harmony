import abp

const NMSGS = 10

def sender():
    for i in {1..NMSGS}:
        abp.app_send(i)
    
def receiver():
    var i = 1
    while True:
        let payload = abp.app_recv():
            assert payload == i
        i += 1

spawn sender()
spawn eternal receiver()
