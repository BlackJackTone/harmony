def BinSema(acquired):
    result = acquired

def Lock():
    result = BinSema(False)

def acquire(binsema):
    atomically when not !binsema:
        !binsema = True

def release(binsema):
    assert binsema
    atomically !binsema = False
