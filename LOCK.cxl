import synch;

def p():
    while True:
        call lock&(mylock);
        @cs: pass;   # critical section
        call unlock&(mylock);
    ;
;
mylock := Lock();
spawn p(), 0;
spawn p(), 1;
