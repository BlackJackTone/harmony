\>{\tiny 1}\'\>\texttt{\textbf{import}}~synch;\\

\>{\tiny 2}\'\>\\

\>{\tiny 3}\'\>\texttt{\textbf{const}}~NDINERS~=~5;\\

\>{\tiny 4}\'\>\texttt{\textbf{const}}~NFORKS~=~3;\\

\>{\tiny 5}\'\>\\

\>{\tiny 6}\'\>\texttt{\textbf{def}}~diner(\textit{which}):\\

\>{\tiny 7}\'\>~~~~\texttt{\textbf{while}}~\texttt{\textbf{choose}}(\{~\texttt{\textbf{False}},~\texttt{\textbf{True}}~\}):\\

\>{\tiny 8}\'\>~~~~~~~~P(?\textit{forks});\\

\>{\tiny 9}\'\>~~~~~~~~\emph{\# dine}\\

\>{\tiny 10}\'\>~~~~~~~~V(?\textit{forks});\\

\>{\tiny 11}\'\>~~~~~~~~\emph{\# think}\\

\>{\tiny 12}\'\>~~~~;\\

\>{\tiny 13}\'\>;\\

\>{\tiny 14}\'\>\textit{forks}~=~\textit{Semaphore}(NFORKS);\\

\>{\tiny 15}\'\>\texttt{\textbf{for}}~\textit{i}~\texttt{\textbf{in}}~\{1..NDINERS\}:\\

\>{\tiny 16}\'\>~~~~\texttt{\textbf{spawn}}~diner(\textit{i});\\

\>{\tiny 17}\'\>;