\>{\tiny 1}\'\>\texttt{\textbf{import}}~synch\\

\>{\tiny 2}\'\>\texttt{\textbf{import}}~actor\\

\>{\tiny 3}\'\>\\

\>{\tiny 4}\'\>\texttt{\textbf{const}}~NITEMS~=~3\\

\>{\tiny 5}\'\>\\

\>{\tiny 6}\'\>\textit{pc\_queue}~=~synch.Queue()\\

\>{\tiny 7}\'\>\textit{queues}~=~[synch.Queue(),]~*~NITEMS\\

\>{\tiny 8}\'\>\\

\>{\tiny 9}\'\>\texttt{\textbf{def}}~produce(\textit{q},~\textit{item}):\\

\>{\tiny 10}\'\>~~~~synch.put(?\textit{pc\_queue},~\{~.type:~.produce,~.item:~item~\})\\

\>{\tiny 11}\'\>\\

\>{\tiny 12}\'\>\texttt{\textbf{def}}~consume(\textit{q1},~\textit{q2}):\\

\>{\tiny 13}\'\>~~~~synch.put(\textit{q1},~\{~.type:~.consume,~.queue:~\textit{q2}~\})\\

\>{\tiny 14}\'\>~~~~\textit{result}~=~synch.get(\textit{q2})\\

\>{\tiny 15}\'\>\\

\>{\tiny 16}\'\>actor.init(?\textit{pc\_queue},~2~*~NITEMS)\\

\>{\tiny 17}\'\>\texttt{\textbf{for}}~\textit{i}~\texttt{\textbf{in}}~\{0..NITEMS--1\}:\\

\>{\tiny 18}\'\>~~~~\texttt{\textbf{spawn}}~produce(?\textit{pc\_queue},~\textit{i})\\

\>{\tiny 19}\'\>~~~~\texttt{\textbf{spawn}}~consume(?\textit{pc\_queue},~?\textit{queues}[\textit{i}])