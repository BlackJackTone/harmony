import synch

pool = []
next = 0
lock = synch.Lock()

def malloc(v):
    synch.acquire(?lock)
    pool[next] = v
    result = ?pool[next]
    next += 1
    synch.release(?lock)

def free(r):
    synch.acquire(?lock)
    del !r
    synch.release(?lock)
