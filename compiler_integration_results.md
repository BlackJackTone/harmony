# Compiler Integration Test Results

---
##  harmony_model_checker/modules/bag.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Jump 354
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 354
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s9
LoadVar $s9
1-ary IsEmpty
JumpCond True 23
Cut($s9, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 14
DelVar $s9
StoreVar result
Return
Jump 354
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s25
LoadVar $s25
1-ary IsEmpty
JumpCond True 60
Cut($s25, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 53
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 34
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 34
DelVar $s25
Return
Jump 354
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 86
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 90
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 354
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s89
LoadVar $s89
1-ary IsEmpty
JumpCond True 119
Cut($s89, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 108
DelVar $s89
Return
Jump 354
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 354
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 354
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 354
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 196
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 202
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 354
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 229
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 230
Push False
JumpCond False 239
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 250
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 354
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 268
DelVar bg
DelVar k
Push {}
Push PC(2)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 353
Push PC(92)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 282
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 353
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 294
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 353
Push PC(122)
LoadVar bg
Apply
StoreVar hd
Push PC(204)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(253)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s266
LoadVar $s266
1-ary IsEmpty
JumpCond True 338
Cut($s266, x)
Push PC(167)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 322
DelVar $s266
DelVar hd
Push PC(253)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Return
DelVar result
```

Duration: 0.0016071000000000002

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Jump 354
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 354
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s9
LoadVar $s9
1-ary IsEmpty
JumpCond True 23
Cut($s9, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 14
DelVar $s9
StoreVar result
Return
Jump 354
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s25
LoadVar $s25
1-ary IsEmpty
JumpCond True 60
Cut($s25, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 53
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 34
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 34
DelVar $s25
Return
Jump 354
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 86
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 90
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 354
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s89
LoadVar $s89
1-ary IsEmpty
JumpCond True 119
Cut($s89, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 108
DelVar $s89
Return
Jump 354
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 354
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 354
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 354
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 196
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 202
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 354
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 229
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 230
Push False
JumpCond False 239
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 250
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 354
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 268
DelVar bg
DelVar k
Push {}
Push PC(2)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 353
Push PC(92)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 282
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 353
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 294
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 353
Push PC(122)
LoadVar bg
Apply
StoreVar hd
Push PC(204)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(253)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s266
LoadVar $s266
1-ary IsEmpty
JumpCond True 338
Cut($s266, x)
Push PC(167)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 322
DelVar $s266
DelVar hd
Push PC(253)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Return
DelVar result
```

Duration: 0.001807000000000003

---
##  harmony_model_checker/modules/synchBusy.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Jump 107
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 107
Frame Lock ()
DelVar result
Push False
StoreVar result
Return
Jump 107
Frame lock lk
Push PC(2)
LoadVar lk
Apply
JumpCond False 27
Jump 22
DelVar lk
Return
Jump 107
Frame unlock lk
LoadVar lk
DelVar lk
Push False
Store
Return
Jump 107
Frame Condition lk
DelVar result
LoadVar lk
DelVar lk
StoreVar result
Return
Jump 107
Frame wait c
Push PC(30)
LoadVar c
Load
Apply
Pop
Push PC(21)
LoadVar c
DelVar c
Load
Apply
Pop
Return
Jump 107
Frame notify c
DelVar c
Return
Jump 107
Frame notifyAll c
DelVar c
Return
Jump 107
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 107
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 82
Jump 85
ReadonlyDec
AtomicDec
Jump 74
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 107
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Return
DelVar result
```

Duration: 0.0013215999999999992

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Jump 107
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 107
Frame Lock ()
DelVar result
Push False
StoreVar result
Return
Jump 107
Frame lock lk
Push PC(2)
LoadVar lk
Apply
JumpCond False 27
Jump 22
DelVar lk
Return
Jump 107
Frame unlock lk
LoadVar lk
DelVar lk
Push False
Store
Return
Jump 107
Frame Condition lk
DelVar result
LoadVar lk
DelVar lk
StoreVar result
Return
Jump 107
Frame wait c
Push PC(30)
LoadVar c
Load
Apply
Pop
Push PC(21)
LoadVar c
DelVar c
Load
Apply
Pop
Return
Jump 107
Frame notify c
DelVar c
Return
Jump 107
Frame notifyAll c
DelVar c
Return
Jump 107
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 107
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 82
Jump 85
ReadonlyDec
AtomicDec
Jump 74
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 107
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Return
DelVar result
```

Duration: 0.0018328000000000025

---
##  harmony_model_checker/modules/synchImprecise.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Jump 187
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 187
Frame Lock ()
DelVar result
Push False
StoreVar result
Return
Jump 187
Frame lock lk
Push PC(2)
LoadVar lk
Apply
JumpCond False 27
Jump 22
DelVar lk
Return
Jump 187
Frame unlock lk
LoadVar lk
DelVar lk
Push False
Store
Return
Jump 187
Frame Condition lk
DelVar result
Push ()
Push "lock"
LoadVar lk
DelVar lk
3-ary DictAdd
Push "waiters"
Push {}
3-ary DictAdd
StoreVar result
Return
Jump 187
Frame wait c
Push None
StoreVar lk
DelVar lk
AtomicInc(lazy)
LoadVar c
Push "lock"
Address
Load
StoreVar lk
LoadVar c
Push "waiters"
Address
Dup
Load
Push {}
Push ?nametag
Push ()
Address
Load
2-ary SetAdd
2-ary +
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 94
Push ?nametag
Push ()
Address
Load
LoadVar c
Push "waiters"
Address
Load
2-ary in
1-ary not
Jump 95
Push False
JumpCond False 98
DelVar c
Jump 101
ReadonlyDec
AtomicDec
Jump 77
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 187
Frame notify c
AtomicInc(lazy)
LoadVar c
Push "waiters"
Address
Load
StoreVar waiters
LoadVar waiters
Push {}
2-ary !=
JumpCond False 132
LoadVar c
DelVar c
Push "waiters"
Address
LoadVar waiters
Push {}
LoadVar waiters
DelVar waiters
Choose
2-ary SetAdd
2-ary -
Store
DelVar c
DelVar waiters
AtomicDec
Return
Jump 187
Frame notifyAll c
LoadVar c
DelVar c
Push "waiters"
Address
Push {}
Store
Return
Jump 187
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 187
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 162
Jump 165
ReadonlyDec
AtomicDec
Jump 154
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 187
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Return
DelVar result
```

Duration: 0.0013475999999999974

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Jump 187
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 187
Frame Lock ()
DelVar result
Push False
StoreVar result
Return
Jump 187
Frame lock lk
Push PC(2)
LoadVar lk
Apply
JumpCond False 27
Jump 22
DelVar lk
Return
Jump 187
Frame unlock lk
LoadVar lk
DelVar lk
Push False
Store
Return
Jump 187
Frame Condition lk
DelVar result
Push ()
Push "lock"
LoadVar lk
DelVar lk
3-ary DictAdd
Push "waiters"
Push {}
3-ary DictAdd
StoreVar result
Return
Jump 187
Frame wait c
Push None
StoreVar lk
DelVar lk
AtomicInc(lazy)
LoadVar c
Push "lock"
Address
Load
StoreVar lk
LoadVar c
Push "waiters"
Address
Dup
Load
Push {}
Push ?nametag
Push ()
Address
Load
2-ary SetAdd
2-ary +
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 94
Push ?nametag
Push ()
Address
Load
LoadVar c
Push "waiters"
Address
Load
2-ary in
1-ary not
Jump 95
Push False
JumpCond False 98
DelVar c
Jump 101
ReadonlyDec
AtomicDec
Jump 77
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 187
Frame notify c
AtomicInc(lazy)
LoadVar c
Push "waiters"
Address
Load
StoreVar waiters
LoadVar waiters
Push {}
2-ary !=
JumpCond False 132
LoadVar c
DelVar c
Push "waiters"
Address
LoadVar waiters
Push {}
LoadVar waiters
DelVar waiters
Choose
2-ary SetAdd
2-ary -
Store
DelVar c
DelVar waiters
AtomicDec
Return
Jump 187
Frame notifyAll c
LoadVar c
DelVar c
Push "waiters"
Address
Push {}
Store
Return
Jump 187
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 187
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 162
Jump 165
ReadonlyDec
AtomicDec
Jump 154
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 187
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Return
DelVar result
```

Duration: 0.0014522999999999966

---
##  harmony_model_checker/modules/synch.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store list
Jump 367
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n5
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s8
LoadVar $s8
1-ary IsEmpty
JumpCond True 29
Cut($s8, x)
LoadVar $n5
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n5
Jump 17
DelVar $n5
DelVar $s8
DelVar s
StoreVar result
Return
Jump 367
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 367
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 367
Frame tail s
DelVar result
Push PC(4)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 367
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s65
LoadVar $s65
1-ary IsEmpty
JumpCond True 94
Cut($s65, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 83
DelVar $s65
Return
Jump 367
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s80
LoadVar $s80
1-ary IsEmpty
JumpCond True 111
Cut($s80, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 103
DelVar $s80
StoreVar result
Return
Jump 367
Frame list a
DelVar result
Push 0
StoreVar $n93
Push ()
LoadVar a
DelVar a
StoreVar $s96
LoadVar $s96
1-ary IsEmpty
JumpCond True 133
Cut($s96, v)
LoadVar $n93
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n93
Jump 123
DelVar $n93
DelVar $s96
StoreVar result
Return
Jump 367
Frame values d
DelVar result
Push 0
StoreVar $n111
Push ()
LoadVar d
1-ary keys
StoreVar $s114
LoadVar $s114
1-ary IsEmpty
JumpCond True 158
Cut($s114, k)
LoadVar $n111
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n111
Jump 146
DelVar $n111
DelVar $s114
DelVar d
StoreVar result
Return
Jump 367
Frame items d
DelVar result
Push 0
StoreVar $n132
Push ()
LoadVar d
1-ary keys
StoreVar $s135
LoadVar $s135
1-ary IsEmpty
JumpCond True 190
Cut($s135, k)
LoadVar $n132
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n132
Jump 172
DelVar $n132
DelVar $s135
DelVar d
StoreVar result
Return
Jump 367
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s163
LoadVar $s163
1-ary IsEmpty
JumpCond True 232
Cut($s163, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 205
DelVar $s163
DelVar d
DelVar index
Return
Jump 367
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 247
DelVar a
Push ()
StoreVar result
Jump 322
Push ()
Push 0
Push PC(48)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(57)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n212
Push ()
LoadVar rest
StoreVar $s215
DelVar v
LoadVar $s215
1-ary IsEmpty
JumpCond True 280
Cut($s215, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 265
LoadVar $n212
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n212
Jump 265
DelVar $n212
DelVar $s215
StoreVar lower
Push 0
StoreVar $n231
Push ()
LoadVar rest
DelVar rest
StoreVar $s234
DelVar v
LoadVar $s234
1-ary IsEmpty
JumpCond True 304
Cut($s234, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 289
LoadVar $n231
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n231
Jump 289
DelVar $n231
DelVar $s234
StoreVar higher
Push PC(237)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(237)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 367
Frame sorted d
DelVar result
Push PC(237)
Push PC(115)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 367
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n277
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s280
LoadVar $s280
1-ary IsEmpty
JumpCond True 361
Cut($s280, i)
LoadVar $n277
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n277
Jump 347
DelVar $n277
DelVar $s280
DelVar d
DelVar n
StoreVar result
Return
Push ()
Store bag
Jump 1037
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1037
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s309
LoadVar $s309
1-ary IsEmpty
JumpCond True 391
Cut($s309, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 382
DelVar $s309
StoreVar result
Return
Jump 1037
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s325
LoadVar $s325
1-ary IsEmpty
JumpCond True 428
Cut($s325, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 421
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 402
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 402
DelVar $s325
Return
Jump 1037
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 454
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 458
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1037
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s389
LoadVar $s389
1-ary IsEmpty
JumpCond True 487
Cut($s389, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 476
DelVar $s389
Return
Jump 1037
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1037
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1037
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1037
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 564
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 570
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1037
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 597
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 598
Push False
JumpCond False 607
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 618
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1037
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 636
DelVar bg
DelVar k
Push {}
Push PC(370)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 721
Push PC(460)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 650
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 721
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 662
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 721
Push PC(490)
LoadVar bg
Apply
StoreVar hd
Push PC(572)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(621)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s566
LoadVar $s566
1-ary IsEmpty
JumpCond True 706
Cut($s566, x)
Push PC(535)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 690
DelVar $s566
DelVar hd
Push PC(621)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1037
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1037
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 752
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1037
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1037
Frame Lock ()
DelVar result
Push PC(757)
Push False
Apply
StoreVar result
Return
Jump 1037
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1037
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 788
Jump 791
ReadonlyDec
AtomicDec
Jump 781
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1037
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1037
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1037
Frame Condition ()
DelVar result
Push PC(370)
Push ()
Apply
StoreVar result
Return
Jump 1037
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(431)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(535)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 885
Push PC(431)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 886
Push False
JumpCond False 891
DelVar c
DelVar cnt
DelVar ctx
Jump 894
ReadonlyDec
AtomicDec
Jump 866
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1037
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(370)
Push ()
Apply
2-ary !=
JumpCond False 927
LoadVar c
Push PC(572)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(517)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1037
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(370)
Push ()
Apply
Store
AtomicDec
Return
Jump 1037
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1037
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 958
Jump 961
ReadonlyDec
AtomicDec
Jump 950
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1037
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1037
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1037
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1000
Jump 1003
ReadonlyDec
AtomicDec
Jump 991
ReadonlyDec
Push PC(48)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(57)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1037
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(35)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Return
DelVar result
```

Duration: 0.0016407000000000019

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store list
Jump 367
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n5
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s8
LoadVar $s8
1-ary IsEmpty
JumpCond True 29
Cut($s8, x)
LoadVar $n5
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n5
Jump 17
DelVar $n5
DelVar $s8
DelVar s
StoreVar result
Return
Jump 367
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 367
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 367
Frame tail s
DelVar result
Push PC(4)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 367
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s65
LoadVar $s65
1-ary IsEmpty
JumpCond True 94
Cut($s65, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 83
DelVar $s65
Return
Jump 367
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s80
LoadVar $s80
1-ary IsEmpty
JumpCond True 111
Cut($s80, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 103
DelVar $s80
StoreVar result
Return
Jump 367
Frame list a
DelVar result
Push 0
StoreVar $n93
Push ()
LoadVar a
DelVar a
StoreVar $s96
LoadVar $s96
1-ary IsEmpty
JumpCond True 133
Cut($s96, v)
LoadVar $n93
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n93
Jump 123
DelVar $n93
DelVar $s96
StoreVar result
Return
Jump 367
Frame values d
DelVar result
Push 0
StoreVar $n111
Push ()
LoadVar d
1-ary keys
StoreVar $s114
LoadVar $s114
1-ary IsEmpty
JumpCond True 158
Cut($s114, k)
LoadVar $n111
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n111
Jump 146
DelVar $n111
DelVar $s114
DelVar d
StoreVar result
Return
Jump 367
Frame items d
DelVar result
Push 0
StoreVar $n132
Push ()
LoadVar d
1-ary keys
StoreVar $s135
LoadVar $s135
1-ary IsEmpty
JumpCond True 190
Cut($s135, k)
LoadVar $n132
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n132
Jump 172
DelVar $n132
DelVar $s135
DelVar d
StoreVar result
Return
Jump 367
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s163
LoadVar $s163
1-ary IsEmpty
JumpCond True 232
Cut($s163, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 205
DelVar $s163
DelVar d
DelVar index
Return
Jump 367
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 247
DelVar a
Push ()
StoreVar result
Jump 322
Push ()
Push 0
Push PC(48)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(57)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n212
Push ()
LoadVar rest
StoreVar $s215
DelVar v
LoadVar $s215
1-ary IsEmpty
JumpCond True 280
Cut($s215, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 265
LoadVar $n212
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n212
Jump 265
DelVar $n212
DelVar $s215
StoreVar lower
Push 0
StoreVar $n231
Push ()
LoadVar rest
DelVar rest
StoreVar $s234
DelVar v
LoadVar $s234
1-ary IsEmpty
JumpCond True 304
Cut($s234, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 289
LoadVar $n231
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n231
Jump 289
DelVar $n231
DelVar $s234
StoreVar higher
Push PC(237)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(237)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 367
Frame sorted d
DelVar result
Push PC(237)
Push PC(115)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 367
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n277
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s280
LoadVar $s280
1-ary IsEmpty
JumpCond True 361
Cut($s280, i)
LoadVar $n277
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n277
Jump 347
DelVar $n277
DelVar $s280
DelVar d
DelVar n
StoreVar result
Return
Push ()
Store bag
Jump 1037
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1037
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s309
LoadVar $s309
1-ary IsEmpty
JumpCond True 391
Cut($s309, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 382
DelVar $s309
StoreVar result
Return
Jump 1037
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s325
LoadVar $s325
1-ary IsEmpty
JumpCond True 428
Cut($s325, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 421
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 402
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 402
DelVar $s325
Return
Jump 1037
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 454
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 458
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1037
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s389
LoadVar $s389
1-ary IsEmpty
JumpCond True 487
Cut($s389, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 476
DelVar $s389
Return
Jump 1037
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1037
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1037
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1037
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 564
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 570
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1037
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 597
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 598
Push False
JumpCond False 607
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 618
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1037
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 636
DelVar bg
DelVar k
Push {}
Push PC(370)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 721
Push PC(460)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 650
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 721
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 662
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 721
Push PC(490)
LoadVar bg
Apply
StoreVar hd
Push PC(572)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(621)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s566
LoadVar $s566
1-ary IsEmpty
JumpCond True 706
Cut($s566, x)
Push PC(535)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 690
DelVar $s566
DelVar hd
Push PC(621)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1037
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1037
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 752
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1037
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1037
Frame Lock ()
DelVar result
Push PC(757)
Push False
Apply
StoreVar result
Return
Jump 1037
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1037
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 788
Jump 791
ReadonlyDec
AtomicDec
Jump 781
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1037
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1037
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1037
Frame Condition ()
DelVar result
Push PC(370)
Push ()
Apply
StoreVar result
Return
Jump 1037
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(431)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(535)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 885
Push PC(431)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 886
Push False
JumpCond False 891
DelVar c
DelVar cnt
DelVar ctx
Jump 894
ReadonlyDec
AtomicDec
Jump 866
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1037
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(370)
Push ()
Apply
2-ary !=
JumpCond False 927
LoadVar c
Push PC(572)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(517)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1037
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(370)
Push ()
Apply
Store
AtomicDec
Return
Jump 1037
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1037
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 958
Jump 961
ReadonlyDec
AtomicDec
Jump 950
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1037
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1037
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1037
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1000
Jump 1003
ReadonlyDec
AtomicDec
Jump 991
ReadonlyDec
Push PC(48)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(57)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1037
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(35)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Return
DelVar result
```

Duration: 0.0014794000000000057

---
##  harmony_model_checker/modules/alloc.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store pool
Push 0
Store next
Jump 45
Frame malloc v
DelVar result
AtomicInc(lazy)
Push ?pool
Load next
Address
LoadVar v
DelVar v
Store
Push ?pool
Load next
Address
StoreVar result
Load next
Push 1
2-ary +
Store next
AtomicDec
Return
Jump 45
Frame free r
AtomicInc(lazy)
LoadVar r
DelVar r
Del
AtomicDec
Return
Jump 45
Frame leak_check ()
ReadonlyInc
AtomicInc(lazy)
Load pool
Push ()
2-ary ==
Push "alloc_leak"
Assert2
AtomicDec
ReadonlyDec
Return
Return
DelVar result
```

Duration: 0.0016474999999999962

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store pool
Push 0
Store next
Jump 45
Frame malloc v
DelVar result
AtomicInc(lazy)
Push ?pool
Load next
Address
LoadVar v
DelVar v
Store
Push ?pool
Load next
Address
StoreVar result
Load next
Push 1
2-ary +
Store next
AtomicDec
Return
Jump 45
Frame free r
AtomicInc(lazy)
LoadVar r
DelVar r
Del
AtomicDec
Return
Jump 45
Frame leak_check ()
ReadonlyInc
AtomicInc(lazy)
Load pool
Push ()
2-ary ==
Push "alloc_leak"
Assert2
AtomicDec
ReadonlyDec
Return
Return
DelVar result
```

Duration: 0.0013253999999999974

---
##  harmony_model_checker/modules/hoare.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store synch
Push ()
Store list
Jump 369
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 369
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 369
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 369
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 369
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 369
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 369
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 369
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 369
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 369
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 369
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 369
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 369
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Push ()
Store bag
Jump 1132
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1132
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s311
LoadVar $s311
1-ary IsEmpty
JumpCond True 393
Cut($s311, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 384
DelVar $s311
StoreVar result
Return
Jump 1132
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s327
LoadVar $s327
1-ary IsEmpty
JumpCond True 430
Cut($s327, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 423
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 404
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 404
DelVar $s327
Return
Jump 1132
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 456
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 460
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1132
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s391
LoadVar $s391
1-ary IsEmpty
JumpCond True 489
Cut($s391, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 478
DelVar $s391
Return
Jump 1132
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1132
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1132
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1132
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 566
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 572
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1132
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 599
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 600
Push False
JumpCond False 609
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 620
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1132
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 638
DelVar bg
DelVar k
Push {}
Push PC(372)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 723
Push PC(462)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 652
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 723
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 664
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 723
Push PC(492)
LoadVar bg
Apply
StoreVar hd
Push PC(574)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(623)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s568
LoadVar $s568
1-ary IsEmpty
JumpCond True 708
Cut($s568, x)
Push PC(537)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 692
DelVar $s568
DelVar hd
Push PC(623)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1132
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1132
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 754
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1132
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1132
Frame Lock ()
DelVar result
Push PC(759)
Push False
Apply
StoreVar result
Return
Jump 1132
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1132
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 790
Jump 793
ReadonlyDec
AtomicDec
Jump 783
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1132
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1132
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1132
Frame Condition ()
DelVar result
Push PC(372)
Push ()
Apply
StoreVar result
Return
Jump 1132
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(537)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 887
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 888
Push False
JumpCond False 893
DelVar c
DelVar cnt
DelVar ctx
Jump 896
ReadonlyDec
AtomicDec
Jump 868
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1132
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(372)
Push ()
Apply
2-ary !=
JumpCond False 929
LoadVar c
Push PC(574)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(519)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1132
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(372)
Push ()
Apply
Store
AtomicDec
Return
Jump 1132
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1132
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 960
Jump 963
ReadonlyDec
AtomicDec
Jump 952
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1132
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1132
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1132
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1002
Jump 1005
ReadonlyDec
AtomicDec
Jump 993
ReadonlyDec
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1132
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Jump 1132
Frame Monitor ()
DelVar result
Push PC(766)
Push ()
Apply
StoreVar result
Return
Jump 1132
Frame enter mon
Push PC(782)
LoadVar mon
DelVar mon
Apply
Pop
Return
Jump 1132
Frame exit mon
Push PC(801)
LoadVar mon
DelVar mon
Apply
Pop
Return
Jump 1132
Frame Condition ()
DelVar result
Push ()
Push "sema"
Push PC(759)
Push True
Apply
3-ary DictAdd
Push "count"
Push 0
3-ary DictAdd
StoreVar result
Return
Jump 1132
Frame wait (cond, mon)
LoadVar cond
Push "count"
Address
Dup
Load
Push 1
2-ary +
Store
Push PC(1056)
LoadVar mon
DelVar mon
Apply
Pop
Push PC(782)
LoadVar cond
Push "sema"
Address
Apply
Pop
LoadVar cond
DelVar cond
Push "count"
Address
Dup
Load
Push 1
2-ary -
Store
Return
Jump 1132
Frame signal (cond, mon)
LoadVar cond
Push "count"
Address
Load
Push 0
2-ary >
JumpCond False 1129
Push PC(801)
LoadVar cond
DelVar cond
Push "sema"
Address
Apply
Pop
Push PC(1048)
LoadVar mon
DelVar mon
Apply
Pop
DelVar cond
DelVar mon
Return
Return
DelVar result
```

Duration: 0.001633599999999999

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store synch
Push ()
Store list
Jump 369
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 369
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 369
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 369
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 369
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 369
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 369
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 369
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 369
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 369
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 369
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 369
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 369
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Push ()
Store bag
Jump 1132
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1132
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s311
LoadVar $s311
1-ary IsEmpty
JumpCond True 393
Cut($s311, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 384
DelVar $s311
StoreVar result
Return
Jump 1132
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s327
LoadVar $s327
1-ary IsEmpty
JumpCond True 430
Cut($s327, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 423
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 404
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 404
DelVar $s327
Return
Jump 1132
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 456
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 460
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1132
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s391
LoadVar $s391
1-ary IsEmpty
JumpCond True 489
Cut($s391, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 478
DelVar $s391
Return
Jump 1132
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1132
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1132
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1132
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 566
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 572
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1132
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 599
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 600
Push False
JumpCond False 609
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 620
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1132
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 638
DelVar bg
DelVar k
Push {}
Push PC(372)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 723
Push PC(462)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 652
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 723
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 664
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 723
Push PC(492)
LoadVar bg
Apply
StoreVar hd
Push PC(574)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(623)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s568
LoadVar $s568
1-ary IsEmpty
JumpCond True 708
Cut($s568, x)
Push PC(537)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 692
DelVar $s568
DelVar hd
Push PC(623)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1132
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1132
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 754
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1132
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1132
Frame Lock ()
DelVar result
Push PC(759)
Push False
Apply
StoreVar result
Return
Jump 1132
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1132
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 790
Jump 793
ReadonlyDec
AtomicDec
Jump 783
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1132
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1132
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1132
Frame Condition ()
DelVar result
Push PC(372)
Push ()
Apply
StoreVar result
Return
Jump 1132
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(537)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 887
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 888
Push False
JumpCond False 893
DelVar c
DelVar cnt
DelVar ctx
Jump 896
ReadonlyDec
AtomicDec
Jump 868
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1132
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(372)
Push ()
Apply
2-ary !=
JumpCond False 929
LoadVar c
Push PC(574)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(519)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1132
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(372)
Push ()
Apply
Store
AtomicDec
Return
Jump 1132
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1132
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 960
Jump 963
ReadonlyDec
AtomicDec
Jump 952
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1132
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1132
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1132
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1002
Jump 1005
ReadonlyDec
AtomicDec
Jump 993
ReadonlyDec
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1132
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Jump 1132
Frame Monitor ()
DelVar result
Push PC(766)
Push ()
Apply
StoreVar result
Return
Jump 1132
Frame enter mon
Push PC(782)
LoadVar mon
DelVar mon
Apply
Pop
Return
Jump 1132
Frame exit mon
Push PC(801)
LoadVar mon
DelVar mon
Apply
Pop
Return
Jump 1132
Frame Condition ()
DelVar result
Push ()
Push "sema"
Push PC(759)
Push True
Apply
3-ary DictAdd
Push "count"
Push 0
3-ary DictAdd
StoreVar result
Return
Jump 1132
Frame wait (cond, mon)
LoadVar cond
Push "count"
Address
Dup
Load
Push 1
2-ary +
Store
Push PC(1056)
LoadVar mon
DelVar mon
Apply
Pop
Push PC(782)
LoadVar cond
Push "sema"
Address
Apply
Pop
LoadVar cond
DelVar cond
Push "count"
Address
Dup
Load
Push 1
2-ary -
Store
Return
Jump 1132
Frame signal (cond, mon)
LoadVar cond
Push "count"
Address
Load
Push 0
2-ary >
JumpCond False 1129
Push PC(801)
LoadVar cond
DelVar cond
Push "sema"
Address
Apply
Pop
Push PC(1048)
LoadVar mon
DelVar mon
Apply
Pop
DelVar cond
DelVar mon
Return
Return
DelVar result
```

Duration: 0.0014662000000000008

---
##  harmony_model_checker/modules/synchS.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store list
Jump 797
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n5
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s8
LoadVar $s8
1-ary IsEmpty
JumpCond True 29
Cut($s8, x)
LoadVar $n5
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n5
Jump 17
DelVar $n5
DelVar $s8
DelVar s
StoreVar result
Return
Jump 797
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 797
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 797
Frame tail s
DelVar result
Push PC(4)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 797
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s65
LoadVar $s65
1-ary IsEmpty
JumpCond True 94
Cut($s65, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 83
DelVar $s65
Return
Jump 797
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s80
LoadVar $s80
1-ary IsEmpty
JumpCond True 111
Cut($s80, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 103
DelVar $s80
StoreVar result
Return
Jump 797
Frame list a
DelVar result
Push 0
StoreVar $n93
Push ()
LoadVar a
DelVar a
StoreVar $s96
LoadVar $s96
1-ary IsEmpty
JumpCond True 133
Cut($s96, v)
LoadVar $n93
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n93
Jump 123
DelVar $n93
DelVar $s96
StoreVar result
Return
Jump 797
Frame values d
DelVar result
Push 0
StoreVar $n111
Push ()
LoadVar d
1-ary keys
StoreVar $s114
LoadVar $s114
1-ary IsEmpty
JumpCond True 158
Cut($s114, k)
LoadVar $n111
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n111
Jump 146
DelVar $n111
DelVar $s114
DelVar d
StoreVar result
Return
Jump 797
Frame items d
DelVar result
Push 0
StoreVar $n132
Push ()
LoadVar d
1-ary keys
StoreVar $s135
LoadVar $s135
1-ary IsEmpty
JumpCond True 190
Cut($s135, k)
LoadVar $n132
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n132
Jump 172
DelVar $n132
DelVar $s135
DelVar d
StoreVar result
Return
Jump 797
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s163
LoadVar $s163
1-ary IsEmpty
JumpCond True 232
Cut($s163, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 205
DelVar $s163
DelVar d
DelVar index
Return
Jump 797
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 247
DelVar a
Push ()
StoreVar result
Jump 322
Push ()
Push 0
Push PC(48)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(57)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n212
Push ()
LoadVar rest
StoreVar $s215
DelVar v
LoadVar $s215
1-ary IsEmpty
JumpCond True 280
Cut($s215, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 265
LoadVar $n212
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n212
Jump 265
DelVar $n212
DelVar $s215
StoreVar lower
Push 0
StoreVar $n231
Push ()
LoadVar rest
DelVar rest
StoreVar $s234
DelVar v
LoadVar $s234
1-ary IsEmpty
JumpCond True 304
Cut($s234, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 289
LoadVar $n231
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n231
Jump 289
DelVar $n231
DelVar $s234
StoreVar higher
Push PC(237)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(237)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 797
Frame sorted d
DelVar result
Push PC(237)
Push PC(115)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 797
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n277
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s280
LoadVar $s280
1-ary IsEmpty
JumpCond True 361
Cut($s280, i)
LoadVar $n277
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n277
Jump 347
DelVar $n277
DelVar $s280
DelVar d
DelVar n
StoreVar result
Return
Jump 797
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 797
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 397
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 797
Frame BinSema acquired
DelVar result
Push ()
Push "acquired"
LoadVar acquired
DelVar acquired
3-ary DictAdd
Push "suspended"
Push ()
3-ary DictAdd
StoreVar result
Return
Jump 797
Frame Lock ()
DelVar result
Push PC(402)
Push False
Apply
StoreVar result
Return
Jump 797
Frame acquire binsema
AtomicInc(lazy)
LoadVar binsema
Push "acquired"
Address
Load
JumpCond False 453
LoadVar binsema
Push "suspended"
Address
LoadVar binsema
Push "suspended"
Address
Load
1-ary len
Address
Stop
Continue
Pop
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Load
Assert
AtomicDec
ReadonlyDec
Jump 459
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Push True
Store
AtomicDec
Return
Jump 797
Frame release binsema
AtomicInc(lazy)
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Push "acquired"
Address
Load
Assert
AtomicDec
ReadonlyDec
LoadVar binsema
Push "suspended"
Address
Load
Push ()
2-ary ==
JumpCond False 487
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Push False
Store
Jump 506
Push ()
Push PC(48)
LoadVar binsema
Push "suspended"
Address
Load
Apply
Go
LoadVar binsema
Push "suspended"
Address
Push PC(57)
LoadVar binsema
DelVar binsema
Push "suspended"
Address
Load
Apply
Store
AtomicDec
Return
Jump 797
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Load
StoreVar result
Return
Jump 797
Frame Condition ()
DelVar result
Push ()
StoreVar result
Return
Jump 797
Frame wait (c, lk)
AtomicInc(lazy)
Push PC(462)
LoadVar lk
Apply
Pop
LoadVar c
LoadVar c
DelVar c
Load
1-ary len
Address
Stop
Continue
Pop
AtomicDec
Push PC(423)
LoadVar lk
DelVar lk
Apply
Pop
Return
Jump 797
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push ()
2-ary !=
JumpCond False 568
Push ()
Push PC(48)
LoadVar c
Load
Apply
Go
LoadVar c
Push PC(57)
LoadVar c
DelVar c
Load
Apply
Store
DelVar c
AtomicDec
Return
Jump 797
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
Load
Push ()
2-ary !=
JumpCond False 592
Push ()
Push PC(48)
LoadVar c
Load
Apply
Go
LoadVar c
Push PC(57)
LoadVar c
Load
Apply
Store
Jump 574
DelVar c
AtomicDec
Return
Jump 797
Frame Semaphore cnt
DelVar result
Push ()
Push "count"
LoadVar cnt
DelVar cnt
3-ary DictAdd
Push "waiters"
Push ()
3-ary DictAdd
StoreVar result
Return
Jump 797
Frame P sema
AtomicInc(lazy)
LoadVar sema
Push "count"
Address
Load
Push 0
2-ary >
JumpCond False 628
LoadVar sema
DelVar sema
Push "count"
Address
Dup
Load
Push 1
2-ary -
Store
Jump 641
LoadVar sema
Push "waiters"
Address
LoadVar sema
DelVar sema
Push "waiters"
Address
Load
1-ary len
Address
Stop
Continue
Pop
AtomicDec
Return
Jump 797
Frame V sema
AtomicInc(lazy)
Push ()
Push 0
LoadVar sema
Push "count"
Address
Load
3-ary DictAdd
Push 1
LoadVar sema
Push "waiters"
Address
Load
3-ary DictAdd
StoreVar (cnt, waiters)
LoadVar waiters
Push ()
2-ary !=
JumpCond False 688
ReadonlyInc
AtomicInc(lazy)
LoadVar cnt
DelVar cnt
Push 0
2-ary ==
Assert
AtomicDec
ReadonlyDec
Push ()
LoadVar waiters
Push 0
Apply
Go
LoadVar sema
DelVar sema
Push "waiters"
Address
Push PC(57)
LoadVar waiters
DelVar waiters
Apply
Store
Jump 698
DelVar waiters
LoadVar sema
DelVar sema
Push "count"
Address
LoadVar cnt
DelVar cnt
Push 1
2-ary +
Store
AtomicDec
Return
Jump 797
Frame Queue ()
DelVar result
Push { "list":(), "waiters":() }
StoreVar result
Return
Jump 797
Frame get q
DelVar result
AtomicInc(lazy)
LoadVar q
Push "list"
Address
Load
Push ()
2-ary ==
JumpCond False 729
LoadVar q
Push "waiters"
Address
LoadVar q
Push "waiters"
Address
Load
1-ary len
Address
Stop
Continue
Pop
Push PC(48)
LoadVar q
Push "list"
Address
Load
Apply
StoreVar result
LoadVar q
Push "list"
Address
Push PC(57)
LoadVar q
DelVar q
Push "list"
Address
Load
Apply
Store
AtomicDec
Return
Jump 797
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push "list"
Address
Push PC(35)
Push ()
Push 0
LoadVar q
Push "list"
Address
Load
3-ary DictAdd
Push 1
LoadVar item
3-ary DictAdd
Apply
Store
LoadVar q
Push "waiters"
Address
Load
StoreVar waiters
LoadVar waiters
Push ()
2-ary !=
JumpCond False 792
LoadVar item
DelVar item
LoadVar waiters
Push 0
Apply
Go
LoadVar q
DelVar q
Push "waiters"
Address
Push PC(57)
LoadVar waiters
DelVar waiters
Apply
Store
DelVar item
DelVar q
DelVar waiters
AtomicDec
Return
Return
DelVar result
```

Duration: 0.001755699999999999

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store list
Jump 797
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n5
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s8
LoadVar $s8
1-ary IsEmpty
JumpCond True 29
Cut($s8, x)
LoadVar $n5
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n5
Jump 17
DelVar $n5
DelVar $s8
DelVar s
StoreVar result
Return
Jump 797
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 797
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 797
Frame tail s
DelVar result
Push PC(4)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 797
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s65
LoadVar $s65
1-ary IsEmpty
JumpCond True 94
Cut($s65, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 83
DelVar $s65
Return
Jump 797
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s80
LoadVar $s80
1-ary IsEmpty
JumpCond True 111
Cut($s80, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 103
DelVar $s80
StoreVar result
Return
Jump 797
Frame list a
DelVar result
Push 0
StoreVar $n93
Push ()
LoadVar a
DelVar a
StoreVar $s96
LoadVar $s96
1-ary IsEmpty
JumpCond True 133
Cut($s96, v)
LoadVar $n93
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n93
Jump 123
DelVar $n93
DelVar $s96
StoreVar result
Return
Jump 797
Frame values d
DelVar result
Push 0
StoreVar $n111
Push ()
LoadVar d
1-ary keys
StoreVar $s114
LoadVar $s114
1-ary IsEmpty
JumpCond True 158
Cut($s114, k)
LoadVar $n111
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n111
Jump 146
DelVar $n111
DelVar $s114
DelVar d
StoreVar result
Return
Jump 797
Frame items d
DelVar result
Push 0
StoreVar $n132
Push ()
LoadVar d
1-ary keys
StoreVar $s135
LoadVar $s135
1-ary IsEmpty
JumpCond True 190
Cut($s135, k)
LoadVar $n132
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n132
Jump 172
DelVar $n132
DelVar $s135
DelVar d
StoreVar result
Return
Jump 797
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s163
LoadVar $s163
1-ary IsEmpty
JumpCond True 232
Cut($s163, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 205
DelVar $s163
DelVar d
DelVar index
Return
Jump 797
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 247
DelVar a
Push ()
StoreVar result
Jump 322
Push ()
Push 0
Push PC(48)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(57)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n212
Push ()
LoadVar rest
StoreVar $s215
DelVar v
LoadVar $s215
1-ary IsEmpty
JumpCond True 280
Cut($s215, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 265
LoadVar $n212
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n212
Jump 265
DelVar $n212
DelVar $s215
StoreVar lower
Push 0
StoreVar $n231
Push ()
LoadVar rest
DelVar rest
StoreVar $s234
DelVar v
LoadVar $s234
1-ary IsEmpty
JumpCond True 304
Cut($s234, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 289
LoadVar $n231
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n231
Jump 289
DelVar $n231
DelVar $s234
StoreVar higher
Push PC(237)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(237)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 797
Frame sorted d
DelVar result
Push PC(237)
Push PC(115)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 797
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n277
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s280
LoadVar $s280
1-ary IsEmpty
JumpCond True 361
Cut($s280, i)
LoadVar $n277
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n277
Jump 347
DelVar $n277
DelVar $s280
DelVar d
DelVar n
StoreVar result
Return
Jump 797
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 797
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 397
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 797
Frame BinSema acquired
DelVar result
Push ()
Push "acquired"
LoadVar acquired
DelVar acquired
3-ary DictAdd
Push "suspended"
Push ()
3-ary DictAdd
StoreVar result
Return
Jump 797
Frame Lock ()
DelVar result
Push PC(402)
Push False
Apply
StoreVar result
Return
Jump 797
Frame acquire binsema
AtomicInc(lazy)
LoadVar binsema
Push "acquired"
Address
Load
JumpCond False 453
LoadVar binsema
Push "suspended"
Address
LoadVar binsema
Push "suspended"
Address
Load
1-ary len
Address
Stop
Continue
Pop
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Load
Assert
AtomicDec
ReadonlyDec
Jump 459
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Push True
Store
AtomicDec
Return
Jump 797
Frame release binsema
AtomicInc(lazy)
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Push "acquired"
Address
Load
Assert
AtomicDec
ReadonlyDec
LoadVar binsema
Push "suspended"
Address
Load
Push ()
2-ary ==
JumpCond False 487
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Push False
Store
Jump 506
Push ()
Push PC(48)
LoadVar binsema
Push "suspended"
Address
Load
Apply
Go
LoadVar binsema
Push "suspended"
Address
Push PC(57)
LoadVar binsema
DelVar binsema
Push "suspended"
Address
Load
Apply
Store
AtomicDec
Return
Jump 797
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Load
StoreVar result
Return
Jump 797
Frame Condition ()
DelVar result
Push ()
StoreVar result
Return
Jump 797
Frame wait (c, lk)
AtomicInc(lazy)
Push PC(462)
LoadVar lk
Apply
Pop
LoadVar c
LoadVar c
DelVar c
Load
1-ary len
Address
Stop
Continue
Pop
AtomicDec
Push PC(423)
LoadVar lk
DelVar lk
Apply
Pop
Return
Jump 797
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push ()
2-ary !=
JumpCond False 568
Push ()
Push PC(48)
LoadVar c
Load
Apply
Go
LoadVar c
Push PC(57)
LoadVar c
DelVar c
Load
Apply
Store
DelVar c
AtomicDec
Return
Jump 797
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
Load
Push ()
2-ary !=
JumpCond False 592
Push ()
Push PC(48)
LoadVar c
Load
Apply
Go
LoadVar c
Push PC(57)
LoadVar c
Load
Apply
Store
Jump 574
DelVar c
AtomicDec
Return
Jump 797
Frame Semaphore cnt
DelVar result
Push ()
Push "count"
LoadVar cnt
DelVar cnt
3-ary DictAdd
Push "waiters"
Push ()
3-ary DictAdd
StoreVar result
Return
Jump 797
Frame P sema
AtomicInc(lazy)
LoadVar sema
Push "count"
Address
Load
Push 0
2-ary >
JumpCond False 628
LoadVar sema
DelVar sema
Push "count"
Address
Dup
Load
Push 1
2-ary -
Store
Jump 641
LoadVar sema
Push "waiters"
Address
LoadVar sema
DelVar sema
Push "waiters"
Address
Load
1-ary len
Address
Stop
Continue
Pop
AtomicDec
Return
Jump 797
Frame V sema
AtomicInc(lazy)
Push ()
Push 0
LoadVar sema
Push "count"
Address
Load
3-ary DictAdd
Push 1
LoadVar sema
Push "waiters"
Address
Load
3-ary DictAdd
StoreVar (cnt, waiters)
LoadVar waiters
Push ()
2-ary !=
JumpCond False 688
ReadonlyInc
AtomicInc(lazy)
LoadVar cnt
DelVar cnt
Push 0
2-ary ==
Assert
AtomicDec
ReadonlyDec
Push ()
LoadVar waiters
Push 0
Apply
Go
LoadVar sema
DelVar sema
Push "waiters"
Address
Push PC(57)
LoadVar waiters
DelVar waiters
Apply
Store
Jump 698
DelVar waiters
LoadVar sema
DelVar sema
Push "count"
Address
LoadVar cnt
DelVar cnt
Push 1
2-ary +
Store
AtomicDec
Return
Jump 797
Frame Queue ()
DelVar result
Push { "list":(), "waiters":() }
StoreVar result
Return
Jump 797
Frame get q
DelVar result
AtomicInc(lazy)
LoadVar q
Push "list"
Address
Load
Push ()
2-ary ==
JumpCond False 729
LoadVar q
Push "waiters"
Address
LoadVar q
Push "waiters"
Address
Load
1-ary len
Address
Stop
Continue
Pop
Push PC(48)
LoadVar q
Push "list"
Address
Load
Apply
StoreVar result
LoadVar q
Push "list"
Address
Push PC(57)
LoadVar q
DelVar q
Push "list"
Address
Load
Apply
Store
AtomicDec
Return
Jump 797
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push "list"
Address
Push PC(35)
Push ()
Push 0
LoadVar q
Push "list"
Address
Load
3-ary DictAdd
Push 1
LoadVar item
3-ary DictAdd
Apply
Store
LoadVar q
Push "waiters"
Address
Load
StoreVar waiters
LoadVar waiters
Push ()
2-ary !=
JumpCond False 792
LoadVar item
DelVar item
LoadVar waiters
Push 0
Apply
Go
LoadVar q
DelVar q
Push "waiters"
Address
Push PC(57)
LoadVar waiters
DelVar waiters
Apply
Store
DelVar item
DelVar q
DelVar waiters
AtomicDec
Return
Return
DelVar result
```

Duration: 0.0013666999999999985

---
##  harmony_model_checker/modules/set.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Jump 141
Frame issubset (s, t)
DelVar result
LoadVar s
LoadVar t
DelVar t
2-ary &
LoadVar s
DelVar s
2-ary ==
StoreVar result
Return
Jump 141
Frame issuperset (s, t)
DelVar result
LoadVar s
DelVar s
LoadVar t
2-ary &
LoadVar t
DelVar t
2-ary ==
StoreVar result
Return
Jump 141
Frame add (s, elt)
Push ?return
LoadVar s
DelVar s
Address
Load
Push {}
LoadVar elt
DelVar elt
2-ary SetAdd
2-ary |
Pop
Return
Jump 141
Frame remove (s, elt)
Push ?return
LoadVar s
DelVar s
Address
Load
Push {}
LoadVar elt
DelVar elt
2-ary SetAdd
2-ary -
Pop
Return
Jump 141
Frame combinations (s, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 65
DelVar k
DelVar s
Push { {} }
StoreVar result
Jump 140
LoadVar s
1-ary len
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 78
DelVar k
DelVar n
DelVar s
Push {}
StoreVar result
Jump 140
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 90
DelVar k
Push {}
LoadVar s
DelVar s
2-ary SetAdd
StoreVar result
Jump 140
LoadVar s
1-ary min
StoreVar hd
LoadVar s
DelVar s
Push {}
LoadVar hd
2-ary SetAdd
2-ary -
StoreVar tl
Push {}
Push PC(54)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s81
LoadVar $s81
1-ary IsEmpty
JumpCond True 125
Cut($s81, x)
Push {}
LoadVar hd
2-ary SetAdd
LoadVar x
DelVar x
2-ary |
2-ary SetAdd
Jump 113
DelVar $s81
DelVar hd
Push PC(54)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Return
DelVar result
```

Duration: 0.0015495999999999982

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Jump 141
Frame issubset (s, t)
DelVar result
LoadVar s
LoadVar t
DelVar t
2-ary &
LoadVar s
DelVar s
2-ary ==
StoreVar result
Return
Jump 141
Frame issuperset (s, t)
DelVar result
LoadVar s
DelVar s
LoadVar t
2-ary &
LoadVar t
DelVar t
2-ary ==
StoreVar result
Return
Jump 141
Frame add (s, elt)
Push ?return
LoadVar s
DelVar s
Address
Load
Push {}
LoadVar elt
DelVar elt
2-ary SetAdd
2-ary |
Pop
Return
Jump 141
Frame remove (s, elt)
Push ?return
LoadVar s
DelVar s
Address
Load
Push {}
LoadVar elt
DelVar elt
2-ary SetAdd
2-ary -
Pop
Return
Jump 141
Frame combinations (s, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 65
DelVar k
DelVar s
Push { {} }
StoreVar result
Jump 140
LoadVar s
1-ary len
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 78
DelVar k
DelVar n
DelVar s
Push {}
StoreVar result
Jump 140
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 90
DelVar k
Push {}
LoadVar s
DelVar s
2-ary SetAdd
StoreVar result
Jump 140
LoadVar s
1-ary min
StoreVar hd
LoadVar s
DelVar s
Push {}
LoadVar hd
2-ary SetAdd
2-ary -
StoreVar tl
Push {}
Push PC(54)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s81
LoadVar $s81
1-ary IsEmpty
JumpCond True 125
Cut($s81, x)
Push {}
LoadVar hd
2-ary SetAdd
LoadVar x
DelVar x
2-ary |
2-ary SetAdd
Jump 113
DelVar $s81
DelVar hd
Push PC(54)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Return
DelVar result
```

Duration: 0.0013877999999999946

---
##  harmony_model_checker/modules/list.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Jump 365
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n3
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s6
LoadVar $s6
1-ary IsEmpty
JumpCond True 27
Cut($s6, x)
LoadVar $n3
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n3
Jump 15
DelVar $n3
DelVar $s6
DelVar s
StoreVar result
Return
Jump 365
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 365
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 365
Frame tail s
DelVar result
Push PC(2)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 365
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s63
LoadVar $s63
1-ary IsEmpty
JumpCond True 92
Cut($s63, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 81
DelVar $s63
Return
Jump 365
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s78
LoadVar $s78
1-ary IsEmpty
JumpCond True 109
Cut($s78, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 101
DelVar $s78
StoreVar result
Return
Jump 365
Frame list a
DelVar result
Push 0
StoreVar $n91
Push ()
LoadVar a
DelVar a
StoreVar $s94
LoadVar $s94
1-ary IsEmpty
JumpCond True 131
Cut($s94, v)
LoadVar $n91
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n91
Jump 121
DelVar $n91
DelVar $s94
StoreVar result
Return
Jump 365
Frame values d
DelVar result
Push 0
StoreVar $n109
Push ()
LoadVar d
1-ary keys
StoreVar $s112
LoadVar $s112
1-ary IsEmpty
JumpCond True 156
Cut($s112, k)
LoadVar $n109
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n109
Jump 144
DelVar $n109
DelVar $s112
DelVar d
StoreVar result
Return
Jump 365
Frame items d
DelVar result
Push 0
StoreVar $n130
Push ()
LoadVar d
1-ary keys
StoreVar $s133
LoadVar $s133
1-ary IsEmpty
JumpCond True 188
Cut($s133, k)
LoadVar $n130
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n130
Jump 170
DelVar $n130
DelVar $s133
DelVar d
StoreVar result
Return
Jump 365
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s161
LoadVar $s161
1-ary IsEmpty
JumpCond True 230
Cut($s161, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 203
DelVar $s161
DelVar d
DelVar index
Return
Jump 365
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 245
DelVar a
Push ()
StoreVar result
Jump 320
Push ()
Push 0
Push PC(46)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(55)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n210
Push ()
LoadVar rest
StoreVar $s213
DelVar v
LoadVar $s213
1-ary IsEmpty
JumpCond True 278
Cut($s213, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 263
LoadVar $n210
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n210
Jump 263
DelVar $n210
DelVar $s213
StoreVar lower
Push 0
StoreVar $n229
Push ()
LoadVar rest
DelVar rest
StoreVar $s232
DelVar v
LoadVar $s232
1-ary IsEmpty
JumpCond True 302
Cut($s232, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 287
LoadVar $n229
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n229
Jump 287
DelVar $n229
DelVar $s232
StoreVar higher
Push PC(235)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(235)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 365
Frame sorted d
DelVar result
Push PC(235)
Push PC(113)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 365
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n275
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s278
LoadVar $s278
1-ary IsEmpty
JumpCond True 359
Cut($s278, i)
LoadVar $n275
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n275
Jump 345
DelVar $n275
DelVar $s278
DelVar d
DelVar n
StoreVar result
Return
Return
DelVar result
```

Duration: 0.0013021000000000005

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Jump 365
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n3
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s6
LoadVar $s6
1-ary IsEmpty
JumpCond True 27
Cut($s6, x)
LoadVar $n3
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n3
Jump 15
DelVar $n3
DelVar $s6
DelVar s
StoreVar result
Return
Jump 365
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 365
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 365
Frame tail s
DelVar result
Push PC(2)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 365
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s63
LoadVar $s63
1-ary IsEmpty
JumpCond True 92
Cut($s63, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 81
DelVar $s63
Return
Jump 365
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s78
LoadVar $s78
1-ary IsEmpty
JumpCond True 109
Cut($s78, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 101
DelVar $s78
StoreVar result
Return
Jump 365
Frame list a
DelVar result
Push 0
StoreVar $n91
Push ()
LoadVar a
DelVar a
StoreVar $s94
LoadVar $s94
1-ary IsEmpty
JumpCond True 131
Cut($s94, v)
LoadVar $n91
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n91
Jump 121
DelVar $n91
DelVar $s94
StoreVar result
Return
Jump 365
Frame values d
DelVar result
Push 0
StoreVar $n109
Push ()
LoadVar d
1-ary keys
StoreVar $s112
LoadVar $s112
1-ary IsEmpty
JumpCond True 156
Cut($s112, k)
LoadVar $n109
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n109
Jump 144
DelVar $n109
DelVar $s112
DelVar d
StoreVar result
Return
Jump 365
Frame items d
DelVar result
Push 0
StoreVar $n130
Push ()
LoadVar d
1-ary keys
StoreVar $s133
LoadVar $s133
1-ary IsEmpty
JumpCond True 188
Cut($s133, k)
LoadVar $n130
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n130
Jump 170
DelVar $n130
DelVar $s133
DelVar d
StoreVar result
Return
Jump 365
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s161
LoadVar $s161
1-ary IsEmpty
JumpCond True 230
Cut($s161, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 203
DelVar $s161
DelVar d
DelVar index
Return
Jump 365
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 245
DelVar a
Push ()
StoreVar result
Jump 320
Push ()
Push 0
Push PC(46)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(55)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n210
Push ()
LoadVar rest
StoreVar $s213
DelVar v
LoadVar $s213
1-ary IsEmpty
JumpCond True 278
Cut($s213, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 263
LoadVar $n210
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n210
Jump 263
DelVar $n210
DelVar $s213
StoreVar lower
Push 0
StoreVar $n229
Push ()
LoadVar rest
DelVar rest
StoreVar $s232
DelVar v
LoadVar $s232
1-ary IsEmpty
JumpCond True 302
Cut($s232, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 287
LoadVar $n229
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n229
Jump 287
DelVar $n229
DelVar $s232
StoreVar higher
Push PC(235)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(235)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 365
Frame sorted d
DelVar result
Push PC(235)
Push PC(113)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 365
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n275
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s278
LoadVar $s278
1-ary IsEmpty
JumpCond True 359
Cut($s278, i)
LoadVar $n275
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n275
Jump 345
DelVar $n275
DelVar $s278
DelVar d
DelVar n
StoreVar result
Return
Return
DelVar result
```

Duration: 0.0014047000000000087

---
##  code/prog1.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push True
Store shared
Jump 17
Frame f ()
ReadonlyInc
AtomicInc(lazy)
Load shared
Assert
AtomicDec
ReadonlyDec
Return
Jump 17
Frame g ()
Push False
Store shared
Return
Push PC(4)
Push ()
Apply
Pop
Push PC(13)
Push ()
Apply
Pop
Return
DelVar result
```

Duration: 0.0013837000000000016

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push True
Store shared
Jump 17
Frame f ()
ReadonlyInc
AtomicInc(lazy)
Load shared
Assert
AtomicDec
ReadonlyDec
Return
Jump 17
Frame g ()
Push False
Store shared
Return
Push PC(4)
Push ()
Apply
Pop
Push PC(13)
Push ()
Apply
Pop
Return
DelVar result
```

Duration: 0.0012479999999999991

---
##  code/prog2.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push True
Store shared
Jump 17
Frame f ()
ReadonlyInc
AtomicInc(lazy)
Load shared
Assert
AtomicDec
ReadonlyDec
Return
Jump 17
Frame g ()
Push False
Store shared
Return
Push PC(4)
Push ()
Push ()
Spawn
Push PC(13)
Push ()
Push ()
Spawn
Return
DelVar result
```

Duration: 0.0013267

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push True
Store shared
Jump 17
Frame f ()
ReadonlyInc
AtomicInc(lazy)
Load shared
Assert
AtomicDec
ReadonlyDec
Return
Jump 17
Frame g ()
Push False
Store shared
Return
Push PC(4)
Push ()
Push ()
Spawn
Push PC(13)
Push ()
Push ()
Spawn
Return
DelVar result
```

Duration: 0.0012746999999999897

---
##  code/Up.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push 0
Store count
Push [False, False]
Store done
Jump 35
Frame incrementer self
Load count
Push 1
2-ary +
Store count
Push ?done
LoadVar self
Address
Push True
Store
Push ?done
Push 1
LoadVar self
2-ary -
Address
Load
JumpCond False 16
DelVar self
Jump 26
Jump 16
ReadonlyInc
AtomicInc(lazy)
Load count
Push 2
2-ary ==
Assert
AtomicDec
ReadonlyDec
Return
Push PC(6)
Push 0
Push ()
Spawn
Push PC(6)
Push 1
Push ()
Spawn
Return
DelVar result
```

Duration: 0.001776800000000009

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push 0
Store count
Push [False, False]
Store done
Jump 35
Frame incrementer self
Load count
Push 1
2-ary +
Store count
Push ?done
LoadVar self
Address
Push True
Store
Push ?done
Push 1
LoadVar self
2-ary -
Address
Load
JumpCond False 16
DelVar self
Jump 26
Jump 16
ReadonlyInc
AtomicInc(lazy)
Load count
Push 2
2-ary ==
Assert
AtomicDec
ReadonlyDec
Return
Push PC(6)
Push 0
Push ()
Spawn
Push PC(6)
Push 1
Push ()
Spawn
Return
DelVar result
```

Duration: 0.001584199999999994

---
##  code/UpEnter.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push 0
Store count
Push [False, False]
Dup
Store done
Store entered
Jump 58
Frame incrementer self
Push ?entered
LoadVar self
Address
Push True
Store
Push ?entered
Push 1
LoadVar self
2-ary -
Address
Load
JumpCond False 30
Push ?done
Push 1
LoadVar self
2-ary -
Address
Load
JumpCond False 21
Jump 30
Jump 21
Load count
Push 1
2-ary +
Store count
Push ?done
LoadVar self
Address
Push True
Store
Push ?done
Push 1
LoadVar self
2-ary -
Address
Load
JumpCond False 39
DelVar self
Jump 49
Jump 39
ReadonlyInc
AtomicInc(lazy)
Load count
Push 2
2-ary ==
Assert
AtomicDec
ReadonlyDec
Return
Push PC(8)
Push 0
Push ()
Spawn
Push PC(8)
Push 1
Push ()
Spawn
Return
DelVar result
```

Duration: 0.0016695000000000043

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push 0
Store count
Push [False, False]
Dup
Store done
Store entered
Jump 58
Frame incrementer self
Push ?entered
LoadVar self
Address
Push True
Store
Push ?entered
Push 1
LoadVar self
2-ary -
Address
Load
JumpCond False 30
Push ?done
Push 1
LoadVar self
2-ary -
Address
Load
JumpCond False 21
Jump 30
Jump 21
Load count
Push 1
2-ary +
Store count
Push ?done
LoadVar self
Address
Push True
Store
Push ?done
Push 1
LoadVar self
2-ary -
Address
Load
JumpCond False 39
DelVar self
Jump 49
Jump 39
ReadonlyInc
AtomicInc(lazy)
Load count
Push 2
2-ary ==
Assert
AtomicDec
ReadonlyDec
Return
Push PC(8)
Push 0
Push ()
Spawn
Push PC(8)
Push 1
Push ()
Spawn
Return
DelVar result
```

Duration: 0.0011947000000000069

---
##  code/csbarebones.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Jump 18
Frame thread ()
Push True
JumpCond False 17
AtomicInc(eager)
ReadonlyInc
AtomicInc(lazy)
Push PC(5)
1-ary countLabel
Push 1
2-ary ==
Assert
AtomicDec
ReadonlyDec
AtomicDec
Jump 3
Return
Push PC(2)
Push ()
Push ()
Spawn
Push PC(2)
Push ()
Push ()
Spawn
Return
DelVar result
```

Duration: 0.0019409000000000093

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Jump 18
Frame thread ()
Push True
JumpCond False 17
AtomicInc(eager)
ReadonlyInc
AtomicInc(lazy)
Push PC(5)
1-ary countLabel
Push 1
2-ary ==
Assert
AtomicDec
ReadonlyDec
AtomicDec
Jump 3
Return
Push PC(2)
Push ()
Push ()
Spawn
Push PC(2)
Push ()
Push ()
Spawn
Return
DelVar result
```

Duration: 0.002084600000000006

---
##  code/cs.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Jump 19
Frame thread ()
Push { False, True }
Choose
JumpCond False 18
AtomicInc(eager)
ReadonlyInc
AtomicInc(lazy)
Push PC(6)
1-ary countLabel
Push 1
2-ary ==
Assert
AtomicDec
ReadonlyDec
AtomicDec
Jump 3
Return
Push PC(2)
Push ()
Push ()
Spawn
Push PC(2)
Push ()
Push ()
Spawn
Return
DelVar result
```

Duration: 0.0014914000000000038

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Jump 19
Frame thread ()
Push { False, True }
Choose
JumpCond False 18
AtomicInc(eager)
ReadonlyInc
AtomicInc(lazy)
Push PC(6)
1-ary countLabel
Push 1
2-ary ==
Assert
AtomicDec
ReadonlyDec
AtomicDec
Jump 3
Return
Push PC(2)
Push ()
Push ()
Spawn
Push PC(2)
Push ()
Push ()
Spawn
Return
DelVar result
```

Duration: 0.0016453000000000023

---
##  code/naiveLock.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push False
Store lockTaken
Jump 31
Frame thread self
DelVar self
Push { False, True }
Choose
JumpCond False 30
Load lockTaken
1-ary not
JumpCond False 9
Jump 14
Jump 9
Push True
Store lockTaken
AtomicInc(eager)
ReadonlyInc
AtomicInc(lazy)
Push PC(16)
1-ary countLabel
Push 1
2-ary ==
Assert
AtomicDec
ReadonlyDec
AtomicDec
Push False
Store lockTaken
Jump 5
Return
Push PC(4)
Push 0
Push ()
Spawn
Push PC(4)
Push 1
Push ()
Spawn
Return
DelVar result
```

Duration: 0.001327700000000001

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push False
Store lockTaken
Jump 31
Frame thread self
DelVar self
Push { False, True }
Choose
JumpCond False 30
Load lockTaken
1-ary not
JumpCond False 9
Jump 14
Jump 9
Push True
Store lockTaken
AtomicInc(eager)
ReadonlyInc
AtomicInc(lazy)
Push PC(16)
1-ary countLabel
Push 1
2-ary ==
Assert
AtomicDec
ReadonlyDec
AtomicDec
Push False
Store lockTaken
Jump 5
Return
Push PC(4)
Push 0
Push ()
Spawn
Push PC(4)
Push 1
Push ()
Spawn
Return
DelVar result
```

Duration: 0.0013885000000000008

---
##  code/naiveFlags.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push [False, False]
Store flags
Jump 42
Frame thread self
Push { False, True }
Choose
JumpCond False 40
Push ?flags
LoadVar self
Address
Push True
Store
Push ?flags
Push 1
LoadVar self
2-ary -
Address
Load
1-ary not
JumpCond False 13
Jump 23
Jump 13
AtomicInc(eager)
ReadonlyInc
AtomicInc(lazy)
Push PC(23)
1-ary countLabel
Push 1
2-ary ==
Assert
AtomicDec
ReadonlyDec
AtomicDec
Push ?flags
LoadVar self
Address
Push False
Store
Jump 5
DelVar self
Return
Push PC(4)
Push 0
Push ()
Spawn
Push PC(4)
Push 1
Push ()
Spawn
Return
DelVar result
```

Duration: 0.0012014000000000052

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push [False, False]
Store flags
Jump 42
Frame thread self
Push { False, True }
Choose
JumpCond False 40
Push ?flags
LoadVar self
Address
Push True
Store
Push ?flags
Push 1
LoadVar self
2-ary -
Address
Load
1-ary not
JumpCond False 13
Jump 23
Jump 13
AtomicInc(eager)
ReadonlyInc
AtomicInc(lazy)
Push PC(23)
1-ary countLabel
Push 1
2-ary ==
Assert
AtomicDec
ReadonlyDec
AtomicDec
Push ?flags
LoadVar self
Address
Push False
Store
Jump 5
DelVar self
Return
Push PC(4)
Push 0
Push ()
Spawn
Push PC(4)
Push 1
Push ()
Spawn
Return
DelVar result
```

Duration: 0.0012587000000000015

---
##  code/naiveTurn.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push 0
Store turn
Jump 32
Frame thread self
Push { False, True }
Choose
JumpCond False 30
Push 1
LoadVar self
2-ary -
Store turn
Load turn
LoadVar self
2-ary ==
JumpCond False 12
Jump 18
Jump 12
AtomicInc(eager)
ReadonlyInc
AtomicInc(lazy)
Push PC(18)
1-ary countLabel
Push 1
2-ary ==
Assert
AtomicDec
ReadonlyDec
AtomicDec
Jump 5
DelVar self
Return
Push PC(4)
Push 0
Push ()
Spawn
Push PC(4)
Push 1
Push ()
Spawn
Return
DelVar result
```

Duration: 0.0015542999999999946

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push 0
Store turn
Jump 32
Frame thread self
Push { False, True }
Choose
JumpCond False 30
Push 1
LoadVar self
2-ary -
Store turn
Load turn
LoadVar self
2-ary ==
JumpCond False 12
Jump 18
Jump 12
AtomicInc(eager)
ReadonlyInc
AtomicInc(lazy)
Push PC(18)
1-ary countLabel
Push 1
2-ary ==
Assert
AtomicDec
ReadonlyDec
AtomicDec
Jump 5
DelVar self
Return
Push PC(4)
Push 0
Push ()
Spawn
Push PC(4)
Push 1
Push ()
Spawn
Return
DelVar result
```

Duration: 0.001425700000000002

---
##  code/Peterson.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ?flags
Sequential
Push ?turn
Sequential
Push [False, False]
Store flags
Push { 0, 1 }
Choose
Store turn
Jump 59
Frame thread self
Push { False, True }
Choose
JumpCond False 57
Push ?flags
LoadVar self
Address
Push True
Store
Push 1
LoadVar self
2-ary -
Store turn
Push ?flags
Push 1
LoadVar self
2-ary -
Address
Load
1-ary not
JumpCond True 36
Load turn
LoadVar self
2-ary ==
Jump 37
Push True
JumpCond False 24
Jump 40
Jump 24
AtomicInc(eager)
ReadonlyInc
AtomicInc(lazy)
Push PC(40)
1-ary countLabel
Push 1
2-ary ==
Assert
AtomicDec
ReadonlyDec
AtomicDec
Push ?flags
LoadVar self
Address
Push False
Store
Jump 12
DelVar self
Return
Push PC(11)
Push 0
Push ()
Spawn
Push PC(11)
Push 1
Push ()
Spawn
Return
DelVar result
```

Duration: 0.001406499999999991

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ?flags
Sequential
Push ?turn
Sequential
Push [False, False]
Store flags
Push { 0, 1 }
Choose
Store turn
Jump 59
Frame thread self
Push { False, True }
Choose
JumpCond False 57
Push ?flags
LoadVar self
Address
Push True
Store
Push 1
LoadVar self
2-ary -
Store turn
Push ?flags
Push 1
LoadVar self
2-ary -
Address
Load
1-ary not
JumpCond True 36
Load turn
LoadVar self
2-ary ==
Jump 37
Push True
JumpCond False 24
Jump 40
Jump 24
AtomicInc(eager)
ReadonlyInc
AtomicInc(lazy)
Push PC(40)
1-ary countLabel
Push 1
2-ary ==
Assert
AtomicDec
ReadonlyDec
AtomicDec
Push ?flags
LoadVar self
Address
Push False
Store
Jump 12
DelVar self
Return
Push PC(11)
Push 0
Push ()
Spawn
Push PC(11)
Push 1
Push ()
Spawn
Return
DelVar result
```

Duration: 0.0015985000000000027

---
##  code/PetersonInductive.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ?flags
Sequential
Push ?turn
Sequential
Push [False, False]
Store flags
Push { 0, 1 }
Choose
Store turn
Jump 75
Frame thread self
Push { False, True }
Choose
JumpCond False 73
Push ?flags
LoadVar self
Address
Push True
Store
AtomicInc(eager)
Push 1
LoadVar self
2-ary -
Store turn
AtomicDec
Push ?flags
Push 1
LoadVar self
2-ary -
Address
Load
1-ary not
JumpCond True 38
Load turn
LoadVar self
2-ary ==
Jump 39
Push True
JumpCond False 26
Jump 42
Jump 26
AtomicInc(eager)
ReadonlyInc
AtomicInc(lazy)
Push ?flags
Push 1
LoadVar self
2-ary -
Address
Load
1-ary not
JumpCond True 62
Load turn
LoadVar self
2-ary ==
JumpCond True 62
Push PC(20)
1-ary countLabel
Push 1
2-ary ==
Jump 63
Push True
Assert
AtomicDec
ReadonlyDec
AtomicDec
Push ?flags
LoadVar self
Address
Push False
Store
Jump 12
DelVar self
Return
Push PC(11)
Push 0
Push ()
Spawn
Push PC(11)
Push 1
Push ()
Spawn
Return
DelVar result
```

Duration: 0.001242000000000007

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ?flags
Sequential
Push ?turn
Sequential
Push [False, False]
Store flags
Push { 0, 1 }
Choose
Store turn
Jump 75
Frame thread self
Push { False, True }
Choose
JumpCond False 73
Push ?flags
LoadVar self
Address
Push True
Store
AtomicInc(eager)
Push 1
LoadVar self
2-ary -
Store turn
AtomicDec
Push ?flags
Push 1
LoadVar self
2-ary -
Address
Load
1-ary not
JumpCond True 38
Load turn
LoadVar self
2-ary ==
Jump 39
Push True
JumpCond False 26
Jump 42
Jump 26
AtomicInc(eager)
ReadonlyInc
AtomicInc(lazy)
Push ?flags
Push 1
LoadVar self
2-ary -
Address
Load
1-ary not
JumpCond True 62
Load turn
LoadVar self
2-ary ==
JumpCond True 62
Push PC(20)
1-ary countLabel
Push 1
2-ary ==
Jump 63
Push True
Assert
AtomicDec
ReadonlyDec
AtomicDec
Push ?flags
LoadVar self
Address
Push False
Store
Jump 12
DelVar self
Return
Push PC(11)
Push 0
Push ()
Spawn
Push PC(11)
Push 1
Push ()
Spawn
Return
DelVar result
```

Duration: 0.0014222999999999875

---
##  code/csonebit.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ?flags
Sequential
Push [False, False]
Store flags
Jump 52
Frame thread self
Push { False, True }
Choose
JumpCond False 50
Push ?flags
LoadVar self
Address
Push True
Store
Push ?flags
Push 1
LoadVar self
2-ary -
Address
Load
JumpCond False 33
Push ?flags
LoadVar self
Address
Push False
Store
Push ?flags
LoadVar self
Address
Push True
Store
Jump 15
AtomicInc(eager)
ReadonlyInc
AtomicInc(lazy)
Push PC(33)
1-ary countLabel
Push 1
2-ary ==
Assert
AtomicDec
ReadonlyDec
AtomicDec
Push ?flags
LoadVar self
Address
Push False
Store
Jump 7
DelVar self
Return
Push PC(6)
Push 0
Push ()
Spawn
Push PC(6)
Push 1
Push ()
Spawn
Return
DelVar result
```

Duration: 0.0016504000000000102

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ?flags
Sequential
Push [False, False]
Store flags
Jump 52
Frame thread self
Push { False, True }
Choose
JumpCond False 50
Push ?flags
LoadVar self
Address
Push True
Store
Push ?flags
Push 1
LoadVar self
2-ary -
Address
Load
JumpCond False 33
Push ?flags
LoadVar self
Address
Push False
Store
Push ?flags
LoadVar self
Address
Push True
Store
Jump 15
AtomicInc(eager)
ReadonlyInc
AtomicInc(lazy)
Push PC(33)
1-ary countLabel
Push 1
2-ary ==
Assert
AtomicDec
ReadonlyDec
AtomicDec
Push ?flags
LoadVar self
Address
Push False
Store
Jump 7
DelVar self
Return
Push PC(6)
Push 0
Push ()
Spawn
Push PC(6)
Push 1
Push ()
Spawn
Return
DelVar result
```

Duration: 0.0014022000000000062

---
##  code/PetersonMethod.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Jump 66
Frame P_enter (pm, pid)
LoadVar pm
Push "flags"
Address
LoadVar pid
Address
Push True
Store
LoadVar pm
Push "turn"
Address
Push 1
LoadVar pid
2-ary -
Store
LoadVar pm
Push "flags"
Address
Push 1
LoadVar pid
2-ary -
Address
Load
1-ary not
JumpCond True 34
LoadVar pm
Push "turn"
Address
Load
LoadVar pid
2-ary ==
Jump 35
Push True
JumpCond False 17
DelVar pid
DelVar pm
Jump 40
Jump 17
Return
Jump 66
Frame P_exit (pm, pid)
LoadVar pm
DelVar pm
Push "flags"
Address
LoadVar pid
DelVar pid
Address
Push False
Store
Return
Jump 66
Frame P_mutex ()
DelVar result
Push ()
Push "turn"
Push { 0, 1 }
Choose
3-ary DictAdd
Push "flags"
Push [False, False]
3-ary DictAdd
StoreVar result
Return
Push ?mutex
Sequential
Push PC(54)
Push ()
Apply
Store mutex
Jump 111
Frame thread self
Push { False, True }
Choose
JumpCond False 109
Push PC(2)
Push ()
Push 0
Push ?mutex
3-ary DictAdd
Push 1
LoadVar self
3-ary DictAdd
Apply
Pop
AtomicInc(eager)
ReadonlyInc
AtomicInc(lazy)
Push PC(87)
1-ary countLabel
Push 1
2-ary ==
Assert
AtomicDec
ReadonlyDec
AtomicDec
Push PC(42)
Push ()
Push 0
Push ?mutex
3-ary DictAdd
Push 1
LoadVar self
3-ary DictAdd
Apply
Pop
Jump 74
DelVar self
Return
Push PC(73)
Push 0
Push ()
Spawn
Push PC(73)
Push 1
Push ()
Spawn
Return
DelVar result
```

Duration: 0.0012659000000000004

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Jump 66
Frame P_enter (pm, pid)
LoadVar pm
Push "flags"
Address
LoadVar pid
Address
Push True
Store
LoadVar pm
Push "turn"
Address
Push 1
LoadVar pid
2-ary -
Store
LoadVar pm
Push "flags"
Address
Push 1
LoadVar pid
2-ary -
Address
Load
1-ary not
JumpCond True 34
LoadVar pm
Push "turn"
Address
Load
LoadVar pid
2-ary ==
Jump 35
Push True
JumpCond False 17
DelVar pid
DelVar pm
Jump 40
Jump 17
Return
Jump 66
Frame P_exit (pm, pid)
LoadVar pm
DelVar pm
Push "flags"
Address
LoadVar pid
DelVar pid
Address
Push False
Store
Return
Jump 66
Frame P_mutex ()
DelVar result
Push ()
Push "turn"
Push { 0, 1 }
Choose
3-ary DictAdd
Push "flags"
Push [False, False]
3-ary DictAdd
StoreVar result
Return
Push ?mutex
Sequential
Push PC(54)
Push ()
Apply
Store mutex
Jump 111
Frame thread self
Push { False, True }
Choose
JumpCond False 109
Push PC(2)
Push ()
Push 0
Push ?mutex
3-ary DictAdd
Push 1
LoadVar self
3-ary DictAdd
Apply
Pop
AtomicInc(eager)
ReadonlyInc
AtomicInc(lazy)
Push PC(87)
1-ary countLabel
Push 1
2-ary ==
Assert
AtomicDec
ReadonlyDec
AtomicDec
Push PC(42)
Push ()
Push 0
Push ?mutex
3-ary DictAdd
Push 1
LoadVar self
3-ary DictAdd
Apply
Pop
Jump 74
DelVar self
Return
Push PC(73)
Push 0
Push ()
Spawn
Push PC(73)
Push 1
Push ()
Spawn
Return
DelVar result
```

Duration: 0.0013058000000000097

---
##  code/clock.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Jump 132
Frame CLOCK n
DelVar result
Push ()
Push "entries"
Push [None]
LoadVar n
DelVar n
2-ary *
3-ary DictAdd
Push "recent"
Push {}
3-ary DictAdd
Push "hand"
Push 0
3-ary DictAdd
Push "misses"
Push 0
3-ary DictAdd
StoreVar result
Return
Jump 132
Frame ref (clock, x)
LoadVar x
LoadVar clock
Push "entries"
Address
Load
2-ary in
JumpCond True 115
LoadVar clock
Push "entries"
Address
LoadVar clock
Push "hand"
Address
Load
Address
Load
LoadVar clock
Push "recent"
Address
Load
2-ary in
JumpCond False 81
LoadVar clock
Push "recent"
Address
Dup
Load
Push {}
LoadVar clock
Push "entries"
Address
LoadVar clock
Push "hand"
Address
Load
Address
Load
2-ary SetAdd
2-ary -
Store
LoadVar clock
Push "hand"
Address
LoadVar clock
Push "hand"
Address
Load
Push 1
2-ary +
LoadVar clock
Push "entries"
Address
Load
1-ary len
2-ary %
Store
Jump 31
LoadVar clock
Push "entries"
Address
LoadVar clock
Push "hand"
Address
Load
Address
LoadVar x
Store
LoadVar clock
Push "hand"
Address
LoadVar clock
Push "hand"
Address
Load
Push 1
2-ary +
LoadVar clock
Push "entries"
Address
Load
1-ary len
2-ary %
Store
LoadVar clock
Push "misses"
Address
Dup
Load
Push 1
2-ary +
Store
Push False
JumpCond True 129
LoadVar clock
DelVar clock
Push "recent"
Address
Dup
Load
Push {}
LoadVar x
DelVar x
2-ary SetAdd
2-ary |
Store
DelVar clock
DelVar x
Return
Push ?clock3
Push ?clock4
Push ?refs
Push ()
Push 0
Push PC(2)
Push 3
Apply
3-ary DictAdd
Push 1
Push PC(2)
Push 4
Apply
3-ary DictAdd
Push 2
Push ()
3-ary DictAdd
Split 3
Move 4
Move 2
Store
Move 3
Move 2
Store
Store
Push {}
StoreVar last
Push { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100 }
StoreVar $s153
LoadVar $s153
1-ary IsEmpty
JumpCond True 227
Cut($s153, i)
LoadVar i
Push 5
2-ary <
JumpCond False 173
DelVar last
LoadVar i
DelVar i
Jump 179
DelVar i
Push { 1, 2, 3, 4, 5 }
LoadVar last
DelVar last
2-ary -
Choose
StoreVar x
Load refs
Push ()
Push 0
LoadVar x
3-ary DictAdd
2-ary +
Store refs
Push PC(23)
Push ()
Push 0
Push ?clock3
3-ary DictAdd
Push 1
LoadVar x
3-ary DictAdd
Apply
Pop
Push PC(23)
Push ()
Push 0
Push ?clock4
3-ary DictAdd
Push 1
LoadVar x
3-ary DictAdd
Apply
Pop
ReadonlyInc
AtomicInc(lazy)
Push ?clock4
Push "misses"
Address
Load
Push ?clock3
Push "misses"
Address
Load
2-ary <=
Assert
AtomicDec
ReadonlyDec
Push {}
LoadVar x
DelVar x
2-ary SetAdd
StoreVar last
Jump 161
DelVar $s153
DelVar last
Return
DelVar result
```

Duration: 0.0013592000000000048

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Jump 132
Frame CLOCK n
DelVar result
Push ()
Push "entries"
Push [None]
LoadVar n
DelVar n
2-ary *
3-ary DictAdd
Push "recent"
Push {}
3-ary DictAdd
Push "hand"
Push 0
3-ary DictAdd
Push "misses"
Push 0
3-ary DictAdd
StoreVar result
Return
Jump 132
Frame ref (clock, x)
LoadVar x
LoadVar clock
Push "entries"
Address
Load
2-ary in
JumpCond True 115
LoadVar clock
Push "entries"
Address
LoadVar clock
Push "hand"
Address
Load
Address
Load
LoadVar clock
Push "recent"
Address
Load
2-ary in
JumpCond False 81
LoadVar clock
Push "recent"
Address
Dup
Load
Push {}
LoadVar clock
Push "entries"
Address
LoadVar clock
Push "hand"
Address
Load
Address
Load
2-ary SetAdd
2-ary -
Store
LoadVar clock
Push "hand"
Address
LoadVar clock
Push "hand"
Address
Load
Push 1
2-ary +
LoadVar clock
Push "entries"
Address
Load
1-ary len
2-ary %
Store
Jump 31
LoadVar clock
Push "entries"
Address
LoadVar clock
Push "hand"
Address
Load
Address
LoadVar x
Store
LoadVar clock
Push "hand"
Address
LoadVar clock
Push "hand"
Address
Load
Push 1
2-ary +
LoadVar clock
Push "entries"
Address
Load
1-ary len
2-ary %
Store
LoadVar clock
Push "misses"
Address
Dup
Load
Push 1
2-ary +
Store
Push False
JumpCond True 129
LoadVar clock
DelVar clock
Push "recent"
Address
Dup
Load
Push {}
LoadVar x
DelVar x
2-ary SetAdd
2-ary |
Store
DelVar clock
DelVar x
Return
Push ?clock3
Push ?clock4
Push ?refs
Push ()
Push 0
Push PC(2)
Push 3
Apply
3-ary DictAdd
Push 1
Push PC(2)
Push 4
Apply
3-ary DictAdd
Push 2
Push ()
3-ary DictAdd
Split 3
Move 4
Move 2
Store
Move 3
Move 2
Store
Store
Push {}
StoreVar last
Push { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100 }
StoreVar $s153
LoadVar $s153
1-ary IsEmpty
JumpCond True 227
Cut($s153, i)
LoadVar i
Push 5
2-ary <
JumpCond False 173
DelVar last
LoadVar i
DelVar i
Jump 179
DelVar i
Push { 1, 2, 3, 4, 5 }
LoadVar last
DelVar last
2-ary -
Choose
StoreVar x
Load refs
Push ()
Push 0
LoadVar x
3-ary DictAdd
2-ary +
Store refs
Push PC(23)
Push ()
Push 0
Push ?clock3
3-ary DictAdd
Push 1
LoadVar x
3-ary DictAdd
Apply
Pop
Push PC(23)
Push ()
Push 0
Push ?clock4
3-ary DictAdd
Push 1
LoadVar x
3-ary DictAdd
Apply
Pop
ReadonlyInc
AtomicInc(lazy)
Push ?clock4
Push "misses"
Address
Load
Push ?clock3
Push "misses"
Address
Load
2-ary <=
Assert
AtomicDec
ReadonlyDec
Push {}
LoadVar x
DelVar x
2-ary SetAdd
StoreVar last
Jump 161
DelVar $s153
DelVar last
Return
DelVar result
```

Duration: 0.001617499999999994

---
##  code/spinlock.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push False
Store shared
Push [True, True, True]
Store private
Invariant 35
Push 0
StoreVar $n6
Push ()
Push ()
Push 0
Load shared
3-ary DictAdd
Load private
2-ary +
StoreVar $s9
DelVar x
LoadVar $s9
1-ary IsEmpty
JumpCond True 29
Cut($s9, x)
LoadVar x
JumpCond True 16
LoadVar $n6
LoadVar x
DelVar x
3-ary DictAdd
IncVar $n6
Jump 16
DelVar $n6
DelVar $s9
1-ary len
Push 1
2-ary <=
Continue
Return
Jump 120
Frame test_and_set (s, p)
AtomicInc(lazy)
LoadVar p
DelVar p
LoadVar s
Load
Store
LoadVar s
DelVar s
Push True
Store
AtomicDec
Return
Jump 120
Frame clear s
ReadonlyInc
AtomicInc(lazy)
LoadVar s
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar s
DelVar s
Push False
Store
AtomicDec
Return
Jump 120
Frame thread self
Push { False, True }
Choose
JumpCond False 118
Push ?private
LoadVar self
Address
Load
JumpCond False 89
Push PC(37)
Push ()
Push 0
Push ?shared
3-ary DictAdd
Push 1
Push ?private
LoadVar self
Address
3-ary DictAdd
Apply
Pop
Jump 71
AtomicInc(eager)
ReadonlyInc
AtomicInc(lazy)
Push ?private
LoadVar self
Address
Load
1-ary not
JumpCond False 103
Push PC(89)
1-ary countLabel
Push 1
2-ary ==
Jump 104
Push False
Assert
AtomicDec
ReadonlyDec
AtomicDec
Push ?private
LoadVar self
Address
Push True
Store
Push PC(51)
Push ?shared
Apply
Pop
Jump 68
DelVar self
Return
Push { 0, 1, 2 }
StoreVar $s112
LoadVar $s112
1-ary IsEmpty
JumpCond True 132
Cut($s112, i)
Push PC(67)
LoadVar i
DelVar i
Push ()
Spawn
Jump 122
DelVar $s112
Return
DelVar result
```

Duration: 0.0014233999999999913

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push False
Store shared
Push [True, True, True]
Store private
Invariant 35
Push 0
StoreVar $n6
Push ()
Push ()
Push 0
Load shared
3-ary DictAdd
Load private
2-ary +
StoreVar $s9
DelVar x
LoadVar $s9
1-ary IsEmpty
JumpCond True 29
Cut($s9, x)
LoadVar x
JumpCond True 16
LoadVar $n6
LoadVar x
DelVar x
3-ary DictAdd
IncVar $n6
Jump 16
DelVar $n6
DelVar $s9
1-ary len
Push 1
2-ary <=
Continue
Return
Jump 120
Frame test_and_set (s, p)
AtomicInc(lazy)
LoadVar p
DelVar p
LoadVar s
Load
Store
LoadVar s
DelVar s
Push True
Store
AtomicDec
Return
Jump 120
Frame clear s
ReadonlyInc
AtomicInc(lazy)
LoadVar s
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar s
DelVar s
Push False
Store
AtomicDec
Return
Jump 120
Frame thread self
Push { False, True }
Choose
JumpCond False 118
Push ?private
LoadVar self
Address
Load
JumpCond False 89
Push PC(37)
Push ()
Push 0
Push ?shared
3-ary DictAdd
Push 1
Push ?private
LoadVar self
Address
3-ary DictAdd
Apply
Pop
Jump 71
AtomicInc(eager)
ReadonlyInc
AtomicInc(lazy)
Push ?private
LoadVar self
Address
Load
1-ary not
JumpCond False 103
Push PC(89)
1-ary countLabel
Push 1
2-ary ==
Jump 104
Push False
Assert
AtomicDec
ReadonlyDec
AtomicDec
Push ?private
LoadVar self
Address
Push True
Store
Push PC(51)
Push ?shared
Apply
Pop
Jump 68
DelVar self
Return
Push { 0, 1, 2 }
StoreVar $s112
LoadVar $s112
1-ary IsEmpty
JumpCond True 132
Cut($s112, i)
Push PC(67)
LoadVar i
DelVar i
Push ()
Spawn
Jump 122
DelVar $s112
Return
DelVar result
```

Duration: 0.0012767999999999946

---
##  code/UpLock.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store synch
Push ()
Store list
Jump 369
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 369
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 369
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 369
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 369
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 369
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 369
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 369
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 369
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 369
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 369
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 369
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 369
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Push ()
Store bag
Jump 1039
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1039
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s311
LoadVar $s311
1-ary IsEmpty
JumpCond True 393
Cut($s311, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 384
DelVar $s311
StoreVar result
Return
Jump 1039
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s327
LoadVar $s327
1-ary IsEmpty
JumpCond True 430
Cut($s327, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 423
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 404
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 404
DelVar $s327
Return
Jump 1039
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 456
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 460
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1039
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s391
LoadVar $s391
1-ary IsEmpty
JumpCond True 489
Cut($s391, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 478
DelVar $s391
Return
Jump 1039
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1039
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1039
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1039
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 566
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 572
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1039
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 599
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 600
Push False
JumpCond False 609
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 620
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1039
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 638
DelVar bg
DelVar k
Push {}
Push PC(372)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 723
Push PC(462)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 652
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 723
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 664
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 723
Push PC(492)
LoadVar bg
Apply
StoreVar hd
Push PC(574)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(623)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s568
LoadVar $s568
1-ary IsEmpty
JumpCond True 708
Cut($s568, x)
Push PC(537)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 692
DelVar $s568
DelVar hd
Push PC(623)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1039
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1039
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 754
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1039
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1039
Frame Lock ()
DelVar result
Push PC(759)
Push False
Apply
StoreVar result
Return
Jump 1039
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1039
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 790
Jump 793
ReadonlyDec
AtomicDec
Jump 783
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1039
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1039
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1039
Frame Condition ()
DelVar result
Push PC(372)
Push ()
Apply
StoreVar result
Return
Jump 1039
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(537)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 887
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 888
Push False
JumpCond False 893
DelVar c
DelVar cnt
DelVar ctx
Jump 896
ReadonlyDec
AtomicDec
Jump 868
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1039
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(372)
Push ()
Apply
2-ary !=
JumpCond False 929
LoadVar c
Push PC(574)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(519)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1039
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(372)
Push ()
Apply
Store
AtomicDec
Return
Jump 1039
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1039
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 960
Jump 963
ReadonlyDec
AtomicDec
Jump 952
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1039
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1039
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1039
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1002
Jump 1005
ReadonlyDec
AtomicDec
Jump 993
ReadonlyDec
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1039
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Push ?done
Sequential
Push 0
Store count
Push PC(766)
Push ()
Apply
Store countlock
Push [False, False]
Store done
Jump 1087
Frame thread self
Push PC(782)
Push ?countlock
Apply
Pop
Load count
Push 1
2-ary +
Store count
Push PC(801)
Push ?countlock
Apply
Pop
Push ?done
LoadVar self
Address
Push True
Store
Push ?done
Push 1
LoadVar self
2-ary -
Address
Load
JumpCond False 1068
DelVar self
Jump 1078
Jump 1068
ReadonlyInc
AtomicInc(lazy)
Load count
Push 2
2-ary ==
Assert
AtomicDec
ReadonlyDec
Return
Push PC(1050)
Push 0
Push ()
Spawn
Push PC(1050)
Push 1
Push ()
Spawn
Return
DelVar result
```

Duration: 0.0015647999999999912

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store synch
Push ()
Store list
Jump 369
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 369
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 369
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 369
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 369
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 369
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 369
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 369
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 369
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 369
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 369
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 369
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 369
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Push ()
Store bag
Jump 1039
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1039
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s311
LoadVar $s311
1-ary IsEmpty
JumpCond True 393
Cut($s311, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 384
DelVar $s311
StoreVar result
Return
Jump 1039
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s327
LoadVar $s327
1-ary IsEmpty
JumpCond True 430
Cut($s327, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 423
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 404
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 404
DelVar $s327
Return
Jump 1039
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 456
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 460
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1039
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s391
LoadVar $s391
1-ary IsEmpty
JumpCond True 489
Cut($s391, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 478
DelVar $s391
Return
Jump 1039
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1039
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1039
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1039
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 566
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 572
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1039
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 599
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 600
Push False
JumpCond False 609
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 620
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1039
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 638
DelVar bg
DelVar k
Push {}
Push PC(372)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 723
Push PC(462)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 652
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 723
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 664
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 723
Push PC(492)
LoadVar bg
Apply
StoreVar hd
Push PC(574)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(623)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s568
LoadVar $s568
1-ary IsEmpty
JumpCond True 708
Cut($s568, x)
Push PC(537)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 692
DelVar $s568
DelVar hd
Push PC(623)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1039
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1039
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 754
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1039
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1039
Frame Lock ()
DelVar result
Push PC(759)
Push False
Apply
StoreVar result
Return
Jump 1039
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1039
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 790
Jump 793
ReadonlyDec
AtomicDec
Jump 783
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1039
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1039
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1039
Frame Condition ()
DelVar result
Push PC(372)
Push ()
Apply
StoreVar result
Return
Jump 1039
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(537)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 887
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 888
Push False
JumpCond False 893
DelVar c
DelVar cnt
DelVar ctx
Jump 896
ReadonlyDec
AtomicDec
Jump 868
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1039
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(372)
Push ()
Apply
2-ary !=
JumpCond False 929
LoadVar c
Push PC(574)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(519)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1039
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(372)
Push ()
Apply
Store
AtomicDec
Return
Jump 1039
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1039
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 960
Jump 963
ReadonlyDec
AtomicDec
Jump 952
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1039
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1039
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1039
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1002
Jump 1005
ReadonlyDec
AtomicDec
Jump 993
ReadonlyDec
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1039
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Push ?done
Sequential
Push 0
Store count
Push PC(766)
Push ()
Apply
Store countlock
Push [False, False]
Store done
Jump 1087
Frame thread self
Push PC(782)
Push ?countlock
Apply
Pop
Load count
Push 1
2-ary +
Store count
Push PC(801)
Push ?countlock
Apply
Pop
Push ?done
LoadVar self
Address
Push True
Store
Push ?done
Push 1
LoadVar self
2-ary -
Address
Load
JumpCond False 1068
DelVar self
Jump 1078
Jump 1068
ReadonlyInc
AtomicInc(lazy)
Load count
Push 2
2-ary ==
Assert
AtomicDec
ReadonlyDec
Return
Push PC(1050)
Push 0
Push ()
Spawn
Push PC(1050)
Push 1
Push ()
Spawn
Return
DelVar result
```

Duration: 0.0015138000000000096

---
## -msynch=synchS code/UpLock.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store synch
Push ()
Store list
Jump 799
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 799
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 799
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 799
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 799
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 799
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 799
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 799
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 799
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 799
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 799
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 799
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 799
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Jump 799
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 799
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 399
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 799
Frame BinSema acquired
DelVar result
Push ()
Push "acquired"
LoadVar acquired
DelVar acquired
3-ary DictAdd
Push "suspended"
Push ()
3-ary DictAdd
StoreVar result
Return
Jump 799
Frame Lock ()
DelVar result
Push PC(404)
Push False
Apply
StoreVar result
Return
Jump 799
Frame acquire binsema
AtomicInc(lazy)
LoadVar binsema
Push "acquired"
Address
Load
JumpCond False 455
LoadVar binsema
Push "suspended"
Address
LoadVar binsema
Push "suspended"
Address
Load
1-ary len
Address
Stop
Continue
Pop
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Load
Assert
AtomicDec
ReadonlyDec
Jump 461
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Push True
Store
AtomicDec
Return
Jump 799
Frame release binsema
AtomicInc(lazy)
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Push "acquired"
Address
Load
Assert
AtomicDec
ReadonlyDec
LoadVar binsema
Push "suspended"
Address
Load
Push ()
2-ary ==
JumpCond False 489
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Push False
Store
Jump 508
Push ()
Push PC(50)
LoadVar binsema
Push "suspended"
Address
Load
Apply
Go
LoadVar binsema
Push "suspended"
Address
Push PC(59)
LoadVar binsema
DelVar binsema
Push "suspended"
Address
Load
Apply
Store
AtomicDec
Return
Jump 799
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Load
StoreVar result
Return
Jump 799
Frame Condition ()
DelVar result
Push ()
StoreVar result
Return
Jump 799
Frame wait (c, lk)
AtomicInc(lazy)
Push PC(464)
LoadVar lk
Apply
Pop
LoadVar c
LoadVar c
DelVar c
Load
1-ary len
Address
Stop
Continue
Pop
AtomicDec
Push PC(425)
LoadVar lk
DelVar lk
Apply
Pop
Return
Jump 799
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push ()
2-ary !=
JumpCond False 570
Push ()
Push PC(50)
LoadVar c
Load
Apply
Go
LoadVar c
Push PC(59)
LoadVar c
DelVar c
Load
Apply
Store
DelVar c
AtomicDec
Return
Jump 799
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
Load
Push ()
2-ary !=
JumpCond False 594
Push ()
Push PC(50)
LoadVar c
Load
Apply
Go
LoadVar c
Push PC(59)
LoadVar c
Load
Apply
Store
Jump 576
DelVar c
AtomicDec
Return
Jump 799
Frame Semaphore cnt
DelVar result
Push ()
Push "count"
LoadVar cnt
DelVar cnt
3-ary DictAdd
Push "waiters"
Push ()
3-ary DictAdd
StoreVar result
Return
Jump 799
Frame P sema
AtomicInc(lazy)
LoadVar sema
Push "count"
Address
Load
Push 0
2-ary >
JumpCond False 630
LoadVar sema
DelVar sema
Push "count"
Address
Dup
Load
Push 1
2-ary -
Store
Jump 643
LoadVar sema
Push "waiters"
Address
LoadVar sema
DelVar sema
Push "waiters"
Address
Load
1-ary len
Address
Stop
Continue
Pop
AtomicDec
Return
Jump 799
Frame V sema
AtomicInc(lazy)
Push ()
Push 0
LoadVar sema
Push "count"
Address
Load
3-ary DictAdd
Push 1
LoadVar sema
Push "waiters"
Address
Load
3-ary DictAdd
StoreVar (cnt, waiters)
LoadVar waiters
Push ()
2-ary !=
JumpCond False 690
ReadonlyInc
AtomicInc(lazy)
LoadVar cnt
DelVar cnt
Push 0
2-ary ==
Assert
AtomicDec
ReadonlyDec
Push ()
LoadVar waiters
Push 0
Apply
Go
LoadVar sema
DelVar sema
Push "waiters"
Address
Push PC(59)
LoadVar waiters
DelVar waiters
Apply
Store
Jump 700
DelVar waiters
LoadVar sema
DelVar sema
Push "count"
Address
LoadVar cnt
DelVar cnt
Push 1
2-ary +
Store
AtomicDec
Return
Jump 799
Frame Queue ()
DelVar result
Push { "list":(), "waiters":() }
StoreVar result
Return
Jump 799
Frame get q
DelVar result
AtomicInc(lazy)
LoadVar q
Push "list"
Address
Load
Push ()
2-ary ==
JumpCond False 731
LoadVar q
Push "waiters"
Address
LoadVar q
Push "waiters"
Address
Load
1-ary len
Address
Stop
Continue
Pop
Push PC(50)
LoadVar q
Push "list"
Address
Load
Apply
StoreVar result
LoadVar q
Push "list"
Address
Push PC(59)
LoadVar q
DelVar q
Push "list"
Address
Load
Apply
Store
AtomicDec
Return
Jump 799
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push "list"
Address
Push PC(37)
Push ()
Push 0
LoadVar q
Push "list"
Address
Load
3-ary DictAdd
Push 1
LoadVar item
3-ary DictAdd
Apply
Store
LoadVar q
Push "waiters"
Address
Load
StoreVar waiters
LoadVar waiters
Push ()
2-ary !=
JumpCond False 794
LoadVar item
DelVar item
LoadVar waiters
Push 0
Apply
Go
LoadVar q
DelVar q
Push "waiters"
Address
Push PC(59)
LoadVar waiters
DelVar waiters
Apply
Store
DelVar item
DelVar q
DelVar waiters
AtomicDec
Return
Push ?done
Sequential
Push 0
Store count
Push PC(417)
Push ()
Apply
Store countlock
Push [False, False]
Store done
Jump 847
Frame thread self
Push PC(425)
Push ?countlock
Apply
Pop
Load count
Push 1
2-ary +
Store count
Push PC(464)
Push ?countlock
Apply
Pop
Push ?done
LoadVar self
Address
Push True
Store
Push ?done
Push 1
LoadVar self
2-ary -
Address
Load
JumpCond False 828
DelVar self
Jump 838
Jump 828
ReadonlyInc
AtomicInc(lazy)
Load count
Push 2
2-ary ==
Assert
AtomicDec
ReadonlyDec
Return
Push PC(810)
Push 0
Push ()
Spawn
Push PC(810)
Push 1
Push ()
Spawn
Return
DelVar result
```

Duration: 0.0016922000000000048

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store synch
Push ()
Store list
Jump 799
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 799
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 799
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 799
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 799
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 799
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 799
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 799
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 799
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 799
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 799
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 799
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 799
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Jump 799
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 799
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 399
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 799
Frame BinSema acquired
DelVar result
Push ()
Push "acquired"
LoadVar acquired
DelVar acquired
3-ary DictAdd
Push "suspended"
Push ()
3-ary DictAdd
StoreVar result
Return
Jump 799
Frame Lock ()
DelVar result
Push PC(404)
Push False
Apply
StoreVar result
Return
Jump 799
Frame acquire binsema
AtomicInc(lazy)
LoadVar binsema
Push "acquired"
Address
Load
JumpCond False 455
LoadVar binsema
Push "suspended"
Address
LoadVar binsema
Push "suspended"
Address
Load
1-ary len
Address
Stop
Continue
Pop
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Load
Assert
AtomicDec
ReadonlyDec
Jump 461
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Push True
Store
AtomicDec
Return
Jump 799
Frame release binsema
AtomicInc(lazy)
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Push "acquired"
Address
Load
Assert
AtomicDec
ReadonlyDec
LoadVar binsema
Push "suspended"
Address
Load
Push ()
2-ary ==
JumpCond False 489
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Push False
Store
Jump 508
Push ()
Push PC(50)
LoadVar binsema
Push "suspended"
Address
Load
Apply
Go
LoadVar binsema
Push "suspended"
Address
Push PC(59)
LoadVar binsema
DelVar binsema
Push "suspended"
Address
Load
Apply
Store
AtomicDec
Return
Jump 799
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Load
StoreVar result
Return
Jump 799
Frame Condition ()
DelVar result
Push ()
StoreVar result
Return
Jump 799
Frame wait (c, lk)
AtomicInc(lazy)
Push PC(464)
LoadVar lk
Apply
Pop
LoadVar c
LoadVar c
DelVar c
Load
1-ary len
Address
Stop
Continue
Pop
AtomicDec
Push PC(425)
LoadVar lk
DelVar lk
Apply
Pop
Return
Jump 799
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push ()
2-ary !=
JumpCond False 570
Push ()
Push PC(50)
LoadVar c
Load
Apply
Go
LoadVar c
Push PC(59)
LoadVar c
DelVar c
Load
Apply
Store
DelVar c
AtomicDec
Return
Jump 799
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
Load
Push ()
2-ary !=
JumpCond False 594
Push ()
Push PC(50)
LoadVar c
Load
Apply
Go
LoadVar c
Push PC(59)
LoadVar c
Load
Apply
Store
Jump 576
DelVar c
AtomicDec
Return
Jump 799
Frame Semaphore cnt
DelVar result
Push ()
Push "count"
LoadVar cnt
DelVar cnt
3-ary DictAdd
Push "waiters"
Push ()
3-ary DictAdd
StoreVar result
Return
Jump 799
Frame P sema
AtomicInc(lazy)
LoadVar sema
Push "count"
Address
Load
Push 0
2-ary >
JumpCond False 630
LoadVar sema
DelVar sema
Push "count"
Address
Dup
Load
Push 1
2-ary -
Store
Jump 643
LoadVar sema
Push "waiters"
Address
LoadVar sema
DelVar sema
Push "waiters"
Address
Load
1-ary len
Address
Stop
Continue
Pop
AtomicDec
Return
Jump 799
Frame V sema
AtomicInc(lazy)
Push ()
Push 0
LoadVar sema
Push "count"
Address
Load
3-ary DictAdd
Push 1
LoadVar sema
Push "waiters"
Address
Load
3-ary DictAdd
StoreVar (cnt, waiters)
LoadVar waiters
Push ()
2-ary !=
JumpCond False 690
ReadonlyInc
AtomicInc(lazy)
LoadVar cnt
DelVar cnt
Push 0
2-ary ==
Assert
AtomicDec
ReadonlyDec
Push ()
LoadVar waiters
Push 0
Apply
Go
LoadVar sema
DelVar sema
Push "waiters"
Address
Push PC(59)
LoadVar waiters
DelVar waiters
Apply
Store
Jump 700
DelVar waiters
LoadVar sema
DelVar sema
Push "count"
Address
LoadVar cnt
DelVar cnt
Push 1
2-ary +
Store
AtomicDec
Return
Jump 799
Frame Queue ()
DelVar result
Push { "list":(), "waiters":() }
StoreVar result
Return
Jump 799
Frame get q
DelVar result
AtomicInc(lazy)
LoadVar q
Push "list"
Address
Load
Push ()
2-ary ==
JumpCond False 731
LoadVar q
Push "waiters"
Address
LoadVar q
Push "waiters"
Address
Load
1-ary len
Address
Stop
Continue
Pop
Push PC(50)
LoadVar q
Push "list"
Address
Load
Apply
StoreVar result
LoadVar q
Push "list"
Address
Push PC(59)
LoadVar q
DelVar q
Push "list"
Address
Load
Apply
Store
AtomicDec
Return
Jump 799
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push "list"
Address
Push PC(37)
Push ()
Push 0
LoadVar q
Push "list"
Address
Load
3-ary DictAdd
Push 1
LoadVar item
3-ary DictAdd
Apply
Store
LoadVar q
Push "waiters"
Address
Load
StoreVar waiters
LoadVar waiters
Push ()
2-ary !=
JumpCond False 794
LoadVar item
DelVar item
LoadVar waiters
Push 0
Apply
Go
LoadVar q
DelVar q
Push "waiters"
Address
Push PC(59)
LoadVar waiters
DelVar waiters
Apply
Store
DelVar item
DelVar q
DelVar waiters
AtomicDec
Return
Push ?done
Sequential
Push 0
Store count
Push PC(417)
Push ()
Apply
Store countlock
Push [False, False]
Store done
Jump 847
Frame thread self
Push PC(425)
Push ?countlock
Apply
Pop
Load count
Push 1
2-ary +
Store count
Push PC(464)
Push ?countlock
Apply
Pop
Push ?done
LoadVar self
Address
Push True
Store
Push ?done
Push 1
LoadVar self
2-ary -
Address
Load
JumpCond False 828
DelVar self
Jump 838
Jump 828
ReadonlyInc
AtomicInc(lazy)
Load count
Push 2
2-ary ==
Assert
AtomicDec
ReadonlyDec
Return
Push PC(810)
Push 0
Push ()
Spawn
Push PC(810)
Push 1
Push ()
Spawn
Return
DelVar result
```

Duration: 0.0015196000000000098

---
##  code/xy.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ?x
Push ?y
Push [0, 100]
Split 2
Move 3
Move 2
Store
Store
Jump 54
Frame setX a
LoadVar a
Store x
Push 100
LoadVar a
DelVar a
2-ary -
Store y
Return
Jump 54
Frame getXY ()
DelVar result
Push ()
Push 0
Load x
3-ary DictAdd
Push 1
Load y
3-ary DictAdd
StoreVar result
Return
Jump 54
Frame checker ()
Push PC(20)
Push ()
Apply
StoreVar xy
ReadonlyInc
AtomicInc(lazy)
LoadVar xy
Push 0
Apply
LoadVar xy
Push 1
Apply
2-ary +
Push 100
2-ary ==
LoadVar xy
DelVar xy
Assert2
AtomicDec
ReadonlyDec
Return
Push PC(32)
Push ()
Push ()
Spawn
Push PC(10)
Push 50
Push ()
Spawn
Return
DelVar result
```

Duration: 0.0012565999999999966

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ?x
Push ?y
Push [0, 100]
Split 2
Move 3
Move 2
Store
Store
Jump 54
Frame setX a
LoadVar a
Store x
Push 100
LoadVar a
DelVar a
2-ary -
Store y
Return
Jump 54
Frame getXY ()
DelVar result
Push ()
Push 0
Load x
3-ary DictAdd
Push 1
Load y
3-ary DictAdd
StoreVar result
Return
Jump 54
Frame checker ()
Push PC(20)
Push ()
Apply
StoreVar xy
ReadonlyInc
AtomicInc(lazy)
LoadVar xy
Push 0
Apply
LoadVar xy
Push 1
Apply
2-ary +
Push 100
2-ary ==
LoadVar xy
DelVar xy
Assert2
AtomicDec
ReadonlyDec
Return
Push PC(32)
Push ()
Push ()
Spawn
Push PC(10)
Push 50
Push ()
Spawn
Return
DelVar result
```

Duration: 0.00138930000000001

---
##  code/atm.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store synch
Push ()
Store list
Jump 369
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 369
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 369
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 369
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 369
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 369
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 369
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 369
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 369
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 369
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 369
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 369
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 369
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Push ()
Store bag
Jump 1039
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1039
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s311
LoadVar $s311
1-ary IsEmpty
JumpCond True 393
Cut($s311, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 384
DelVar $s311
StoreVar result
Return
Jump 1039
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s327
LoadVar $s327
1-ary IsEmpty
JumpCond True 430
Cut($s327, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 423
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 404
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 404
DelVar $s327
Return
Jump 1039
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 456
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 460
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1039
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s391
LoadVar $s391
1-ary IsEmpty
JumpCond True 489
Cut($s391, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 478
DelVar $s391
Return
Jump 1039
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1039
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1039
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1039
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 566
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 572
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1039
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 599
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 600
Push False
JumpCond False 609
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 620
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1039
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 638
DelVar bg
DelVar k
Push {}
Push PC(372)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 723
Push PC(462)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 652
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 723
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 664
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 723
Push PC(492)
LoadVar bg
Apply
StoreVar hd
Push PC(574)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(623)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s568
LoadVar $s568
1-ary IsEmpty
JumpCond True 708
Cut($s568, x)
Push PC(537)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 692
DelVar $s568
DelVar hd
Push PC(623)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1039
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1039
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 754
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1039
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1039
Frame Lock ()
DelVar result
Push PC(759)
Push False
Apply
StoreVar result
Return
Jump 1039
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1039
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 790
Jump 793
ReadonlyDec
AtomicDec
Jump 783
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1039
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1039
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1039
Frame Condition ()
DelVar result
Push PC(372)
Push ()
Apply
StoreVar result
Return
Jump 1039
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(537)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 887
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 888
Push False
JumpCond False 893
DelVar c
DelVar cnt
DelVar ctx
Jump 896
ReadonlyDec
AtomicDec
Jump 868
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1039
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(372)
Push ()
Apply
2-ary !=
JumpCond False 929
LoadVar c
Push PC(574)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(519)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1039
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(372)
Push ()
Apply
Store
AtomicDec
Return
Jump 1039
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1039
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 960
Jump 963
ReadonlyDec
AtomicDec
Jump 952
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1039
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1039
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1039
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1002
Jump 1005
ReadonlyDec
AtomicDec
Jump 993
ReadonlyDec
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1039
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Push 0
StoreVar $n887
Push ()
Push { 1, 2 }
StoreVar $s890
LoadVar $s890
1-ary IsEmpty
JumpCond True 1063
Cut($s890, i)
DelVar i
LoadVar $n887
Push ()
Push "lock"
Push PC(766)
Push ()
Apply
3-ary DictAdd
Push "balance"
Push { 0, 1 }
Choose
3-ary DictAdd
3-ary DictAdd
IncVar $n887
Jump 1044
DelVar $n887
DelVar $s890
Store accounts
Invariant 1093
Push 0
StoreVar $n912
Push ()
Push { 0, 1 }
StoreVar $s915
LoadVar $s915
1-ary IsEmpty
JumpCond True 1087
Cut($s915, acct)
LoadVar $n912
Push ?accounts
LoadVar acct
DelVar acct
Address
Push "balance"
Address
Load
3-ary DictAdd
IncVar $n912
Jump 1072
DelVar $n912
DelVar $s915
1-ary min
Push 0
2-ary >=
Continue
Return
Jump 1183
Frame atm_check_balance acct
DelVar result
Push PC(782)
Push ?accounts
LoadVar acct
Address
Push "lock"
Address
Apply
Pop
Push ?accounts
LoadVar acct
Address
Push "balance"
Address
Load
StoreVar result
Push PC(801)
Push ?accounts
LoadVar acct
DelVar acct
Address
Push "lock"
Address
Apply
Pop
Return
Jump 1183
Frame atm_withdraw (acct, amount)
DelVar result
Push PC(782)
Push ?accounts
LoadVar acct
Address
Push "lock"
Address
Apply
Pop
Push ?accounts
LoadVar acct
Address
Push "balance"
Address
Dup
Load
LoadVar amount
DelVar amount
2-ary -
Store
Push True
StoreVar result
Push PC(801)
Push ?accounts
LoadVar acct
DelVar acct
Address
Push "lock"
Address
Apply
Pop
Return
Jump 1183
Frame customer (atm, acct, amount)
DelVar atm
Push PC(1095)
LoadVar acct
Apply
StoreVar bal
LoadVar amount
LoadVar bal
DelVar bal
2-ary <=
JumpCond False 1180
Push PC(1123)
Push ()
Push 0
LoadVar acct
DelVar acct
3-ary DictAdd
Push 1
LoadVar amount
DelVar amount
3-ary DictAdd
Apply
Pop
DelVar acct
DelVar amount
Return
Push { 1, 2 }
StoreVar $s1014
LoadVar $s1014
1-ary IsEmpty
JumpCond True 1206
Cut($s1014, i)
Push PC(1157)
Push ()
Push 0
LoadVar i
DelVar i
3-ary DictAdd
Push 1
Push { 0, 1 }
Choose
3-ary DictAdd
Push 2
Push { 0, 1 }
Choose
3-ary DictAdd
Push ()
Spawn
Jump 1185
DelVar $s1014
Return
DelVar result
```

Duration: 0.0022515999999999925

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store synch
Push ()
Store list
Jump 369
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 369
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 369
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 369
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 369
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 369
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 369
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 369
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 369
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 369
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 369
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 369
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 369
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Push ()
Store bag
Jump 1039
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1039
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s311
LoadVar $s311
1-ary IsEmpty
JumpCond True 393
Cut($s311, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 384
DelVar $s311
StoreVar result
Return
Jump 1039
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s327
LoadVar $s327
1-ary IsEmpty
JumpCond True 430
Cut($s327, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 423
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 404
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 404
DelVar $s327
Return
Jump 1039
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 456
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 460
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1039
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s391
LoadVar $s391
1-ary IsEmpty
JumpCond True 489
Cut($s391, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 478
DelVar $s391
Return
Jump 1039
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1039
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1039
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1039
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 566
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 572
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1039
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 599
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 600
Push False
JumpCond False 609
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 620
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1039
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 638
DelVar bg
DelVar k
Push {}
Push PC(372)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 723
Push PC(462)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 652
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 723
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 664
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 723
Push PC(492)
LoadVar bg
Apply
StoreVar hd
Push PC(574)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(623)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s568
LoadVar $s568
1-ary IsEmpty
JumpCond True 708
Cut($s568, x)
Push PC(537)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 692
DelVar $s568
DelVar hd
Push PC(623)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1039
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1039
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 754
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1039
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1039
Frame Lock ()
DelVar result
Push PC(759)
Push False
Apply
StoreVar result
Return
Jump 1039
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1039
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 790
Jump 793
ReadonlyDec
AtomicDec
Jump 783
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1039
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1039
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1039
Frame Condition ()
DelVar result
Push PC(372)
Push ()
Apply
StoreVar result
Return
Jump 1039
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(537)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 887
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 888
Push False
JumpCond False 893
DelVar c
DelVar cnt
DelVar ctx
Jump 896
ReadonlyDec
AtomicDec
Jump 868
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1039
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(372)
Push ()
Apply
2-ary !=
JumpCond False 929
LoadVar c
Push PC(574)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(519)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1039
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(372)
Push ()
Apply
Store
AtomicDec
Return
Jump 1039
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1039
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 960
Jump 963
ReadonlyDec
AtomicDec
Jump 952
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1039
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1039
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1039
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1002
Jump 1005
ReadonlyDec
AtomicDec
Jump 993
ReadonlyDec
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1039
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Push 0
StoreVar $n887
Push ()
Push { 1, 2 }
StoreVar $s890
LoadVar $s890
1-ary IsEmpty
JumpCond True 1063
Cut($s890, i)
DelVar i
LoadVar $n887
Push ()
Push "lock"
Push PC(766)
Push ()
Apply
3-ary DictAdd
Push "balance"
Push { 0, 1 }
Choose
3-ary DictAdd
3-ary DictAdd
IncVar $n887
Jump 1044
DelVar $n887
DelVar $s890
Store accounts
Invariant 1093
Push 0
StoreVar $n912
Push ()
Push { 0, 1 }
StoreVar $s915
LoadVar $s915
1-ary IsEmpty
JumpCond True 1087
Cut($s915, acct)
LoadVar $n912
Push ?accounts
LoadVar acct
DelVar acct
Address
Push "balance"
Address
Load
3-ary DictAdd
IncVar $n912
Jump 1072
DelVar $n912
DelVar $s915
1-ary min
Push 0
2-ary >=
Continue
Return
Jump 1183
Frame atm_check_balance acct
DelVar result
Push PC(782)
Push ?accounts
LoadVar acct
Address
Push "lock"
Address
Apply
Pop
Push ?accounts
LoadVar acct
Address
Push "balance"
Address
Load
StoreVar result
Push PC(801)
Push ?accounts
LoadVar acct
DelVar acct
Address
Push "lock"
Address
Apply
Pop
Return
Jump 1183
Frame atm_withdraw (acct, amount)
DelVar result
Push PC(782)
Push ?accounts
LoadVar acct
Address
Push "lock"
Address
Apply
Pop
Push ?accounts
LoadVar acct
Address
Push "balance"
Address
Dup
Load
LoadVar amount
DelVar amount
2-ary -
Store
Push True
StoreVar result
Push PC(801)
Push ?accounts
LoadVar acct
DelVar acct
Address
Push "lock"
Address
Apply
Pop
Return
Jump 1183
Frame customer (atm, acct, amount)
DelVar atm
Push PC(1095)
LoadVar acct
Apply
StoreVar bal
LoadVar amount
LoadVar bal
DelVar bal
2-ary <=
JumpCond False 1180
Push PC(1123)
Push ()
Push 0
LoadVar acct
DelVar acct
3-ary DictAdd
Push 1
LoadVar amount
DelVar amount
3-ary DictAdd
Apply
Pop
DelVar acct
DelVar amount
Return
Push { 1, 2 }
StoreVar $s1014
LoadVar $s1014
1-ary IsEmpty
JumpCond True 1206
Cut($s1014, i)
Push PC(1157)
Push ()
Push 0
LoadVar i
DelVar i
3-ary DictAdd
Push 1
Push { 0, 1 }
Choose
3-ary DictAdd
Push 2
Push { 0, 1 }
Choose
3-ary DictAdd
Push ()
Spawn
Jump 1185
DelVar $s1014
Return
DelVar result
```

Duration: 0.0014302000000000203

---
##  code/queuedemo.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store queue
Push ()
Store list
Jump 453
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 453
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 453
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 453
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 453
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 453
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 453
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 453
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 453
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 453
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 453
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 453
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 453
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Jump 453
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 453
Frame put (q, v)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar v
DelVar v
3-ary DictAdd
Apply
Store
AtomicDec
Return
Jump 453
Frame get q
DelVar result
AtomicInc(lazy)
LoadVar q
Load
Push ()
2-ary ==
JumpCond False 407
DelVar q
Push None
StoreVar result
Jump 419
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 453
Frame sender (q, v)
Push PC(376)
Push ()
Push 0
LoadVar q
DelVar q
3-ary DictAdd
Push 1
LoadVar v
DelVar v
3-ary DictAdd
Apply
Pop
Return
Jump 453
Frame receiver q
Push PC(395)
LoadVar q
DelVar q
Apply
StoreVar v
ReadonlyInc
AtomicInc(lazy)
LoadVar v
DelVar v
Push { 1, 2, None }
2-ary in
Assert
AtomicDec
ReadonlyDec
Return
Push PC(370)
Push ()
Apply
Store demoq
Push PC(422)
Push ()
Push 0
Push ?demoq
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push ()
Spawn
Push PC(422)
Push ()
Push 0
Push ?demoq
3-ary DictAdd
Push 1
Push 2
3-ary DictAdd
Push ()
Spawn
Push PC(437)
Push ?demoq
Push ()
Spawn
Push PC(437)
Push ?demoq
Push ()
Spawn
Return
DelVar result
```

Duration: 0.0016836000000000073

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store queue
Push ()
Store list
Jump 453
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 453
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 453
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 453
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 453
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 453
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 453
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 453
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 453
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 453
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 453
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 453
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 453
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Jump 453
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 453
Frame put (q, v)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar v
DelVar v
3-ary DictAdd
Apply
Store
AtomicDec
Return
Jump 453
Frame get q
DelVar result
AtomicInc(lazy)
LoadVar q
Load
Push ()
2-ary ==
JumpCond False 407
DelVar q
Push None
StoreVar result
Jump 419
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 453
Frame sender (q, v)
Push PC(376)
Push ()
Push 0
LoadVar q
DelVar q
3-ary DictAdd
Push 1
LoadVar v
DelVar v
3-ary DictAdd
Apply
Pop
Return
Jump 453
Frame receiver q
Push PC(395)
LoadVar q
DelVar q
Apply
StoreVar v
ReadonlyInc
AtomicInc(lazy)
LoadVar v
DelVar v
Push { 1, 2, None }
2-ary in
Assert
AtomicDec
ReadonlyDec
Return
Push PC(370)
Push ()
Apply
Store demoq
Push PC(422)
Push ()
Push 0
Push ?demoq
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push ()
Spawn
Push PC(422)
Push ()
Push 0
Push ?demoq
3-ary DictAdd
Push 1
Push 2
3-ary DictAdd
Push ()
Spawn
Push PC(437)
Push ?demoq
Push ()
Spawn
Push PC(437)
Push ?demoq
Push ()
Spawn
Return
DelVar result
```

Duration: 0.0020900000000000085

---
## -msynch=synchS code/queuedemo.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store queue
Push ()
Store list
Jump 453
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 453
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 453
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 453
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 453
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 453
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 453
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 453
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 453
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 453
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 453
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 453
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 453
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Jump 453
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 453
Frame put (q, v)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar v
DelVar v
3-ary DictAdd
Apply
Store
AtomicDec
Return
Jump 453
Frame get q
DelVar result
AtomicInc(lazy)
LoadVar q
Load
Push ()
2-ary ==
JumpCond False 407
DelVar q
Push None
StoreVar result
Jump 419
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 453
Frame sender (q, v)
Push PC(376)
Push ()
Push 0
LoadVar q
DelVar q
3-ary DictAdd
Push 1
LoadVar v
DelVar v
3-ary DictAdd
Apply
Pop
Return
Jump 453
Frame receiver q
Push PC(395)
LoadVar q
DelVar q
Apply
StoreVar v
ReadonlyInc
AtomicInc(lazy)
LoadVar v
DelVar v
Push { 1, 2, None }
2-ary in
Assert
AtomicDec
ReadonlyDec
Return
Push PC(370)
Push ()
Apply
Store demoq
Push PC(422)
Push ()
Push 0
Push ?demoq
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push ()
Spawn
Push PC(422)
Push ()
Push 0
Push ?demoq
3-ary DictAdd
Push 1
Push 2
3-ary DictAdd
Push ()
Spawn
Push PC(437)
Push ?demoq
Push ()
Spawn
Push PC(437)
Push ?demoq
Push ()
Spawn
Return
DelVar result
```

Duration: 0.0021314000000000055

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store queue
Push ()
Store list
Jump 453
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 453
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 453
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 453
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 453
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 453
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 453
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 453
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 453
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 453
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 453
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 453
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 453
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Jump 453
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 453
Frame put (q, v)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar v
DelVar v
3-ary DictAdd
Apply
Store
AtomicDec
Return
Jump 453
Frame get q
DelVar result
AtomicInc(lazy)
LoadVar q
Load
Push ()
2-ary ==
JumpCond False 407
DelVar q
Push None
StoreVar result
Jump 419
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 453
Frame sender (q, v)
Push PC(376)
Push ()
Push 0
LoadVar q
DelVar q
3-ary DictAdd
Push 1
LoadVar v
DelVar v
3-ary DictAdd
Apply
Pop
Return
Jump 453
Frame receiver q
Push PC(395)
LoadVar q
DelVar q
Apply
StoreVar v
ReadonlyInc
AtomicInc(lazy)
LoadVar v
DelVar v
Push { 1, 2, None }
2-ary in
Assert
AtomicDec
ReadonlyDec
Return
Push PC(370)
Push ()
Apply
Store demoq
Push PC(422)
Push ()
Push 0
Push ?demoq
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push ()
Spawn
Push PC(422)
Push ()
Push 0
Push ?demoq
3-ary DictAdd
Push 1
Push 2
3-ary DictAdd
Push ()
Spawn
Push PC(437)
Push ?demoq
Push ()
Spawn
Push PC(437)
Push ?demoq
Push ()
Spawn
Return
DelVar result
```

Duration: 0.0015965000000000007

---
##  code/qtestseq.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store queue
Push ()
Store list
Jump 421
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 421
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 421
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 421
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 421
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 421
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 421
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 421
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 421
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 421
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 421
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 421
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 421
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Jump 421
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 421
Frame put (q, v)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar v
DelVar v
3-ary DictAdd
Apply
Store
AtomicDec
Return
Jump 421
Frame get q
DelVar result
AtomicInc(lazy)
LoadVar q
Load
Push ()
2-ary ==
JumpCond False 407
DelVar q
Push None
StoreVar result
Jump 419
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Push ()
Store queueconc
Push ()
Store synch
Push ()
Store bag
Jump 1095
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1095
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s361
LoadVar $s361
1-ary IsEmpty
JumpCond True 449
Cut($s361, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 440
DelVar $s361
StoreVar result
Return
Jump 1095
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s377
LoadVar $s377
1-ary IsEmpty
JumpCond True 486
Cut($s377, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 479
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 460
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 460
DelVar $s377
Return
Jump 1095
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 512
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 516
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1095
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s441
LoadVar $s441
1-ary IsEmpty
JumpCond True 545
Cut($s441, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 534
DelVar $s441
Return
Jump 1095
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1095
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1095
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1095
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 622
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 628
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1095
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 655
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 656
Push False
JumpCond False 665
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 676
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1095
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 694
DelVar bg
DelVar k
Push {}
Push PC(428)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 779
Push PC(518)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 708
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 779
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 720
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 779
Push PC(548)
LoadVar bg
Apply
StoreVar hd
Push PC(630)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(679)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s618
LoadVar $s618
1-ary IsEmpty
JumpCond True 764
Cut($s618, x)
Push PC(593)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 748
DelVar $s618
DelVar hd
Push PC(679)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1095
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1095
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 810
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1095
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1095
Frame Lock ()
DelVar result
Push PC(815)
Push False
Apply
StoreVar result
Return
Jump 1095
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1095
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 846
Jump 849
ReadonlyDec
AtomicDec
Jump 839
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1095
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1095
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1095
Frame Condition ()
DelVar result
Push PC(428)
Push ()
Apply
StoreVar result
Return
Jump 1095
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(489)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(593)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 943
Push PC(489)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 944
Push False
JumpCond False 949
DelVar c
DelVar cnt
DelVar ctx
Jump 952
ReadonlyDec
AtomicDec
Jump 924
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1095
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(428)
Push ()
Apply
2-ary !=
JumpCond False 985
LoadVar c
Push PC(630)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(575)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1095
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(428)
Push ()
Apply
Store
AtomicDec
Return
Jump 1095
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1095
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 1016
Jump 1019
ReadonlyDec
AtomicDec
Jump 1008
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1095
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1095
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1095
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1058
Jump 1061
ReadonlyDec
AtomicDec
Jump 1049
ReadonlyDec
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1095
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Push ()
Store alloc
Push ()
Store alloc.pool
Push 0
Store alloc.next
Jump 1283
Frame malloc v
DelVar result
AtomicInc(lazy)
Push ?alloc"pool"
Load alloc.next
Address
LoadVar v
DelVar v
Store
Push ?alloc"pool"
Load alloc.next
Address
StoreVar result
Load alloc.next
Push 1
2-ary +
Store alloc.next
AtomicDec
Return
Jump 1283
Frame free r
AtomicInc(lazy)
LoadVar r
DelVar r
Del
AtomicDec
Return
Jump 1283
Frame leak_check ()
ReadonlyInc
AtomicInc(lazy)
Load alloc.pool
Push ()
2-ary ==
Push "alloc_leak"
Assert2
AtomicDec
ReadonlyDec
Return
Jump 1283
Frame Queue ()
DelVar result
Push ()
Push "head"
Push None
3-ary DictAdd
Push "tail"
Push None
3-ary DictAdd
Push "lock"
Push PC(822)
Push ()
Apply
3-ary DictAdd
Push "time"
Push 0
3-ary DictAdd
StoreVar result
Return
Jump 1283
Frame put (q, v)
Push PC(1102)
Push ()
Push "value"
LoadVar v
DelVar v
3-ary DictAdd
Push "next"
Push None
3-ary DictAdd
Apply
StoreVar node
Push PC(838)
LoadVar q
Push "lock"
Address
Apply
Pop
LoadVar q
Push "tail"
Address
Load
Push None
2-ary ==
JumpCond False 1201
LoadVar q
Push "tail"
Address
LoadVar q
Push "head"
Address
LoadVar node
DelVar node
Dup
Move 3
Move 2
Store
Store
Jump 1215
LoadVar q
Push "tail"
Address
Load
Push "next"
Address
LoadVar node
Store
LoadVar q
Push "tail"
Address
LoadVar node
DelVar node
Store
Push PC(857)
LoadVar q
DelVar q
Push "lock"
Address
Apply
Pop
Return
Jump 1283
Frame get q
DelVar result
Push PC(838)
LoadVar q
Push "lock"
Address
Apply
Pop
LoadVar q
Push "head"
Address
Load
StoreVar node
LoadVar node
Push None
2-ary ==
JumpCond False 1245
DelVar node
Push None
StoreVar result
Jump 1275
LoadVar node
Push "value"
Address
Load
StoreVar result
LoadVar q
Push "head"
Address
LoadVar node
Push "next"
Address
Load
Store
LoadVar q
Push "head"
Address
Load
Push None
2-ary ==
JumpCond False 1270
LoadVar q
Push "tail"
Address
Push None
Store
Push PC(1122)
LoadVar node
DelVar node
Apply
Pop
Push PC(857)
LoadVar q
DelVar q
Push "lock"
Address
Apply
Pop
Return
Push PC(370)
Push ()
Apply
Store specq
Push PC(1142)
Push ()
Apply
Store implq
Push { 1, 2, 3, 4 }
StoreVar $s1121
LoadVar $s1121
1-ary IsEmpty
JumpCond True 1350
Cut($s1121, i)
DelVar i
Push { "get", "put" }
Choose
StoreVar op
LoadVar op
DelVar op
Push "put"
2-ary ==
JumpCond False 1331
Push { 1, 2, 3, 4 }
Choose
StoreVar v
Push PC(1162)
Push ()
Push 0
Push ?implq
3-ary DictAdd
Push 1
LoadVar v
3-ary DictAdd
Apply
Pop
Push PC(376)
Push ()
Push 0
Push ?specq
3-ary DictAdd
Push 1
LoadVar v
DelVar v
3-ary DictAdd
Apply
Pop
Jump 1293
Push PC(1224)
Push ?implq
Apply
StoreVar v
Push PC(395)
Push ?specq
Apply
StoreVar w
ReadonlyInc
AtomicInc(lazy)
LoadVar v
DelVar v
LoadVar w
DelVar w
2-ary ==
Assert
AtomicDec
ReadonlyDec
Jump 1293
DelVar $s1121
Return
DelVar result
```

Duration: 0.0016579999999999928

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store queue
Push ()
Store list
Jump 421
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 421
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 421
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 421
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 421
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 421
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 421
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 421
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 421
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 421
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 421
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 421
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 421
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Jump 421
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 421
Frame put (q, v)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar v
DelVar v
3-ary DictAdd
Apply
Store
AtomicDec
Return
Jump 421
Frame get q
DelVar result
AtomicInc(lazy)
LoadVar q
Load
Push ()
2-ary ==
JumpCond False 407
DelVar q
Push None
StoreVar result
Jump 419
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Push ()
Store queueconc
Push ()
Store synch
Push ()
Store bag
Jump 1095
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1095
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s361
LoadVar $s361
1-ary IsEmpty
JumpCond True 449
Cut($s361, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 440
DelVar $s361
StoreVar result
Return
Jump 1095
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s377
LoadVar $s377
1-ary IsEmpty
JumpCond True 486
Cut($s377, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 479
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 460
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 460
DelVar $s377
Return
Jump 1095
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 512
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 516
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1095
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s441
LoadVar $s441
1-ary IsEmpty
JumpCond True 545
Cut($s441, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 534
DelVar $s441
Return
Jump 1095
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1095
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1095
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1095
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 622
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 628
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1095
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 655
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 656
Push False
JumpCond False 665
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 676
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1095
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 694
DelVar bg
DelVar k
Push {}
Push PC(428)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 779
Push PC(518)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 708
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 779
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 720
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 779
Push PC(548)
LoadVar bg
Apply
StoreVar hd
Push PC(630)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(679)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s618
LoadVar $s618
1-ary IsEmpty
JumpCond True 764
Cut($s618, x)
Push PC(593)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 748
DelVar $s618
DelVar hd
Push PC(679)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1095
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1095
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 810
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1095
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1095
Frame Lock ()
DelVar result
Push PC(815)
Push False
Apply
StoreVar result
Return
Jump 1095
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1095
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 846
Jump 849
ReadonlyDec
AtomicDec
Jump 839
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1095
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1095
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1095
Frame Condition ()
DelVar result
Push PC(428)
Push ()
Apply
StoreVar result
Return
Jump 1095
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(489)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(593)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 943
Push PC(489)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 944
Push False
JumpCond False 949
DelVar c
DelVar cnt
DelVar ctx
Jump 952
ReadonlyDec
AtomicDec
Jump 924
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1095
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(428)
Push ()
Apply
2-ary !=
JumpCond False 985
LoadVar c
Push PC(630)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(575)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1095
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(428)
Push ()
Apply
Store
AtomicDec
Return
Jump 1095
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1095
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 1016
Jump 1019
ReadonlyDec
AtomicDec
Jump 1008
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1095
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1095
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1095
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1058
Jump 1061
ReadonlyDec
AtomicDec
Jump 1049
ReadonlyDec
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1095
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Push ()
Store alloc
Push ()
Store alloc.pool
Push 0
Store alloc.next
Jump 1283
Frame malloc v
DelVar result
AtomicInc(lazy)
Push ?alloc"pool"
Load alloc.next
Address
LoadVar v
DelVar v
Store
Push ?alloc"pool"
Load alloc.next
Address
StoreVar result
Load alloc.next
Push 1
2-ary +
Store alloc.next
AtomicDec
Return
Jump 1283
Frame free r
AtomicInc(lazy)
LoadVar r
DelVar r
Del
AtomicDec
Return
Jump 1283
Frame leak_check ()
ReadonlyInc
AtomicInc(lazy)
Load alloc.pool
Push ()
2-ary ==
Push "alloc_leak"
Assert2
AtomicDec
ReadonlyDec
Return
Jump 1283
Frame Queue ()
DelVar result
Push ()
Push "head"
Push None
3-ary DictAdd
Push "tail"
Push None
3-ary DictAdd
Push "lock"
Push PC(822)
Push ()
Apply
3-ary DictAdd
Push "time"
Push 0
3-ary DictAdd
StoreVar result
Return
Jump 1283
Frame put (q, v)
Push PC(1102)
Push ()
Push "value"
LoadVar v
DelVar v
3-ary DictAdd
Push "next"
Push None
3-ary DictAdd
Apply
StoreVar node
Push PC(838)
LoadVar q
Push "lock"
Address
Apply
Pop
LoadVar q
Push "tail"
Address
Load
Push None
2-ary ==
JumpCond False 1201
LoadVar q
Push "tail"
Address
LoadVar q
Push "head"
Address
LoadVar node
DelVar node
Dup
Move 3
Move 2
Store
Store
Jump 1215
LoadVar q
Push "tail"
Address
Load
Push "next"
Address
LoadVar node
Store
LoadVar q
Push "tail"
Address
LoadVar node
DelVar node
Store
Push PC(857)
LoadVar q
DelVar q
Push "lock"
Address
Apply
Pop
Return
Jump 1283
Frame get q
DelVar result
Push PC(838)
LoadVar q
Push "lock"
Address
Apply
Pop
LoadVar q
Push "head"
Address
Load
StoreVar node
LoadVar node
Push None
2-ary ==
JumpCond False 1245
DelVar node
Push None
StoreVar result
Jump 1275
LoadVar node
Push "value"
Address
Load
StoreVar result
LoadVar q
Push "head"
Address
LoadVar node
Push "next"
Address
Load
Store
LoadVar q
Push "head"
Address
Load
Push None
2-ary ==
JumpCond False 1270
LoadVar q
Push "tail"
Address
Push None
Store
Push PC(1122)
LoadVar node
DelVar node
Apply
Pop
Push PC(857)
LoadVar q
DelVar q
Push "lock"
Address
Apply
Pop
Return
Push PC(370)
Push ()
Apply
Store specq
Push PC(1142)
Push ()
Apply
Store implq
Push { 1, 2, 3, 4 }
StoreVar $s1121
LoadVar $s1121
1-ary IsEmpty
JumpCond True 1350
Cut($s1121, i)
DelVar i
Push { "get", "put" }
Choose
StoreVar op
LoadVar op
DelVar op
Push "put"
2-ary ==
JumpCond False 1331
Push { 1, 2, 3, 4 }
Choose
StoreVar v
Push PC(1162)
Push ()
Push 0
Push ?implq
3-ary DictAdd
Push 1
LoadVar v
3-ary DictAdd
Apply
Pop
Push PC(376)
Push ()
Push 0
Push ?specq
3-ary DictAdd
Push 1
LoadVar v
DelVar v
3-ary DictAdd
Apply
Pop
Jump 1293
Push PC(1224)
Push ?implq
Apply
StoreVar v
Push PC(395)
Push ?specq
Apply
StoreVar w
ReadonlyInc
AtomicInc(lazy)
LoadVar v
DelVar v
LoadVar w
DelVar w
2-ary ==
Assert
AtomicDec
ReadonlyDec
Jump 1293
DelVar $s1121
Return
DelVar result
```

Duration: 0.0015795999999999866

---
##  code/qtest1.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store queue
Push ()
Store list
Jump 421
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 421
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 421
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 421
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 421
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 421
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 421
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 421
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 421
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 421
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 421
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 421
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 421
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Jump 421
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 421
Frame put (q, v)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar v
DelVar v
3-ary DictAdd
Apply
Store
AtomicDec
Return
Jump 421
Frame get q
DelVar result
AtomicInc(lazy)
LoadVar q
Load
Push ()
2-ary ==
JumpCond False 407
DelVar q
Push None
StoreVar result
Jump 419
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Push ?putcount
Sequential
Push PC(370)
Push ()
Apply
Store testq
Push 0
Store putcount
Jump 500
Frame putter v
Push PC(376)
Push ()
Push 0
Push ?testq
3-ary DictAdd
Push 1
LoadVar v
DelVar v
3-ary DictAdd
Apply
Pop
AtomicInc(lazy)
Load putcount
Push 1
2-ary +
Store putcount
AtomicDec
Return
Jump 500
Frame main ()
Load putcount
Push 3
2-ary ==
JumpCond False 451
Jump 457
Jump 451
Push {}
StoreVar gotten
LoadVar gotten
Push { 0, 1, 2 }
2-ary !=
JumpCond False 485
Push PC(395)
Push ?testq
Apply
StoreVar v
ReadonlyInc
AtomicInc(lazy)
LoadVar v
LoadVar gotten
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar gotten
DelVar gotten
Push {}
LoadVar v
DelVar v
2-ary SetAdd
2-ary |
StoreVar gotten
Jump 459
DelVar gotten
Push PC(395)
Push ?testq
Apply
StoreVar v
ReadonlyInc
AtomicInc(lazy)
LoadVar v
DelVar v
Push None
2-ary ==
Assert
AtomicDec
ReadonlyDec
Return
Push { 0, 1, 2 }
StoreVar $s421
LoadVar $s421
1-ary IsEmpty
JumpCond True 512
Cut($s421, i)
Push PC(430)
LoadVar i
DelVar i
Push ()
Spawn
Jump 502
DelVar $s421
Push PC(450)
Push ()
Push ()
Spawn
Return
DelVar result
```

Duration: 0.001374299999999995

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store queue
Push ()
Store list
Jump 421
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 421
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 421
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 421
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 421
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 421
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 421
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 421
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 421
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 421
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 421
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 421
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 421
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Jump 421
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 421
Frame put (q, v)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar v
DelVar v
3-ary DictAdd
Apply
Store
AtomicDec
Return
Jump 421
Frame get q
DelVar result
AtomicInc(lazy)
LoadVar q
Load
Push ()
2-ary ==
JumpCond False 407
DelVar q
Push None
StoreVar result
Jump 419
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Push ?putcount
Sequential
Push PC(370)
Push ()
Apply
Store testq
Push 0
Store putcount
Jump 500
Frame putter v
Push PC(376)
Push ()
Push 0
Push ?testq
3-ary DictAdd
Push 1
LoadVar v
DelVar v
3-ary DictAdd
Apply
Pop
AtomicInc(lazy)
Load putcount
Push 1
2-ary +
Store putcount
AtomicDec
Return
Jump 500
Frame main ()
Load putcount
Push 3
2-ary ==
JumpCond False 451
Jump 457
Jump 451
Push {}
StoreVar gotten
LoadVar gotten
Push { 0, 1, 2 }
2-ary !=
JumpCond False 485
Push PC(395)
Push ?testq
Apply
StoreVar v
ReadonlyInc
AtomicInc(lazy)
LoadVar v
LoadVar gotten
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar gotten
DelVar gotten
Push {}
LoadVar v
DelVar v
2-ary SetAdd
2-ary |
StoreVar gotten
Jump 459
DelVar gotten
Push PC(395)
Push ?testq
Apply
StoreVar v
ReadonlyInc
AtomicInc(lazy)
LoadVar v
DelVar v
Push None
2-ary ==
Assert
AtomicDec
ReadonlyDec
Return
Push { 0, 1, 2 }
StoreVar $s421
LoadVar $s421
1-ary IsEmpty
JumpCond True 512
Cut($s421, i)
Push PC(430)
LoadVar i
DelVar i
Push ()
Spawn
Jump 502
DelVar $s421
Push PC(450)
Push ()
Push ()
Spawn
Return
DelVar result
```

Duration: 0.0013822

---
## -msynch=synchS code/qtest1.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store queue
Push ()
Store list
Jump 421
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 421
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 421
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 421
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 421
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 421
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 421
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 421
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 421
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 421
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 421
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 421
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 421
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Jump 421
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 421
Frame put (q, v)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar v
DelVar v
3-ary DictAdd
Apply
Store
AtomicDec
Return
Jump 421
Frame get q
DelVar result
AtomicInc(lazy)
LoadVar q
Load
Push ()
2-ary ==
JumpCond False 407
DelVar q
Push None
StoreVar result
Jump 419
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Push ?putcount
Sequential
Push PC(370)
Push ()
Apply
Store testq
Push 0
Store putcount
Jump 500
Frame putter v
Push PC(376)
Push ()
Push 0
Push ?testq
3-ary DictAdd
Push 1
LoadVar v
DelVar v
3-ary DictAdd
Apply
Pop
AtomicInc(lazy)
Load putcount
Push 1
2-ary +
Store putcount
AtomicDec
Return
Jump 500
Frame main ()
Load putcount
Push 3
2-ary ==
JumpCond False 451
Jump 457
Jump 451
Push {}
StoreVar gotten
LoadVar gotten
Push { 0, 1, 2 }
2-ary !=
JumpCond False 485
Push PC(395)
Push ?testq
Apply
StoreVar v
ReadonlyInc
AtomicInc(lazy)
LoadVar v
LoadVar gotten
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar gotten
DelVar gotten
Push {}
LoadVar v
DelVar v
2-ary SetAdd
2-ary |
StoreVar gotten
Jump 459
DelVar gotten
Push PC(395)
Push ?testq
Apply
StoreVar v
ReadonlyInc
AtomicInc(lazy)
LoadVar v
DelVar v
Push None
2-ary ==
Assert
AtomicDec
ReadonlyDec
Return
Push { 0, 1, 2 }
StoreVar $s421
LoadVar $s421
1-ary IsEmpty
JumpCond True 512
Cut($s421, i)
Push PC(430)
LoadVar i
DelVar i
Push ()
Spawn
Jump 502
DelVar $s421
Push PC(450)
Push ()
Push ()
Spawn
Return
DelVar result
```

Duration: 0.0013434999999999975

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store queue
Push ()
Store list
Jump 421
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 421
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 421
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 421
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 421
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 421
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 421
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 421
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 421
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 421
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 421
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 421
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 421
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Jump 421
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 421
Frame put (q, v)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar v
DelVar v
3-ary DictAdd
Apply
Store
AtomicDec
Return
Jump 421
Frame get q
DelVar result
AtomicInc(lazy)
LoadVar q
Load
Push ()
2-ary ==
JumpCond False 407
DelVar q
Push None
StoreVar result
Jump 419
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Push ?putcount
Sequential
Push PC(370)
Push ()
Apply
Store testq
Push 0
Store putcount
Jump 500
Frame putter v
Push PC(376)
Push ()
Push 0
Push ?testq
3-ary DictAdd
Push 1
LoadVar v
DelVar v
3-ary DictAdd
Apply
Pop
AtomicInc(lazy)
Load putcount
Push 1
2-ary +
Store putcount
AtomicDec
Return
Jump 500
Frame main ()
Load putcount
Push 3
2-ary ==
JumpCond False 451
Jump 457
Jump 451
Push {}
StoreVar gotten
LoadVar gotten
Push { 0, 1, 2 }
2-ary !=
JumpCond False 485
Push PC(395)
Push ?testq
Apply
StoreVar v
ReadonlyInc
AtomicInc(lazy)
LoadVar v
LoadVar gotten
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar gotten
DelVar gotten
Push {}
LoadVar v
DelVar v
2-ary SetAdd
2-ary |
StoreVar gotten
Jump 459
DelVar gotten
Push PC(395)
Push ?testq
Apply
StoreVar v
ReadonlyInc
AtomicInc(lazy)
LoadVar v
DelVar v
Push None
2-ary ==
Assert
AtomicDec
ReadonlyDec
Return
Push { 0, 1, 2 }
StoreVar $s421
LoadVar $s421
1-ary IsEmpty
JumpCond True 512
Cut($s421, i)
Push PC(430)
LoadVar i
DelVar i
Push ()
Spawn
Jump 502
DelVar $s421
Push PC(450)
Push ()
Push ()
Spawn
Return
DelVar result
```

Duration: 0.00125119999999998

---
##  code/qtest2.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store queue
Push ()
Store list
Jump 421
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 421
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 421
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 421
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 421
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 421
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 421
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 421
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 421
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 421
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 421
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 421
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 421
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Jump 421
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 421
Frame put (q, v)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar v
DelVar v
3-ary DictAdd
Apply
Store
AtomicDec
Return
Jump 421
Frame get q
DelVar result
AtomicInc(lazy)
LoadVar q
Load
Push ()
2-ary ==
JumpCond False 407
DelVar q
Push None
StoreVar result
Jump 419
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Push ?gotten
Sequential
Push PC(370)
Push ()
Apply
Store testq
Push { 0, 1, 2 }
StoreVar $s353
LoadVar $s353
1-ary IsEmpty
JumpCond True 445
Cut($s353, i)
Push PC(376)
Push ()
Push 0
Push ?testq
3-ary DictAdd
Push 1
LoadVar i
DelVar i
3-ary DictAdd
Apply
Pop
Jump 429
DelVar $s353
Push {}
Store gotten
Jump 503
Frame getter ()
Push PC(395)
Push ?testq
Apply
StoreVar v
AtomicInc(lazy)
ReadonlyInc
AtomicInc(lazy)
LoadVar v
Load gotten
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
ReadonlyInc
AtomicInc(lazy)
LoadVar v
Push None
2-ary !=
Assert
AtomicDec
ReadonlyDec
Load gotten
Push {}
LoadVar v
DelVar v
2-ary SetAdd
2-ary |
Store gotten
AtomicDec
Return
Jump 503
Frame main ()
Load gotten
Push { 0, 1, 2 }
2-ary ==
JumpCond False 483
Jump 489
Jump 483
Push PC(395)
Push ?testq
Apply
StoreVar v
ReadonlyInc
AtomicInc(lazy)
LoadVar v
DelVar v
Push None
2-ary ==
Assert
AtomicDec
ReadonlyDec
Return
Push { 0, 1, 2 }
StoreVar $s425
LoadVar $s425
1-ary IsEmpty
JumpCond True 515
Cut($s425, i)
DelVar i
Push PC(449)
Push ()
Push ()
Spawn
Jump 505
DelVar $s425
Push PC(482)
Push ()
Push ()
Spawn
Return
DelVar result
```

Duration: 0.0013046000000000169

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store queue
Push ()
Store list
Jump 421
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 421
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 421
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 421
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 421
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 421
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 421
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 421
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 421
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 421
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 421
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 421
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 421
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Jump 421
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 421
Frame put (q, v)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar v
DelVar v
3-ary DictAdd
Apply
Store
AtomicDec
Return
Jump 421
Frame get q
DelVar result
AtomicInc(lazy)
LoadVar q
Load
Push ()
2-ary ==
JumpCond False 407
DelVar q
Push None
StoreVar result
Jump 419
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Push ?gotten
Sequential
Push PC(370)
Push ()
Apply
Store testq
Push { 0, 1, 2 }
StoreVar $s353
LoadVar $s353
1-ary IsEmpty
JumpCond True 445
Cut($s353, i)
Push PC(376)
Push ()
Push 0
Push ?testq
3-ary DictAdd
Push 1
LoadVar i
DelVar i
3-ary DictAdd
Apply
Pop
Jump 429
DelVar $s353
Push {}
Store gotten
Jump 503
Frame getter ()
Push PC(395)
Push ?testq
Apply
StoreVar v
AtomicInc(lazy)
ReadonlyInc
AtomicInc(lazy)
LoadVar v
Load gotten
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
ReadonlyInc
AtomicInc(lazy)
LoadVar v
Push None
2-ary !=
Assert
AtomicDec
ReadonlyDec
Load gotten
Push {}
LoadVar v
DelVar v
2-ary SetAdd
2-ary |
Store gotten
AtomicDec
Return
Jump 503
Frame main ()
Load gotten
Push { 0, 1, 2 }
2-ary ==
JumpCond False 483
Jump 489
Jump 483
Push PC(395)
Push ?testq
Apply
StoreVar v
ReadonlyInc
AtomicInc(lazy)
LoadVar v
DelVar v
Push None
2-ary ==
Assert
AtomicDec
ReadonlyDec
Return
Push { 0, 1, 2 }
StoreVar $s425
LoadVar $s425
1-ary IsEmpty
JumpCond True 515
Cut($s425, i)
DelVar i
Push PC(449)
Push ()
Push ()
Spawn
Jump 505
DelVar $s425
Push PC(482)
Push ()
Push ()
Spawn
Return
DelVar result
```

Duration: 0.001444899999999999

---
## -msynch=synchS code/qtest2.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store queue
Push ()
Store list
Jump 421
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 421
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 421
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 421
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 421
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 421
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 421
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 421
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 421
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 421
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 421
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 421
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 421
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Jump 421
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 421
Frame put (q, v)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar v
DelVar v
3-ary DictAdd
Apply
Store
AtomicDec
Return
Jump 421
Frame get q
DelVar result
AtomicInc(lazy)
LoadVar q
Load
Push ()
2-ary ==
JumpCond False 407
DelVar q
Push None
StoreVar result
Jump 419
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Push ?gotten
Sequential
Push PC(370)
Push ()
Apply
Store testq
Push { 0, 1, 2 }
StoreVar $s353
LoadVar $s353
1-ary IsEmpty
JumpCond True 445
Cut($s353, i)
Push PC(376)
Push ()
Push 0
Push ?testq
3-ary DictAdd
Push 1
LoadVar i
DelVar i
3-ary DictAdd
Apply
Pop
Jump 429
DelVar $s353
Push {}
Store gotten
Jump 503
Frame getter ()
Push PC(395)
Push ?testq
Apply
StoreVar v
AtomicInc(lazy)
ReadonlyInc
AtomicInc(lazy)
LoadVar v
Load gotten
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
ReadonlyInc
AtomicInc(lazy)
LoadVar v
Push None
2-ary !=
Assert
AtomicDec
ReadonlyDec
Load gotten
Push {}
LoadVar v
DelVar v
2-ary SetAdd
2-ary |
Store gotten
AtomicDec
Return
Jump 503
Frame main ()
Load gotten
Push { 0, 1, 2 }
2-ary ==
JumpCond False 483
Jump 489
Jump 483
Push PC(395)
Push ?testq
Apply
StoreVar v
ReadonlyInc
AtomicInc(lazy)
LoadVar v
DelVar v
Push None
2-ary ==
Assert
AtomicDec
ReadonlyDec
Return
Push { 0, 1, 2 }
StoreVar $s425
LoadVar $s425
1-ary IsEmpty
JumpCond True 515
Cut($s425, i)
DelVar i
Push PC(449)
Push ()
Push ()
Spawn
Jump 505
DelVar $s425
Push PC(482)
Push ()
Push ()
Spawn
Return
DelVar result
```

Duration: 0.0015081999999999873

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store queue
Push ()
Store list
Jump 421
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 421
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 421
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 421
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 421
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 421
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 421
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 421
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 421
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 421
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 421
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 421
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 421
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Jump 421
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 421
Frame put (q, v)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar v
DelVar v
3-ary DictAdd
Apply
Store
AtomicDec
Return
Jump 421
Frame get q
DelVar result
AtomicInc(lazy)
LoadVar q
Load
Push ()
2-ary ==
JumpCond False 407
DelVar q
Push None
StoreVar result
Jump 419
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Push ?gotten
Sequential
Push PC(370)
Push ()
Apply
Store testq
Push { 0, 1, 2 }
StoreVar $s353
LoadVar $s353
1-ary IsEmpty
JumpCond True 445
Cut($s353, i)
Push PC(376)
Push ()
Push 0
Push ?testq
3-ary DictAdd
Push 1
LoadVar i
DelVar i
3-ary DictAdd
Apply
Pop
Jump 429
DelVar $s353
Push {}
Store gotten
Jump 503
Frame getter ()
Push PC(395)
Push ?testq
Apply
StoreVar v
AtomicInc(lazy)
ReadonlyInc
AtomicInc(lazy)
LoadVar v
Load gotten
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
ReadonlyInc
AtomicInc(lazy)
LoadVar v
Push None
2-ary !=
Assert
AtomicDec
ReadonlyDec
Load gotten
Push {}
LoadVar v
DelVar v
2-ary SetAdd
2-ary |
Store gotten
AtomicDec
Return
Jump 503
Frame main ()
Load gotten
Push { 0, 1, 2 }
2-ary ==
JumpCond False 483
Jump 489
Jump 483
Push PC(395)
Push ?testq
Apply
StoreVar v
ReadonlyInc
AtomicInc(lazy)
LoadVar v
DelVar v
Push None
2-ary ==
Assert
AtomicDec
ReadonlyDec
Return
Push { 0, 1, 2 }
StoreVar $s425
LoadVar $s425
1-ary IsEmpty
JumpCond True 515
Cut($s425, i)
DelVar i
Push PC(449)
Push ()
Push ()
Spawn
Jump 505
DelVar $s425
Push PC(482)
Push ()
Push ()
Spawn
Return
DelVar result
```

Duration: 0.001393499999999992

---
##  code/qtest3.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store queue
Push ()
Store list
Jump 421
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 421
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 421
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 421
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 421
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 421
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 421
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 421
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 421
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 421
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 421
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 421
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 421
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Jump 421
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 421
Frame put (q, v)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar v
DelVar v
3-ary DictAdd
Apply
Store
AtomicDec
Return
Jump 421
Frame get q
DelVar result
AtomicInc(lazy)
LoadVar q
Load
Push ()
2-ary ==
JumpCond False 407
DelVar q
Push None
StoreVar result
Jump 419
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Push PC(370)
Push ()
Apply
Store testq
Push ()
Store gotten
Jump 530
Frame putter i
Push PC(376)
Push ()
Push 0
Push ?testq
3-ary DictAdd
Push 1
Push ()
Push 0
LoadVar i
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
3-ary DictAdd
Apply
Pop
Push PC(376)
Push ()
Push 0
Push ?testq
3-ary DictAdd
Push 1
Push ()
Push 0
LoadVar i
DelVar i
3-ary DictAdd
Push 1
Push 2
3-ary DictAdd
3-ary DictAdd
Apply
Pop
Return
Jump 530
Frame getter i
Push PC(395)
Push ?testq
Apply
StoreVar x
Push PC(395)
Push ?testq
Apply
StoreVar y
Push ?gotten
LoadVar i
DelVar i
Address
Push ()
Push 0
LoadVar x
3-ary DictAdd
Push 1
LoadVar y
3-ary DictAdd
Store
LoadVar x
Push None
2-ary !=
JumpCond False 493
LoadVar y
Push None
2-ary !=
Jump 494
Push False
JumpCond False 527
ReadonlyInc
AtomicInc(lazy)
LoadVar x
Push 0
Apply
LoadVar y
Push 0
Apply
2-ary !=
JumpCond True 521
Push ()
Push 0
LoadVar x
DelVar x
Push 1
Apply
3-ary DictAdd
Push 1
LoadVar y
DelVar y
Push 1
Apply
3-ary DictAdd
Push [1, 2]
2-ary ==
Jump 524
DelVar x
DelVar y
Push True
Assert
AtomicDec
ReadonlyDec
DelVar x
DelVar y
Return
Push { 0, 1 }
StoreVar $s448
LoadVar $s448
1-ary IsEmpty
JumpCond True 546
Cut($s448, i)
Push PC(428)
LoadVar i
Push ()
Spawn
Push PC(464)
LoadVar i
DelVar i
Push ()
Spawn
Jump 532
DelVar $s448
Return
DelVar result
```

Duration: 0.0014313999999999993

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store queue
Push ()
Store list
Jump 421
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 421
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 421
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 421
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 421
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 421
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 421
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 421
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 421
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 421
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 421
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 421
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 421
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Jump 421
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 421
Frame put (q, v)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar v
DelVar v
3-ary DictAdd
Apply
Store
AtomicDec
Return
Jump 421
Frame get q
DelVar result
AtomicInc(lazy)
LoadVar q
Load
Push ()
2-ary ==
JumpCond False 407
DelVar q
Push None
StoreVar result
Jump 419
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Push PC(370)
Push ()
Apply
Store testq
Push ()
Store gotten
Jump 530
Frame putter i
Push PC(376)
Push ()
Push 0
Push ?testq
3-ary DictAdd
Push 1
Push ()
Push 0
LoadVar i
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
3-ary DictAdd
Apply
Pop
Push PC(376)
Push ()
Push 0
Push ?testq
3-ary DictAdd
Push 1
Push ()
Push 0
LoadVar i
DelVar i
3-ary DictAdd
Push 1
Push 2
3-ary DictAdd
3-ary DictAdd
Apply
Pop
Return
Jump 530
Frame getter i
Push PC(395)
Push ?testq
Apply
StoreVar x
Push PC(395)
Push ?testq
Apply
StoreVar y
Push ?gotten
LoadVar i
DelVar i
Address
Push ()
Push 0
LoadVar x
3-ary DictAdd
Push 1
LoadVar y
3-ary DictAdd
Store
LoadVar x
Push None
2-ary !=
JumpCond False 493
LoadVar y
Push None
2-ary !=
Jump 494
Push False
JumpCond False 527
ReadonlyInc
AtomicInc(lazy)
LoadVar x
Push 0
Apply
LoadVar y
Push 0
Apply
2-ary !=
JumpCond True 521
Push ()
Push 0
LoadVar x
DelVar x
Push 1
Apply
3-ary DictAdd
Push 1
LoadVar y
DelVar y
Push 1
Apply
3-ary DictAdd
Push [1, 2]
2-ary ==
Jump 524
DelVar x
DelVar y
Push True
Assert
AtomicDec
ReadonlyDec
DelVar x
DelVar y
Return
Push { 0, 1 }
StoreVar $s448
LoadVar $s448
1-ary IsEmpty
JumpCond True 546
Cut($s448, i)
Push PC(428)
LoadVar i
Push ()
Spawn
Push PC(464)
LoadVar i
DelVar i
Push ()
Spawn
Jump 532
DelVar $s448
Return
DelVar result
```

Duration: 0.0015374999999999972

---
## -msynch=synchS code/qtest3.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store queue
Push ()
Store list
Jump 421
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 421
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 421
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 421
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 421
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 421
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 421
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 421
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 421
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 421
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 421
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 421
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 421
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Jump 421
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 421
Frame put (q, v)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar v
DelVar v
3-ary DictAdd
Apply
Store
AtomicDec
Return
Jump 421
Frame get q
DelVar result
AtomicInc(lazy)
LoadVar q
Load
Push ()
2-ary ==
JumpCond False 407
DelVar q
Push None
StoreVar result
Jump 419
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Push PC(370)
Push ()
Apply
Store testq
Push ()
Store gotten
Jump 530
Frame putter i
Push PC(376)
Push ()
Push 0
Push ?testq
3-ary DictAdd
Push 1
Push ()
Push 0
LoadVar i
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
3-ary DictAdd
Apply
Pop
Push PC(376)
Push ()
Push 0
Push ?testq
3-ary DictAdd
Push 1
Push ()
Push 0
LoadVar i
DelVar i
3-ary DictAdd
Push 1
Push 2
3-ary DictAdd
3-ary DictAdd
Apply
Pop
Return
Jump 530
Frame getter i
Push PC(395)
Push ?testq
Apply
StoreVar x
Push PC(395)
Push ?testq
Apply
StoreVar y
Push ?gotten
LoadVar i
DelVar i
Address
Push ()
Push 0
LoadVar x
3-ary DictAdd
Push 1
LoadVar y
3-ary DictAdd
Store
LoadVar x
Push None
2-ary !=
JumpCond False 493
LoadVar y
Push None
2-ary !=
Jump 494
Push False
JumpCond False 527
ReadonlyInc
AtomicInc(lazy)
LoadVar x
Push 0
Apply
LoadVar y
Push 0
Apply
2-ary !=
JumpCond True 521
Push ()
Push 0
LoadVar x
DelVar x
Push 1
Apply
3-ary DictAdd
Push 1
LoadVar y
DelVar y
Push 1
Apply
3-ary DictAdd
Push [1, 2]
2-ary ==
Jump 524
DelVar x
DelVar y
Push True
Assert
AtomicDec
ReadonlyDec
DelVar x
DelVar y
Return
Push { 0, 1 }
StoreVar $s448
LoadVar $s448
1-ary IsEmpty
JumpCond True 546
Cut($s448, i)
Push PC(428)
LoadVar i
Push ()
Spawn
Push PC(464)
LoadVar i
DelVar i
Push ()
Spawn
Jump 532
DelVar $s448
Return
DelVar result
```

Duration: 0.0019647000000000137

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store queue
Push ()
Store list
Jump 421
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 421
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 421
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 421
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 421
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 421
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 421
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 421
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 421
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 421
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 421
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 421
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 421
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Jump 421
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 421
Frame put (q, v)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar v
DelVar v
3-ary DictAdd
Apply
Store
AtomicDec
Return
Jump 421
Frame get q
DelVar result
AtomicInc(lazy)
LoadVar q
Load
Push ()
2-ary ==
JumpCond False 407
DelVar q
Push None
StoreVar result
Jump 419
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Push PC(370)
Push ()
Apply
Store testq
Push ()
Store gotten
Jump 530
Frame putter i
Push PC(376)
Push ()
Push 0
Push ?testq
3-ary DictAdd
Push 1
Push ()
Push 0
LoadVar i
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
3-ary DictAdd
Apply
Pop
Push PC(376)
Push ()
Push 0
Push ?testq
3-ary DictAdd
Push 1
Push ()
Push 0
LoadVar i
DelVar i
3-ary DictAdd
Push 1
Push 2
3-ary DictAdd
3-ary DictAdd
Apply
Pop
Return
Jump 530
Frame getter i
Push PC(395)
Push ?testq
Apply
StoreVar x
Push PC(395)
Push ?testq
Apply
StoreVar y
Push ?gotten
LoadVar i
DelVar i
Address
Push ()
Push 0
LoadVar x
3-ary DictAdd
Push 1
LoadVar y
3-ary DictAdd
Store
LoadVar x
Push None
2-ary !=
JumpCond False 493
LoadVar y
Push None
2-ary !=
Jump 494
Push False
JumpCond False 527
ReadonlyInc
AtomicInc(lazy)
LoadVar x
Push 0
Apply
LoadVar y
Push 0
Apply
2-ary !=
JumpCond True 521
Push ()
Push 0
LoadVar x
DelVar x
Push 1
Apply
3-ary DictAdd
Push 1
LoadVar y
DelVar y
Push 1
Apply
3-ary DictAdd
Push [1, 2]
2-ary ==
Jump 524
DelVar x
DelVar y
Push True
Assert
AtomicDec
ReadonlyDec
DelVar x
DelVar y
Return
Push { 0, 1 }
StoreVar $s448
LoadVar $s448
1-ary IsEmpty
JumpCond True 546
Cut($s448, i)
Push PC(428)
LoadVar i
Push ()
Spawn
Push PC(464)
LoadVar i
DelVar i
Push ()
Spawn
Jump 532
DelVar $s448
Return
DelVar result
```

Duration: 0.0011845999999999801

---
##  code/qtest4.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store queue
Push ()
Store list
Jump 421
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 421
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 421
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 421
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 421
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 421
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 421
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 421
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 421
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 421
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 421
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 421
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 421
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Jump 421
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 421
Frame put (q, v)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar v
DelVar v
3-ary DictAdd
Apply
Store
AtomicDec
Return
Jump 421
Frame get q
DelVar result
AtomicInc(lazy)
LoadVar q
Load
Push ()
2-ary ==
JumpCond False 407
DelVar q
Push None
StoreVar result
Jump 419
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Push PC(370)
Push ()
Apply
Dup
Store q2
Store q1
Push PC(376)
Push ()
Push 0
Push ?q1
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Apply
Pop
Push PC(376)
Push ()
Push 0
Push ?q2
3-ary DictAdd
Push 1
Push 2
3-ary DictAdd
Apply
Pop
Jump 465
Frame getter (q, v)
Push PC(395)
LoadVar q
DelVar q
Apply
StoreVar x
ReadonlyInc
AtomicInc(lazy)
LoadVar x
DelVar x
LoadVar v
DelVar v
2-ary ==
Assert
AtomicDec
ReadonlyDec
Return
Push PC(448)
Push ()
Push 0
Push ?q1
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push ()
Spawn
Push PC(448)
Push ()
Push 0
Push ?q2
3-ary DictAdd
Push 1
Push 2
3-ary DictAdd
Push ()
Spawn
Return
DelVar result
```

Duration: 0.0013950000000000073

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store queue
Push ()
Store list
Jump 421
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 421
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 421
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 421
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 421
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 421
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 421
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 421
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 421
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 421
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 421
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 421
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 421
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Jump 421
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 421
Frame put (q, v)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar v
DelVar v
3-ary DictAdd
Apply
Store
AtomicDec
Return
Jump 421
Frame get q
DelVar result
AtomicInc(lazy)
LoadVar q
Load
Push ()
2-ary ==
JumpCond False 407
DelVar q
Push None
StoreVar result
Jump 419
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Push PC(370)
Push ()
Apply
Dup
Store q2
Store q1
Push PC(376)
Push ()
Push 0
Push ?q1
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Apply
Pop
Push PC(376)
Push ()
Push 0
Push ?q2
3-ary DictAdd
Push 1
Push 2
3-ary DictAdd
Apply
Pop
Jump 465
Frame getter (q, v)
Push PC(395)
LoadVar q
DelVar q
Apply
StoreVar x
ReadonlyInc
AtomicInc(lazy)
LoadVar x
DelVar x
LoadVar v
DelVar v
2-ary ==
Assert
AtomicDec
ReadonlyDec
Return
Push PC(448)
Push ()
Push 0
Push ?q1
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push ()
Spawn
Push PC(448)
Push ()
Push 0
Push ?q2
3-ary DictAdd
Push 1
Push 2
3-ary DictAdd
Push ()
Spawn
Return
DelVar result
```

Duration: 0.0015572000000000086

---
## -msynch=synchS code/qtest4.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store queue
Push ()
Store list
Jump 421
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 421
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 421
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 421
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 421
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 421
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 421
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 421
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 421
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 421
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 421
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 421
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 421
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Jump 421
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 421
Frame put (q, v)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar v
DelVar v
3-ary DictAdd
Apply
Store
AtomicDec
Return
Jump 421
Frame get q
DelVar result
AtomicInc(lazy)
LoadVar q
Load
Push ()
2-ary ==
JumpCond False 407
DelVar q
Push None
StoreVar result
Jump 419
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Push PC(370)
Push ()
Apply
Dup
Store q2
Store q1
Push PC(376)
Push ()
Push 0
Push ?q1
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Apply
Pop
Push PC(376)
Push ()
Push 0
Push ?q2
3-ary DictAdd
Push 1
Push 2
3-ary DictAdd
Apply
Pop
Jump 465
Frame getter (q, v)
Push PC(395)
LoadVar q
DelVar q
Apply
StoreVar x
ReadonlyInc
AtomicInc(lazy)
LoadVar x
DelVar x
LoadVar v
DelVar v
2-ary ==
Assert
AtomicDec
ReadonlyDec
Return
Push PC(448)
Push ()
Push 0
Push ?q1
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push ()
Spawn
Push PC(448)
Push ()
Push 0
Push ?q2
3-ary DictAdd
Push 1
Push 2
3-ary DictAdd
Push ()
Spawn
Return
DelVar result
```

Duration: 0.001454800000000006

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store queue
Push ()
Store list
Jump 421
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 421
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 421
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 421
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 421
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 421
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 421
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 421
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 421
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 421
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 421
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 421
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 421
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Jump 421
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 421
Frame put (q, v)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar v
DelVar v
3-ary DictAdd
Apply
Store
AtomicDec
Return
Jump 421
Frame get q
DelVar result
AtomicInc(lazy)
LoadVar q
Load
Push ()
2-ary ==
JumpCond False 407
DelVar q
Push None
StoreVar result
Jump 419
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Push PC(370)
Push ()
Apply
Dup
Store q2
Store q1
Push PC(376)
Push ()
Push 0
Push ?q1
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Apply
Pop
Push PC(376)
Push ()
Push 0
Push ?q2
3-ary DictAdd
Push 1
Push 2
3-ary DictAdd
Apply
Pop
Jump 465
Frame getter (q, v)
Push PC(395)
LoadVar q
DelVar q
Apply
StoreVar x
ReadonlyInc
AtomicInc(lazy)
LoadVar x
DelVar x
LoadVar v
DelVar v
2-ary ==
Assert
AtomicDec
ReadonlyDec
Return
Push PC(448)
Push ()
Push 0
Push ?q1
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push ()
Spawn
Push PC(448)
Push ()
Push 0
Push ?q2
3-ary DictAdd
Push 1
Push 2
3-ary DictAdd
Push ()
Spawn
Return
DelVar result
```

Duration: 0.001327600000000012

---
##  code/qtestconc.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store queuelin
Push ()
Store synch
Push ()
Store list
Jump 371
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n9
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s12
LoadVar $s12
1-ary IsEmpty
JumpCond True 33
Cut($s12, x)
LoadVar $n9
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n9
Jump 21
DelVar $n9
DelVar $s12
DelVar s
StoreVar result
Return
Jump 371
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 371
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 371
Frame tail s
DelVar result
Push PC(8)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 371
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s69
LoadVar $s69
1-ary IsEmpty
JumpCond True 98
Cut($s69, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 87
DelVar $s69
Return
Jump 371
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s84
LoadVar $s84
1-ary IsEmpty
JumpCond True 115
Cut($s84, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 107
DelVar $s84
StoreVar result
Return
Jump 371
Frame list a
DelVar result
Push 0
StoreVar $n97
Push ()
LoadVar a
DelVar a
StoreVar $s100
LoadVar $s100
1-ary IsEmpty
JumpCond True 137
Cut($s100, v)
LoadVar $n97
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n97
Jump 127
DelVar $n97
DelVar $s100
StoreVar result
Return
Jump 371
Frame values d
DelVar result
Push 0
StoreVar $n115
Push ()
LoadVar d
1-ary keys
StoreVar $s118
LoadVar $s118
1-ary IsEmpty
JumpCond True 162
Cut($s118, k)
LoadVar $n115
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n115
Jump 150
DelVar $n115
DelVar $s118
DelVar d
StoreVar result
Return
Jump 371
Frame items d
DelVar result
Push 0
StoreVar $n136
Push ()
LoadVar d
1-ary keys
StoreVar $s139
LoadVar $s139
1-ary IsEmpty
JumpCond True 194
Cut($s139, k)
LoadVar $n136
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n136
Jump 176
DelVar $n136
DelVar $s139
DelVar d
StoreVar result
Return
Jump 371
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s167
LoadVar $s167
1-ary IsEmpty
JumpCond True 236
Cut($s167, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 209
DelVar $s167
DelVar d
DelVar index
Return
Jump 371
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 251
DelVar a
Push ()
StoreVar result
Jump 326
Push ()
Push 0
Push PC(52)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(61)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n216
Push ()
LoadVar rest
StoreVar $s219
DelVar v
LoadVar $s219
1-ary IsEmpty
JumpCond True 284
Cut($s219, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 269
LoadVar $n216
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n216
Jump 269
DelVar $n216
DelVar $s219
StoreVar lower
Push 0
StoreVar $n235
Push ()
LoadVar rest
DelVar rest
StoreVar $s238
DelVar v
LoadVar $s238
1-ary IsEmpty
JumpCond True 308
Cut($s238, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 293
LoadVar $n235
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n235
Jump 293
DelVar $n235
DelVar $s238
StoreVar higher
Push PC(241)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(241)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 371
Frame sorted d
DelVar result
Push PC(241)
Push PC(119)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 371
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n281
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s284
LoadVar $s284
1-ary IsEmpty
JumpCond True 365
Cut($s284, i)
LoadVar $n281
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n281
Jump 351
DelVar $n281
DelVar $s284
DelVar d
DelVar n
StoreVar result
Return
Push ()
Store bag
Jump 1041
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1041
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s313
LoadVar $s313
1-ary IsEmpty
JumpCond True 395
Cut($s313, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 386
DelVar $s313
StoreVar result
Return
Jump 1041
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s329
LoadVar $s329
1-ary IsEmpty
JumpCond True 432
Cut($s329, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 425
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 406
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 406
DelVar $s329
Return
Jump 1041
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 458
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 462
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1041
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s393
LoadVar $s393
1-ary IsEmpty
JumpCond True 491
Cut($s393, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 480
DelVar $s393
Return
Jump 1041
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1041
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1041
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1041
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 568
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 574
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1041
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 601
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 602
Push False
JumpCond False 611
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 622
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1041
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 640
DelVar bg
DelVar k
Push {}
Push PC(374)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 725
Push PC(464)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 654
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 725
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 666
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 725
Push PC(494)
LoadVar bg
Apply
StoreVar hd
Push PC(576)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(625)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s570
LoadVar $s570
1-ary IsEmpty
JumpCond True 710
Cut($s570, x)
Push PC(539)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 694
DelVar $s570
DelVar hd
Push PC(625)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1041
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1041
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 756
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1041
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1041
Frame Lock ()
DelVar result
Push PC(761)
Push False
Apply
StoreVar result
Return
Jump 1041
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1041
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 792
Jump 795
ReadonlyDec
AtomicDec
Jump 785
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1041
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1041
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1041
Frame Condition ()
DelVar result
Push PC(374)
Push ()
Apply
StoreVar result
Return
Jump 1041
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(435)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(539)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 889
Push PC(435)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 890
Push False
JumpCond False 895
DelVar c
DelVar cnt
DelVar ctx
Jump 898
ReadonlyDec
AtomicDec
Jump 870
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1041
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(374)
Push ()
Apply
2-ary !=
JumpCond False 931
LoadVar c
Push PC(576)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(521)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1041
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(374)
Push ()
Apply
Store
AtomicDec
Return
Jump 1041
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1041
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 962
Jump 965
ReadonlyDec
AtomicDec
Jump 954
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1041
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1041
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1041
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1004
Jump 1007
ReadonlyDec
AtomicDec
Jump 995
ReadonlyDec
Push PC(52)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(61)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1041
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(39)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Push ()
Store alloc
Push ()
Store alloc.pool
Push 0
Store alloc.next
Jump 1259
Frame malloc v
DelVar result
AtomicInc(lazy)
Push ?alloc"pool"
Load alloc.next
Address
LoadVar v
DelVar v
Store
Push ?alloc"pool"
Load alloc.next
Address
StoreVar result
Load alloc.next
Push 1
2-ary +
Store alloc.next
AtomicDec
Return
Jump 1259
Frame free r
AtomicInc(lazy)
LoadVar r
DelVar r
Del
AtomicDec
Return
Jump 1259
Frame leak_check ()
ReadonlyInc
AtomicInc(lazy)
Load alloc.pool
Push ()
2-ary ==
Push "alloc_leak"
Assert2
AtomicDec
ReadonlyDec
Return
Jump 1259
Frame Queue ()
DelVar result
Push ()
Push "head"
Push None
3-ary DictAdd
Push "tail"
Push None
3-ary DictAdd
Push "lock"
Push PC(768)
Push ()
Apply
3-ary DictAdd
Push "time"
Push 0
3-ary DictAdd
StoreVar result
Return
Jump 1259
Frame _linpoint q
AtomicInc(lazy)
Push ?this
Push "qtime"
Address
LoadVar q
Push "time"
Address
Load
StoreVar [this]
LoadVar q
DelVar q
Push "time"
Address
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1259
Frame put (q, v)
Push PC(1048)
Push ()
Push "value"
LoadVar v
DelVar v
3-ary DictAdd
Push "next"
Push None
3-ary DictAdd
Apply
StoreVar node
Push PC(784)
LoadVar q
Push "lock"
Address
Apply
Pop
LoadVar q
Push "tail"
Address
Load
Push None
2-ary ==
JumpCond False 1169
LoadVar q
Push "tail"
Address
LoadVar q
Push "head"
Address
LoadVar node
DelVar node
Dup
Move 3
Move 2
Store
Store
Jump 1183
LoadVar q
Push "tail"
Address
Load
Push "next"
Address
LoadVar node
Store
LoadVar q
Push "tail"
Address
LoadVar node
DelVar node
Store
Push PC(1108)
LoadVar q
Apply
Pop
Push PC(803)
LoadVar q
DelVar q
Push "lock"
Address
Apply
Pop
Return
Jump 1259
Frame get q
DelVar result
Push PC(784)
LoadVar q
Push "lock"
Address
Apply
Pop
LoadVar q
Push "head"
Address
Load
StoreVar node
LoadVar node
Push None
2-ary ==
JumpCond False 1217
DelVar node
Push None
StoreVar result
Jump 1247
LoadVar node
Push "value"
Address
Load
StoreVar result
LoadVar q
Push "head"
Address
LoadVar node
Push "next"
Address
Load
Store
LoadVar q
Push "head"
Address
Load
Push None
2-ary ==
JumpCond False 1242
LoadVar q
Push "tail"
Address
Push None
Store
Push PC(1068)
LoadVar node
DelVar node
Apply
Pop
Push PC(1108)
LoadVar q
Apply
Pop
Push PC(803)
LoadVar q
DelVar q
Push "lock"
Address
Apply
Pop
Return
Push ()
Store queuespec
Jump 1309
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1309
Frame put (q, v)
LoadVar q
Push PC(39)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar v
DelVar v
3-ary DictAdd
Apply
Store
Return
Jump 1309
Frame get q
DelVar result
LoadVar q
Load
Push ()
2-ary ==
JumpCond False 1296
DelVar q
Push None
StoreVar result
Jump 1308
Push PC(52)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(61)
LoadVar q
DelVar q
Load
Apply
Store
Return
Push ?qtime
Sequential
Push 0
Store qtime
Push PC(1088)
Push ()
Apply
Store implq
Push PC(1262)
Push ()
Apply
Store specq
Jump 1397
Frame thread ()
Push { "get", "put" }
Choose
StoreVar op
LoadVar op
DelVar op
Push "put"
2-ary ==
JumpCond False 1364
Push { 1, 2, 3, 4 }
Choose
StoreVar v
Push PC(1130)
Push ()
Push 0
Push ?implq
3-ary DictAdd
Push 1
LoadVar v
3-ary DictAdd
Apply
Pop
Load qtime
LoadVar this
Push "qtime"
Apply
2-ary ==
JumpCond False 1344
Jump 1352
Jump 1344
Push PC(1268)
Push ()
Push 0
Push ?specq
3-ary DictAdd
Push 1
LoadVar v
DelVar v
3-ary DictAdd
Apply
Pop
Jump 1390
Push PC(1196)
Push ?implq
Apply
StoreVar v
Load qtime
LoadVar this
Push "qtime"
Apply
2-ary ==
JumpCond False 1368
Jump 1376
Jump 1368
Push PC(1285)
Push ?specq
Apply
StoreVar w
ReadonlyInc
AtomicInc(lazy)
LoadVar v
DelVar v
LoadVar w
DelVar w
2-ary ==
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
Load qtime
Push 1
2-ary +
Store qtime
AtomicDec
Return
Push { 1, 2, 3, 4 }
StoreVar $s1222
LoadVar $s1222
1-ary IsEmpty
JumpCond True 1409
Cut($s1222, i)
DelVar i
Push PC(1322)
Push ()
Push ()
Spawn
Jump 1399
DelVar $s1222
Return
DelVar result
```

Duration: 0.001895999999999981

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store queuelin
Push ()
Store synch
Push ()
Store list
Jump 371
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n9
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s12
LoadVar $s12
1-ary IsEmpty
JumpCond True 33
Cut($s12, x)
LoadVar $n9
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n9
Jump 21
DelVar $n9
DelVar $s12
DelVar s
StoreVar result
Return
Jump 371
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 371
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 371
Frame tail s
DelVar result
Push PC(8)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 371
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s69
LoadVar $s69
1-ary IsEmpty
JumpCond True 98
Cut($s69, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 87
DelVar $s69
Return
Jump 371
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s84
LoadVar $s84
1-ary IsEmpty
JumpCond True 115
Cut($s84, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 107
DelVar $s84
StoreVar result
Return
Jump 371
Frame list a
DelVar result
Push 0
StoreVar $n97
Push ()
LoadVar a
DelVar a
StoreVar $s100
LoadVar $s100
1-ary IsEmpty
JumpCond True 137
Cut($s100, v)
LoadVar $n97
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n97
Jump 127
DelVar $n97
DelVar $s100
StoreVar result
Return
Jump 371
Frame values d
DelVar result
Push 0
StoreVar $n115
Push ()
LoadVar d
1-ary keys
StoreVar $s118
LoadVar $s118
1-ary IsEmpty
JumpCond True 162
Cut($s118, k)
LoadVar $n115
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n115
Jump 150
DelVar $n115
DelVar $s118
DelVar d
StoreVar result
Return
Jump 371
Frame items d
DelVar result
Push 0
StoreVar $n136
Push ()
LoadVar d
1-ary keys
StoreVar $s139
LoadVar $s139
1-ary IsEmpty
JumpCond True 194
Cut($s139, k)
LoadVar $n136
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n136
Jump 176
DelVar $n136
DelVar $s139
DelVar d
StoreVar result
Return
Jump 371
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s167
LoadVar $s167
1-ary IsEmpty
JumpCond True 236
Cut($s167, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 209
DelVar $s167
DelVar d
DelVar index
Return
Jump 371
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 251
DelVar a
Push ()
StoreVar result
Jump 326
Push ()
Push 0
Push PC(52)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(61)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n216
Push ()
LoadVar rest
StoreVar $s219
DelVar v
LoadVar $s219
1-ary IsEmpty
JumpCond True 284
Cut($s219, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 269
LoadVar $n216
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n216
Jump 269
DelVar $n216
DelVar $s219
StoreVar lower
Push 0
StoreVar $n235
Push ()
LoadVar rest
DelVar rest
StoreVar $s238
DelVar v
LoadVar $s238
1-ary IsEmpty
JumpCond True 308
Cut($s238, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 293
LoadVar $n235
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n235
Jump 293
DelVar $n235
DelVar $s238
StoreVar higher
Push PC(241)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(241)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 371
Frame sorted d
DelVar result
Push PC(241)
Push PC(119)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 371
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n281
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s284
LoadVar $s284
1-ary IsEmpty
JumpCond True 365
Cut($s284, i)
LoadVar $n281
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n281
Jump 351
DelVar $n281
DelVar $s284
DelVar d
DelVar n
StoreVar result
Return
Push ()
Store bag
Jump 1041
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1041
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s313
LoadVar $s313
1-ary IsEmpty
JumpCond True 395
Cut($s313, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 386
DelVar $s313
StoreVar result
Return
Jump 1041
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s329
LoadVar $s329
1-ary IsEmpty
JumpCond True 432
Cut($s329, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 425
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 406
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 406
DelVar $s329
Return
Jump 1041
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 458
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 462
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1041
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s393
LoadVar $s393
1-ary IsEmpty
JumpCond True 491
Cut($s393, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 480
DelVar $s393
Return
Jump 1041
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1041
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1041
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1041
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 568
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 574
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1041
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 601
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 602
Push False
JumpCond False 611
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 622
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1041
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 640
DelVar bg
DelVar k
Push {}
Push PC(374)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 725
Push PC(464)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 654
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 725
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 666
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 725
Push PC(494)
LoadVar bg
Apply
StoreVar hd
Push PC(576)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(625)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s570
LoadVar $s570
1-ary IsEmpty
JumpCond True 710
Cut($s570, x)
Push PC(539)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 694
DelVar $s570
DelVar hd
Push PC(625)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1041
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1041
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 756
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1041
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1041
Frame Lock ()
DelVar result
Push PC(761)
Push False
Apply
StoreVar result
Return
Jump 1041
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1041
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 792
Jump 795
ReadonlyDec
AtomicDec
Jump 785
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1041
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1041
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1041
Frame Condition ()
DelVar result
Push PC(374)
Push ()
Apply
StoreVar result
Return
Jump 1041
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(435)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(539)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 889
Push PC(435)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 890
Push False
JumpCond False 895
DelVar c
DelVar cnt
DelVar ctx
Jump 898
ReadonlyDec
AtomicDec
Jump 870
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1041
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(374)
Push ()
Apply
2-ary !=
JumpCond False 931
LoadVar c
Push PC(576)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(521)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1041
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(374)
Push ()
Apply
Store
AtomicDec
Return
Jump 1041
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1041
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 962
Jump 965
ReadonlyDec
AtomicDec
Jump 954
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1041
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1041
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1041
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1004
Jump 1007
ReadonlyDec
AtomicDec
Jump 995
ReadonlyDec
Push PC(52)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(61)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1041
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(39)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Push ()
Store alloc
Push ()
Store alloc.pool
Push 0
Store alloc.next
Jump 1259
Frame malloc v
DelVar result
AtomicInc(lazy)
Push ?alloc"pool"
Load alloc.next
Address
LoadVar v
DelVar v
Store
Push ?alloc"pool"
Load alloc.next
Address
StoreVar result
Load alloc.next
Push 1
2-ary +
Store alloc.next
AtomicDec
Return
Jump 1259
Frame free r
AtomicInc(lazy)
LoadVar r
DelVar r
Del
AtomicDec
Return
Jump 1259
Frame leak_check ()
ReadonlyInc
AtomicInc(lazy)
Load alloc.pool
Push ()
2-ary ==
Push "alloc_leak"
Assert2
AtomicDec
ReadonlyDec
Return
Jump 1259
Frame Queue ()
DelVar result
Push ()
Push "head"
Push None
3-ary DictAdd
Push "tail"
Push None
3-ary DictAdd
Push "lock"
Push PC(768)
Push ()
Apply
3-ary DictAdd
Push "time"
Push 0
3-ary DictAdd
StoreVar result
Return
Jump 1259
Frame _linpoint q
AtomicInc(lazy)
Push ?this
Push "qtime"
Address
LoadVar q
Push "time"
Address
Load
StoreVar [this]
LoadVar q
DelVar q
Push "time"
Address
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1259
Frame put (q, v)
Push PC(1048)
Push ()
Push "value"
LoadVar v
DelVar v
3-ary DictAdd
Push "next"
Push None
3-ary DictAdd
Apply
StoreVar node
Push PC(784)
LoadVar q
Push "lock"
Address
Apply
Pop
LoadVar q
Push "tail"
Address
Load
Push None
2-ary ==
JumpCond False 1169
LoadVar q
Push "tail"
Address
LoadVar q
Push "head"
Address
LoadVar node
DelVar node
Dup
Move 3
Move 2
Store
Store
Jump 1183
LoadVar q
Push "tail"
Address
Load
Push "next"
Address
LoadVar node
Store
LoadVar q
Push "tail"
Address
LoadVar node
DelVar node
Store
Push PC(1108)
LoadVar q
Apply
Pop
Push PC(803)
LoadVar q
DelVar q
Push "lock"
Address
Apply
Pop
Return
Jump 1259
Frame get q
DelVar result
Push PC(784)
LoadVar q
Push "lock"
Address
Apply
Pop
LoadVar q
Push "head"
Address
Load
StoreVar node
LoadVar node
Push None
2-ary ==
JumpCond False 1217
DelVar node
Push None
StoreVar result
Jump 1247
LoadVar node
Push "value"
Address
Load
StoreVar result
LoadVar q
Push "head"
Address
LoadVar node
Push "next"
Address
Load
Store
LoadVar q
Push "head"
Address
Load
Push None
2-ary ==
JumpCond False 1242
LoadVar q
Push "tail"
Address
Push None
Store
Push PC(1068)
LoadVar node
DelVar node
Apply
Pop
Push PC(1108)
LoadVar q
Apply
Pop
Push PC(803)
LoadVar q
DelVar q
Push "lock"
Address
Apply
Pop
Return
Push ()
Store queuespec
Jump 1309
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1309
Frame put (q, v)
LoadVar q
Push PC(39)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar v
DelVar v
3-ary DictAdd
Apply
Store
Return
Jump 1309
Frame get q
DelVar result
LoadVar q
Load
Push ()
2-ary ==
JumpCond False 1296
DelVar q
Push None
StoreVar result
Jump 1308
Push PC(52)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(61)
LoadVar q
DelVar q
Load
Apply
Store
Return
Push ?qtime
Sequential
Push 0
Store qtime
Push PC(1088)
Push ()
Apply
Store implq
Push PC(1262)
Push ()
Apply
Store specq
Jump 1397
Frame thread ()
Push { "get", "put" }
Choose
StoreVar op
LoadVar op
DelVar op
Push "put"
2-ary ==
JumpCond False 1364
Push { 1, 2, 3, 4 }
Choose
StoreVar v
Push PC(1130)
Push ()
Push 0
Push ?implq
3-ary DictAdd
Push 1
LoadVar v
3-ary DictAdd
Apply
Pop
Load qtime
LoadVar this
Push "qtime"
Apply
2-ary ==
JumpCond False 1344
Jump 1352
Jump 1344
Push PC(1268)
Push ()
Push 0
Push ?specq
3-ary DictAdd
Push 1
LoadVar v
DelVar v
3-ary DictAdd
Apply
Pop
Jump 1390
Push PC(1196)
Push ?implq
Apply
StoreVar v
Load qtime
LoadVar this
Push "qtime"
Apply
2-ary ==
JumpCond False 1368
Jump 1376
Jump 1368
Push PC(1285)
Push ?specq
Apply
StoreVar w
ReadonlyInc
AtomicInc(lazy)
LoadVar v
DelVar v
LoadVar w
DelVar w
2-ary ==
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
Load qtime
Push 1
2-ary +
Store qtime
AtomicDec
Return
Push { 1, 2, 3, 4 }
StoreVar $s1222
LoadVar $s1222
1-ary IsEmpty
JumpCond True 1409
Cut($s1222, i)
DelVar i
Push PC(1322)
Push ()
Push ()
Spawn
Jump 1399
DelVar $s1222
Return
DelVar result
```

Duration: 0.0017642999999999964

---
## -msynch=synchS code/qtestconc.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store queuelin
Push ()
Store synch
Push ()
Store list
Jump 801
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n9
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s12
LoadVar $s12
1-ary IsEmpty
JumpCond True 33
Cut($s12, x)
LoadVar $n9
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n9
Jump 21
DelVar $n9
DelVar $s12
DelVar s
StoreVar result
Return
Jump 801
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 801
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 801
Frame tail s
DelVar result
Push PC(8)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 801
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s69
LoadVar $s69
1-ary IsEmpty
JumpCond True 98
Cut($s69, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 87
DelVar $s69
Return
Jump 801
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s84
LoadVar $s84
1-ary IsEmpty
JumpCond True 115
Cut($s84, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 107
DelVar $s84
StoreVar result
Return
Jump 801
Frame list a
DelVar result
Push 0
StoreVar $n97
Push ()
LoadVar a
DelVar a
StoreVar $s100
LoadVar $s100
1-ary IsEmpty
JumpCond True 137
Cut($s100, v)
LoadVar $n97
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n97
Jump 127
DelVar $n97
DelVar $s100
StoreVar result
Return
Jump 801
Frame values d
DelVar result
Push 0
StoreVar $n115
Push ()
LoadVar d
1-ary keys
StoreVar $s118
LoadVar $s118
1-ary IsEmpty
JumpCond True 162
Cut($s118, k)
LoadVar $n115
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n115
Jump 150
DelVar $n115
DelVar $s118
DelVar d
StoreVar result
Return
Jump 801
Frame items d
DelVar result
Push 0
StoreVar $n136
Push ()
LoadVar d
1-ary keys
StoreVar $s139
LoadVar $s139
1-ary IsEmpty
JumpCond True 194
Cut($s139, k)
LoadVar $n136
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n136
Jump 176
DelVar $n136
DelVar $s139
DelVar d
StoreVar result
Return
Jump 801
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s167
LoadVar $s167
1-ary IsEmpty
JumpCond True 236
Cut($s167, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 209
DelVar $s167
DelVar d
DelVar index
Return
Jump 801
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 251
DelVar a
Push ()
StoreVar result
Jump 326
Push ()
Push 0
Push PC(52)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(61)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n216
Push ()
LoadVar rest
StoreVar $s219
DelVar v
LoadVar $s219
1-ary IsEmpty
JumpCond True 284
Cut($s219, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 269
LoadVar $n216
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n216
Jump 269
DelVar $n216
DelVar $s219
StoreVar lower
Push 0
StoreVar $n235
Push ()
LoadVar rest
DelVar rest
StoreVar $s238
DelVar v
LoadVar $s238
1-ary IsEmpty
JumpCond True 308
Cut($s238, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 293
LoadVar $n235
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n235
Jump 293
DelVar $n235
DelVar $s238
StoreVar higher
Push PC(241)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(241)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 801
Frame sorted d
DelVar result
Push PC(241)
Push PC(119)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 801
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n281
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s284
LoadVar $s284
1-ary IsEmpty
JumpCond True 365
Cut($s284, i)
LoadVar $n281
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n281
Jump 351
DelVar $n281
DelVar $s284
DelVar d
DelVar n
StoreVar result
Return
Jump 801
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 801
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 401
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 801
Frame BinSema acquired
DelVar result
Push ()
Push "acquired"
LoadVar acquired
DelVar acquired
3-ary DictAdd
Push "suspended"
Push ()
3-ary DictAdd
StoreVar result
Return
Jump 801
Frame Lock ()
DelVar result
Push PC(406)
Push False
Apply
StoreVar result
Return
Jump 801
Frame acquire binsema
AtomicInc(lazy)
LoadVar binsema
Push "acquired"
Address
Load
JumpCond False 457
LoadVar binsema
Push "suspended"
Address
LoadVar binsema
Push "suspended"
Address
Load
1-ary len
Address
Stop
Continue
Pop
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Load
Assert
AtomicDec
ReadonlyDec
Jump 463
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Push True
Store
AtomicDec
Return
Jump 801
Frame release binsema
AtomicInc(lazy)
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Push "acquired"
Address
Load
Assert
AtomicDec
ReadonlyDec
LoadVar binsema
Push "suspended"
Address
Load
Push ()
2-ary ==
JumpCond False 491
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Push False
Store
Jump 510
Push ()
Push PC(52)
LoadVar binsema
Push "suspended"
Address
Load
Apply
Go
LoadVar binsema
Push "suspended"
Address
Push PC(61)
LoadVar binsema
DelVar binsema
Push "suspended"
Address
Load
Apply
Store
AtomicDec
Return
Jump 801
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Load
StoreVar result
Return
Jump 801
Frame Condition ()
DelVar result
Push ()
StoreVar result
Return
Jump 801
Frame wait (c, lk)
AtomicInc(lazy)
Push PC(466)
LoadVar lk
Apply
Pop
LoadVar c
LoadVar c
DelVar c
Load
1-ary len
Address
Stop
Continue
Pop
AtomicDec
Push PC(427)
LoadVar lk
DelVar lk
Apply
Pop
Return
Jump 801
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push ()
2-ary !=
JumpCond False 572
Push ()
Push PC(52)
LoadVar c
Load
Apply
Go
LoadVar c
Push PC(61)
LoadVar c
DelVar c
Load
Apply
Store
DelVar c
AtomicDec
Return
Jump 801
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
Load
Push ()
2-ary !=
JumpCond False 596
Push ()
Push PC(52)
LoadVar c
Load
Apply
Go
LoadVar c
Push PC(61)
LoadVar c
Load
Apply
Store
Jump 578
DelVar c
AtomicDec
Return
Jump 801
Frame Semaphore cnt
DelVar result
Push ()
Push "count"
LoadVar cnt
DelVar cnt
3-ary DictAdd
Push "waiters"
Push ()
3-ary DictAdd
StoreVar result
Return
Jump 801
Frame P sema
AtomicInc(lazy)
LoadVar sema
Push "count"
Address
Load
Push 0
2-ary >
JumpCond False 632
LoadVar sema
DelVar sema
Push "count"
Address
Dup
Load
Push 1
2-ary -
Store
Jump 645
LoadVar sema
Push "waiters"
Address
LoadVar sema
DelVar sema
Push "waiters"
Address
Load
1-ary len
Address
Stop
Continue
Pop
AtomicDec
Return
Jump 801
Frame V sema
AtomicInc(lazy)
Push ()
Push 0
LoadVar sema
Push "count"
Address
Load
3-ary DictAdd
Push 1
LoadVar sema
Push "waiters"
Address
Load
3-ary DictAdd
StoreVar (cnt, waiters)
LoadVar waiters
Push ()
2-ary !=
JumpCond False 692
ReadonlyInc
AtomicInc(lazy)
LoadVar cnt
DelVar cnt
Push 0
2-ary ==
Assert
AtomicDec
ReadonlyDec
Push ()
LoadVar waiters
Push 0
Apply
Go
LoadVar sema
DelVar sema
Push "waiters"
Address
Push PC(61)
LoadVar waiters
DelVar waiters
Apply
Store
Jump 702
DelVar waiters
LoadVar sema
DelVar sema
Push "count"
Address
LoadVar cnt
DelVar cnt
Push 1
2-ary +
Store
AtomicDec
Return
Jump 801
Frame Queue ()
DelVar result
Push { "list":(), "waiters":() }
StoreVar result
Return
Jump 801
Frame get q
DelVar result
AtomicInc(lazy)
LoadVar q
Push "list"
Address
Load
Push ()
2-ary ==
JumpCond False 733
LoadVar q
Push "waiters"
Address
LoadVar q
Push "waiters"
Address
Load
1-ary len
Address
Stop
Continue
Pop
Push PC(52)
LoadVar q
Push "list"
Address
Load
Apply
StoreVar result
LoadVar q
Push "list"
Address
Push PC(61)
LoadVar q
DelVar q
Push "list"
Address
Load
Apply
Store
AtomicDec
Return
Jump 801
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push "list"
Address
Push PC(39)
Push ()
Push 0
LoadVar q
Push "list"
Address
Load
3-ary DictAdd
Push 1
LoadVar item
3-ary DictAdd
Apply
Store
LoadVar q
Push "waiters"
Address
Load
StoreVar waiters
LoadVar waiters
Push ()
2-ary !=
JumpCond False 796
LoadVar item
DelVar item
LoadVar waiters
Push 0
Apply
Go
LoadVar q
DelVar q
Push "waiters"
Address
Push PC(61)
LoadVar waiters
DelVar waiters
Apply
Store
DelVar item
DelVar q
DelVar waiters
AtomicDec
Return
Push ()
Store alloc
Push ()
Store alloc.pool
Push 0
Store alloc.next
Jump 1019
Frame malloc v
DelVar result
AtomicInc(lazy)
Push ?alloc"pool"
Load alloc.next
Address
LoadVar v
DelVar v
Store
Push ?alloc"pool"
Load alloc.next
Address
StoreVar result
Load alloc.next
Push 1
2-ary +
Store alloc.next
AtomicDec
Return
Jump 1019
Frame free r
AtomicInc(lazy)
LoadVar r
DelVar r
Del
AtomicDec
Return
Jump 1019
Frame leak_check ()
ReadonlyInc
AtomicInc(lazy)
Load alloc.pool
Push ()
2-ary ==
Push "alloc_leak"
Assert2
AtomicDec
ReadonlyDec
Return
Jump 1019
Frame Queue ()
DelVar result
Push ()
Push "head"
Push None
3-ary DictAdd
Push "tail"
Push None
3-ary DictAdd
Push "lock"
Push PC(419)
Push ()
Apply
3-ary DictAdd
Push "time"
Push 0
3-ary DictAdd
StoreVar result
Return
Jump 1019
Frame _linpoint q
AtomicInc(lazy)
Push ?this
Push "qtime"
Address
LoadVar q
Push "time"
Address
Load
StoreVar [this]
LoadVar q
DelVar q
Push "time"
Address
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1019
Frame put (q, v)
Push PC(808)
Push ()
Push "value"
LoadVar v
DelVar v
3-ary DictAdd
Push "next"
Push None
3-ary DictAdd
Apply
StoreVar node
Push PC(427)
LoadVar q
Push "lock"
Address
Apply
Pop
LoadVar q
Push "tail"
Address
Load
Push None
2-ary ==
JumpCond False 929
LoadVar q
Push "tail"
Address
LoadVar q
Push "head"
Address
LoadVar node
DelVar node
Dup
Move 3
Move 2
Store
Store
Jump 943
LoadVar q
Push "tail"
Address
Load
Push "next"
Address
LoadVar node
Store
LoadVar q
Push "tail"
Address
LoadVar node
DelVar node
Store
Push PC(868)
LoadVar q
Apply
Pop
Push PC(466)
LoadVar q
DelVar q
Push "lock"
Address
Apply
Pop
Return
Jump 1019
Frame get q
DelVar result
Push PC(427)
LoadVar q
Push "lock"
Address
Apply
Pop
LoadVar q
Push "head"
Address
Load
StoreVar node
LoadVar node
Push None
2-ary ==
JumpCond False 977
DelVar node
Push None
StoreVar result
Jump 1007
LoadVar node
Push "value"
Address
Load
StoreVar result
LoadVar q
Push "head"
Address
LoadVar node
Push "next"
Address
Load
Store
LoadVar q
Push "head"
Address
Load
Push None
2-ary ==
JumpCond False 1002
LoadVar q
Push "tail"
Address
Push None
Store
Push PC(828)
LoadVar node
DelVar node
Apply
Pop
Push PC(868)
LoadVar q
Apply
Pop
Push PC(466)
LoadVar q
DelVar q
Push "lock"
Address
Apply
Pop
Return
Push ()
Store queuespec
Jump 1069
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1069
Frame put (q, v)
LoadVar q
Push PC(39)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar v
DelVar v
3-ary DictAdd
Apply
Store
Return
Jump 1069
Frame get q
DelVar result
LoadVar q
Load
Push ()
2-ary ==
JumpCond False 1056
DelVar q
Push None
StoreVar result
Jump 1068
Push PC(52)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(61)
LoadVar q
DelVar q
Load
Apply
Store
Return
Push ?qtime
Sequential
Push 0
Store qtime
Push PC(848)
Push ()
Apply
Store implq
Push PC(1022)
Push ()
Apply
Store specq
Jump 1157
Frame thread ()
Push { "get", "put" }
Choose
StoreVar op
LoadVar op
DelVar op
Push "put"
2-ary ==
JumpCond False 1124
Push { 1, 2, 3, 4 }
Choose
StoreVar v
Push PC(890)
Push ()
Push 0
Push ?implq
3-ary DictAdd
Push 1
LoadVar v
3-ary DictAdd
Apply
Pop
Load qtime
LoadVar this
Push "qtime"
Apply
2-ary ==
JumpCond False 1104
Jump 1112
Jump 1104
Push PC(1028)
Push ()
Push 0
Push ?specq
3-ary DictAdd
Push 1
LoadVar v
DelVar v
3-ary DictAdd
Apply
Pop
Jump 1150
Push PC(956)
Push ?implq
Apply
StoreVar v
Load qtime
LoadVar this
Push "qtime"
Apply
2-ary ==
JumpCond False 1128
Jump 1136
Jump 1128
Push PC(1045)
Push ?specq
Apply
StoreVar w
ReadonlyInc
AtomicInc(lazy)
LoadVar v
DelVar v
LoadVar w
DelVar w
2-ary ==
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
Load qtime
Push 1
2-ary +
Store qtime
AtomicDec
Return
Push { 1, 2, 3, 4 }
StoreVar $s1024
LoadVar $s1024
1-ary IsEmpty
JumpCond True 1169
Cut($s1024, i)
DelVar i
Push PC(1082)
Push ()
Push ()
Spawn
Jump 1159
DelVar $s1024
Return
DelVar result
```

Duration: 0.0016504999999999992

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store queuelin
Push ()
Store synch
Push ()
Store list
Jump 801
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n9
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s12
LoadVar $s12
1-ary IsEmpty
JumpCond True 33
Cut($s12, x)
LoadVar $n9
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n9
Jump 21
DelVar $n9
DelVar $s12
DelVar s
StoreVar result
Return
Jump 801
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 801
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 801
Frame tail s
DelVar result
Push PC(8)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 801
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s69
LoadVar $s69
1-ary IsEmpty
JumpCond True 98
Cut($s69, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 87
DelVar $s69
Return
Jump 801
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s84
LoadVar $s84
1-ary IsEmpty
JumpCond True 115
Cut($s84, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 107
DelVar $s84
StoreVar result
Return
Jump 801
Frame list a
DelVar result
Push 0
StoreVar $n97
Push ()
LoadVar a
DelVar a
StoreVar $s100
LoadVar $s100
1-ary IsEmpty
JumpCond True 137
Cut($s100, v)
LoadVar $n97
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n97
Jump 127
DelVar $n97
DelVar $s100
StoreVar result
Return
Jump 801
Frame values d
DelVar result
Push 0
StoreVar $n115
Push ()
LoadVar d
1-ary keys
StoreVar $s118
LoadVar $s118
1-ary IsEmpty
JumpCond True 162
Cut($s118, k)
LoadVar $n115
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n115
Jump 150
DelVar $n115
DelVar $s118
DelVar d
StoreVar result
Return
Jump 801
Frame items d
DelVar result
Push 0
StoreVar $n136
Push ()
LoadVar d
1-ary keys
StoreVar $s139
LoadVar $s139
1-ary IsEmpty
JumpCond True 194
Cut($s139, k)
LoadVar $n136
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n136
Jump 176
DelVar $n136
DelVar $s139
DelVar d
StoreVar result
Return
Jump 801
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s167
LoadVar $s167
1-ary IsEmpty
JumpCond True 236
Cut($s167, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 209
DelVar $s167
DelVar d
DelVar index
Return
Jump 801
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 251
DelVar a
Push ()
StoreVar result
Jump 326
Push ()
Push 0
Push PC(52)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(61)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n216
Push ()
LoadVar rest
StoreVar $s219
DelVar v
LoadVar $s219
1-ary IsEmpty
JumpCond True 284
Cut($s219, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 269
LoadVar $n216
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n216
Jump 269
DelVar $n216
DelVar $s219
StoreVar lower
Push 0
StoreVar $n235
Push ()
LoadVar rest
DelVar rest
StoreVar $s238
DelVar v
LoadVar $s238
1-ary IsEmpty
JumpCond True 308
Cut($s238, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 293
LoadVar $n235
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n235
Jump 293
DelVar $n235
DelVar $s238
StoreVar higher
Push PC(241)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(241)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 801
Frame sorted d
DelVar result
Push PC(241)
Push PC(119)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 801
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n281
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s284
LoadVar $s284
1-ary IsEmpty
JumpCond True 365
Cut($s284, i)
LoadVar $n281
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n281
Jump 351
DelVar $n281
DelVar $s284
DelVar d
DelVar n
StoreVar result
Return
Jump 801
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 801
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 401
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 801
Frame BinSema acquired
DelVar result
Push ()
Push "acquired"
LoadVar acquired
DelVar acquired
3-ary DictAdd
Push "suspended"
Push ()
3-ary DictAdd
StoreVar result
Return
Jump 801
Frame Lock ()
DelVar result
Push PC(406)
Push False
Apply
StoreVar result
Return
Jump 801
Frame acquire binsema
AtomicInc(lazy)
LoadVar binsema
Push "acquired"
Address
Load
JumpCond False 457
LoadVar binsema
Push "suspended"
Address
LoadVar binsema
Push "suspended"
Address
Load
1-ary len
Address
Stop
Continue
Pop
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Load
Assert
AtomicDec
ReadonlyDec
Jump 463
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Push True
Store
AtomicDec
Return
Jump 801
Frame release binsema
AtomicInc(lazy)
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Push "acquired"
Address
Load
Assert
AtomicDec
ReadonlyDec
LoadVar binsema
Push "suspended"
Address
Load
Push ()
2-ary ==
JumpCond False 491
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Push False
Store
Jump 510
Push ()
Push PC(52)
LoadVar binsema
Push "suspended"
Address
Load
Apply
Go
LoadVar binsema
Push "suspended"
Address
Push PC(61)
LoadVar binsema
DelVar binsema
Push "suspended"
Address
Load
Apply
Store
AtomicDec
Return
Jump 801
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Load
StoreVar result
Return
Jump 801
Frame Condition ()
DelVar result
Push ()
StoreVar result
Return
Jump 801
Frame wait (c, lk)
AtomicInc(lazy)
Push PC(466)
LoadVar lk
Apply
Pop
LoadVar c
LoadVar c
DelVar c
Load
1-ary len
Address
Stop
Continue
Pop
AtomicDec
Push PC(427)
LoadVar lk
DelVar lk
Apply
Pop
Return
Jump 801
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push ()
2-ary !=
JumpCond False 572
Push ()
Push PC(52)
LoadVar c
Load
Apply
Go
LoadVar c
Push PC(61)
LoadVar c
DelVar c
Load
Apply
Store
DelVar c
AtomicDec
Return
Jump 801
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
Load
Push ()
2-ary !=
JumpCond False 596
Push ()
Push PC(52)
LoadVar c
Load
Apply
Go
LoadVar c
Push PC(61)
LoadVar c
Load
Apply
Store
Jump 578
DelVar c
AtomicDec
Return
Jump 801
Frame Semaphore cnt
DelVar result
Push ()
Push "count"
LoadVar cnt
DelVar cnt
3-ary DictAdd
Push "waiters"
Push ()
3-ary DictAdd
StoreVar result
Return
Jump 801
Frame P sema
AtomicInc(lazy)
LoadVar sema
Push "count"
Address
Load
Push 0
2-ary >
JumpCond False 632
LoadVar sema
DelVar sema
Push "count"
Address
Dup
Load
Push 1
2-ary -
Store
Jump 645
LoadVar sema
Push "waiters"
Address
LoadVar sema
DelVar sema
Push "waiters"
Address
Load
1-ary len
Address
Stop
Continue
Pop
AtomicDec
Return
Jump 801
Frame V sema
AtomicInc(lazy)
Push ()
Push 0
LoadVar sema
Push "count"
Address
Load
3-ary DictAdd
Push 1
LoadVar sema
Push "waiters"
Address
Load
3-ary DictAdd
StoreVar (cnt, waiters)
LoadVar waiters
Push ()
2-ary !=
JumpCond False 692
ReadonlyInc
AtomicInc(lazy)
LoadVar cnt
DelVar cnt
Push 0
2-ary ==
Assert
AtomicDec
ReadonlyDec
Push ()
LoadVar waiters
Push 0
Apply
Go
LoadVar sema
DelVar sema
Push "waiters"
Address
Push PC(61)
LoadVar waiters
DelVar waiters
Apply
Store
Jump 702
DelVar waiters
LoadVar sema
DelVar sema
Push "count"
Address
LoadVar cnt
DelVar cnt
Push 1
2-ary +
Store
AtomicDec
Return
Jump 801
Frame Queue ()
DelVar result
Push { "list":(), "waiters":() }
StoreVar result
Return
Jump 801
Frame get q
DelVar result
AtomicInc(lazy)
LoadVar q
Push "list"
Address
Load
Push ()
2-ary ==
JumpCond False 733
LoadVar q
Push "waiters"
Address
LoadVar q
Push "waiters"
Address
Load
1-ary len
Address
Stop
Continue
Pop
Push PC(52)
LoadVar q
Push "list"
Address
Load
Apply
StoreVar result
LoadVar q
Push "list"
Address
Push PC(61)
LoadVar q
DelVar q
Push "list"
Address
Load
Apply
Store
AtomicDec
Return
Jump 801
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push "list"
Address
Push PC(39)
Push ()
Push 0
LoadVar q
Push "list"
Address
Load
3-ary DictAdd
Push 1
LoadVar item
3-ary DictAdd
Apply
Store
LoadVar q
Push "waiters"
Address
Load
StoreVar waiters
LoadVar waiters
Push ()
2-ary !=
JumpCond False 796
LoadVar item
DelVar item
LoadVar waiters
Push 0
Apply
Go
LoadVar q
DelVar q
Push "waiters"
Address
Push PC(61)
LoadVar waiters
DelVar waiters
Apply
Store
DelVar item
DelVar q
DelVar waiters
AtomicDec
Return
Push ()
Store alloc
Push ()
Store alloc.pool
Push 0
Store alloc.next
Jump 1019
Frame malloc v
DelVar result
AtomicInc(lazy)
Push ?alloc"pool"
Load alloc.next
Address
LoadVar v
DelVar v
Store
Push ?alloc"pool"
Load alloc.next
Address
StoreVar result
Load alloc.next
Push 1
2-ary +
Store alloc.next
AtomicDec
Return
Jump 1019
Frame free r
AtomicInc(lazy)
LoadVar r
DelVar r
Del
AtomicDec
Return
Jump 1019
Frame leak_check ()
ReadonlyInc
AtomicInc(lazy)
Load alloc.pool
Push ()
2-ary ==
Push "alloc_leak"
Assert2
AtomicDec
ReadonlyDec
Return
Jump 1019
Frame Queue ()
DelVar result
Push ()
Push "head"
Push None
3-ary DictAdd
Push "tail"
Push None
3-ary DictAdd
Push "lock"
Push PC(419)
Push ()
Apply
3-ary DictAdd
Push "time"
Push 0
3-ary DictAdd
StoreVar result
Return
Jump 1019
Frame _linpoint q
AtomicInc(lazy)
Push ?this
Push "qtime"
Address
LoadVar q
Push "time"
Address
Load
StoreVar [this]
LoadVar q
DelVar q
Push "time"
Address
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1019
Frame put (q, v)
Push PC(808)
Push ()
Push "value"
LoadVar v
DelVar v
3-ary DictAdd
Push "next"
Push None
3-ary DictAdd
Apply
StoreVar node
Push PC(427)
LoadVar q
Push "lock"
Address
Apply
Pop
LoadVar q
Push "tail"
Address
Load
Push None
2-ary ==
JumpCond False 929
LoadVar q
Push "tail"
Address
LoadVar q
Push "head"
Address
LoadVar node
DelVar node
Dup
Move 3
Move 2
Store
Store
Jump 943
LoadVar q
Push "tail"
Address
Load
Push "next"
Address
LoadVar node
Store
LoadVar q
Push "tail"
Address
LoadVar node
DelVar node
Store
Push PC(868)
LoadVar q
Apply
Pop
Push PC(466)
LoadVar q
DelVar q
Push "lock"
Address
Apply
Pop
Return
Jump 1019
Frame get q
DelVar result
Push PC(427)
LoadVar q
Push "lock"
Address
Apply
Pop
LoadVar q
Push "head"
Address
Load
StoreVar node
LoadVar node
Push None
2-ary ==
JumpCond False 977
DelVar node
Push None
StoreVar result
Jump 1007
LoadVar node
Push "value"
Address
Load
StoreVar result
LoadVar q
Push "head"
Address
LoadVar node
Push "next"
Address
Load
Store
LoadVar q
Push "head"
Address
Load
Push None
2-ary ==
JumpCond False 1002
LoadVar q
Push "tail"
Address
Push None
Store
Push PC(828)
LoadVar node
DelVar node
Apply
Pop
Push PC(868)
LoadVar q
Apply
Pop
Push PC(466)
LoadVar q
DelVar q
Push "lock"
Address
Apply
Pop
Return
Push ()
Store queuespec
Jump 1069
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1069
Frame put (q, v)
LoadVar q
Push PC(39)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar v
DelVar v
3-ary DictAdd
Apply
Store
Return
Jump 1069
Frame get q
DelVar result
LoadVar q
Load
Push ()
2-ary ==
JumpCond False 1056
DelVar q
Push None
StoreVar result
Jump 1068
Push PC(52)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(61)
LoadVar q
DelVar q
Load
Apply
Store
Return
Push ?qtime
Sequential
Push 0
Store qtime
Push PC(848)
Push ()
Apply
Store implq
Push PC(1022)
Push ()
Apply
Store specq
Jump 1157
Frame thread ()
Push { "get", "put" }
Choose
StoreVar op
LoadVar op
DelVar op
Push "put"
2-ary ==
JumpCond False 1124
Push { 1, 2, 3, 4 }
Choose
StoreVar v
Push PC(890)
Push ()
Push 0
Push ?implq
3-ary DictAdd
Push 1
LoadVar v
3-ary DictAdd
Apply
Pop
Load qtime
LoadVar this
Push "qtime"
Apply
2-ary ==
JumpCond False 1104
Jump 1112
Jump 1104
Push PC(1028)
Push ()
Push 0
Push ?specq
3-ary DictAdd
Push 1
LoadVar v
DelVar v
3-ary DictAdd
Apply
Pop
Jump 1150
Push PC(956)
Push ?implq
Apply
StoreVar v
Load qtime
LoadVar this
Push "qtime"
Apply
2-ary ==
JumpCond False 1128
Jump 1136
Jump 1128
Push PC(1045)
Push ?specq
Apply
StoreVar w
ReadonlyInc
AtomicInc(lazy)
LoadVar v
DelVar v
LoadVar w
DelVar w
2-ary ==
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
Load qtime
Push 1
2-ary +
Store qtime
AtomicDec
Return
Push { 1, 2, 3, 4 }
StoreVar $s1024
LoadVar $s1024
1-ary IsEmpty
JumpCond True 1169
Cut($s1024, i)
DelVar i
Push PC(1082)
Push ()
Push ()
Spawn
Jump 1159
DelVar $s1024
Return
DelVar result
```

Duration: 0.001639400000000013

---
## -mqueue=queueMS code/queuedemo.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store queue
Push ()
Store synch
Push ()
Store list
Jump 371
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n9
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s12
LoadVar $s12
1-ary IsEmpty
JumpCond True 33
Cut($s12, x)
LoadVar $n9
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n9
Jump 21
DelVar $n9
DelVar $s12
DelVar s
StoreVar result
Return
Jump 371
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 371
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 371
Frame tail s
DelVar result
Push PC(8)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 371
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s69
LoadVar $s69
1-ary IsEmpty
JumpCond True 98
Cut($s69, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 87
DelVar $s69
Return
Jump 371
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s84
LoadVar $s84
1-ary IsEmpty
JumpCond True 115
Cut($s84, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 107
DelVar $s84
StoreVar result
Return
Jump 371
Frame list a
DelVar result
Push 0
StoreVar $n97
Push ()
LoadVar a
DelVar a
StoreVar $s100
LoadVar $s100
1-ary IsEmpty
JumpCond True 137
Cut($s100, v)
LoadVar $n97
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n97
Jump 127
DelVar $n97
DelVar $s100
StoreVar result
Return
Jump 371
Frame values d
DelVar result
Push 0
StoreVar $n115
Push ()
LoadVar d
1-ary keys
StoreVar $s118
LoadVar $s118
1-ary IsEmpty
JumpCond True 162
Cut($s118, k)
LoadVar $n115
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n115
Jump 150
DelVar $n115
DelVar $s118
DelVar d
StoreVar result
Return
Jump 371
Frame items d
DelVar result
Push 0
StoreVar $n136
Push ()
LoadVar d
1-ary keys
StoreVar $s139
LoadVar $s139
1-ary IsEmpty
JumpCond True 194
Cut($s139, k)
LoadVar $n136
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n136
Jump 176
DelVar $n136
DelVar $s139
DelVar d
StoreVar result
Return
Jump 371
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s167
LoadVar $s167
1-ary IsEmpty
JumpCond True 236
Cut($s167, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 209
DelVar $s167
DelVar d
DelVar index
Return
Jump 371
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 251
DelVar a
Push ()
StoreVar result
Jump 326
Push ()
Push 0
Push PC(52)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(61)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n216
Push ()
LoadVar rest
StoreVar $s219
DelVar v
LoadVar $s219
1-ary IsEmpty
JumpCond True 284
Cut($s219, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 269
LoadVar $n216
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n216
Jump 269
DelVar $n216
DelVar $s219
StoreVar lower
Push 0
StoreVar $n235
Push ()
LoadVar rest
DelVar rest
StoreVar $s238
DelVar v
LoadVar $s238
1-ary IsEmpty
JumpCond True 308
Cut($s238, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 293
LoadVar $n235
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n235
Jump 293
DelVar $n235
DelVar $s238
StoreVar higher
Push PC(241)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(241)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 371
Frame sorted d
DelVar result
Push PC(241)
Push PC(119)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 371
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n281
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s284
LoadVar $s284
1-ary IsEmpty
JumpCond True 365
Cut($s284, i)
LoadVar $n281
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n281
Jump 351
DelVar $n281
DelVar $s284
DelVar d
DelVar n
StoreVar result
Return
Push ()
Store bag
Jump 1041
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1041
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s313
LoadVar $s313
1-ary IsEmpty
JumpCond True 395
Cut($s313, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 386
DelVar $s313
StoreVar result
Return
Jump 1041
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s329
LoadVar $s329
1-ary IsEmpty
JumpCond True 432
Cut($s329, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 425
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 406
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 406
DelVar $s329
Return
Jump 1041
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 458
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 462
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1041
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s393
LoadVar $s393
1-ary IsEmpty
JumpCond True 491
Cut($s393, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 480
DelVar $s393
Return
Jump 1041
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1041
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1041
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1041
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 568
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 574
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1041
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 601
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 602
Push False
JumpCond False 611
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 622
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1041
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 640
DelVar bg
DelVar k
Push {}
Push PC(374)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 725
Push PC(464)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 654
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 725
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 666
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 725
Push PC(494)
LoadVar bg
Apply
StoreVar hd
Push PC(576)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(625)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s570
LoadVar $s570
1-ary IsEmpty
JumpCond True 710
Cut($s570, x)
Push PC(539)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 694
DelVar $s570
DelVar hd
Push PC(625)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1041
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1041
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 756
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1041
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1041
Frame Lock ()
DelVar result
Push PC(761)
Push False
Apply
StoreVar result
Return
Jump 1041
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1041
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 792
Jump 795
ReadonlyDec
AtomicDec
Jump 785
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1041
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1041
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1041
Frame Condition ()
DelVar result
Push PC(374)
Push ()
Apply
StoreVar result
Return
Jump 1041
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(435)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(539)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 889
Push PC(435)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 890
Push False
JumpCond False 895
DelVar c
DelVar cnt
DelVar ctx
Jump 898
ReadonlyDec
AtomicDec
Jump 870
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1041
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(374)
Push ()
Apply
2-ary !=
JumpCond False 931
LoadVar c
Push PC(576)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(521)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1041
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(374)
Push ()
Apply
Store
AtomicDec
Return
Jump 1041
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1041
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 962
Jump 965
ReadonlyDec
AtomicDec
Jump 954
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1041
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1041
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1041
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1004
Jump 1007
ReadonlyDec
AtomicDec
Jump 995
ReadonlyDec
Push PC(52)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(61)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1041
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(39)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Push ()
Store alloc
Push ()
Store alloc.pool
Push 0
Store alloc.next
Jump 1246
Frame malloc v
DelVar result
AtomicInc(lazy)
Push ?alloc"pool"
Load alloc.next
Address
LoadVar v
DelVar v
Store
Push ?alloc"pool"
Load alloc.next
Address
StoreVar result
Load alloc.next
Push 1
2-ary +
Store alloc.next
AtomicDec
Return
Jump 1246
Frame free r
AtomicInc(lazy)
LoadVar r
DelVar r
Del
AtomicDec
Return
Jump 1246
Frame leak_check ()
ReadonlyInc
AtomicInc(lazy)
Load alloc.pool
Push ()
2-ary ==
Push "alloc_leak"
Assert2
AtomicDec
ReadonlyDec
Return
Jump 1246
Frame Queue ()
DelVar result
Push PC(1048)
Push { "next":None, "value":() }
Apply
StoreVar dummy
Push ()
Push "head"
LoadVar dummy
3-ary DictAdd
Push "tail"
LoadVar dummy
DelVar dummy
3-ary DictAdd
Push "hdlock"
Push PC(768)
Push ()
Apply
3-ary DictAdd
Push "tllock"
Push PC(768)
Push ()
Apply
3-ary DictAdd
StoreVar result
Return
Jump 1246
Frame put (q, v)
Push PC(1048)
Push ()
Push "value"
LoadVar v
DelVar v
3-ary DictAdd
Push "next"
Push None
3-ary DictAdd
Apply
StoreVar node
Push PC(784)
LoadVar q
Push "tllock"
Address
Apply
Pop
LoadVar q
Push "tail"
Address
Load
Push "next"
Address
LoadVar node
Store
LoadVar q
Push "tail"
Address
LoadVar node
DelVar node
Store
Push PC(803)
LoadVar q
DelVar q
Push "tllock"
Address
Apply
Pop
Return
Jump 1246
Frame get q
DelVar result
Push PC(784)
LoadVar q
Push "hdlock"
Address
Apply
Pop
LoadVar q
Push "head"
Address
Load
StoreVar dummy
LoadVar dummy
Push "next"
Address
Load
StoreVar node
LoadVar node
Push None
2-ary ==
JumpCond False 1190
DelVar dummy
DelVar node
Push None
StoreVar result
Push PC(803)
LoadVar q
DelVar q
Push "hdlock"
Address
Apply
Pop
Jump 1213
LoadVar node
Push "value"
Address
Load
StoreVar result
LoadVar q
Push "head"
Address
LoadVar node
DelVar node
Store
Push PC(803)
LoadVar q
DelVar q
Push "hdlock"
Address
Apply
Pop
Push PC(1068)
LoadVar dummy
DelVar dummy
Apply
Pop
Return
Jump 1246
Frame sender (q, v)
Push PC(1115)
Push ()
Push 0
LoadVar q
DelVar q
3-ary DictAdd
Push 1
LoadVar v
DelVar v
3-ary DictAdd
Apply
Pop
Return
Jump 1246
Frame receiver q
Push PC(1156)
LoadVar q
DelVar q
Apply
StoreVar v
ReadonlyInc
AtomicInc(lazy)
LoadVar v
DelVar v
Push { 1, 2, None }
2-ary in
Assert
AtomicDec
ReadonlyDec
Return
Push PC(1088)
Push ()
Apply
Store demoq
Push PC(1215)
Push ()
Push 0
Push ?demoq
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push ()
Spawn
Push PC(1215)
Push ()
Push 0
Push ?demoq
3-ary DictAdd
Push 1
Push 2
3-ary DictAdd
Push ()
Spawn
Push PC(1230)
Push ?demoq
Push ()
Spawn
Push PC(1230)
Push ?demoq
Push ()
Spawn
Return
DelVar result
```

Duration: 0.0013822

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store queue
Push ()
Store synch
Push ()
Store list
Jump 371
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n9
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s12
LoadVar $s12
1-ary IsEmpty
JumpCond True 33
Cut($s12, x)
LoadVar $n9
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n9
Jump 21
DelVar $n9
DelVar $s12
DelVar s
StoreVar result
Return
Jump 371
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 371
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 371
Frame tail s
DelVar result
Push PC(8)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 371
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s69
LoadVar $s69
1-ary IsEmpty
JumpCond True 98
Cut($s69, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 87
DelVar $s69
Return
Jump 371
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s84
LoadVar $s84
1-ary IsEmpty
JumpCond True 115
Cut($s84, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 107
DelVar $s84
StoreVar result
Return
Jump 371
Frame list a
DelVar result
Push 0
StoreVar $n97
Push ()
LoadVar a
DelVar a
StoreVar $s100
LoadVar $s100
1-ary IsEmpty
JumpCond True 137
Cut($s100, v)
LoadVar $n97
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n97
Jump 127
DelVar $n97
DelVar $s100
StoreVar result
Return
Jump 371
Frame values d
DelVar result
Push 0
StoreVar $n115
Push ()
LoadVar d
1-ary keys
StoreVar $s118
LoadVar $s118
1-ary IsEmpty
JumpCond True 162
Cut($s118, k)
LoadVar $n115
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n115
Jump 150
DelVar $n115
DelVar $s118
DelVar d
StoreVar result
Return
Jump 371
Frame items d
DelVar result
Push 0
StoreVar $n136
Push ()
LoadVar d
1-ary keys
StoreVar $s139
LoadVar $s139
1-ary IsEmpty
JumpCond True 194
Cut($s139, k)
LoadVar $n136
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n136
Jump 176
DelVar $n136
DelVar $s139
DelVar d
StoreVar result
Return
Jump 371
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s167
LoadVar $s167
1-ary IsEmpty
JumpCond True 236
Cut($s167, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 209
DelVar $s167
DelVar d
DelVar index
Return
Jump 371
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 251
DelVar a
Push ()
StoreVar result
Jump 326
Push ()
Push 0
Push PC(52)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(61)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n216
Push ()
LoadVar rest
StoreVar $s219
DelVar v
LoadVar $s219
1-ary IsEmpty
JumpCond True 284
Cut($s219, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 269
LoadVar $n216
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n216
Jump 269
DelVar $n216
DelVar $s219
StoreVar lower
Push 0
StoreVar $n235
Push ()
LoadVar rest
DelVar rest
StoreVar $s238
DelVar v
LoadVar $s238
1-ary IsEmpty
JumpCond True 308
Cut($s238, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 293
LoadVar $n235
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n235
Jump 293
DelVar $n235
DelVar $s238
StoreVar higher
Push PC(241)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(241)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 371
Frame sorted d
DelVar result
Push PC(241)
Push PC(119)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 371
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n281
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s284
LoadVar $s284
1-ary IsEmpty
JumpCond True 365
Cut($s284, i)
LoadVar $n281
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n281
Jump 351
DelVar $n281
DelVar $s284
DelVar d
DelVar n
StoreVar result
Return
Push ()
Store bag
Jump 1041
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1041
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s313
LoadVar $s313
1-ary IsEmpty
JumpCond True 395
Cut($s313, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 386
DelVar $s313
StoreVar result
Return
Jump 1041
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s329
LoadVar $s329
1-ary IsEmpty
JumpCond True 432
Cut($s329, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 425
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 406
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 406
DelVar $s329
Return
Jump 1041
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 458
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 462
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1041
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s393
LoadVar $s393
1-ary IsEmpty
JumpCond True 491
Cut($s393, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 480
DelVar $s393
Return
Jump 1041
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1041
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1041
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1041
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 568
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 574
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1041
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 601
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 602
Push False
JumpCond False 611
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 622
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1041
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 640
DelVar bg
DelVar k
Push {}
Push PC(374)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 725
Push PC(464)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 654
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 725
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 666
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 725
Push PC(494)
LoadVar bg
Apply
StoreVar hd
Push PC(576)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(625)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s570
LoadVar $s570
1-ary IsEmpty
JumpCond True 710
Cut($s570, x)
Push PC(539)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 694
DelVar $s570
DelVar hd
Push PC(625)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1041
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1041
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 756
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1041
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1041
Frame Lock ()
DelVar result
Push PC(761)
Push False
Apply
StoreVar result
Return
Jump 1041
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1041
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 792
Jump 795
ReadonlyDec
AtomicDec
Jump 785
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1041
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1041
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1041
Frame Condition ()
DelVar result
Push PC(374)
Push ()
Apply
StoreVar result
Return
Jump 1041
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(435)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(539)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 889
Push PC(435)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 890
Push False
JumpCond False 895
DelVar c
DelVar cnt
DelVar ctx
Jump 898
ReadonlyDec
AtomicDec
Jump 870
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1041
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(374)
Push ()
Apply
2-ary !=
JumpCond False 931
LoadVar c
Push PC(576)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(521)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1041
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(374)
Push ()
Apply
Store
AtomicDec
Return
Jump 1041
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1041
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 962
Jump 965
ReadonlyDec
AtomicDec
Jump 954
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1041
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1041
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1041
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1004
Jump 1007
ReadonlyDec
AtomicDec
Jump 995
ReadonlyDec
Push PC(52)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(61)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1041
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(39)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Push ()
Store alloc
Push ()
Store alloc.pool
Push 0
Store alloc.next
Jump 1246
Frame malloc v
DelVar result
AtomicInc(lazy)
Push ?alloc"pool"
Load alloc.next
Address
LoadVar v
DelVar v
Store
Push ?alloc"pool"
Load alloc.next
Address
StoreVar result
Load alloc.next
Push 1
2-ary +
Store alloc.next
AtomicDec
Return
Jump 1246
Frame free r
AtomicInc(lazy)
LoadVar r
DelVar r
Del
AtomicDec
Return
Jump 1246
Frame leak_check ()
ReadonlyInc
AtomicInc(lazy)
Load alloc.pool
Push ()
2-ary ==
Push "alloc_leak"
Assert2
AtomicDec
ReadonlyDec
Return
Jump 1246
Frame Queue ()
DelVar result
Push PC(1048)
Push { "next":None, "value":() }
Apply
StoreVar dummy
Push ()
Push "head"
LoadVar dummy
3-ary DictAdd
Push "tail"
LoadVar dummy
DelVar dummy
3-ary DictAdd
Push "hdlock"
Push PC(768)
Push ()
Apply
3-ary DictAdd
Push "tllock"
Push PC(768)
Push ()
Apply
3-ary DictAdd
StoreVar result
Return
Jump 1246
Frame put (q, v)
Push PC(1048)
Push ()
Push "value"
LoadVar v
DelVar v
3-ary DictAdd
Push "next"
Push None
3-ary DictAdd
Apply
StoreVar node
Push PC(784)
LoadVar q
Push "tllock"
Address
Apply
Pop
LoadVar q
Push "tail"
Address
Load
Push "next"
Address
LoadVar node
Store
LoadVar q
Push "tail"
Address
LoadVar node
DelVar node
Store
Push PC(803)
LoadVar q
DelVar q
Push "tllock"
Address
Apply
Pop
Return
Jump 1246
Frame get q
DelVar result
Push PC(784)
LoadVar q
Push "hdlock"
Address
Apply
Pop
LoadVar q
Push "head"
Address
Load
StoreVar dummy
LoadVar dummy
Push "next"
Address
Load
StoreVar node
LoadVar node
Push None
2-ary ==
JumpCond False 1190
DelVar dummy
DelVar node
Push None
StoreVar result
Push PC(803)
LoadVar q
DelVar q
Push "hdlock"
Address
Apply
Pop
Jump 1213
LoadVar node
Push "value"
Address
Load
StoreVar result
LoadVar q
Push "head"
Address
LoadVar node
DelVar node
Store
Push PC(803)
LoadVar q
DelVar q
Push "hdlock"
Address
Apply
Pop
Push PC(1068)
LoadVar dummy
DelVar dummy
Apply
Pop
Return
Jump 1246
Frame sender (q, v)
Push PC(1115)
Push ()
Push 0
LoadVar q
DelVar q
3-ary DictAdd
Push 1
LoadVar v
DelVar v
3-ary DictAdd
Apply
Pop
Return
Jump 1246
Frame receiver q
Push PC(1156)
LoadVar q
DelVar q
Apply
StoreVar v
ReadonlyInc
AtomicInc(lazy)
LoadVar v
DelVar v
Push { 1, 2, None }
2-ary in
Assert
AtomicDec
ReadonlyDec
Return
Push PC(1088)
Push ()
Apply
Store demoq
Push PC(1215)
Push ()
Push 0
Push ?demoq
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push ()
Spawn
Push PC(1215)
Push ()
Push 0
Push ?demoq
3-ary DictAdd
Push 1
Push 2
3-ary DictAdd
Push ()
Spawn
Push PC(1230)
Push ?demoq
Push ()
Spawn
Push PC(1230)
Push ?demoq
Push ()
Spawn
Return
DelVar result
```

Duration: 0.0013623999999999858

---
## -mqueue=queueMS -msynch=synchS code/queuedemo.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store queue
Push ()
Store synch
Push ()
Store list
Jump 801
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n9
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s12
LoadVar $s12
1-ary IsEmpty
JumpCond True 33
Cut($s12, x)
LoadVar $n9
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n9
Jump 21
DelVar $n9
DelVar $s12
DelVar s
StoreVar result
Return
Jump 801
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 801
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 801
Frame tail s
DelVar result
Push PC(8)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 801
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s69
LoadVar $s69
1-ary IsEmpty
JumpCond True 98
Cut($s69, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 87
DelVar $s69
Return
Jump 801
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s84
LoadVar $s84
1-ary IsEmpty
JumpCond True 115
Cut($s84, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 107
DelVar $s84
StoreVar result
Return
Jump 801
Frame list a
DelVar result
Push 0
StoreVar $n97
Push ()
LoadVar a
DelVar a
StoreVar $s100
LoadVar $s100
1-ary IsEmpty
JumpCond True 137
Cut($s100, v)
LoadVar $n97
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n97
Jump 127
DelVar $n97
DelVar $s100
StoreVar result
Return
Jump 801
Frame values d
DelVar result
Push 0
StoreVar $n115
Push ()
LoadVar d
1-ary keys
StoreVar $s118
LoadVar $s118
1-ary IsEmpty
JumpCond True 162
Cut($s118, k)
LoadVar $n115
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n115
Jump 150
DelVar $n115
DelVar $s118
DelVar d
StoreVar result
Return
Jump 801
Frame items d
DelVar result
Push 0
StoreVar $n136
Push ()
LoadVar d
1-ary keys
StoreVar $s139
LoadVar $s139
1-ary IsEmpty
JumpCond True 194
Cut($s139, k)
LoadVar $n136
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n136
Jump 176
DelVar $n136
DelVar $s139
DelVar d
StoreVar result
Return
Jump 801
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s167
LoadVar $s167
1-ary IsEmpty
JumpCond True 236
Cut($s167, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 209
DelVar $s167
DelVar d
DelVar index
Return
Jump 801
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 251
DelVar a
Push ()
StoreVar result
Jump 326
Push ()
Push 0
Push PC(52)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(61)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n216
Push ()
LoadVar rest
StoreVar $s219
DelVar v
LoadVar $s219
1-ary IsEmpty
JumpCond True 284
Cut($s219, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 269
LoadVar $n216
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n216
Jump 269
DelVar $n216
DelVar $s219
StoreVar lower
Push 0
StoreVar $n235
Push ()
LoadVar rest
DelVar rest
StoreVar $s238
DelVar v
LoadVar $s238
1-ary IsEmpty
JumpCond True 308
Cut($s238, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 293
LoadVar $n235
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n235
Jump 293
DelVar $n235
DelVar $s238
StoreVar higher
Push PC(241)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(241)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 801
Frame sorted d
DelVar result
Push PC(241)
Push PC(119)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 801
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n281
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s284
LoadVar $s284
1-ary IsEmpty
JumpCond True 365
Cut($s284, i)
LoadVar $n281
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n281
Jump 351
DelVar $n281
DelVar $s284
DelVar d
DelVar n
StoreVar result
Return
Jump 801
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 801
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 401
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 801
Frame BinSema acquired
DelVar result
Push ()
Push "acquired"
LoadVar acquired
DelVar acquired
3-ary DictAdd
Push "suspended"
Push ()
3-ary DictAdd
StoreVar result
Return
Jump 801
Frame Lock ()
DelVar result
Push PC(406)
Push False
Apply
StoreVar result
Return
Jump 801
Frame acquire binsema
AtomicInc(lazy)
LoadVar binsema
Push "acquired"
Address
Load
JumpCond False 457
LoadVar binsema
Push "suspended"
Address
LoadVar binsema
Push "suspended"
Address
Load
1-ary len
Address
Stop
Continue
Pop
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Load
Assert
AtomicDec
ReadonlyDec
Jump 463
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Push True
Store
AtomicDec
Return
Jump 801
Frame release binsema
AtomicInc(lazy)
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Push "acquired"
Address
Load
Assert
AtomicDec
ReadonlyDec
LoadVar binsema
Push "suspended"
Address
Load
Push ()
2-ary ==
JumpCond False 491
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Push False
Store
Jump 510
Push ()
Push PC(52)
LoadVar binsema
Push "suspended"
Address
Load
Apply
Go
LoadVar binsema
Push "suspended"
Address
Push PC(61)
LoadVar binsema
DelVar binsema
Push "suspended"
Address
Load
Apply
Store
AtomicDec
Return
Jump 801
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Load
StoreVar result
Return
Jump 801
Frame Condition ()
DelVar result
Push ()
StoreVar result
Return
Jump 801
Frame wait (c, lk)
AtomicInc(lazy)
Push PC(466)
LoadVar lk
Apply
Pop
LoadVar c
LoadVar c
DelVar c
Load
1-ary len
Address
Stop
Continue
Pop
AtomicDec
Push PC(427)
LoadVar lk
DelVar lk
Apply
Pop
Return
Jump 801
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push ()
2-ary !=
JumpCond False 572
Push ()
Push PC(52)
LoadVar c
Load
Apply
Go
LoadVar c
Push PC(61)
LoadVar c
DelVar c
Load
Apply
Store
DelVar c
AtomicDec
Return
Jump 801
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
Load
Push ()
2-ary !=
JumpCond False 596
Push ()
Push PC(52)
LoadVar c
Load
Apply
Go
LoadVar c
Push PC(61)
LoadVar c
Load
Apply
Store
Jump 578
DelVar c
AtomicDec
Return
Jump 801
Frame Semaphore cnt
DelVar result
Push ()
Push "count"
LoadVar cnt
DelVar cnt
3-ary DictAdd
Push "waiters"
Push ()
3-ary DictAdd
StoreVar result
Return
Jump 801
Frame P sema
AtomicInc(lazy)
LoadVar sema
Push "count"
Address
Load
Push 0
2-ary >
JumpCond False 632
LoadVar sema
DelVar sema
Push "count"
Address
Dup
Load
Push 1
2-ary -
Store
Jump 645
LoadVar sema
Push "waiters"
Address
LoadVar sema
DelVar sema
Push "waiters"
Address
Load
1-ary len
Address
Stop
Continue
Pop
AtomicDec
Return
Jump 801
Frame V sema
AtomicInc(lazy)
Push ()
Push 0
LoadVar sema
Push "count"
Address
Load
3-ary DictAdd
Push 1
LoadVar sema
Push "waiters"
Address
Load
3-ary DictAdd
StoreVar (cnt, waiters)
LoadVar waiters
Push ()
2-ary !=
JumpCond False 692
ReadonlyInc
AtomicInc(lazy)
LoadVar cnt
DelVar cnt
Push 0
2-ary ==
Assert
AtomicDec
ReadonlyDec
Push ()
LoadVar waiters
Push 0
Apply
Go
LoadVar sema
DelVar sema
Push "waiters"
Address
Push PC(61)
LoadVar waiters
DelVar waiters
Apply
Store
Jump 702
DelVar waiters
LoadVar sema
DelVar sema
Push "count"
Address
LoadVar cnt
DelVar cnt
Push 1
2-ary +
Store
AtomicDec
Return
Jump 801
Frame Queue ()
DelVar result
Push { "list":(), "waiters":() }
StoreVar result
Return
Jump 801
Frame get q
DelVar result
AtomicInc(lazy)
LoadVar q
Push "list"
Address
Load
Push ()
2-ary ==
JumpCond False 733
LoadVar q
Push "waiters"
Address
LoadVar q
Push "waiters"
Address
Load
1-ary len
Address
Stop
Continue
Pop
Push PC(52)
LoadVar q
Push "list"
Address
Load
Apply
StoreVar result
LoadVar q
Push "list"
Address
Push PC(61)
LoadVar q
DelVar q
Push "list"
Address
Load
Apply
Store
AtomicDec
Return
Jump 801
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push "list"
Address
Push PC(39)
Push ()
Push 0
LoadVar q
Push "list"
Address
Load
3-ary DictAdd
Push 1
LoadVar item
3-ary DictAdd
Apply
Store
LoadVar q
Push "waiters"
Address
Load
StoreVar waiters
LoadVar waiters
Push ()
2-ary !=
JumpCond False 796
LoadVar item
DelVar item
LoadVar waiters
Push 0
Apply
Go
LoadVar q
DelVar q
Push "waiters"
Address
Push PC(61)
LoadVar waiters
DelVar waiters
Apply
Store
DelVar item
DelVar q
DelVar waiters
AtomicDec
Return
Push ()
Store alloc
Push ()
Store alloc.pool
Push 0
Store alloc.next
Jump 1006
Frame malloc v
DelVar result
AtomicInc(lazy)
Push ?alloc"pool"
Load alloc.next
Address
LoadVar v
DelVar v
Store
Push ?alloc"pool"
Load alloc.next
Address
StoreVar result
Load alloc.next
Push 1
2-ary +
Store alloc.next
AtomicDec
Return
Jump 1006
Frame free r
AtomicInc(lazy)
LoadVar r
DelVar r
Del
AtomicDec
Return
Jump 1006
Frame leak_check ()
ReadonlyInc
AtomicInc(lazy)
Load alloc.pool
Push ()
2-ary ==
Push "alloc_leak"
Assert2
AtomicDec
ReadonlyDec
Return
Jump 1006
Frame Queue ()
DelVar result
Push PC(808)
Push { "next":None, "value":() }
Apply
StoreVar dummy
Push ()
Push "head"
LoadVar dummy
3-ary DictAdd
Push "tail"
LoadVar dummy
DelVar dummy
3-ary DictAdd
Push "hdlock"
Push PC(419)
Push ()
Apply
3-ary DictAdd
Push "tllock"
Push PC(419)
Push ()
Apply
3-ary DictAdd
StoreVar result
Return
Jump 1006
Frame put (q, v)
Push PC(808)
Push ()
Push "value"
LoadVar v
DelVar v
3-ary DictAdd
Push "next"
Push None
3-ary DictAdd
Apply
StoreVar node
Push PC(427)
LoadVar q
Push "tllock"
Address
Apply
Pop
LoadVar q
Push "tail"
Address
Load
Push "next"
Address
LoadVar node
Store
LoadVar q
Push "tail"
Address
LoadVar node
DelVar node
Store
Push PC(466)
LoadVar q
DelVar q
Push "tllock"
Address
Apply
Pop
Return
Jump 1006
Frame get q
DelVar result
Push PC(427)
LoadVar q
Push "hdlock"
Address
Apply
Pop
LoadVar q
Push "head"
Address
Load
StoreVar dummy
LoadVar dummy
Push "next"
Address
Load
StoreVar node
LoadVar node
Push None
2-ary ==
JumpCond False 950
DelVar dummy
DelVar node
Push None
StoreVar result
Push PC(466)
LoadVar q
DelVar q
Push "hdlock"
Address
Apply
Pop
Jump 973
LoadVar node
Push "value"
Address
Load
StoreVar result
LoadVar q
Push "head"
Address
LoadVar node
DelVar node
Store
Push PC(466)
LoadVar q
DelVar q
Push "hdlock"
Address
Apply
Pop
Push PC(828)
LoadVar dummy
DelVar dummy
Apply
Pop
Return
Jump 1006
Frame sender (q, v)
Push PC(875)
Push ()
Push 0
LoadVar q
DelVar q
3-ary DictAdd
Push 1
LoadVar v
DelVar v
3-ary DictAdd
Apply
Pop
Return
Jump 1006
Frame receiver q
Push PC(916)
LoadVar q
DelVar q
Apply
StoreVar v
ReadonlyInc
AtomicInc(lazy)
LoadVar v
DelVar v
Push { 1, 2, None }
2-ary in
Assert
AtomicDec
ReadonlyDec
Return
Push PC(848)
Push ()
Apply
Store demoq
Push PC(975)
Push ()
Push 0
Push ?demoq
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push ()
Spawn
Push PC(975)
Push ()
Push 0
Push ?demoq
3-ary DictAdd
Push 1
Push 2
3-ary DictAdd
Push ()
Spawn
Push PC(990)
Push ?demoq
Push ()
Spawn
Push PC(990)
Push ?demoq
Push ()
Spawn
Return
DelVar result
```

Duration: 0.0017630999999999897

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store queue
Push ()
Store synch
Push ()
Store list
Jump 801
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n9
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s12
LoadVar $s12
1-ary IsEmpty
JumpCond True 33
Cut($s12, x)
LoadVar $n9
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n9
Jump 21
DelVar $n9
DelVar $s12
DelVar s
StoreVar result
Return
Jump 801
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 801
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 801
Frame tail s
DelVar result
Push PC(8)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 801
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s69
LoadVar $s69
1-ary IsEmpty
JumpCond True 98
Cut($s69, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 87
DelVar $s69
Return
Jump 801
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s84
LoadVar $s84
1-ary IsEmpty
JumpCond True 115
Cut($s84, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 107
DelVar $s84
StoreVar result
Return
Jump 801
Frame list a
DelVar result
Push 0
StoreVar $n97
Push ()
LoadVar a
DelVar a
StoreVar $s100
LoadVar $s100
1-ary IsEmpty
JumpCond True 137
Cut($s100, v)
LoadVar $n97
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n97
Jump 127
DelVar $n97
DelVar $s100
StoreVar result
Return
Jump 801
Frame values d
DelVar result
Push 0
StoreVar $n115
Push ()
LoadVar d
1-ary keys
StoreVar $s118
LoadVar $s118
1-ary IsEmpty
JumpCond True 162
Cut($s118, k)
LoadVar $n115
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n115
Jump 150
DelVar $n115
DelVar $s118
DelVar d
StoreVar result
Return
Jump 801
Frame items d
DelVar result
Push 0
StoreVar $n136
Push ()
LoadVar d
1-ary keys
StoreVar $s139
LoadVar $s139
1-ary IsEmpty
JumpCond True 194
Cut($s139, k)
LoadVar $n136
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n136
Jump 176
DelVar $n136
DelVar $s139
DelVar d
StoreVar result
Return
Jump 801
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s167
LoadVar $s167
1-ary IsEmpty
JumpCond True 236
Cut($s167, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 209
DelVar $s167
DelVar d
DelVar index
Return
Jump 801
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 251
DelVar a
Push ()
StoreVar result
Jump 326
Push ()
Push 0
Push PC(52)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(61)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n216
Push ()
LoadVar rest
StoreVar $s219
DelVar v
LoadVar $s219
1-ary IsEmpty
JumpCond True 284
Cut($s219, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 269
LoadVar $n216
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n216
Jump 269
DelVar $n216
DelVar $s219
StoreVar lower
Push 0
StoreVar $n235
Push ()
LoadVar rest
DelVar rest
StoreVar $s238
DelVar v
LoadVar $s238
1-ary IsEmpty
JumpCond True 308
Cut($s238, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 293
LoadVar $n235
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n235
Jump 293
DelVar $n235
DelVar $s238
StoreVar higher
Push PC(241)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(241)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 801
Frame sorted d
DelVar result
Push PC(241)
Push PC(119)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 801
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n281
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s284
LoadVar $s284
1-ary IsEmpty
JumpCond True 365
Cut($s284, i)
LoadVar $n281
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n281
Jump 351
DelVar $n281
DelVar $s284
DelVar d
DelVar n
StoreVar result
Return
Jump 801
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 801
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 401
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 801
Frame BinSema acquired
DelVar result
Push ()
Push "acquired"
LoadVar acquired
DelVar acquired
3-ary DictAdd
Push "suspended"
Push ()
3-ary DictAdd
StoreVar result
Return
Jump 801
Frame Lock ()
DelVar result
Push PC(406)
Push False
Apply
StoreVar result
Return
Jump 801
Frame acquire binsema
AtomicInc(lazy)
LoadVar binsema
Push "acquired"
Address
Load
JumpCond False 457
LoadVar binsema
Push "suspended"
Address
LoadVar binsema
Push "suspended"
Address
Load
1-ary len
Address
Stop
Continue
Pop
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Load
Assert
AtomicDec
ReadonlyDec
Jump 463
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Push True
Store
AtomicDec
Return
Jump 801
Frame release binsema
AtomicInc(lazy)
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Push "acquired"
Address
Load
Assert
AtomicDec
ReadonlyDec
LoadVar binsema
Push "suspended"
Address
Load
Push ()
2-ary ==
JumpCond False 491
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Push False
Store
Jump 510
Push ()
Push PC(52)
LoadVar binsema
Push "suspended"
Address
Load
Apply
Go
LoadVar binsema
Push "suspended"
Address
Push PC(61)
LoadVar binsema
DelVar binsema
Push "suspended"
Address
Load
Apply
Store
AtomicDec
Return
Jump 801
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Load
StoreVar result
Return
Jump 801
Frame Condition ()
DelVar result
Push ()
StoreVar result
Return
Jump 801
Frame wait (c, lk)
AtomicInc(lazy)
Push PC(466)
LoadVar lk
Apply
Pop
LoadVar c
LoadVar c
DelVar c
Load
1-ary len
Address
Stop
Continue
Pop
AtomicDec
Push PC(427)
LoadVar lk
DelVar lk
Apply
Pop
Return
Jump 801
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push ()
2-ary !=
JumpCond False 572
Push ()
Push PC(52)
LoadVar c
Load
Apply
Go
LoadVar c
Push PC(61)
LoadVar c
DelVar c
Load
Apply
Store
DelVar c
AtomicDec
Return
Jump 801
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
Load
Push ()
2-ary !=
JumpCond False 596
Push ()
Push PC(52)
LoadVar c
Load
Apply
Go
LoadVar c
Push PC(61)
LoadVar c
Load
Apply
Store
Jump 578
DelVar c
AtomicDec
Return
Jump 801
Frame Semaphore cnt
DelVar result
Push ()
Push "count"
LoadVar cnt
DelVar cnt
3-ary DictAdd
Push "waiters"
Push ()
3-ary DictAdd
StoreVar result
Return
Jump 801
Frame P sema
AtomicInc(lazy)
LoadVar sema
Push "count"
Address
Load
Push 0
2-ary >
JumpCond False 632
LoadVar sema
DelVar sema
Push "count"
Address
Dup
Load
Push 1
2-ary -
Store
Jump 645
LoadVar sema
Push "waiters"
Address
LoadVar sema
DelVar sema
Push "waiters"
Address
Load
1-ary len
Address
Stop
Continue
Pop
AtomicDec
Return
Jump 801
Frame V sema
AtomicInc(lazy)
Push ()
Push 0
LoadVar sema
Push "count"
Address
Load
3-ary DictAdd
Push 1
LoadVar sema
Push "waiters"
Address
Load
3-ary DictAdd
StoreVar (cnt, waiters)
LoadVar waiters
Push ()
2-ary !=
JumpCond False 692
ReadonlyInc
AtomicInc(lazy)
LoadVar cnt
DelVar cnt
Push 0
2-ary ==
Assert
AtomicDec
ReadonlyDec
Push ()
LoadVar waiters
Push 0
Apply
Go
LoadVar sema
DelVar sema
Push "waiters"
Address
Push PC(61)
LoadVar waiters
DelVar waiters
Apply
Store
Jump 702
DelVar waiters
LoadVar sema
DelVar sema
Push "count"
Address
LoadVar cnt
DelVar cnt
Push 1
2-ary +
Store
AtomicDec
Return
Jump 801
Frame Queue ()
DelVar result
Push { "list":(), "waiters":() }
StoreVar result
Return
Jump 801
Frame get q
DelVar result
AtomicInc(lazy)
LoadVar q
Push "list"
Address
Load
Push ()
2-ary ==
JumpCond False 733
LoadVar q
Push "waiters"
Address
LoadVar q
Push "waiters"
Address
Load
1-ary len
Address
Stop
Continue
Pop
Push PC(52)
LoadVar q
Push "list"
Address
Load
Apply
StoreVar result
LoadVar q
Push "list"
Address
Push PC(61)
LoadVar q
DelVar q
Push "list"
Address
Load
Apply
Store
AtomicDec
Return
Jump 801
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push "list"
Address
Push PC(39)
Push ()
Push 0
LoadVar q
Push "list"
Address
Load
3-ary DictAdd
Push 1
LoadVar item
3-ary DictAdd
Apply
Store
LoadVar q
Push "waiters"
Address
Load
StoreVar waiters
LoadVar waiters
Push ()
2-ary !=
JumpCond False 796
LoadVar item
DelVar item
LoadVar waiters
Push 0
Apply
Go
LoadVar q
DelVar q
Push "waiters"
Address
Push PC(61)
LoadVar waiters
DelVar waiters
Apply
Store
DelVar item
DelVar q
DelVar waiters
AtomicDec
Return
Push ()
Store alloc
Push ()
Store alloc.pool
Push 0
Store alloc.next
Jump 1006
Frame malloc v
DelVar result
AtomicInc(lazy)
Push ?alloc"pool"
Load alloc.next
Address
LoadVar v
DelVar v
Store
Push ?alloc"pool"
Load alloc.next
Address
StoreVar result
Load alloc.next
Push 1
2-ary +
Store alloc.next
AtomicDec
Return
Jump 1006
Frame free r
AtomicInc(lazy)
LoadVar r
DelVar r
Del
AtomicDec
Return
Jump 1006
Frame leak_check ()
ReadonlyInc
AtomicInc(lazy)
Load alloc.pool
Push ()
2-ary ==
Push "alloc_leak"
Assert2
AtomicDec
ReadonlyDec
Return
Jump 1006
Frame Queue ()
DelVar result
Push PC(808)
Push { "next":None, "value":() }
Apply
StoreVar dummy
Push ()
Push "head"
LoadVar dummy
3-ary DictAdd
Push "tail"
LoadVar dummy
DelVar dummy
3-ary DictAdd
Push "hdlock"
Push PC(419)
Push ()
Apply
3-ary DictAdd
Push "tllock"
Push PC(419)
Push ()
Apply
3-ary DictAdd
StoreVar result
Return
Jump 1006
Frame put (q, v)
Push PC(808)
Push ()
Push "value"
LoadVar v
DelVar v
3-ary DictAdd
Push "next"
Push None
3-ary DictAdd
Apply
StoreVar node
Push PC(427)
LoadVar q
Push "tllock"
Address
Apply
Pop
LoadVar q
Push "tail"
Address
Load
Push "next"
Address
LoadVar node
Store
LoadVar q
Push "tail"
Address
LoadVar node
DelVar node
Store
Push PC(466)
LoadVar q
DelVar q
Push "tllock"
Address
Apply
Pop
Return
Jump 1006
Frame get q
DelVar result
Push PC(427)
LoadVar q
Push "hdlock"
Address
Apply
Pop
LoadVar q
Push "head"
Address
Load
StoreVar dummy
LoadVar dummy
Push "next"
Address
Load
StoreVar node
LoadVar node
Push None
2-ary ==
JumpCond False 950
DelVar dummy
DelVar node
Push None
StoreVar result
Push PC(466)
LoadVar q
DelVar q
Push "hdlock"
Address
Apply
Pop
Jump 973
LoadVar node
Push "value"
Address
Load
StoreVar result
LoadVar q
Push "head"
Address
LoadVar node
DelVar node
Store
Push PC(466)
LoadVar q
DelVar q
Push "hdlock"
Address
Apply
Pop
Push PC(828)
LoadVar dummy
DelVar dummy
Apply
Pop
Return
Jump 1006
Frame sender (q, v)
Push PC(875)
Push ()
Push 0
LoadVar q
DelVar q
3-ary DictAdd
Push 1
LoadVar v
DelVar v
3-ary DictAdd
Apply
Pop
Return
Jump 1006
Frame receiver q
Push PC(916)
LoadVar q
DelVar q
Apply
StoreVar v
ReadonlyInc
AtomicInc(lazy)
LoadVar v
DelVar v
Push { 1, 2, None }
2-ary in
Assert
AtomicDec
ReadonlyDec
Return
Push PC(848)
Push ()
Apply
Store demoq
Push PC(975)
Push ()
Push 0
Push ?demoq
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push ()
Spawn
Push PC(975)
Push ()
Push 0
Push ?demoq
3-ary DictAdd
Push 1
Push 2
3-ary DictAdd
Push ()
Spawn
Push PC(990)
Push ?demoq
Push ()
Spawn
Push PC(990)
Push ?demoq
Push ()
Spawn
Return
DelVar result
```

Duration: 0.0012976000000000099

---
##  code/RWtest.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store RW
Jump 90
Frame RWlock ()
DelVar result
Push { "nreaders":0, "nwriters":0 }
StoreVar result
Return
Jump 90
Frame read_acquire rw
AtomicInc(lazy)
ReadonlyInc
LoadVar rw
Push "nwriters"
Address
Load
Push 0
2-ary ==
JumpCond False 21
Jump 24
ReadonlyDec
AtomicDec
Jump 11
ReadonlyDec
LoadVar rw
DelVar rw
Push "nreaders"
Address
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 90
Frame read_release rw
AtomicInc(lazy)
LoadVar rw
DelVar rw
Push "nreaders"
Address
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 90
Frame write_acquire rw
AtomicInc(lazy)
ReadonlyInc
LoadVar rw
Push "nreaders"
Address
Load
LoadVar rw
Push "nwriters"
Address
Load
2-ary +
Push 0
2-ary ==
JumpCond False 67
Jump 70
ReadonlyDec
AtomicDec
Jump 52
ReadonlyDec
LoadVar rw
DelVar rw
Push "nwriters"
Address
Push 1
Store
AtomicDec
Return
Jump 90
Frame write_release rw
AtomicInc(lazy)
LoadVar rw
DelVar rw
Push "nwriters"
Address
Push 0
Store
AtomicDec
Return
Push PC(4)
Push ()
Apply
Store rw
Jump 159
Frame thread ()
Push { False, True }
Choose
JumpCond False 158
Push { "read", "write" }
Choose
Push "read"
2-ary ==
JumpCond False 131
Push PC(10)
Push ?rw
Apply
Pop
AtomicInc(eager)
ReadonlyInc
AtomicInc(lazy)
Push PC(108)
1-ary countLabel
Push 1
2-ary >=
JumpCond False 121
Push PC(135)
1-ary countLabel
Push 0
2-ary ==
Jump 122
Push False
Assert
AtomicDec
ReadonlyDec
AtomicDec
Push PC(37)
Push ?rw
Apply
Pop
Jump 96
Push PC(51)
Push ?rw
Apply
Pop
AtomicInc(eager)
ReadonlyInc
AtomicInc(lazy)
Push PC(108)
1-ary countLabel
Push 0
2-ary ==
JumpCond False 148
Push PC(135)
1-ary countLabel
Push 1
2-ary ==
Jump 149
Push False
Assert
AtomicDec
ReadonlyDec
AtomicDec
Push PC(80)
Push ?rw
Apply
Pop
Jump 96
Return
Push { 1, 2, 3 }
StoreVar $s154
LoadVar $s154
1-ary IsEmpty
JumpCond True 171
Cut($s154, i)
DelVar i
Push PC(95)
Push ()
Push ()
Spawn
Jump 161
DelVar $s154
Return
DelVar result
```

Duration: 0.0014452000000000076

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store RW
Jump 90
Frame RWlock ()
DelVar result
Push { "nreaders":0, "nwriters":0 }
StoreVar result
Return
Jump 90
Frame read_acquire rw
AtomicInc(lazy)
ReadonlyInc
LoadVar rw
Push "nwriters"
Address
Load
Push 0
2-ary ==
JumpCond False 21
Jump 24
ReadonlyDec
AtomicDec
Jump 11
ReadonlyDec
LoadVar rw
DelVar rw
Push "nreaders"
Address
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 90
Frame read_release rw
AtomicInc(lazy)
LoadVar rw
DelVar rw
Push "nreaders"
Address
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 90
Frame write_acquire rw
AtomicInc(lazy)
ReadonlyInc
LoadVar rw
Push "nreaders"
Address
Load
LoadVar rw
Push "nwriters"
Address
Load
2-ary +
Push 0
2-ary ==
JumpCond False 67
Jump 70
ReadonlyDec
AtomicDec
Jump 52
ReadonlyDec
LoadVar rw
DelVar rw
Push "nwriters"
Address
Push 1
Store
AtomicDec
Return
Jump 90
Frame write_release rw
AtomicInc(lazy)
LoadVar rw
DelVar rw
Push "nwriters"
Address
Push 0
Store
AtomicDec
Return
Push PC(4)
Push ()
Apply
Store rw
Jump 159
Frame thread ()
Push { False, True }
Choose
JumpCond False 158
Push { "read", "write" }
Choose
Push "read"
2-ary ==
JumpCond False 131
Push PC(10)
Push ?rw
Apply
Pop
AtomicInc(eager)
ReadonlyInc
AtomicInc(lazy)
Push PC(108)
1-ary countLabel
Push 1
2-ary >=
JumpCond False 121
Push PC(135)
1-ary countLabel
Push 0
2-ary ==
Jump 122
Push False
Assert
AtomicDec
ReadonlyDec
AtomicDec
Push PC(37)
Push ?rw
Apply
Pop
Jump 96
Push PC(51)
Push ?rw
Apply
Pop
AtomicInc(eager)
ReadonlyInc
AtomicInc(lazy)
Push PC(108)
1-ary countLabel
Push 0
2-ary ==
JumpCond False 148
Push PC(135)
1-ary countLabel
Push 1
2-ary ==
Jump 149
Push False
Assert
AtomicDec
ReadonlyDec
AtomicDec
Push PC(80)
Push ?rw
Apply
Pop
Jump 96
Return
Push { 1, 2, 3 }
StoreVar $s154
LoadVar $s154
1-ary IsEmpty
JumpCond True 171
Cut($s154, i)
DelVar i
Push PC(95)
Push ()
Push ()
Spawn
Jump 161
DelVar $s154
Return
DelVar result
```

Duration: 0.0015454000000000023

---
## -msynch=synchS code/RWtest.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store RW
Jump 90
Frame RWlock ()
DelVar result
Push { "nreaders":0, "nwriters":0 }
StoreVar result
Return
Jump 90
Frame read_acquire rw
AtomicInc(lazy)
ReadonlyInc
LoadVar rw
Push "nwriters"
Address
Load
Push 0
2-ary ==
JumpCond False 21
Jump 24
ReadonlyDec
AtomicDec
Jump 11
ReadonlyDec
LoadVar rw
DelVar rw
Push "nreaders"
Address
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 90
Frame read_release rw
AtomicInc(lazy)
LoadVar rw
DelVar rw
Push "nreaders"
Address
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 90
Frame write_acquire rw
AtomicInc(lazy)
ReadonlyInc
LoadVar rw
Push "nreaders"
Address
Load
LoadVar rw
Push "nwriters"
Address
Load
2-ary +
Push 0
2-ary ==
JumpCond False 67
Jump 70
ReadonlyDec
AtomicDec
Jump 52
ReadonlyDec
LoadVar rw
DelVar rw
Push "nwriters"
Address
Push 1
Store
AtomicDec
Return
Jump 90
Frame write_release rw
AtomicInc(lazy)
LoadVar rw
DelVar rw
Push "nwriters"
Address
Push 0
Store
AtomicDec
Return
Push PC(4)
Push ()
Apply
Store rw
Jump 159
Frame thread ()
Push { False, True }
Choose
JumpCond False 158
Push { "read", "write" }
Choose
Push "read"
2-ary ==
JumpCond False 131
Push PC(10)
Push ?rw
Apply
Pop
AtomicInc(eager)
ReadonlyInc
AtomicInc(lazy)
Push PC(108)
1-ary countLabel
Push 1
2-ary >=
JumpCond False 121
Push PC(135)
1-ary countLabel
Push 0
2-ary ==
Jump 122
Push False
Assert
AtomicDec
ReadonlyDec
AtomicDec
Push PC(37)
Push ?rw
Apply
Pop
Jump 96
Push PC(51)
Push ?rw
Apply
Pop
AtomicInc(eager)
ReadonlyInc
AtomicInc(lazy)
Push PC(108)
1-ary countLabel
Push 0
2-ary ==
JumpCond False 148
Push PC(135)
1-ary countLabel
Push 1
2-ary ==
Jump 149
Push False
Assert
AtomicDec
ReadonlyDec
AtomicDec
Push PC(80)
Push ?rw
Apply
Pop
Jump 96
Return
Push { 1, 2, 3 }
StoreVar $s154
LoadVar $s154
1-ary IsEmpty
JumpCond True 171
Cut($s154, i)
DelVar i
Push PC(95)
Push ()
Push ()
Spawn
Jump 161
DelVar $s154
Return
DelVar result
```

Duration: 0.0013088000000000266

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store RW
Jump 90
Frame RWlock ()
DelVar result
Push { "nreaders":0, "nwriters":0 }
StoreVar result
Return
Jump 90
Frame read_acquire rw
AtomicInc(lazy)
ReadonlyInc
LoadVar rw
Push "nwriters"
Address
Load
Push 0
2-ary ==
JumpCond False 21
Jump 24
ReadonlyDec
AtomicDec
Jump 11
ReadonlyDec
LoadVar rw
DelVar rw
Push "nreaders"
Address
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 90
Frame read_release rw
AtomicInc(lazy)
LoadVar rw
DelVar rw
Push "nreaders"
Address
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 90
Frame write_acquire rw
AtomicInc(lazy)
ReadonlyInc
LoadVar rw
Push "nreaders"
Address
Load
LoadVar rw
Push "nwriters"
Address
Load
2-ary +
Push 0
2-ary ==
JumpCond False 67
Jump 70
ReadonlyDec
AtomicDec
Jump 52
ReadonlyDec
LoadVar rw
DelVar rw
Push "nwriters"
Address
Push 1
Store
AtomicDec
Return
Jump 90
Frame write_release rw
AtomicInc(lazy)
LoadVar rw
DelVar rw
Push "nwriters"
Address
Push 0
Store
AtomicDec
Return
Push PC(4)
Push ()
Apply
Store rw
Jump 159
Frame thread ()
Push { False, True }
Choose
JumpCond False 158
Push { "read", "write" }
Choose
Push "read"
2-ary ==
JumpCond False 131
Push PC(10)
Push ?rw
Apply
Pop
AtomicInc(eager)
ReadonlyInc
AtomicInc(lazy)
Push PC(108)
1-ary countLabel
Push 1
2-ary >=
JumpCond False 121
Push PC(135)
1-ary countLabel
Push 0
2-ary ==
Jump 122
Push False
Assert
AtomicDec
ReadonlyDec
AtomicDec
Push PC(37)
Push ?rw
Apply
Pop
Jump 96
Push PC(51)
Push ?rw
Apply
Pop
AtomicInc(eager)
ReadonlyInc
AtomicInc(lazy)
Push PC(108)
1-ary countLabel
Push 0
2-ary ==
JumpCond False 148
Push PC(135)
1-ary countLabel
Push 1
2-ary ==
Jump 149
Push False
Assert
AtomicDec
ReadonlyDec
AtomicDec
Push PC(80)
Push ?rw
Apply
Pop
Jump 96
Return
Push { 1, 2, 3 }
StoreVar $s154
LoadVar $s154
1-ary IsEmpty
JumpCond True 171
Cut($s154, i)
DelVar i
Push PC(95)
Push ()
Push ()
Spawn
Jump 161
DelVar $s154
Return
DelVar result
```

Duration: 0.001291500000000001

---
## -mRW=RWsbs code/RWtest.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store RW
Push ()
Store synch
Push ()
Store list
Jump 371
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n9
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s12
LoadVar $s12
1-ary IsEmpty
JumpCond True 33
Cut($s12, x)
LoadVar $n9
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n9
Jump 21
DelVar $n9
DelVar $s12
DelVar s
StoreVar result
Return
Jump 371
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 371
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 371
Frame tail s
DelVar result
Push PC(8)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 371
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s69
LoadVar $s69
1-ary IsEmpty
JumpCond True 98
Cut($s69, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 87
DelVar $s69
Return
Jump 371
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s84
LoadVar $s84
1-ary IsEmpty
JumpCond True 115
Cut($s84, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 107
DelVar $s84
StoreVar result
Return
Jump 371
Frame list a
DelVar result
Push 0
StoreVar $n97
Push ()
LoadVar a
DelVar a
StoreVar $s100
LoadVar $s100
1-ary IsEmpty
JumpCond True 137
Cut($s100, v)
LoadVar $n97
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n97
Jump 127
DelVar $n97
DelVar $s100
StoreVar result
Return
Jump 371
Frame values d
DelVar result
Push 0
StoreVar $n115
Push ()
LoadVar d
1-ary keys
StoreVar $s118
LoadVar $s118
1-ary IsEmpty
JumpCond True 162
Cut($s118, k)
LoadVar $n115
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n115
Jump 150
DelVar $n115
DelVar $s118
DelVar d
StoreVar result
Return
Jump 371
Frame items d
DelVar result
Push 0
StoreVar $n136
Push ()
LoadVar d
1-ary keys
StoreVar $s139
LoadVar $s139
1-ary IsEmpty
JumpCond True 194
Cut($s139, k)
LoadVar $n136
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n136
Jump 176
DelVar $n136
DelVar $s139
DelVar d
StoreVar result
Return
Jump 371
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s167
LoadVar $s167
1-ary IsEmpty
JumpCond True 236
Cut($s167, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 209
DelVar $s167
DelVar d
DelVar index
Return
Jump 371
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 251
DelVar a
Push ()
StoreVar result
Jump 326
Push ()
Push 0
Push PC(52)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(61)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n216
Push ()
LoadVar rest
StoreVar $s219
DelVar v
LoadVar $s219
1-ary IsEmpty
JumpCond True 284
Cut($s219, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 269
LoadVar $n216
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n216
Jump 269
DelVar $n216
DelVar $s219
StoreVar lower
Push 0
StoreVar $n235
Push ()
LoadVar rest
DelVar rest
StoreVar $s238
DelVar v
LoadVar $s238
1-ary IsEmpty
JumpCond True 308
Cut($s238, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 293
LoadVar $n235
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n235
Jump 293
DelVar $n235
DelVar $s238
StoreVar higher
Push PC(241)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(241)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 371
Frame sorted d
DelVar result
Push PC(241)
Push PC(119)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 371
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n281
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s284
LoadVar $s284
1-ary IsEmpty
JumpCond True 365
Cut($s284, i)
LoadVar $n281
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n281
Jump 351
DelVar $n281
DelVar $s284
DelVar d
DelVar n
StoreVar result
Return
Push ()
Store bag
Jump 1322
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1322
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s313
LoadVar $s313
1-ary IsEmpty
JumpCond True 395
Cut($s313, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 386
DelVar $s313
StoreVar result
Return
Jump 1322
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s329
LoadVar $s329
1-ary IsEmpty
JumpCond True 432
Cut($s329, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 425
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 406
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 406
DelVar $s329
Return
Jump 1322
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 458
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 462
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1322
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s393
LoadVar $s393
1-ary IsEmpty
JumpCond True 491
Cut($s393, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 480
DelVar $s393
Return
Jump 1322
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1322
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1322
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1322
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 568
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 574
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1322
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 601
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 602
Push False
JumpCond False 611
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 622
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1322
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 640
DelVar bg
DelVar k
Push {}
Push PC(374)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 725
Push PC(464)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 654
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 725
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 666
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 725
Push PC(494)
LoadVar bg
Apply
StoreVar hd
Push PC(576)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(625)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s570
LoadVar $s570
1-ary IsEmpty
JumpCond True 710
Cut($s570, x)
Push PC(539)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 694
DelVar $s570
DelVar hd
Push PC(625)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1322
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1322
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 756
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1322
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1322
Frame Lock ()
DelVar result
Push PC(761)
Push False
Apply
StoreVar result
Return
Jump 1322
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1322
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 792
Jump 795
ReadonlyDec
AtomicDec
Jump 785
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1322
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1322
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1322
Frame Condition ()
DelVar result
Push PC(374)
Push ()
Apply
StoreVar result
Return
Jump 1322
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(435)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(539)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 889
Push PC(435)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 890
Push False
JumpCond False 895
DelVar c
DelVar cnt
DelVar ctx
Jump 898
ReadonlyDec
AtomicDec
Jump 870
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1322
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(374)
Push ()
Apply
2-ary !=
JumpCond False 931
LoadVar c
Push PC(576)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(521)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1322
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(374)
Push ()
Apply
Store
AtomicDec
Return
Jump 1322
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1322
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 962
Jump 965
ReadonlyDec
AtomicDec
Jump 954
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1322
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1322
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1322
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1004
Jump 1007
ReadonlyDec
AtomicDec
Jump 995
ReadonlyDec
Push PC(52)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(61)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1322
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(39)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Jump 1322
Frame RWlock ()
DelVar result
Push ()
Push "nreaders"
Push 0
3-ary DictAdd
Push "nwriters"
Push 0
3-ary DictAdd
Push "mutex"
Push PC(761)
Push False
Apply
3-ary DictAdd
Push "r_gate"
Push ()
Push "sema"
Push PC(761)
Push True
Apply
3-ary DictAdd
Push "count"
Push 0
3-ary DictAdd
3-ary DictAdd
Push "w_gate"
Push ()
Push "sema"
Push PC(761)
Push True
Apply
3-ary DictAdd
Push "count"
Push 0
3-ary DictAdd
3-ary DictAdd
StoreVar result
Return
Jump 1322
Frame release_one rw
LoadVar rw
Push "nwriters"
Address
Load
Push 0
2-ary ==
JumpCond False 1098
LoadVar rw
Push "r_gate"
Address
Push "count"
Address
Load
Push 0
2-ary >
Jump 1099
Push False
JumpCond False 1110
Push PC(803)
LoadVar rw
DelVar rw
Push "r_gate"
Address
Push "sema"
Address
Apply
Pop
Jump 1150
LoadVar rw
Push "nreaders"
Address
Load
LoadVar rw
Push "nwriters"
Address
Load
2-ary +
Push 0
2-ary ==
JumpCond False 1131
LoadVar rw
Push "w_gate"
Address
Push "count"
Address
Load
Push 0
2-ary >
Jump 1132
Push False
JumpCond False 1143
Push PC(803)
LoadVar rw
DelVar rw
Push "w_gate"
Address
Push "sema"
Address
Apply
Pop
Jump 1150
Push PC(803)
LoadVar rw
DelVar rw
Push "mutex"
Address
Apply
Pop
Return
Jump 1322
Frame read_acquire rw
Push PC(784)
LoadVar rw
Push "mutex"
Address
Apply
Pop
LoadVar rw
Push "nwriters"
Address
Load
Push 0
2-ary >
JumpCond False 1198
LoadVar rw
Push "r_gate"
Address
Push "count"
Address
Dup
Load
Push 1
2-ary +
Store
Push PC(1081)
LoadVar rw
Apply
Pop
Push PC(784)
LoadVar rw
Push "r_gate"
Address
Push "sema"
Address
Apply
Pop
LoadVar rw
Push "r_gate"
Address
Push "count"
Address
Dup
Load
Push 1
2-ary -
Store
LoadVar rw
Push "nreaders"
Address
Dup
Load
Push 1
2-ary +
Store
Push PC(1081)
LoadVar rw
DelVar rw
Apply
Pop
Return
Jump 1322
Frame read_release rw
Push PC(784)
LoadVar rw
Push "mutex"
Address
Apply
Pop
LoadVar rw
Push "nreaders"
Address
Dup
Load
Push 1
2-ary -
Store
Push PC(1081)
LoadVar rw
DelVar rw
Apply
Pop
Return
Jump 1322
Frame write_acquire rw
Push PC(784)
LoadVar rw
Push "mutex"
Address
Apply
Pop
LoadVar rw
Push "nreaders"
Address
Load
LoadVar rw
Push "nwriters"
Address
Load
2-ary +
Push 0
2-ary >
JumpCond False 1286
LoadVar rw
Push "w_gate"
Address
Push "count"
Address
Dup
Load
Push 1
2-ary +
Store
Push PC(1081)
LoadVar rw
Apply
Pop
Push PC(784)
LoadVar rw
Push "w_gate"
Address
Push "sema"
Address
Apply
Pop
LoadVar rw
Push "w_gate"
Address
Push "count"
Address
Dup
Load
Push 1
2-ary -
Store
LoadVar rw
Push "nwriters"
Address
Dup
Load
Push 1
2-ary +
Store
Push PC(1081)
LoadVar rw
DelVar rw
Apply
Pop
Return
Jump 1322
Frame write_release rw
Push PC(784)
LoadVar rw
Push "mutex"
Address
Apply
Pop
LoadVar rw
Push "nwriters"
Address
Dup
Load
Push 1
2-ary -
Store
Push PC(1081)
LoadVar rw
DelVar rw
Apply
Pop
Return
Push PC(1042)
Push ()
Apply
Store rw
Jump 1391
Frame thread ()
Push { False, True }
Choose
JumpCond False 1390
Push { "read", "write" }
Choose
Push "read"
2-ary ==
JumpCond False 1363
Push PC(1152)
Push ?rw
Apply
Pop
AtomicInc(eager)
ReadonlyInc
AtomicInc(lazy)
Push PC(1340)
1-ary countLabel
Push 1
2-ary >=
JumpCond False 1353
Push PC(1367)
1-ary countLabel
Push 0
2-ary ==
Jump 1354
Push False
Assert
AtomicDec
ReadonlyDec
AtomicDec
Push PC(1213)
Push ?rw
Apply
Pop
Jump 1328
Push PC(1235)
Push ?rw
Apply
Pop
AtomicInc(eager)
ReadonlyInc
AtomicInc(lazy)
Push PC(1340)
1-ary countLabel
Push 0
2-ary ==
JumpCond False 1380
Push PC(1367)
1-ary countLabel
Push 1
2-ary ==
Jump 1381
Push False
Assert
AtomicDec
ReadonlyDec
AtomicDec
Push PC(1301)
Push ?rw
Apply
Pop
Jump 1328
Return
Push { 1, 2, 3 }
StoreVar $s1231
LoadVar $s1231
1-ary IsEmpty
JumpCond True 1403
Cut($s1231, i)
DelVar i
Push PC(1327)
Push ()
Push ()
Spawn
Jump 1393
DelVar $s1231
Return
DelVar result
```

Duration: 0.00194430000000001

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store RW
Push ()
Store synch
Push ()
Store list
Jump 371
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n9
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s12
LoadVar $s12
1-ary IsEmpty
JumpCond True 33
Cut($s12, x)
LoadVar $n9
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n9
Jump 21
DelVar $n9
DelVar $s12
DelVar s
StoreVar result
Return
Jump 371
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 371
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 371
Frame tail s
DelVar result
Push PC(8)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 371
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s69
LoadVar $s69
1-ary IsEmpty
JumpCond True 98
Cut($s69, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 87
DelVar $s69
Return
Jump 371
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s84
LoadVar $s84
1-ary IsEmpty
JumpCond True 115
Cut($s84, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 107
DelVar $s84
StoreVar result
Return
Jump 371
Frame list a
DelVar result
Push 0
StoreVar $n97
Push ()
LoadVar a
DelVar a
StoreVar $s100
LoadVar $s100
1-ary IsEmpty
JumpCond True 137
Cut($s100, v)
LoadVar $n97
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n97
Jump 127
DelVar $n97
DelVar $s100
StoreVar result
Return
Jump 371
Frame values d
DelVar result
Push 0
StoreVar $n115
Push ()
LoadVar d
1-ary keys
StoreVar $s118
LoadVar $s118
1-ary IsEmpty
JumpCond True 162
Cut($s118, k)
LoadVar $n115
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n115
Jump 150
DelVar $n115
DelVar $s118
DelVar d
StoreVar result
Return
Jump 371
Frame items d
DelVar result
Push 0
StoreVar $n136
Push ()
LoadVar d
1-ary keys
StoreVar $s139
LoadVar $s139
1-ary IsEmpty
JumpCond True 194
Cut($s139, k)
LoadVar $n136
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n136
Jump 176
DelVar $n136
DelVar $s139
DelVar d
StoreVar result
Return
Jump 371
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s167
LoadVar $s167
1-ary IsEmpty
JumpCond True 236
Cut($s167, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 209
DelVar $s167
DelVar d
DelVar index
Return
Jump 371
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 251
DelVar a
Push ()
StoreVar result
Jump 326
Push ()
Push 0
Push PC(52)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(61)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n216
Push ()
LoadVar rest
StoreVar $s219
DelVar v
LoadVar $s219
1-ary IsEmpty
JumpCond True 284
Cut($s219, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 269
LoadVar $n216
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n216
Jump 269
DelVar $n216
DelVar $s219
StoreVar lower
Push 0
StoreVar $n235
Push ()
LoadVar rest
DelVar rest
StoreVar $s238
DelVar v
LoadVar $s238
1-ary IsEmpty
JumpCond True 308
Cut($s238, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 293
LoadVar $n235
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n235
Jump 293
DelVar $n235
DelVar $s238
StoreVar higher
Push PC(241)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(241)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 371
Frame sorted d
DelVar result
Push PC(241)
Push PC(119)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 371
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n281
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s284
LoadVar $s284
1-ary IsEmpty
JumpCond True 365
Cut($s284, i)
LoadVar $n281
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n281
Jump 351
DelVar $n281
DelVar $s284
DelVar d
DelVar n
StoreVar result
Return
Push ()
Store bag
Jump 1322
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1322
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s313
LoadVar $s313
1-ary IsEmpty
JumpCond True 395
Cut($s313, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 386
DelVar $s313
StoreVar result
Return
Jump 1322
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s329
LoadVar $s329
1-ary IsEmpty
JumpCond True 432
Cut($s329, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 425
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 406
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 406
DelVar $s329
Return
Jump 1322
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 458
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 462
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1322
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s393
LoadVar $s393
1-ary IsEmpty
JumpCond True 491
Cut($s393, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 480
DelVar $s393
Return
Jump 1322
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1322
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1322
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1322
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 568
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 574
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1322
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 601
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 602
Push False
JumpCond False 611
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 622
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1322
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 640
DelVar bg
DelVar k
Push {}
Push PC(374)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 725
Push PC(464)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 654
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 725
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 666
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 725
Push PC(494)
LoadVar bg
Apply
StoreVar hd
Push PC(576)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(625)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s570
LoadVar $s570
1-ary IsEmpty
JumpCond True 710
Cut($s570, x)
Push PC(539)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 694
DelVar $s570
DelVar hd
Push PC(625)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1322
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1322
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 756
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1322
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1322
Frame Lock ()
DelVar result
Push PC(761)
Push False
Apply
StoreVar result
Return
Jump 1322
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1322
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 792
Jump 795
ReadonlyDec
AtomicDec
Jump 785
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1322
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1322
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1322
Frame Condition ()
DelVar result
Push PC(374)
Push ()
Apply
StoreVar result
Return
Jump 1322
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(435)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(539)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 889
Push PC(435)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 890
Push False
JumpCond False 895
DelVar c
DelVar cnt
DelVar ctx
Jump 898
ReadonlyDec
AtomicDec
Jump 870
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1322
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(374)
Push ()
Apply
2-ary !=
JumpCond False 931
LoadVar c
Push PC(576)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(521)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1322
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(374)
Push ()
Apply
Store
AtomicDec
Return
Jump 1322
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1322
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 962
Jump 965
ReadonlyDec
AtomicDec
Jump 954
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1322
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1322
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1322
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1004
Jump 1007
ReadonlyDec
AtomicDec
Jump 995
ReadonlyDec
Push PC(52)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(61)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1322
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(39)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Jump 1322
Frame RWlock ()
DelVar result
Push ()
Push "nreaders"
Push 0
3-ary DictAdd
Push "nwriters"
Push 0
3-ary DictAdd
Push "mutex"
Push PC(761)
Push False
Apply
3-ary DictAdd
Push "r_gate"
Push ()
Push "sema"
Push PC(761)
Push True
Apply
3-ary DictAdd
Push "count"
Push 0
3-ary DictAdd
3-ary DictAdd
Push "w_gate"
Push ()
Push "sema"
Push PC(761)
Push True
Apply
3-ary DictAdd
Push "count"
Push 0
3-ary DictAdd
3-ary DictAdd
StoreVar result
Return
Jump 1322
Frame release_one rw
LoadVar rw
Push "nwriters"
Address
Load
Push 0
2-ary ==
JumpCond False 1098
LoadVar rw
Push "r_gate"
Address
Push "count"
Address
Load
Push 0
2-ary >
Jump 1099
Push False
JumpCond False 1110
Push PC(803)
LoadVar rw
DelVar rw
Push "r_gate"
Address
Push "sema"
Address
Apply
Pop
Jump 1150
LoadVar rw
Push "nreaders"
Address
Load
LoadVar rw
Push "nwriters"
Address
Load
2-ary +
Push 0
2-ary ==
JumpCond False 1131
LoadVar rw
Push "w_gate"
Address
Push "count"
Address
Load
Push 0
2-ary >
Jump 1132
Push False
JumpCond False 1143
Push PC(803)
LoadVar rw
DelVar rw
Push "w_gate"
Address
Push "sema"
Address
Apply
Pop
Jump 1150
Push PC(803)
LoadVar rw
DelVar rw
Push "mutex"
Address
Apply
Pop
Return
Jump 1322
Frame read_acquire rw
Push PC(784)
LoadVar rw
Push "mutex"
Address
Apply
Pop
LoadVar rw
Push "nwriters"
Address
Load
Push 0
2-ary >
JumpCond False 1198
LoadVar rw
Push "r_gate"
Address
Push "count"
Address
Dup
Load
Push 1
2-ary +
Store
Push PC(1081)
LoadVar rw
Apply
Pop
Push PC(784)
LoadVar rw
Push "r_gate"
Address
Push "sema"
Address
Apply
Pop
LoadVar rw
Push "r_gate"
Address
Push "count"
Address
Dup
Load
Push 1
2-ary -
Store
LoadVar rw
Push "nreaders"
Address
Dup
Load
Push 1
2-ary +
Store
Push PC(1081)
LoadVar rw
DelVar rw
Apply
Pop
Return
Jump 1322
Frame read_release rw
Push PC(784)
LoadVar rw
Push "mutex"
Address
Apply
Pop
LoadVar rw
Push "nreaders"
Address
Dup
Load
Push 1
2-ary -
Store
Push PC(1081)
LoadVar rw
DelVar rw
Apply
Pop
Return
Jump 1322
Frame write_acquire rw
Push PC(784)
LoadVar rw
Push "mutex"
Address
Apply
Pop
LoadVar rw
Push "nreaders"
Address
Load
LoadVar rw
Push "nwriters"
Address
Load
2-ary +
Push 0
2-ary >
JumpCond False 1286
LoadVar rw
Push "w_gate"
Address
Push "count"
Address
Dup
Load
Push 1
2-ary +
Store
Push PC(1081)
LoadVar rw
Apply
Pop
Push PC(784)
LoadVar rw
Push "w_gate"
Address
Push "sema"
Address
Apply
Pop
LoadVar rw
Push "w_gate"
Address
Push "count"
Address
Dup
Load
Push 1
2-ary -
Store
LoadVar rw
Push "nwriters"
Address
Dup
Load
Push 1
2-ary +
Store
Push PC(1081)
LoadVar rw
DelVar rw
Apply
Pop
Return
Jump 1322
Frame write_release rw
Push PC(784)
LoadVar rw
Push "mutex"
Address
Apply
Pop
LoadVar rw
Push "nwriters"
Address
Dup
Load
Push 1
2-ary -
Store
Push PC(1081)
LoadVar rw
DelVar rw
Apply
Pop
Return
Push PC(1042)
Push ()
Apply
Store rw
Jump 1391
Frame thread ()
Push { False, True }
Choose
JumpCond False 1390
Push { "read", "write" }
Choose
Push "read"
2-ary ==
JumpCond False 1363
Push PC(1152)
Push ?rw
Apply
Pop
AtomicInc(eager)
ReadonlyInc
AtomicInc(lazy)
Push PC(1340)
1-ary countLabel
Push 1
2-ary >=
JumpCond False 1353
Push PC(1367)
1-ary countLabel
Push 0
2-ary ==
Jump 1354
Push False
Assert
AtomicDec
ReadonlyDec
AtomicDec
Push PC(1213)
Push ?rw
Apply
Pop
Jump 1328
Push PC(1235)
Push ?rw
Apply
Pop
AtomicInc(eager)
ReadonlyInc
AtomicInc(lazy)
Push PC(1340)
1-ary countLabel
Push 0
2-ary ==
JumpCond False 1380
Push PC(1367)
1-ary countLabel
Push 1
2-ary ==
Jump 1381
Push False
Assert
AtomicDec
ReadonlyDec
AtomicDec
Push PC(1301)
Push ?rw
Apply
Pop
Jump 1328
Return
Push { 1, 2, 3 }
StoreVar $s1231
LoadVar $s1231
1-ary IsEmpty
JumpCond True 1403
Cut($s1231, i)
DelVar i
Push PC(1327)
Push ()
Push ()
Spawn
Jump 1393
DelVar $s1231
Return
DelVar result
```

Duration: 0.0015292999999999835

---
## -mRW=RWsbs -msynch=synchS code/RWtest.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store RW
Push ()
Store synch
Push ()
Store list
Jump 1082
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n9
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s12
LoadVar $s12
1-ary IsEmpty
JumpCond True 33
Cut($s12, x)
LoadVar $n9
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n9
Jump 21
DelVar $n9
DelVar $s12
DelVar s
StoreVar result
Return
Jump 1082
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 1082
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 1082
Frame tail s
DelVar result
Push PC(8)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 1082
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s69
LoadVar $s69
1-ary IsEmpty
JumpCond True 98
Cut($s69, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 87
DelVar $s69
Return
Jump 1082
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s84
LoadVar $s84
1-ary IsEmpty
JumpCond True 115
Cut($s84, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 107
DelVar $s84
StoreVar result
Return
Jump 1082
Frame list a
DelVar result
Push 0
StoreVar $n97
Push ()
LoadVar a
DelVar a
StoreVar $s100
LoadVar $s100
1-ary IsEmpty
JumpCond True 137
Cut($s100, v)
LoadVar $n97
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n97
Jump 127
DelVar $n97
DelVar $s100
StoreVar result
Return
Jump 1082
Frame values d
DelVar result
Push 0
StoreVar $n115
Push ()
LoadVar d
1-ary keys
StoreVar $s118
LoadVar $s118
1-ary IsEmpty
JumpCond True 162
Cut($s118, k)
LoadVar $n115
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n115
Jump 150
DelVar $n115
DelVar $s118
DelVar d
StoreVar result
Return
Jump 1082
Frame items d
DelVar result
Push 0
StoreVar $n136
Push ()
LoadVar d
1-ary keys
StoreVar $s139
LoadVar $s139
1-ary IsEmpty
JumpCond True 194
Cut($s139, k)
LoadVar $n136
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n136
Jump 176
DelVar $n136
DelVar $s139
DelVar d
StoreVar result
Return
Jump 1082
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s167
LoadVar $s167
1-ary IsEmpty
JumpCond True 236
Cut($s167, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 209
DelVar $s167
DelVar d
DelVar index
Return
Jump 1082
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 251
DelVar a
Push ()
StoreVar result
Jump 326
Push ()
Push 0
Push PC(52)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(61)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n216
Push ()
LoadVar rest
StoreVar $s219
DelVar v
LoadVar $s219
1-ary IsEmpty
JumpCond True 284
Cut($s219, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 269
LoadVar $n216
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n216
Jump 269
DelVar $n216
DelVar $s219
StoreVar lower
Push 0
StoreVar $n235
Push ()
LoadVar rest
DelVar rest
StoreVar $s238
DelVar v
LoadVar $s238
1-ary IsEmpty
JumpCond True 308
Cut($s238, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 293
LoadVar $n235
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n235
Jump 293
DelVar $n235
DelVar $s238
StoreVar higher
Push PC(241)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(241)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 1082
Frame sorted d
DelVar result
Push PC(241)
Push PC(119)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 1082
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n281
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s284
LoadVar $s284
1-ary IsEmpty
JumpCond True 365
Cut($s284, i)
LoadVar $n281
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n281
Jump 351
DelVar $n281
DelVar $s284
DelVar d
DelVar n
StoreVar result
Return
Jump 1082
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1082
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 401
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1082
Frame BinSema acquired
DelVar result
Push ()
Push "acquired"
LoadVar acquired
DelVar acquired
3-ary DictAdd
Push "suspended"
Push ()
3-ary DictAdd
StoreVar result
Return
Jump 1082
Frame Lock ()
DelVar result
Push PC(406)
Push False
Apply
StoreVar result
Return
Jump 1082
Frame acquire binsema
AtomicInc(lazy)
LoadVar binsema
Push "acquired"
Address
Load
JumpCond False 457
LoadVar binsema
Push "suspended"
Address
LoadVar binsema
Push "suspended"
Address
Load
1-ary len
Address
Stop
Continue
Pop
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Load
Assert
AtomicDec
ReadonlyDec
Jump 463
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Push True
Store
AtomicDec
Return
Jump 1082
Frame release binsema
AtomicInc(lazy)
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Push "acquired"
Address
Load
Assert
AtomicDec
ReadonlyDec
LoadVar binsema
Push "suspended"
Address
Load
Push ()
2-ary ==
JumpCond False 491
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Push False
Store
Jump 510
Push ()
Push PC(52)
LoadVar binsema
Push "suspended"
Address
Load
Apply
Go
LoadVar binsema
Push "suspended"
Address
Push PC(61)
LoadVar binsema
DelVar binsema
Push "suspended"
Address
Load
Apply
Store
AtomicDec
Return
Jump 1082
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Load
StoreVar result
Return
Jump 1082
Frame Condition ()
DelVar result
Push ()
StoreVar result
Return
Jump 1082
Frame wait (c, lk)
AtomicInc(lazy)
Push PC(466)
LoadVar lk
Apply
Pop
LoadVar c
LoadVar c
DelVar c
Load
1-ary len
Address
Stop
Continue
Pop
AtomicDec
Push PC(427)
LoadVar lk
DelVar lk
Apply
Pop
Return
Jump 1082
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push ()
2-ary !=
JumpCond False 572
Push ()
Push PC(52)
LoadVar c
Load
Apply
Go
LoadVar c
Push PC(61)
LoadVar c
DelVar c
Load
Apply
Store
DelVar c
AtomicDec
Return
Jump 1082
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
Load
Push ()
2-ary !=
JumpCond False 596
Push ()
Push PC(52)
LoadVar c
Load
Apply
Go
LoadVar c
Push PC(61)
LoadVar c
Load
Apply
Store
Jump 578
DelVar c
AtomicDec
Return
Jump 1082
Frame Semaphore cnt
DelVar result
Push ()
Push "count"
LoadVar cnt
DelVar cnt
3-ary DictAdd
Push "waiters"
Push ()
3-ary DictAdd
StoreVar result
Return
Jump 1082
Frame P sema
AtomicInc(lazy)
LoadVar sema
Push "count"
Address
Load
Push 0
2-ary >
JumpCond False 632
LoadVar sema
DelVar sema
Push "count"
Address
Dup
Load
Push 1
2-ary -
Store
Jump 645
LoadVar sema
Push "waiters"
Address
LoadVar sema
DelVar sema
Push "waiters"
Address
Load
1-ary len
Address
Stop
Continue
Pop
AtomicDec
Return
Jump 1082
Frame V sema
AtomicInc(lazy)
Push ()
Push 0
LoadVar sema
Push "count"
Address
Load
3-ary DictAdd
Push 1
LoadVar sema
Push "waiters"
Address
Load
3-ary DictAdd
StoreVar (cnt, waiters)
LoadVar waiters
Push ()
2-ary !=
JumpCond False 692
ReadonlyInc
AtomicInc(lazy)
LoadVar cnt
DelVar cnt
Push 0
2-ary ==
Assert
AtomicDec
ReadonlyDec
Push ()
LoadVar waiters
Push 0
Apply
Go
LoadVar sema
DelVar sema
Push "waiters"
Address
Push PC(61)
LoadVar waiters
DelVar waiters
Apply
Store
Jump 702
DelVar waiters
LoadVar sema
DelVar sema
Push "count"
Address
LoadVar cnt
DelVar cnt
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1082
Frame Queue ()
DelVar result
Push { "list":(), "waiters":() }
StoreVar result
Return
Jump 1082
Frame get q
DelVar result
AtomicInc(lazy)
LoadVar q
Push "list"
Address
Load
Push ()
2-ary ==
JumpCond False 733
LoadVar q
Push "waiters"
Address
LoadVar q
Push "waiters"
Address
Load
1-ary len
Address
Stop
Continue
Pop
Push PC(52)
LoadVar q
Push "list"
Address
Load
Apply
StoreVar result
LoadVar q
Push "list"
Address
Push PC(61)
LoadVar q
DelVar q
Push "list"
Address
Load
Apply
Store
AtomicDec
Return
Jump 1082
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push "list"
Address
Push PC(39)
Push ()
Push 0
LoadVar q
Push "list"
Address
Load
3-ary DictAdd
Push 1
LoadVar item
3-ary DictAdd
Apply
Store
LoadVar q
Push "waiters"
Address
Load
StoreVar waiters
LoadVar waiters
Push ()
2-ary !=
JumpCond False 796
LoadVar item
DelVar item
LoadVar waiters
Push 0
Apply
Go
LoadVar q
DelVar q
Push "waiters"
Address
Push PC(61)
LoadVar waiters
DelVar waiters
Apply
Store
DelVar item
DelVar q
DelVar waiters
AtomicDec
Return
Jump 1082
Frame RWlock ()
DelVar result
Push ()
Push "nreaders"
Push 0
3-ary DictAdd
Push "nwriters"
Push 0
3-ary DictAdd
Push "mutex"
Push PC(406)
Push False
Apply
3-ary DictAdd
Push "r_gate"
Push ()
Push "sema"
Push PC(406)
Push True
Apply
3-ary DictAdd
Push "count"
Push 0
3-ary DictAdd
3-ary DictAdd
Push "w_gate"
Push ()
Push "sema"
Push PC(406)
Push True
Apply
3-ary DictAdd
Push "count"
Push 0
3-ary DictAdd
3-ary DictAdd
StoreVar result
Return
Jump 1082
Frame release_one rw
LoadVar rw
Push "nwriters"
Address
Load
Push 0
2-ary ==
JumpCond False 858
LoadVar rw
Push "r_gate"
Address
Push "count"
Address
Load
Push 0
2-ary >
Jump 859
Push False
JumpCond False 870
Push PC(466)
LoadVar rw
DelVar rw
Push "r_gate"
Address
Push "sema"
Address
Apply
Pop
Jump 910
LoadVar rw
Push "nreaders"
Address
Load
LoadVar rw
Push "nwriters"
Address
Load
2-ary +
Push 0
2-ary ==
JumpCond False 891
LoadVar rw
Push "w_gate"
Address
Push "count"
Address
Load
Push 0
2-ary >
Jump 892
Push False
JumpCond False 903
Push PC(466)
LoadVar rw
DelVar rw
Push "w_gate"
Address
Push "sema"
Address
Apply
Pop
Jump 910
Push PC(466)
LoadVar rw
DelVar rw
Push "mutex"
Address
Apply
Pop
Return
Jump 1082
Frame read_acquire rw
Push PC(427)
LoadVar rw
Push "mutex"
Address
Apply
Pop
LoadVar rw
Push "nwriters"
Address
Load
Push 0
2-ary >
JumpCond False 958
LoadVar rw
Push "r_gate"
Address
Push "count"
Address
Dup
Load
Push 1
2-ary +
Store
Push PC(841)
LoadVar rw
Apply
Pop
Push PC(427)
LoadVar rw
Push "r_gate"
Address
Push "sema"
Address
Apply
Pop
LoadVar rw
Push "r_gate"
Address
Push "count"
Address
Dup
Load
Push 1
2-ary -
Store
LoadVar rw
Push "nreaders"
Address
Dup
Load
Push 1
2-ary +
Store
Push PC(841)
LoadVar rw
DelVar rw
Apply
Pop
Return
Jump 1082
Frame read_release rw
Push PC(427)
LoadVar rw
Push "mutex"
Address
Apply
Pop
LoadVar rw
Push "nreaders"
Address
Dup
Load
Push 1
2-ary -
Store
Push PC(841)
LoadVar rw
DelVar rw
Apply
Pop
Return
Jump 1082
Frame write_acquire rw
Push PC(427)
LoadVar rw
Push "mutex"
Address
Apply
Pop
LoadVar rw
Push "nreaders"
Address
Load
LoadVar rw
Push "nwriters"
Address
Load
2-ary +
Push 0
2-ary >
JumpCond False 1046
LoadVar rw
Push "w_gate"
Address
Push "count"
Address
Dup
Load
Push 1
2-ary +
Store
Push PC(841)
LoadVar rw
Apply
Pop
Push PC(427)
LoadVar rw
Push "w_gate"
Address
Push "sema"
Address
Apply
Pop
LoadVar rw
Push "w_gate"
Address
Push "count"
Address
Dup
Load
Push 1
2-ary -
Store
LoadVar rw
Push "nwriters"
Address
Dup
Load
Push 1
2-ary +
Store
Push PC(841)
LoadVar rw
DelVar rw
Apply
Pop
Return
Jump 1082
Frame write_release rw
Push PC(427)
LoadVar rw
Push "mutex"
Address
Apply
Pop
LoadVar rw
Push "nwriters"
Address
Dup
Load
Push 1
2-ary -
Store
Push PC(841)
LoadVar rw
DelVar rw
Apply
Pop
Return
Push PC(802)
Push ()
Apply
Store rw
Jump 1151
Frame thread ()
Push { False, True }
Choose
JumpCond False 1150
Push { "read", "write" }
Choose
Push "read"
2-ary ==
JumpCond False 1123
Push PC(912)
Push ?rw
Apply
Pop
AtomicInc(eager)
ReadonlyInc
AtomicInc(lazy)
Push PC(1100)
1-ary countLabel
Push 1
2-ary >=
JumpCond False 1113
Push PC(1127)
1-ary countLabel
Push 0
2-ary ==
Jump 1114
Push False
Assert
AtomicDec
ReadonlyDec
AtomicDec
Push PC(973)
Push ?rw
Apply
Pop
Jump 1088
Push PC(995)
Push ?rw
Apply
Pop
AtomicInc(eager)
ReadonlyInc
AtomicInc(lazy)
Push PC(1100)
1-ary countLabel
Push 0
2-ary ==
JumpCond False 1140
Push PC(1127)
1-ary countLabel
Push 1
2-ary ==
Jump 1141
Push False
Assert
AtomicDec
ReadonlyDec
AtomicDec
Push PC(1061)
Push ?rw
Apply
Pop
Jump 1088
Return
Push { 1, 2, 3 }
StoreVar $s1033
LoadVar $s1033
1-ary IsEmpty
JumpCond True 1163
Cut($s1033, i)
DelVar i
Push PC(1087)
Push ()
Push ()
Spawn
Jump 1153
DelVar $s1033
Return
DelVar result
```

Duration: 0.0019228000000000023

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store RW
Push ()
Store synch
Push ()
Store list
Jump 1082
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n9
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s12
LoadVar $s12
1-ary IsEmpty
JumpCond True 33
Cut($s12, x)
LoadVar $n9
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n9
Jump 21
DelVar $n9
DelVar $s12
DelVar s
StoreVar result
Return
Jump 1082
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 1082
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 1082
Frame tail s
DelVar result
Push PC(8)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 1082
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s69
LoadVar $s69
1-ary IsEmpty
JumpCond True 98
Cut($s69, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 87
DelVar $s69
Return
Jump 1082
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s84
LoadVar $s84
1-ary IsEmpty
JumpCond True 115
Cut($s84, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 107
DelVar $s84
StoreVar result
Return
Jump 1082
Frame list a
DelVar result
Push 0
StoreVar $n97
Push ()
LoadVar a
DelVar a
StoreVar $s100
LoadVar $s100
1-ary IsEmpty
JumpCond True 137
Cut($s100, v)
LoadVar $n97
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n97
Jump 127
DelVar $n97
DelVar $s100
StoreVar result
Return
Jump 1082
Frame values d
DelVar result
Push 0
StoreVar $n115
Push ()
LoadVar d
1-ary keys
StoreVar $s118
LoadVar $s118
1-ary IsEmpty
JumpCond True 162
Cut($s118, k)
LoadVar $n115
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n115
Jump 150
DelVar $n115
DelVar $s118
DelVar d
StoreVar result
Return
Jump 1082
Frame items d
DelVar result
Push 0
StoreVar $n136
Push ()
LoadVar d
1-ary keys
StoreVar $s139
LoadVar $s139
1-ary IsEmpty
JumpCond True 194
Cut($s139, k)
LoadVar $n136
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n136
Jump 176
DelVar $n136
DelVar $s139
DelVar d
StoreVar result
Return
Jump 1082
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s167
LoadVar $s167
1-ary IsEmpty
JumpCond True 236
Cut($s167, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 209
DelVar $s167
DelVar d
DelVar index
Return
Jump 1082
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 251
DelVar a
Push ()
StoreVar result
Jump 326
Push ()
Push 0
Push PC(52)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(61)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n216
Push ()
LoadVar rest
StoreVar $s219
DelVar v
LoadVar $s219
1-ary IsEmpty
JumpCond True 284
Cut($s219, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 269
LoadVar $n216
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n216
Jump 269
DelVar $n216
DelVar $s219
StoreVar lower
Push 0
StoreVar $n235
Push ()
LoadVar rest
DelVar rest
StoreVar $s238
DelVar v
LoadVar $s238
1-ary IsEmpty
JumpCond True 308
Cut($s238, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 293
LoadVar $n235
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n235
Jump 293
DelVar $n235
DelVar $s238
StoreVar higher
Push PC(241)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(241)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 1082
Frame sorted d
DelVar result
Push PC(241)
Push PC(119)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 1082
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n281
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s284
LoadVar $s284
1-ary IsEmpty
JumpCond True 365
Cut($s284, i)
LoadVar $n281
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n281
Jump 351
DelVar $n281
DelVar $s284
DelVar d
DelVar n
StoreVar result
Return
Jump 1082
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1082
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 401
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1082
Frame BinSema acquired
DelVar result
Push ()
Push "acquired"
LoadVar acquired
DelVar acquired
3-ary DictAdd
Push "suspended"
Push ()
3-ary DictAdd
StoreVar result
Return
Jump 1082
Frame Lock ()
DelVar result
Push PC(406)
Push False
Apply
StoreVar result
Return
Jump 1082
Frame acquire binsema
AtomicInc(lazy)
LoadVar binsema
Push "acquired"
Address
Load
JumpCond False 457
LoadVar binsema
Push "suspended"
Address
LoadVar binsema
Push "suspended"
Address
Load
1-ary len
Address
Stop
Continue
Pop
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Load
Assert
AtomicDec
ReadonlyDec
Jump 463
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Push True
Store
AtomicDec
Return
Jump 1082
Frame release binsema
AtomicInc(lazy)
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Push "acquired"
Address
Load
Assert
AtomicDec
ReadonlyDec
LoadVar binsema
Push "suspended"
Address
Load
Push ()
2-ary ==
JumpCond False 491
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Push False
Store
Jump 510
Push ()
Push PC(52)
LoadVar binsema
Push "suspended"
Address
Load
Apply
Go
LoadVar binsema
Push "suspended"
Address
Push PC(61)
LoadVar binsema
DelVar binsema
Push "suspended"
Address
Load
Apply
Store
AtomicDec
Return
Jump 1082
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Load
StoreVar result
Return
Jump 1082
Frame Condition ()
DelVar result
Push ()
StoreVar result
Return
Jump 1082
Frame wait (c, lk)
AtomicInc(lazy)
Push PC(466)
LoadVar lk
Apply
Pop
LoadVar c
LoadVar c
DelVar c
Load
1-ary len
Address
Stop
Continue
Pop
AtomicDec
Push PC(427)
LoadVar lk
DelVar lk
Apply
Pop
Return
Jump 1082
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push ()
2-ary !=
JumpCond False 572
Push ()
Push PC(52)
LoadVar c
Load
Apply
Go
LoadVar c
Push PC(61)
LoadVar c
DelVar c
Load
Apply
Store
DelVar c
AtomicDec
Return
Jump 1082
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
Load
Push ()
2-ary !=
JumpCond False 596
Push ()
Push PC(52)
LoadVar c
Load
Apply
Go
LoadVar c
Push PC(61)
LoadVar c
Load
Apply
Store
Jump 578
DelVar c
AtomicDec
Return
Jump 1082
Frame Semaphore cnt
DelVar result
Push ()
Push "count"
LoadVar cnt
DelVar cnt
3-ary DictAdd
Push "waiters"
Push ()
3-ary DictAdd
StoreVar result
Return
Jump 1082
Frame P sema
AtomicInc(lazy)
LoadVar sema
Push "count"
Address
Load
Push 0
2-ary >
JumpCond False 632
LoadVar sema
DelVar sema
Push "count"
Address
Dup
Load
Push 1
2-ary -
Store
Jump 645
LoadVar sema
Push "waiters"
Address
LoadVar sema
DelVar sema
Push "waiters"
Address
Load
1-ary len
Address
Stop
Continue
Pop
AtomicDec
Return
Jump 1082
Frame V sema
AtomicInc(lazy)
Push ()
Push 0
LoadVar sema
Push "count"
Address
Load
3-ary DictAdd
Push 1
LoadVar sema
Push "waiters"
Address
Load
3-ary DictAdd
StoreVar (cnt, waiters)
LoadVar waiters
Push ()
2-ary !=
JumpCond False 692
ReadonlyInc
AtomicInc(lazy)
LoadVar cnt
DelVar cnt
Push 0
2-ary ==
Assert
AtomicDec
ReadonlyDec
Push ()
LoadVar waiters
Push 0
Apply
Go
LoadVar sema
DelVar sema
Push "waiters"
Address
Push PC(61)
LoadVar waiters
DelVar waiters
Apply
Store
Jump 702
DelVar waiters
LoadVar sema
DelVar sema
Push "count"
Address
LoadVar cnt
DelVar cnt
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1082
Frame Queue ()
DelVar result
Push { "list":(), "waiters":() }
StoreVar result
Return
Jump 1082
Frame get q
DelVar result
AtomicInc(lazy)
LoadVar q
Push "list"
Address
Load
Push ()
2-ary ==
JumpCond False 733
LoadVar q
Push "waiters"
Address
LoadVar q
Push "waiters"
Address
Load
1-ary len
Address
Stop
Continue
Pop
Push PC(52)
LoadVar q
Push "list"
Address
Load
Apply
StoreVar result
LoadVar q
Push "list"
Address
Push PC(61)
LoadVar q
DelVar q
Push "list"
Address
Load
Apply
Store
AtomicDec
Return
Jump 1082
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push "list"
Address
Push PC(39)
Push ()
Push 0
LoadVar q
Push "list"
Address
Load
3-ary DictAdd
Push 1
LoadVar item
3-ary DictAdd
Apply
Store
LoadVar q
Push "waiters"
Address
Load
StoreVar waiters
LoadVar waiters
Push ()
2-ary !=
JumpCond False 796
LoadVar item
DelVar item
LoadVar waiters
Push 0
Apply
Go
LoadVar q
DelVar q
Push "waiters"
Address
Push PC(61)
LoadVar waiters
DelVar waiters
Apply
Store
DelVar item
DelVar q
DelVar waiters
AtomicDec
Return
Jump 1082
Frame RWlock ()
DelVar result
Push ()
Push "nreaders"
Push 0
3-ary DictAdd
Push "nwriters"
Push 0
3-ary DictAdd
Push "mutex"
Push PC(406)
Push False
Apply
3-ary DictAdd
Push "r_gate"
Push ()
Push "sema"
Push PC(406)
Push True
Apply
3-ary DictAdd
Push "count"
Push 0
3-ary DictAdd
3-ary DictAdd
Push "w_gate"
Push ()
Push "sema"
Push PC(406)
Push True
Apply
3-ary DictAdd
Push "count"
Push 0
3-ary DictAdd
3-ary DictAdd
StoreVar result
Return
Jump 1082
Frame release_one rw
LoadVar rw
Push "nwriters"
Address
Load
Push 0
2-ary ==
JumpCond False 858
LoadVar rw
Push "r_gate"
Address
Push "count"
Address
Load
Push 0
2-ary >
Jump 859
Push False
JumpCond False 870
Push PC(466)
LoadVar rw
DelVar rw
Push "r_gate"
Address
Push "sema"
Address
Apply
Pop
Jump 910
LoadVar rw
Push "nreaders"
Address
Load
LoadVar rw
Push "nwriters"
Address
Load
2-ary +
Push 0
2-ary ==
JumpCond False 891
LoadVar rw
Push "w_gate"
Address
Push "count"
Address
Load
Push 0
2-ary >
Jump 892
Push False
JumpCond False 903
Push PC(466)
LoadVar rw
DelVar rw
Push "w_gate"
Address
Push "sema"
Address
Apply
Pop
Jump 910
Push PC(466)
LoadVar rw
DelVar rw
Push "mutex"
Address
Apply
Pop
Return
Jump 1082
Frame read_acquire rw
Push PC(427)
LoadVar rw
Push "mutex"
Address
Apply
Pop
LoadVar rw
Push "nwriters"
Address
Load
Push 0
2-ary >
JumpCond False 958
LoadVar rw
Push "r_gate"
Address
Push "count"
Address
Dup
Load
Push 1
2-ary +
Store
Push PC(841)
LoadVar rw
Apply
Pop
Push PC(427)
LoadVar rw
Push "r_gate"
Address
Push "sema"
Address
Apply
Pop
LoadVar rw
Push "r_gate"
Address
Push "count"
Address
Dup
Load
Push 1
2-ary -
Store
LoadVar rw
Push "nreaders"
Address
Dup
Load
Push 1
2-ary +
Store
Push PC(841)
LoadVar rw
DelVar rw
Apply
Pop
Return
Jump 1082
Frame read_release rw
Push PC(427)
LoadVar rw
Push "mutex"
Address
Apply
Pop
LoadVar rw
Push "nreaders"
Address
Dup
Load
Push 1
2-ary -
Store
Push PC(841)
LoadVar rw
DelVar rw
Apply
Pop
Return
Jump 1082
Frame write_acquire rw
Push PC(427)
LoadVar rw
Push "mutex"
Address
Apply
Pop
LoadVar rw
Push "nreaders"
Address
Load
LoadVar rw
Push "nwriters"
Address
Load
2-ary +
Push 0
2-ary >
JumpCond False 1046
LoadVar rw
Push "w_gate"
Address
Push "count"
Address
Dup
Load
Push 1
2-ary +
Store
Push PC(841)
LoadVar rw
Apply
Pop
Push PC(427)
LoadVar rw
Push "w_gate"
Address
Push "sema"
Address
Apply
Pop
LoadVar rw
Push "w_gate"
Address
Push "count"
Address
Dup
Load
Push 1
2-ary -
Store
LoadVar rw
Push "nwriters"
Address
Dup
Load
Push 1
2-ary +
Store
Push PC(841)
LoadVar rw
DelVar rw
Apply
Pop
Return
Jump 1082
Frame write_release rw
Push PC(427)
LoadVar rw
Push "mutex"
Address
Apply
Pop
LoadVar rw
Push "nwriters"
Address
Dup
Load
Push 1
2-ary -
Store
Push PC(841)
LoadVar rw
DelVar rw
Apply
Pop
Return
Push PC(802)
Push ()
Apply
Store rw
Jump 1151
Frame thread ()
Push { False, True }
Choose
JumpCond False 1150
Push { "read", "write" }
Choose
Push "read"
2-ary ==
JumpCond False 1123
Push PC(912)
Push ?rw
Apply
Pop
AtomicInc(eager)
ReadonlyInc
AtomicInc(lazy)
Push PC(1100)
1-ary countLabel
Push 1
2-ary >=
JumpCond False 1113
Push PC(1127)
1-ary countLabel
Push 0
2-ary ==
Jump 1114
Push False
Assert
AtomicDec
ReadonlyDec
AtomicDec
Push PC(973)
Push ?rw
Apply
Pop
Jump 1088
Push PC(995)
Push ?rw
Apply
Pop
AtomicInc(eager)
ReadonlyInc
AtomicInc(lazy)
Push PC(1100)
1-ary countLabel
Push 0
2-ary ==
JumpCond False 1140
Push PC(1127)
1-ary countLabel
Push 1
2-ary ==
Jump 1141
Push False
Assert
AtomicDec
ReadonlyDec
AtomicDec
Push PC(1061)
Push ?rw
Apply
Pop
Jump 1088
Return
Push { 1, 2, 3 }
StoreVar $s1033
LoadVar $s1033
1-ary IsEmpty
JumpCond True 1163
Cut($s1033, i)
DelVar i
Push PC(1087)
Push ()
Push ()
Spawn
Jump 1153
DelVar $s1033
Return
DelVar result
```

Duration: 0.0016612000000000016

---
## -mRW=RWfair code/RWtest.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store RW
Push ()
Store synch
Push ()
Store list
Jump 371
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n9
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s12
LoadVar $s12
1-ary IsEmpty
JumpCond True 33
Cut($s12, x)
LoadVar $n9
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n9
Jump 21
DelVar $n9
DelVar $s12
DelVar s
StoreVar result
Return
Jump 371
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 371
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 371
Frame tail s
DelVar result
Push PC(8)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 371
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s69
LoadVar $s69
1-ary IsEmpty
JumpCond True 98
Cut($s69, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 87
DelVar $s69
Return
Jump 371
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s84
LoadVar $s84
1-ary IsEmpty
JumpCond True 115
Cut($s84, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 107
DelVar $s84
StoreVar result
Return
Jump 371
Frame list a
DelVar result
Push 0
StoreVar $n97
Push ()
LoadVar a
DelVar a
StoreVar $s100
LoadVar $s100
1-ary IsEmpty
JumpCond True 137
Cut($s100, v)
LoadVar $n97
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n97
Jump 127
DelVar $n97
DelVar $s100
StoreVar result
Return
Jump 371
Frame values d
DelVar result
Push 0
StoreVar $n115
Push ()
LoadVar d
1-ary keys
StoreVar $s118
LoadVar $s118
1-ary IsEmpty
JumpCond True 162
Cut($s118, k)
LoadVar $n115
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n115
Jump 150
DelVar $n115
DelVar $s118
DelVar d
StoreVar result
Return
Jump 371
Frame items d
DelVar result
Push 0
StoreVar $n136
Push ()
LoadVar d
1-ary keys
StoreVar $s139
LoadVar $s139
1-ary IsEmpty
JumpCond True 194
Cut($s139, k)
LoadVar $n136
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n136
Jump 176
DelVar $n136
DelVar $s139
DelVar d
StoreVar result
Return
Jump 371
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s167
LoadVar $s167
1-ary IsEmpty
JumpCond True 236
Cut($s167, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 209
DelVar $s167
DelVar d
DelVar index
Return
Jump 371
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 251
DelVar a
Push ()
StoreVar result
Jump 326
Push ()
Push 0
Push PC(52)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(61)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n216
Push ()
LoadVar rest
StoreVar $s219
DelVar v
LoadVar $s219
1-ary IsEmpty
JumpCond True 284
Cut($s219, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 269
LoadVar $n216
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n216
Jump 269
DelVar $n216
DelVar $s219
StoreVar lower
Push 0
StoreVar $n235
Push ()
LoadVar rest
DelVar rest
StoreVar $s238
DelVar v
LoadVar $s238
1-ary IsEmpty
JumpCond True 308
Cut($s238, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 293
LoadVar $n235
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n235
Jump 293
DelVar $n235
DelVar $s238
StoreVar higher
Push PC(241)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(241)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 371
Frame sorted d
DelVar result
Push PC(241)
Push PC(119)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 371
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n281
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s284
LoadVar $s284
1-ary IsEmpty
JumpCond True 365
Cut($s284, i)
LoadVar $n281
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n281
Jump 351
DelVar $n281
DelVar $s284
DelVar d
DelVar n
StoreVar result
Return
Push ()
Store bag
Jump 1359
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1359
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s313
LoadVar $s313
1-ary IsEmpty
JumpCond True 395
Cut($s313, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 386
DelVar $s313
StoreVar result
Return
Jump 1359
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s329
LoadVar $s329
1-ary IsEmpty
JumpCond True 432
Cut($s329, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 425
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 406
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 406
DelVar $s329
Return
Jump 1359
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 458
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 462
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1359
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s393
LoadVar $s393
1-ary IsEmpty
JumpCond True 491
Cut($s393, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 480
DelVar $s393
Return
Jump 1359
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1359
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1359
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1359
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 568
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 574
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1359
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 601
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 602
Push False
JumpCond False 611
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 622
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1359
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 640
DelVar bg
DelVar k
Push {}
Push PC(374)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 725
Push PC(464)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 654
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 725
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 666
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 725
Push PC(494)
LoadVar bg
Apply
StoreVar hd
Push PC(576)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(625)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s570
LoadVar $s570
1-ary IsEmpty
JumpCond True 710
Cut($s570, x)
Push PC(539)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 694
DelVar $s570
DelVar hd
Push PC(625)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1359
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1359
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 756
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1359
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1359
Frame Lock ()
DelVar result
Push PC(761)
Push False
Apply
StoreVar result
Return
Jump 1359
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1359
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 792
Jump 795
ReadonlyDec
AtomicDec
Jump 785
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1359
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1359
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1359
Frame Condition ()
DelVar result
Push PC(374)
Push ()
Apply
StoreVar result
Return
Jump 1359
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(435)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(539)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 889
Push PC(435)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 890
Push False
JumpCond False 895
DelVar c
DelVar cnt
DelVar ctx
Jump 898
ReadonlyDec
AtomicDec
Jump 870
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1359
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(374)
Push ()
Apply
2-ary !=
JumpCond False 931
LoadVar c
Push PC(576)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(521)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1359
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(374)
Push ()
Apply
Store
AtomicDec
Return
Jump 1359
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1359
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 962
Jump 965
ReadonlyDec
AtomicDec
Jump 954
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1359
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1359
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1359
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1004
Jump 1007
ReadonlyDec
AtomicDec
Jump 995
ReadonlyDec
Push PC(52)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(61)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1359
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(39)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Jump 1359
Frame RWlock ()
DelVar result
Push ()
Push "nreaders"
Push 0
3-ary DictAdd
Push "nwriters"
Push 0
3-ary DictAdd
Push "mutex"
Push PC(761)
Push False
Apply
3-ary DictAdd
Push "r_gate"
Push ()
Push "sema"
Push PC(761)
Push True
Apply
3-ary DictAdd
Push "count"
Push 0
3-ary DictAdd
3-ary DictAdd
Push "w_gate"
Push ()
Push "sema"
Push PC(761)
Push True
Apply
3-ary DictAdd
Push "count"
Push 0
3-ary DictAdd
3-ary DictAdd
StoreVar result
Return
Jump 1359
Frame read_acquire rw
Push PC(784)
LoadVar rw
Push "mutex"
Address
Apply
Pop
LoadVar rw
Push "nwriters"
Address
Load
Push 0
2-ary >
JumpCond True 1104
LoadVar rw
Push "w_gate"
Address
Push "count"
Address
Load
Push 0
2-ary >
Jump 1105
Push True
JumpCond False 1140
LoadVar rw
Push "r_gate"
Address
Push "count"
Address
Dup
Load
Push 1
2-ary +
Store
Push PC(803)
LoadVar rw
Push "mutex"
Address
Apply
Pop
Push PC(784)
LoadVar rw
Push "r_gate"
Address
Push "sema"
Address
Apply
Pop
LoadVar rw
Push "r_gate"
Address
Push "count"
Address
Dup
Load
Push 1
2-ary -
Store
LoadVar rw
Push "nreaders"
Address
Dup
Load
Push 1
2-ary +
Store
LoadVar rw
Push "r_gate"
Address
Push "count"
Address
Load
Push 0
2-ary >
JumpCond False 1167
Push PC(803)
LoadVar rw
DelVar rw
Push "r_gate"
Address
Push "sema"
Address
Apply
Pop
Jump 1174
Push PC(803)
LoadVar rw
DelVar rw
Push "mutex"
Address
Apply
Pop
Return
Jump 1359
Frame read_release rw
Push PC(784)
LoadVar rw
Push "mutex"
Address
Apply
Pop
LoadVar rw
Push "nreaders"
Address
Dup
Load
Push 1
2-ary -
Store
LoadVar rw
Push "w_gate"
Address
Push "count"
Address
Load
Push 0
2-ary >
JumpCond False 1207
LoadVar rw
Push "nreaders"
Address
Load
Push 0
2-ary ==
Jump 1208
Push False
JumpCond False 1219
Push PC(803)
LoadVar rw
DelVar rw
Push "w_gate"
Address
Push "sema"
Address
Apply
Pop
Jump 1226
Push PC(803)
LoadVar rw
DelVar rw
Push "mutex"
Address
Apply
Pop
Return
Jump 1359
Frame write_acquire rw
Push PC(784)
LoadVar rw
Push "mutex"
Address
Apply
Pop
LoadVar rw
Push "nreaders"
Address
Load
LoadVar rw
Push "nwriters"
Address
Load
2-ary +
Push 0
2-ary >
JumpCond False 1281
LoadVar rw
Push "w_gate"
Address
Push "count"
Address
Dup
Load
Push 1
2-ary +
Store
Push PC(803)
LoadVar rw
Push "mutex"
Address
Apply
Pop
Push PC(784)
LoadVar rw
Push "w_gate"
Address
Push "sema"
Address
Apply
Pop
LoadVar rw
Push "w_gate"
Address
Push "count"
Address
Dup
Load
Push 1
2-ary -
Store
LoadVar rw
Push "nwriters"
Address
Dup
Load
Push 1
2-ary +
Store
Push PC(803)
LoadVar rw
DelVar rw
Push "mutex"
Address
Apply
Pop
Return
Jump 1359
Frame write_release rw
Push PC(784)
LoadVar rw
Push "mutex"
Address
Apply
Pop
LoadVar rw
Push "nwriters"
Address
Dup
Load
Push 1
2-ary -
Store
LoadVar rw
Push "r_gate"
Address
Push "count"
Address
Load
Push 0
2-ary >
JumpCond False 1332
Push PC(803)
LoadVar rw
DelVar rw
Push "r_gate"
Address
Push "sema"
Address
Apply
Pop
Jump 1358
LoadVar rw
Push "w_gate"
Address
Push "count"
Address
Load
Push 0
2-ary >
JumpCond False 1351
Push PC(803)
LoadVar rw
DelVar rw
Push "w_gate"
Address
Push "sema"
Address
Apply
Pop
Jump 1358
Push PC(803)
LoadVar rw
DelVar rw
Push "mutex"
Address
Apply
Pop
Return
Push PC(1042)
Push ()
Apply
Store rw
Jump 1428
Frame thread ()
Push { False, True }
Choose
JumpCond False 1427
Push { "read", "write" }
Choose
Push "read"
2-ary ==
JumpCond False 1400
Push PC(1081)
Push ?rw
Apply
Pop
AtomicInc(eager)
ReadonlyInc
AtomicInc(lazy)
Push PC(1377)
1-ary countLabel
Push 1
2-ary >=
JumpCond False 1390
Push PC(1404)
1-ary countLabel
Push 0
2-ary ==
Jump 1391
Push False
Assert
AtomicDec
ReadonlyDec
AtomicDec
Push PC(1176)
Push ?rw
Apply
Pop
Jump 1365
Push PC(1228)
Push ?rw
Apply
Pop
AtomicInc(eager)
ReadonlyInc
AtomicInc(lazy)
Push PC(1377)
1-ary countLabel
Push 0
2-ary ==
JumpCond False 1417
Push PC(1404)
1-ary countLabel
Push 1
2-ary ==
Jump 1418
Push False
Assert
AtomicDec
ReadonlyDec
AtomicDec
Push PC(1298)
Push ?rw
Apply
Pop
Jump 1365
Return
Push { 1, 2, 3 }
StoreVar $s1267
LoadVar $s1267
1-ary IsEmpty
JumpCond True 1440
Cut($s1267, i)
DelVar i
Push PC(1364)
Push ()
Push ()
Spawn
Jump 1430
DelVar $s1267
Return
DelVar result
```

Duration: 0.0014189000000000007

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store RW
Push ()
Store synch
Push ()
Store list
Jump 371
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n9
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s12
LoadVar $s12
1-ary IsEmpty
JumpCond True 33
Cut($s12, x)
LoadVar $n9
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n9
Jump 21
DelVar $n9
DelVar $s12
DelVar s
StoreVar result
Return
Jump 371
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 371
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 371
Frame tail s
DelVar result
Push PC(8)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 371
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s69
LoadVar $s69
1-ary IsEmpty
JumpCond True 98
Cut($s69, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 87
DelVar $s69
Return
Jump 371
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s84
LoadVar $s84
1-ary IsEmpty
JumpCond True 115
Cut($s84, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 107
DelVar $s84
StoreVar result
Return
Jump 371
Frame list a
DelVar result
Push 0
StoreVar $n97
Push ()
LoadVar a
DelVar a
StoreVar $s100
LoadVar $s100
1-ary IsEmpty
JumpCond True 137
Cut($s100, v)
LoadVar $n97
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n97
Jump 127
DelVar $n97
DelVar $s100
StoreVar result
Return
Jump 371
Frame values d
DelVar result
Push 0
StoreVar $n115
Push ()
LoadVar d
1-ary keys
StoreVar $s118
LoadVar $s118
1-ary IsEmpty
JumpCond True 162
Cut($s118, k)
LoadVar $n115
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n115
Jump 150
DelVar $n115
DelVar $s118
DelVar d
StoreVar result
Return
Jump 371
Frame items d
DelVar result
Push 0
StoreVar $n136
Push ()
LoadVar d
1-ary keys
StoreVar $s139
LoadVar $s139
1-ary IsEmpty
JumpCond True 194
Cut($s139, k)
LoadVar $n136
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n136
Jump 176
DelVar $n136
DelVar $s139
DelVar d
StoreVar result
Return
Jump 371
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s167
LoadVar $s167
1-ary IsEmpty
JumpCond True 236
Cut($s167, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 209
DelVar $s167
DelVar d
DelVar index
Return
Jump 371
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 251
DelVar a
Push ()
StoreVar result
Jump 326
Push ()
Push 0
Push PC(52)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(61)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n216
Push ()
LoadVar rest
StoreVar $s219
DelVar v
LoadVar $s219
1-ary IsEmpty
JumpCond True 284
Cut($s219, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 269
LoadVar $n216
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n216
Jump 269
DelVar $n216
DelVar $s219
StoreVar lower
Push 0
StoreVar $n235
Push ()
LoadVar rest
DelVar rest
StoreVar $s238
DelVar v
LoadVar $s238
1-ary IsEmpty
JumpCond True 308
Cut($s238, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 293
LoadVar $n235
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n235
Jump 293
DelVar $n235
DelVar $s238
StoreVar higher
Push PC(241)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(241)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 371
Frame sorted d
DelVar result
Push PC(241)
Push PC(119)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 371
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n281
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s284
LoadVar $s284
1-ary IsEmpty
JumpCond True 365
Cut($s284, i)
LoadVar $n281
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n281
Jump 351
DelVar $n281
DelVar $s284
DelVar d
DelVar n
StoreVar result
Return
Push ()
Store bag
Jump 1359
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1359
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s313
LoadVar $s313
1-ary IsEmpty
JumpCond True 395
Cut($s313, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 386
DelVar $s313
StoreVar result
Return
Jump 1359
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s329
LoadVar $s329
1-ary IsEmpty
JumpCond True 432
Cut($s329, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 425
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 406
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 406
DelVar $s329
Return
Jump 1359
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 458
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 462
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1359
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s393
LoadVar $s393
1-ary IsEmpty
JumpCond True 491
Cut($s393, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 480
DelVar $s393
Return
Jump 1359
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1359
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1359
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1359
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 568
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 574
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1359
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 601
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 602
Push False
JumpCond False 611
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 622
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1359
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 640
DelVar bg
DelVar k
Push {}
Push PC(374)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 725
Push PC(464)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 654
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 725
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 666
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 725
Push PC(494)
LoadVar bg
Apply
StoreVar hd
Push PC(576)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(625)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s570
LoadVar $s570
1-ary IsEmpty
JumpCond True 710
Cut($s570, x)
Push PC(539)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 694
DelVar $s570
DelVar hd
Push PC(625)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1359
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1359
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 756
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1359
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1359
Frame Lock ()
DelVar result
Push PC(761)
Push False
Apply
StoreVar result
Return
Jump 1359
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1359
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 792
Jump 795
ReadonlyDec
AtomicDec
Jump 785
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1359
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1359
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1359
Frame Condition ()
DelVar result
Push PC(374)
Push ()
Apply
StoreVar result
Return
Jump 1359
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(435)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(539)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 889
Push PC(435)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 890
Push False
JumpCond False 895
DelVar c
DelVar cnt
DelVar ctx
Jump 898
ReadonlyDec
AtomicDec
Jump 870
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1359
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(374)
Push ()
Apply
2-ary !=
JumpCond False 931
LoadVar c
Push PC(576)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(521)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1359
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(374)
Push ()
Apply
Store
AtomicDec
Return
Jump 1359
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1359
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 962
Jump 965
ReadonlyDec
AtomicDec
Jump 954
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1359
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1359
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1359
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1004
Jump 1007
ReadonlyDec
AtomicDec
Jump 995
ReadonlyDec
Push PC(52)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(61)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1359
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(39)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Jump 1359
Frame RWlock ()
DelVar result
Push ()
Push "nreaders"
Push 0
3-ary DictAdd
Push "nwriters"
Push 0
3-ary DictAdd
Push "mutex"
Push PC(761)
Push False
Apply
3-ary DictAdd
Push "r_gate"
Push ()
Push "sema"
Push PC(761)
Push True
Apply
3-ary DictAdd
Push "count"
Push 0
3-ary DictAdd
3-ary DictAdd
Push "w_gate"
Push ()
Push "sema"
Push PC(761)
Push True
Apply
3-ary DictAdd
Push "count"
Push 0
3-ary DictAdd
3-ary DictAdd
StoreVar result
Return
Jump 1359
Frame read_acquire rw
Push PC(784)
LoadVar rw
Push "mutex"
Address
Apply
Pop
LoadVar rw
Push "nwriters"
Address
Load
Push 0
2-ary >
JumpCond True 1104
LoadVar rw
Push "w_gate"
Address
Push "count"
Address
Load
Push 0
2-ary >
Jump 1105
Push True
JumpCond False 1140
LoadVar rw
Push "r_gate"
Address
Push "count"
Address
Dup
Load
Push 1
2-ary +
Store
Push PC(803)
LoadVar rw
Push "mutex"
Address
Apply
Pop
Push PC(784)
LoadVar rw
Push "r_gate"
Address
Push "sema"
Address
Apply
Pop
LoadVar rw
Push "r_gate"
Address
Push "count"
Address
Dup
Load
Push 1
2-ary -
Store
LoadVar rw
Push "nreaders"
Address
Dup
Load
Push 1
2-ary +
Store
LoadVar rw
Push "r_gate"
Address
Push "count"
Address
Load
Push 0
2-ary >
JumpCond False 1167
Push PC(803)
LoadVar rw
DelVar rw
Push "r_gate"
Address
Push "sema"
Address
Apply
Pop
Jump 1174
Push PC(803)
LoadVar rw
DelVar rw
Push "mutex"
Address
Apply
Pop
Return
Jump 1359
Frame read_release rw
Push PC(784)
LoadVar rw
Push "mutex"
Address
Apply
Pop
LoadVar rw
Push "nreaders"
Address
Dup
Load
Push 1
2-ary -
Store
LoadVar rw
Push "w_gate"
Address
Push "count"
Address
Load
Push 0
2-ary >
JumpCond False 1207
LoadVar rw
Push "nreaders"
Address
Load
Push 0
2-ary ==
Jump 1208
Push False
JumpCond False 1219
Push PC(803)
LoadVar rw
DelVar rw
Push "w_gate"
Address
Push "sema"
Address
Apply
Pop
Jump 1226
Push PC(803)
LoadVar rw
DelVar rw
Push "mutex"
Address
Apply
Pop
Return
Jump 1359
Frame write_acquire rw
Push PC(784)
LoadVar rw
Push "mutex"
Address
Apply
Pop
LoadVar rw
Push "nreaders"
Address
Load
LoadVar rw
Push "nwriters"
Address
Load
2-ary +
Push 0
2-ary >
JumpCond False 1281
LoadVar rw
Push "w_gate"
Address
Push "count"
Address
Dup
Load
Push 1
2-ary +
Store
Push PC(803)
LoadVar rw
Push "mutex"
Address
Apply
Pop
Push PC(784)
LoadVar rw
Push "w_gate"
Address
Push "sema"
Address
Apply
Pop
LoadVar rw
Push "w_gate"
Address
Push "count"
Address
Dup
Load
Push 1
2-ary -
Store
LoadVar rw
Push "nwriters"
Address
Dup
Load
Push 1
2-ary +
Store
Push PC(803)
LoadVar rw
DelVar rw
Push "mutex"
Address
Apply
Pop
Return
Jump 1359
Frame write_release rw
Push PC(784)
LoadVar rw
Push "mutex"
Address
Apply
Pop
LoadVar rw
Push "nwriters"
Address
Dup
Load
Push 1
2-ary -
Store
LoadVar rw
Push "r_gate"
Address
Push "count"
Address
Load
Push 0
2-ary >
JumpCond False 1332
Push PC(803)
LoadVar rw
DelVar rw
Push "r_gate"
Address
Push "sema"
Address
Apply
Pop
Jump 1358
LoadVar rw
Push "w_gate"
Address
Push "count"
Address
Load
Push 0
2-ary >
JumpCond False 1351
Push PC(803)
LoadVar rw
DelVar rw
Push "w_gate"
Address
Push "sema"
Address
Apply
Pop
Jump 1358
Push PC(803)
LoadVar rw
DelVar rw
Push "mutex"
Address
Apply
Pop
Return
Push PC(1042)
Push ()
Apply
Store rw
Jump 1428
Frame thread ()
Push { False, True }
Choose
JumpCond False 1427
Push { "read", "write" }
Choose
Push "read"
2-ary ==
JumpCond False 1400
Push PC(1081)
Push ?rw
Apply
Pop
AtomicInc(eager)
ReadonlyInc
AtomicInc(lazy)
Push PC(1377)
1-ary countLabel
Push 1
2-ary >=
JumpCond False 1390
Push PC(1404)
1-ary countLabel
Push 0
2-ary ==
Jump 1391
Push False
Assert
AtomicDec
ReadonlyDec
AtomicDec
Push PC(1176)
Push ?rw
Apply
Pop
Jump 1365
Push PC(1228)
Push ?rw
Apply
Pop
AtomicInc(eager)
ReadonlyInc
AtomicInc(lazy)
Push PC(1377)
1-ary countLabel
Push 0
2-ary ==
JumpCond False 1417
Push PC(1404)
1-ary countLabel
Push 1
2-ary ==
Jump 1418
Push False
Assert
AtomicDec
ReadonlyDec
AtomicDec
Push PC(1298)
Push ?rw
Apply
Pop
Jump 1365
Return
Push { 1, 2, 3 }
StoreVar $s1267
LoadVar $s1267
1-ary IsEmpty
JumpCond True 1440
Cut($s1267, i)
DelVar i
Push PC(1364)
Push ()
Push ()
Spawn
Jump 1430
DelVar $s1267
Return
DelVar result
```

Duration: 0.0014868999999999855

---
## -mRW=RWfair -msynch=synchS code/RWtest.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store RW
Push ()
Store synch
Push ()
Store list
Jump 1119
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n9
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s12
LoadVar $s12
1-ary IsEmpty
JumpCond True 33
Cut($s12, x)
LoadVar $n9
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n9
Jump 21
DelVar $n9
DelVar $s12
DelVar s
StoreVar result
Return
Jump 1119
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 1119
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 1119
Frame tail s
DelVar result
Push PC(8)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 1119
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s69
LoadVar $s69
1-ary IsEmpty
JumpCond True 98
Cut($s69, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 87
DelVar $s69
Return
Jump 1119
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s84
LoadVar $s84
1-ary IsEmpty
JumpCond True 115
Cut($s84, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 107
DelVar $s84
StoreVar result
Return
Jump 1119
Frame list a
DelVar result
Push 0
StoreVar $n97
Push ()
LoadVar a
DelVar a
StoreVar $s100
LoadVar $s100
1-ary IsEmpty
JumpCond True 137
Cut($s100, v)
LoadVar $n97
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n97
Jump 127
DelVar $n97
DelVar $s100
StoreVar result
Return
Jump 1119
Frame values d
DelVar result
Push 0
StoreVar $n115
Push ()
LoadVar d
1-ary keys
StoreVar $s118
LoadVar $s118
1-ary IsEmpty
JumpCond True 162
Cut($s118, k)
LoadVar $n115
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n115
Jump 150
DelVar $n115
DelVar $s118
DelVar d
StoreVar result
Return
Jump 1119
Frame items d
DelVar result
Push 0
StoreVar $n136
Push ()
LoadVar d
1-ary keys
StoreVar $s139
LoadVar $s139
1-ary IsEmpty
JumpCond True 194
Cut($s139, k)
LoadVar $n136
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n136
Jump 176
DelVar $n136
DelVar $s139
DelVar d
StoreVar result
Return
Jump 1119
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s167
LoadVar $s167
1-ary IsEmpty
JumpCond True 236
Cut($s167, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 209
DelVar $s167
DelVar d
DelVar index
Return
Jump 1119
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 251
DelVar a
Push ()
StoreVar result
Jump 326
Push ()
Push 0
Push PC(52)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(61)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n216
Push ()
LoadVar rest
StoreVar $s219
DelVar v
LoadVar $s219
1-ary IsEmpty
JumpCond True 284
Cut($s219, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 269
LoadVar $n216
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n216
Jump 269
DelVar $n216
DelVar $s219
StoreVar lower
Push 0
StoreVar $n235
Push ()
LoadVar rest
DelVar rest
StoreVar $s238
DelVar v
LoadVar $s238
1-ary IsEmpty
JumpCond True 308
Cut($s238, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 293
LoadVar $n235
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n235
Jump 293
DelVar $n235
DelVar $s238
StoreVar higher
Push PC(241)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(241)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 1119
Frame sorted d
DelVar result
Push PC(241)
Push PC(119)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 1119
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n281
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s284
LoadVar $s284
1-ary IsEmpty
JumpCond True 365
Cut($s284, i)
LoadVar $n281
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n281
Jump 351
DelVar $n281
DelVar $s284
DelVar d
DelVar n
StoreVar result
Return
Jump 1119
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1119
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 401
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1119
Frame BinSema acquired
DelVar result
Push ()
Push "acquired"
LoadVar acquired
DelVar acquired
3-ary DictAdd
Push "suspended"
Push ()
3-ary DictAdd
StoreVar result
Return
Jump 1119
Frame Lock ()
DelVar result
Push PC(406)
Push False
Apply
StoreVar result
Return
Jump 1119
Frame acquire binsema
AtomicInc(lazy)
LoadVar binsema
Push "acquired"
Address
Load
JumpCond False 457
LoadVar binsema
Push "suspended"
Address
LoadVar binsema
Push "suspended"
Address
Load
1-ary len
Address
Stop
Continue
Pop
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Load
Assert
AtomicDec
ReadonlyDec
Jump 463
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Push True
Store
AtomicDec
Return
Jump 1119
Frame release binsema
AtomicInc(lazy)
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Push "acquired"
Address
Load
Assert
AtomicDec
ReadonlyDec
LoadVar binsema
Push "suspended"
Address
Load
Push ()
2-ary ==
JumpCond False 491
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Push False
Store
Jump 510
Push ()
Push PC(52)
LoadVar binsema
Push "suspended"
Address
Load
Apply
Go
LoadVar binsema
Push "suspended"
Address
Push PC(61)
LoadVar binsema
DelVar binsema
Push "suspended"
Address
Load
Apply
Store
AtomicDec
Return
Jump 1119
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Load
StoreVar result
Return
Jump 1119
Frame Condition ()
DelVar result
Push ()
StoreVar result
Return
Jump 1119
Frame wait (c, lk)
AtomicInc(lazy)
Push PC(466)
LoadVar lk
Apply
Pop
LoadVar c
LoadVar c
DelVar c
Load
1-ary len
Address
Stop
Continue
Pop
AtomicDec
Push PC(427)
LoadVar lk
DelVar lk
Apply
Pop
Return
Jump 1119
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push ()
2-ary !=
JumpCond False 572
Push ()
Push PC(52)
LoadVar c
Load
Apply
Go
LoadVar c
Push PC(61)
LoadVar c
DelVar c
Load
Apply
Store
DelVar c
AtomicDec
Return
Jump 1119
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
Load
Push ()
2-ary !=
JumpCond False 596
Push ()
Push PC(52)
LoadVar c
Load
Apply
Go
LoadVar c
Push PC(61)
LoadVar c
Load
Apply
Store
Jump 578
DelVar c
AtomicDec
Return
Jump 1119
Frame Semaphore cnt
DelVar result
Push ()
Push "count"
LoadVar cnt
DelVar cnt
3-ary DictAdd
Push "waiters"
Push ()
3-ary DictAdd
StoreVar result
Return
Jump 1119
Frame P sema
AtomicInc(lazy)
LoadVar sema
Push "count"
Address
Load
Push 0
2-ary >
JumpCond False 632
LoadVar sema
DelVar sema
Push "count"
Address
Dup
Load
Push 1
2-ary -
Store
Jump 645
LoadVar sema
Push "waiters"
Address
LoadVar sema
DelVar sema
Push "waiters"
Address
Load
1-ary len
Address
Stop
Continue
Pop
AtomicDec
Return
Jump 1119
Frame V sema
AtomicInc(lazy)
Push ()
Push 0
LoadVar sema
Push "count"
Address
Load
3-ary DictAdd
Push 1
LoadVar sema
Push "waiters"
Address
Load
3-ary DictAdd
StoreVar (cnt, waiters)
LoadVar waiters
Push ()
2-ary !=
JumpCond False 692
ReadonlyInc
AtomicInc(lazy)
LoadVar cnt
DelVar cnt
Push 0
2-ary ==
Assert
AtomicDec
ReadonlyDec
Push ()
LoadVar waiters
Push 0
Apply
Go
LoadVar sema
DelVar sema
Push "waiters"
Address
Push PC(61)
LoadVar waiters
DelVar waiters
Apply
Store
Jump 702
DelVar waiters
LoadVar sema
DelVar sema
Push "count"
Address
LoadVar cnt
DelVar cnt
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1119
Frame Queue ()
DelVar result
Push { "list":(), "waiters":() }
StoreVar result
Return
Jump 1119
Frame get q
DelVar result
AtomicInc(lazy)
LoadVar q
Push "list"
Address
Load
Push ()
2-ary ==
JumpCond False 733
LoadVar q
Push "waiters"
Address
LoadVar q
Push "waiters"
Address
Load
1-ary len
Address
Stop
Continue
Pop
Push PC(52)
LoadVar q
Push "list"
Address
Load
Apply
StoreVar result
LoadVar q
Push "list"
Address
Push PC(61)
LoadVar q
DelVar q
Push "list"
Address
Load
Apply
Store
AtomicDec
Return
Jump 1119
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push "list"
Address
Push PC(39)
Push ()
Push 0
LoadVar q
Push "list"
Address
Load
3-ary DictAdd
Push 1
LoadVar item
3-ary DictAdd
Apply
Store
LoadVar q
Push "waiters"
Address
Load
StoreVar waiters
LoadVar waiters
Push ()
2-ary !=
JumpCond False 796
LoadVar item
DelVar item
LoadVar waiters
Push 0
Apply
Go
LoadVar q
DelVar q
Push "waiters"
Address
Push PC(61)
LoadVar waiters
DelVar waiters
Apply
Store
DelVar item
DelVar q
DelVar waiters
AtomicDec
Return
Jump 1119
Frame RWlock ()
DelVar result
Push ()
Push "nreaders"
Push 0
3-ary DictAdd
Push "nwriters"
Push 0
3-ary DictAdd
Push "mutex"
Push PC(406)
Push False
Apply
3-ary DictAdd
Push "r_gate"
Push ()
Push "sema"
Push PC(406)
Push True
Apply
3-ary DictAdd
Push "count"
Push 0
3-ary DictAdd
3-ary DictAdd
Push "w_gate"
Push ()
Push "sema"
Push PC(406)
Push True
Apply
3-ary DictAdd
Push "count"
Push 0
3-ary DictAdd
3-ary DictAdd
StoreVar result
Return
Jump 1119
Frame read_acquire rw
Push PC(427)
LoadVar rw
Push "mutex"
Address
Apply
Pop
LoadVar rw
Push "nwriters"
Address
Load
Push 0
2-ary >
JumpCond True 864
LoadVar rw
Push "w_gate"
Address
Push "count"
Address
Load
Push 0
2-ary >
Jump 865
Push True
JumpCond False 900
LoadVar rw
Push "r_gate"
Address
Push "count"
Address
Dup
Load
Push 1
2-ary +
Store
Push PC(466)
LoadVar rw
Push "mutex"
Address
Apply
Pop
Push PC(427)
LoadVar rw
Push "r_gate"
Address
Push "sema"
Address
Apply
Pop
LoadVar rw
Push "r_gate"
Address
Push "count"
Address
Dup
Load
Push 1
2-ary -
Store
LoadVar rw
Push "nreaders"
Address
Dup
Load
Push 1
2-ary +
Store
LoadVar rw
Push "r_gate"
Address
Push "count"
Address
Load
Push 0
2-ary >
JumpCond False 927
Push PC(466)
LoadVar rw
DelVar rw
Push "r_gate"
Address
Push "sema"
Address
Apply
Pop
Jump 934
Push PC(466)
LoadVar rw
DelVar rw
Push "mutex"
Address
Apply
Pop
Return
Jump 1119
Frame read_release rw
Push PC(427)
LoadVar rw
Push "mutex"
Address
Apply
Pop
LoadVar rw
Push "nreaders"
Address
Dup
Load
Push 1
2-ary -
Store
LoadVar rw
Push "w_gate"
Address
Push "count"
Address
Load
Push 0
2-ary >
JumpCond False 967
LoadVar rw
Push "nreaders"
Address
Load
Push 0
2-ary ==
Jump 968
Push False
JumpCond False 979
Push PC(466)
LoadVar rw
DelVar rw
Push "w_gate"
Address
Push "sema"
Address
Apply
Pop
Jump 986
Push PC(466)
LoadVar rw
DelVar rw
Push "mutex"
Address
Apply
Pop
Return
Jump 1119
Frame write_acquire rw
Push PC(427)
LoadVar rw
Push "mutex"
Address
Apply
Pop
LoadVar rw
Push "nreaders"
Address
Load
LoadVar rw
Push "nwriters"
Address
Load
2-ary +
Push 0
2-ary >
JumpCond False 1041
LoadVar rw
Push "w_gate"
Address
Push "count"
Address
Dup
Load
Push 1
2-ary +
Store
Push PC(466)
LoadVar rw
Push "mutex"
Address
Apply
Pop
Push PC(427)
LoadVar rw
Push "w_gate"
Address
Push "sema"
Address
Apply
Pop
LoadVar rw
Push "w_gate"
Address
Push "count"
Address
Dup
Load
Push 1
2-ary -
Store
LoadVar rw
Push "nwriters"
Address
Dup
Load
Push 1
2-ary +
Store
Push PC(466)
LoadVar rw
DelVar rw
Push "mutex"
Address
Apply
Pop
Return
Jump 1119
Frame write_release rw
Push PC(427)
LoadVar rw
Push "mutex"
Address
Apply
Pop
LoadVar rw
Push "nwriters"
Address
Dup
Load
Push 1
2-ary -
Store
LoadVar rw
Push "r_gate"
Address
Push "count"
Address
Load
Push 0
2-ary >
JumpCond False 1092
Push PC(466)
LoadVar rw
DelVar rw
Push "r_gate"
Address
Push "sema"
Address
Apply
Pop
Jump 1118
LoadVar rw
Push "w_gate"
Address
Push "count"
Address
Load
Push 0
2-ary >
JumpCond False 1111
Push PC(466)
LoadVar rw
DelVar rw
Push "w_gate"
Address
Push "sema"
Address
Apply
Pop
Jump 1118
Push PC(466)
LoadVar rw
DelVar rw
Push "mutex"
Address
Apply
Pop
Return
Push PC(802)
Push ()
Apply
Store rw
Jump 1188
Frame thread ()
Push { False, True }
Choose
JumpCond False 1187
Push { "read", "write" }
Choose
Push "read"
2-ary ==
JumpCond False 1160
Push PC(841)
Push ?rw
Apply
Pop
AtomicInc(eager)
ReadonlyInc
AtomicInc(lazy)
Push PC(1137)
1-ary countLabel
Push 1
2-ary >=
JumpCond False 1150
Push PC(1164)
1-ary countLabel
Push 0
2-ary ==
Jump 1151
Push False
Assert
AtomicDec
ReadonlyDec
AtomicDec
Push PC(936)
Push ?rw
Apply
Pop
Jump 1125
Push PC(988)
Push ?rw
Apply
Pop
AtomicInc(eager)
ReadonlyInc
AtomicInc(lazy)
Push PC(1137)
1-ary countLabel
Push 0
2-ary ==
JumpCond False 1177
Push PC(1164)
1-ary countLabel
Push 1
2-ary ==
Jump 1178
Push False
Assert
AtomicDec
ReadonlyDec
AtomicDec
Push PC(1058)
Push ?rw
Apply
Pop
Jump 1125
Return
Push { 1, 2, 3 }
StoreVar $s1069
LoadVar $s1069
1-ary IsEmpty
JumpCond True 1200
Cut($s1069, i)
DelVar i
Push PC(1124)
Push ()
Push ()
Spawn
Jump 1190
DelVar $s1069
Return
DelVar result
```

Duration: 0.001489100000000021

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store RW
Push ()
Store synch
Push ()
Store list
Jump 1119
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n9
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s12
LoadVar $s12
1-ary IsEmpty
JumpCond True 33
Cut($s12, x)
LoadVar $n9
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n9
Jump 21
DelVar $n9
DelVar $s12
DelVar s
StoreVar result
Return
Jump 1119
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 1119
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 1119
Frame tail s
DelVar result
Push PC(8)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 1119
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s69
LoadVar $s69
1-ary IsEmpty
JumpCond True 98
Cut($s69, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 87
DelVar $s69
Return
Jump 1119
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s84
LoadVar $s84
1-ary IsEmpty
JumpCond True 115
Cut($s84, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 107
DelVar $s84
StoreVar result
Return
Jump 1119
Frame list a
DelVar result
Push 0
StoreVar $n97
Push ()
LoadVar a
DelVar a
StoreVar $s100
LoadVar $s100
1-ary IsEmpty
JumpCond True 137
Cut($s100, v)
LoadVar $n97
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n97
Jump 127
DelVar $n97
DelVar $s100
StoreVar result
Return
Jump 1119
Frame values d
DelVar result
Push 0
StoreVar $n115
Push ()
LoadVar d
1-ary keys
StoreVar $s118
LoadVar $s118
1-ary IsEmpty
JumpCond True 162
Cut($s118, k)
LoadVar $n115
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n115
Jump 150
DelVar $n115
DelVar $s118
DelVar d
StoreVar result
Return
Jump 1119
Frame items d
DelVar result
Push 0
StoreVar $n136
Push ()
LoadVar d
1-ary keys
StoreVar $s139
LoadVar $s139
1-ary IsEmpty
JumpCond True 194
Cut($s139, k)
LoadVar $n136
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n136
Jump 176
DelVar $n136
DelVar $s139
DelVar d
StoreVar result
Return
Jump 1119
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s167
LoadVar $s167
1-ary IsEmpty
JumpCond True 236
Cut($s167, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 209
DelVar $s167
DelVar d
DelVar index
Return
Jump 1119
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 251
DelVar a
Push ()
StoreVar result
Jump 326
Push ()
Push 0
Push PC(52)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(61)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n216
Push ()
LoadVar rest
StoreVar $s219
DelVar v
LoadVar $s219
1-ary IsEmpty
JumpCond True 284
Cut($s219, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 269
LoadVar $n216
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n216
Jump 269
DelVar $n216
DelVar $s219
StoreVar lower
Push 0
StoreVar $n235
Push ()
LoadVar rest
DelVar rest
StoreVar $s238
DelVar v
LoadVar $s238
1-ary IsEmpty
JumpCond True 308
Cut($s238, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 293
LoadVar $n235
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n235
Jump 293
DelVar $n235
DelVar $s238
StoreVar higher
Push PC(241)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(241)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 1119
Frame sorted d
DelVar result
Push PC(241)
Push PC(119)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 1119
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n281
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s284
LoadVar $s284
1-ary IsEmpty
JumpCond True 365
Cut($s284, i)
LoadVar $n281
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n281
Jump 351
DelVar $n281
DelVar $s284
DelVar d
DelVar n
StoreVar result
Return
Jump 1119
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1119
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 401
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1119
Frame BinSema acquired
DelVar result
Push ()
Push "acquired"
LoadVar acquired
DelVar acquired
3-ary DictAdd
Push "suspended"
Push ()
3-ary DictAdd
StoreVar result
Return
Jump 1119
Frame Lock ()
DelVar result
Push PC(406)
Push False
Apply
StoreVar result
Return
Jump 1119
Frame acquire binsema
AtomicInc(lazy)
LoadVar binsema
Push "acquired"
Address
Load
JumpCond False 457
LoadVar binsema
Push "suspended"
Address
LoadVar binsema
Push "suspended"
Address
Load
1-ary len
Address
Stop
Continue
Pop
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Load
Assert
AtomicDec
ReadonlyDec
Jump 463
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Push True
Store
AtomicDec
Return
Jump 1119
Frame release binsema
AtomicInc(lazy)
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Push "acquired"
Address
Load
Assert
AtomicDec
ReadonlyDec
LoadVar binsema
Push "suspended"
Address
Load
Push ()
2-ary ==
JumpCond False 491
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Push False
Store
Jump 510
Push ()
Push PC(52)
LoadVar binsema
Push "suspended"
Address
Load
Apply
Go
LoadVar binsema
Push "suspended"
Address
Push PC(61)
LoadVar binsema
DelVar binsema
Push "suspended"
Address
Load
Apply
Store
AtomicDec
Return
Jump 1119
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Load
StoreVar result
Return
Jump 1119
Frame Condition ()
DelVar result
Push ()
StoreVar result
Return
Jump 1119
Frame wait (c, lk)
AtomicInc(lazy)
Push PC(466)
LoadVar lk
Apply
Pop
LoadVar c
LoadVar c
DelVar c
Load
1-ary len
Address
Stop
Continue
Pop
AtomicDec
Push PC(427)
LoadVar lk
DelVar lk
Apply
Pop
Return
Jump 1119
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push ()
2-ary !=
JumpCond False 572
Push ()
Push PC(52)
LoadVar c
Load
Apply
Go
LoadVar c
Push PC(61)
LoadVar c
DelVar c
Load
Apply
Store
DelVar c
AtomicDec
Return
Jump 1119
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
Load
Push ()
2-ary !=
JumpCond False 596
Push ()
Push PC(52)
LoadVar c
Load
Apply
Go
LoadVar c
Push PC(61)
LoadVar c
Load
Apply
Store
Jump 578
DelVar c
AtomicDec
Return
Jump 1119
Frame Semaphore cnt
DelVar result
Push ()
Push "count"
LoadVar cnt
DelVar cnt
3-ary DictAdd
Push "waiters"
Push ()
3-ary DictAdd
StoreVar result
Return
Jump 1119
Frame P sema
AtomicInc(lazy)
LoadVar sema
Push "count"
Address
Load
Push 0
2-ary >
JumpCond False 632
LoadVar sema
DelVar sema
Push "count"
Address
Dup
Load
Push 1
2-ary -
Store
Jump 645
LoadVar sema
Push "waiters"
Address
LoadVar sema
DelVar sema
Push "waiters"
Address
Load
1-ary len
Address
Stop
Continue
Pop
AtomicDec
Return
Jump 1119
Frame V sema
AtomicInc(lazy)
Push ()
Push 0
LoadVar sema
Push "count"
Address
Load
3-ary DictAdd
Push 1
LoadVar sema
Push "waiters"
Address
Load
3-ary DictAdd
StoreVar (cnt, waiters)
LoadVar waiters
Push ()
2-ary !=
JumpCond False 692
ReadonlyInc
AtomicInc(lazy)
LoadVar cnt
DelVar cnt
Push 0
2-ary ==
Assert
AtomicDec
ReadonlyDec
Push ()
LoadVar waiters
Push 0
Apply
Go
LoadVar sema
DelVar sema
Push "waiters"
Address
Push PC(61)
LoadVar waiters
DelVar waiters
Apply
Store
Jump 702
DelVar waiters
LoadVar sema
DelVar sema
Push "count"
Address
LoadVar cnt
DelVar cnt
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1119
Frame Queue ()
DelVar result
Push { "list":(), "waiters":() }
StoreVar result
Return
Jump 1119
Frame get q
DelVar result
AtomicInc(lazy)
LoadVar q
Push "list"
Address
Load
Push ()
2-ary ==
JumpCond False 733
LoadVar q
Push "waiters"
Address
LoadVar q
Push "waiters"
Address
Load
1-ary len
Address
Stop
Continue
Pop
Push PC(52)
LoadVar q
Push "list"
Address
Load
Apply
StoreVar result
LoadVar q
Push "list"
Address
Push PC(61)
LoadVar q
DelVar q
Push "list"
Address
Load
Apply
Store
AtomicDec
Return
Jump 1119
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push "list"
Address
Push PC(39)
Push ()
Push 0
LoadVar q
Push "list"
Address
Load
3-ary DictAdd
Push 1
LoadVar item
3-ary DictAdd
Apply
Store
LoadVar q
Push "waiters"
Address
Load
StoreVar waiters
LoadVar waiters
Push ()
2-ary !=
JumpCond False 796
LoadVar item
DelVar item
LoadVar waiters
Push 0
Apply
Go
LoadVar q
DelVar q
Push "waiters"
Address
Push PC(61)
LoadVar waiters
DelVar waiters
Apply
Store
DelVar item
DelVar q
DelVar waiters
AtomicDec
Return
Jump 1119
Frame RWlock ()
DelVar result
Push ()
Push "nreaders"
Push 0
3-ary DictAdd
Push "nwriters"
Push 0
3-ary DictAdd
Push "mutex"
Push PC(406)
Push False
Apply
3-ary DictAdd
Push "r_gate"
Push ()
Push "sema"
Push PC(406)
Push True
Apply
3-ary DictAdd
Push "count"
Push 0
3-ary DictAdd
3-ary DictAdd
Push "w_gate"
Push ()
Push "sema"
Push PC(406)
Push True
Apply
3-ary DictAdd
Push "count"
Push 0
3-ary DictAdd
3-ary DictAdd
StoreVar result
Return
Jump 1119
Frame read_acquire rw
Push PC(427)
LoadVar rw
Push "mutex"
Address
Apply
Pop
LoadVar rw
Push "nwriters"
Address
Load
Push 0
2-ary >
JumpCond True 864
LoadVar rw
Push "w_gate"
Address
Push "count"
Address
Load
Push 0
2-ary >
Jump 865
Push True
JumpCond False 900
LoadVar rw
Push "r_gate"
Address
Push "count"
Address
Dup
Load
Push 1
2-ary +
Store
Push PC(466)
LoadVar rw
Push "mutex"
Address
Apply
Pop
Push PC(427)
LoadVar rw
Push "r_gate"
Address
Push "sema"
Address
Apply
Pop
LoadVar rw
Push "r_gate"
Address
Push "count"
Address
Dup
Load
Push 1
2-ary -
Store
LoadVar rw
Push "nreaders"
Address
Dup
Load
Push 1
2-ary +
Store
LoadVar rw
Push "r_gate"
Address
Push "count"
Address
Load
Push 0
2-ary >
JumpCond False 927
Push PC(466)
LoadVar rw
DelVar rw
Push "r_gate"
Address
Push "sema"
Address
Apply
Pop
Jump 934
Push PC(466)
LoadVar rw
DelVar rw
Push "mutex"
Address
Apply
Pop
Return
Jump 1119
Frame read_release rw
Push PC(427)
LoadVar rw
Push "mutex"
Address
Apply
Pop
LoadVar rw
Push "nreaders"
Address
Dup
Load
Push 1
2-ary -
Store
LoadVar rw
Push "w_gate"
Address
Push "count"
Address
Load
Push 0
2-ary >
JumpCond False 967
LoadVar rw
Push "nreaders"
Address
Load
Push 0
2-ary ==
Jump 968
Push False
JumpCond False 979
Push PC(466)
LoadVar rw
DelVar rw
Push "w_gate"
Address
Push "sema"
Address
Apply
Pop
Jump 986
Push PC(466)
LoadVar rw
DelVar rw
Push "mutex"
Address
Apply
Pop
Return
Jump 1119
Frame write_acquire rw
Push PC(427)
LoadVar rw
Push "mutex"
Address
Apply
Pop
LoadVar rw
Push "nreaders"
Address
Load
LoadVar rw
Push "nwriters"
Address
Load
2-ary +
Push 0
2-ary >
JumpCond False 1041
LoadVar rw
Push "w_gate"
Address
Push "count"
Address
Dup
Load
Push 1
2-ary +
Store
Push PC(466)
LoadVar rw
Push "mutex"
Address
Apply
Pop
Push PC(427)
LoadVar rw
Push "w_gate"
Address
Push "sema"
Address
Apply
Pop
LoadVar rw
Push "w_gate"
Address
Push "count"
Address
Dup
Load
Push 1
2-ary -
Store
LoadVar rw
Push "nwriters"
Address
Dup
Load
Push 1
2-ary +
Store
Push PC(466)
LoadVar rw
DelVar rw
Push "mutex"
Address
Apply
Pop
Return
Jump 1119
Frame write_release rw
Push PC(427)
LoadVar rw
Push "mutex"
Address
Apply
Pop
LoadVar rw
Push "nwriters"
Address
Dup
Load
Push 1
2-ary -
Store
LoadVar rw
Push "r_gate"
Address
Push "count"
Address
Load
Push 0
2-ary >
JumpCond False 1092
Push PC(466)
LoadVar rw
DelVar rw
Push "r_gate"
Address
Push "sema"
Address
Apply
Pop
Jump 1118
LoadVar rw
Push "w_gate"
Address
Push "count"
Address
Load
Push 0
2-ary >
JumpCond False 1111
Push PC(466)
LoadVar rw
DelVar rw
Push "w_gate"
Address
Push "sema"
Address
Apply
Pop
Jump 1118
Push PC(466)
LoadVar rw
DelVar rw
Push "mutex"
Address
Apply
Pop
Return
Push PC(802)
Push ()
Apply
Store rw
Jump 1188
Frame thread ()
Push { False, True }
Choose
JumpCond False 1187
Push { "read", "write" }
Choose
Push "read"
2-ary ==
JumpCond False 1160
Push PC(841)
Push ?rw
Apply
Pop
AtomicInc(eager)
ReadonlyInc
AtomicInc(lazy)
Push PC(1137)
1-ary countLabel
Push 1
2-ary >=
JumpCond False 1150
Push PC(1164)
1-ary countLabel
Push 0
2-ary ==
Jump 1151
Push False
Assert
AtomicDec
ReadonlyDec
AtomicDec
Push PC(936)
Push ?rw
Apply
Pop
Jump 1125
Push PC(988)
Push ?rw
Apply
Pop
AtomicInc(eager)
ReadonlyInc
AtomicInc(lazy)
Push PC(1137)
1-ary countLabel
Push 0
2-ary ==
JumpCond False 1177
Push PC(1164)
1-ary countLabel
Push 1
2-ary ==
Jump 1178
Push False
Assert
AtomicDec
ReadonlyDec
AtomicDec
Push PC(1058)
Push ?rw
Apply
Pop
Jump 1125
Return
Push { 1, 2, 3 }
StoreVar $s1069
LoadVar $s1069
1-ary IsEmpty
JumpCond True 1200
Cut($s1069, i)
DelVar i
Push PC(1124)
Push ()
Push ()
Spawn
Jump 1190
DelVar $s1069
Return
DelVar result
```

Duration: 0.0014232000000000133

---
## -mboundedbuffer=BBhoare code/BBtest.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store boundedbuffer
Push ()
Store hoare
Push ()
Store synch
Push ()
Store list
Jump 373
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n11
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s14
LoadVar $s14
1-ary IsEmpty
JumpCond True 35
Cut($s14, x)
LoadVar $n11
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n11
Jump 23
DelVar $n11
DelVar $s14
DelVar s
StoreVar result
Return
Jump 373
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 373
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 373
Frame tail s
DelVar result
Push PC(10)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 373
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s71
LoadVar $s71
1-ary IsEmpty
JumpCond True 100
Cut($s71, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 89
DelVar $s71
Return
Jump 373
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s86
LoadVar $s86
1-ary IsEmpty
JumpCond True 117
Cut($s86, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 109
DelVar $s86
StoreVar result
Return
Jump 373
Frame list a
DelVar result
Push 0
StoreVar $n99
Push ()
LoadVar a
DelVar a
StoreVar $s102
LoadVar $s102
1-ary IsEmpty
JumpCond True 139
Cut($s102, v)
LoadVar $n99
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n99
Jump 129
DelVar $n99
DelVar $s102
StoreVar result
Return
Jump 373
Frame values d
DelVar result
Push 0
StoreVar $n117
Push ()
LoadVar d
1-ary keys
StoreVar $s120
LoadVar $s120
1-ary IsEmpty
JumpCond True 164
Cut($s120, k)
LoadVar $n117
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n117
Jump 152
DelVar $n117
DelVar $s120
DelVar d
StoreVar result
Return
Jump 373
Frame items d
DelVar result
Push 0
StoreVar $n138
Push ()
LoadVar d
1-ary keys
StoreVar $s141
LoadVar $s141
1-ary IsEmpty
JumpCond True 196
Cut($s141, k)
LoadVar $n138
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n138
Jump 178
DelVar $n138
DelVar $s141
DelVar d
StoreVar result
Return
Jump 373
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s169
LoadVar $s169
1-ary IsEmpty
JumpCond True 238
Cut($s169, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 211
DelVar $s169
DelVar d
DelVar index
Return
Jump 373
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 253
DelVar a
Push ()
StoreVar result
Jump 328
Push ()
Push 0
Push PC(54)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(63)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n218
Push ()
LoadVar rest
StoreVar $s221
DelVar v
LoadVar $s221
1-ary IsEmpty
JumpCond True 286
Cut($s221, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 271
LoadVar $n218
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n218
Jump 271
DelVar $n218
DelVar $s221
StoreVar lower
Push 0
StoreVar $n237
Push ()
LoadVar rest
DelVar rest
StoreVar $s240
DelVar v
LoadVar $s240
1-ary IsEmpty
JumpCond True 310
Cut($s240, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 295
LoadVar $n237
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n237
Jump 295
DelVar $n237
DelVar $s240
StoreVar higher
Push PC(243)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(243)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 373
Frame sorted d
DelVar result
Push PC(243)
Push PC(121)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 373
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n283
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s286
LoadVar $s286
1-ary IsEmpty
JumpCond True 367
Cut($s286, i)
LoadVar $n283
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n283
Jump 353
DelVar $n283
DelVar $s286
DelVar d
DelVar n
StoreVar result
Return
Push ()
Store bag
Jump 1392
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1392
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s315
LoadVar $s315
1-ary IsEmpty
JumpCond True 397
Cut($s315, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 388
DelVar $s315
StoreVar result
Return
Jump 1392
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s331
LoadVar $s331
1-ary IsEmpty
JumpCond True 434
Cut($s331, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 427
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 408
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 408
DelVar $s331
Return
Jump 1392
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 460
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 464
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1392
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s395
LoadVar $s395
1-ary IsEmpty
JumpCond True 493
Cut($s395, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 482
DelVar $s395
Return
Jump 1392
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1392
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1392
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1392
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 570
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 576
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1392
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 603
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 604
Push False
JumpCond False 613
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 624
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1392
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 642
DelVar bg
DelVar k
Push {}
Push PC(376)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 727
Push PC(466)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 656
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 727
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 668
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 727
Push PC(496)
LoadVar bg
Apply
StoreVar hd
Push PC(578)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(627)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s572
LoadVar $s572
1-ary IsEmpty
JumpCond True 712
Cut($s572, x)
Push PC(541)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 696
DelVar $s572
DelVar hd
Push PC(627)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1392
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1392
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 758
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1392
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1392
Frame Lock ()
DelVar result
Push PC(763)
Push False
Apply
StoreVar result
Return
Jump 1392
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1392
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 794
Jump 797
ReadonlyDec
AtomicDec
Jump 787
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1392
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1392
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1392
Frame Condition ()
DelVar result
Push PC(376)
Push ()
Apply
StoreVar result
Return
Jump 1392
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(437)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(541)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 891
Push PC(437)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 892
Push False
JumpCond False 897
DelVar c
DelVar cnt
DelVar ctx
Jump 900
ReadonlyDec
AtomicDec
Jump 872
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1392
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(376)
Push ()
Apply
2-ary !=
JumpCond False 933
LoadVar c
Push PC(578)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(523)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1392
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(376)
Push ()
Apply
Store
AtomicDec
Return
Jump 1392
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1392
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 964
Jump 967
ReadonlyDec
AtomicDec
Jump 956
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1392
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1392
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1392
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1006
Jump 1009
ReadonlyDec
AtomicDec
Jump 997
ReadonlyDec
Push PC(54)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(63)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1392
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(41)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Jump 1392
Frame Monitor ()
DelVar result
Push PC(770)
Push ()
Apply
StoreVar result
Return
Jump 1392
Frame enter mon
Push PC(786)
LoadVar mon
DelVar mon
Apply
Pop
Return
Jump 1392
Frame exit mon
Push PC(805)
LoadVar mon
DelVar mon
Apply
Pop
Return
Jump 1392
Frame Condition ()
DelVar result
Push ()
Push "sema"
Push PC(763)
Push True
Apply
3-ary DictAdd
Push "count"
Push 0
3-ary DictAdd
StoreVar result
Return
Jump 1392
Frame wait (cond, mon)
LoadVar cond
Push "count"
Address
Dup
Load
Push 1
2-ary +
Store
Push PC(1060)
LoadVar mon
DelVar mon
Apply
Pop
Push PC(786)
LoadVar cond
Push "sema"
Address
Apply
Pop
LoadVar cond
DelVar cond
Push "count"
Address
Dup
Load
Push 1
2-ary -
Store
Return
Jump 1392
Frame signal (cond, mon)
LoadVar cond
Push "count"
Address
Load
Push 0
2-ary >
JumpCond False 1133
Push PC(805)
LoadVar cond
DelVar cond
Push "sema"
Address
Apply
Pop
Push PC(1052)
LoadVar mon
DelVar mon
Apply
Pop
DelVar cond
DelVar mon
Return
Jump 1392
Frame BoundedBuffer size
DelVar result
Push ()
Push "mon"
Push PC(1044)
Push ()
Apply
3-ary DictAdd
Push "prod"
Push PC(1068)
Push ()
Apply
3-ary DictAdd
Push "cons"
Push PC(1068)
Push ()
Apply
3-ary DictAdd
Push "buf"
Push ()
Push 1
LoadVar size
2-ary ..
StoreVar $s994
LoadVar $s994
1-ary IsEmpty
JumpCond True 1170
Cut($s994, x)
LoadVar x
DelVar x
Push ()
3-ary DictAdd
Jump 1161
DelVar $s994
3-ary DictAdd
Push "head"
Push 1
3-ary DictAdd
Push "tail"
Push 1
3-ary DictAdd
Push "count"
Push 0
3-ary DictAdd
Push "size"
LoadVar size
DelVar size
3-ary DictAdd
StoreVar result
Return
Jump 1392
Frame put (bb, item)
Push PC(1052)
LoadVar bb
Push "mon"
Address
Apply
Pop
LoadVar bb
Push "count"
Address
Load
LoadVar bb
Push "size"
Address
Load
2-ary ==
JumpCond False 1219
Push PC(1082)
Push ()
Push 0
LoadVar bb
Push "prod"
Address
3-ary DictAdd
Push 1
LoadVar bb
Push "mon"
Address
3-ary DictAdd
Apply
Pop
LoadVar bb
Push "buf"
Address
LoadVar bb
Push "tail"
Address
Load
Address
LoadVar item
DelVar item
Store
LoadVar bb
Push "tail"
Address
LoadVar bb
Push "tail"
Address
Load
LoadVar bb
Push "size"
Address
Load
2-ary %
Push 1
2-ary +
Store
LoadVar bb
Push "count"
Address
Dup
Load
Push 1
2-ary +
Store
Push PC(1113)
Push ()
Push 0
LoadVar bb
Push "cons"
Address
3-ary DictAdd
Push 1
LoadVar bb
Push "mon"
Address
3-ary DictAdd
Apply
Pop
Push PC(1060)
LoadVar bb
DelVar bb
Push "mon"
Address
Apply
Pop
Return
Jump 1392
Frame get bb
DelVar result
Push PC(1052)
LoadVar bb
Push "mon"
Address
Apply
Pop
LoadVar bb
Push "count"
Address
Load
Push 0
2-ary ==
JumpCond False 1305
Push PC(1082)
Push ()
Push 0
LoadVar bb
Push "cons"
Address
3-ary DictAdd
Push 1
LoadVar bb
Push "mon"
Address
3-ary DictAdd
Apply
Pop
LoadVar bb
Push "buf"
Address
LoadVar bb
Push "head"
Address
Load
Address
Load
StoreVar result
LoadVar bb
Push "head"
Address
LoadVar bb
Push "head"
Address
Load
LoadVar bb
Push "size"
Address
Load
2-ary %
Push 1
2-ary +
Store
LoadVar bb
Push "count"
Address
Dup
Load
Push 1
2-ary -
Store
Push PC(1113)
Push ()
Push 0
LoadVar bb
Push "prod"
Address
3-ary DictAdd
Push 1
LoadVar bb
Push "mon"
Address
3-ary DictAdd
Apply
Pop
Push PC(1060)
LoadVar bb
DelVar bb
Push "mon"
Address
Apply
Pop
Return
Jump 1392
Frame producer (bb, v)
Push PC(1188)
Push ()
Push 0
LoadVar bb
DelVar bb
3-ary DictAdd
Push 1
LoadVar v
DelVar v
3-ary DictAdd
Apply
Pop
Return
Jump 1392
Frame consumer bb
Push PC(1276)
LoadVar bb
DelVar bb
Apply
StoreVar v
ReadonlyInc
AtomicInc(lazy)
LoadVar v
DelVar v
Push { 1, 2 }
2-ary in
Assert
AtomicDec
ReadonlyDec
Return
Push PC(1137)
Push 1
Apply
Store testbb
Push PC(1361)
Push ()
Push 0
Push ?testbb
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push ()
Spawn
Push PC(1361)
Push ()
Push 0
Push ?testbb
3-ary DictAdd
Push 1
Push 2
3-ary DictAdd
Push ()
Spawn
Push PC(1376)
Push ?testbb
Push ()
Spawn
Push PC(1376)
Push ?testbb
Push ()
Spawn
Return
DelVar result
```

Duration: 0.0019370999999999972

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store boundedbuffer
Push ()
Store hoare
Push ()
Store synch
Push ()
Store list
Jump 373
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n11
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s14
LoadVar $s14
1-ary IsEmpty
JumpCond True 35
Cut($s14, x)
LoadVar $n11
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n11
Jump 23
DelVar $n11
DelVar $s14
DelVar s
StoreVar result
Return
Jump 373
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 373
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 373
Frame tail s
DelVar result
Push PC(10)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 373
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s71
LoadVar $s71
1-ary IsEmpty
JumpCond True 100
Cut($s71, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 89
DelVar $s71
Return
Jump 373
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s86
LoadVar $s86
1-ary IsEmpty
JumpCond True 117
Cut($s86, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 109
DelVar $s86
StoreVar result
Return
Jump 373
Frame list a
DelVar result
Push 0
StoreVar $n99
Push ()
LoadVar a
DelVar a
StoreVar $s102
LoadVar $s102
1-ary IsEmpty
JumpCond True 139
Cut($s102, v)
LoadVar $n99
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n99
Jump 129
DelVar $n99
DelVar $s102
StoreVar result
Return
Jump 373
Frame values d
DelVar result
Push 0
StoreVar $n117
Push ()
LoadVar d
1-ary keys
StoreVar $s120
LoadVar $s120
1-ary IsEmpty
JumpCond True 164
Cut($s120, k)
LoadVar $n117
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n117
Jump 152
DelVar $n117
DelVar $s120
DelVar d
StoreVar result
Return
Jump 373
Frame items d
DelVar result
Push 0
StoreVar $n138
Push ()
LoadVar d
1-ary keys
StoreVar $s141
LoadVar $s141
1-ary IsEmpty
JumpCond True 196
Cut($s141, k)
LoadVar $n138
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n138
Jump 178
DelVar $n138
DelVar $s141
DelVar d
StoreVar result
Return
Jump 373
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s169
LoadVar $s169
1-ary IsEmpty
JumpCond True 238
Cut($s169, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 211
DelVar $s169
DelVar d
DelVar index
Return
Jump 373
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 253
DelVar a
Push ()
StoreVar result
Jump 328
Push ()
Push 0
Push PC(54)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(63)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n218
Push ()
LoadVar rest
StoreVar $s221
DelVar v
LoadVar $s221
1-ary IsEmpty
JumpCond True 286
Cut($s221, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 271
LoadVar $n218
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n218
Jump 271
DelVar $n218
DelVar $s221
StoreVar lower
Push 0
StoreVar $n237
Push ()
LoadVar rest
DelVar rest
StoreVar $s240
DelVar v
LoadVar $s240
1-ary IsEmpty
JumpCond True 310
Cut($s240, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 295
LoadVar $n237
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n237
Jump 295
DelVar $n237
DelVar $s240
StoreVar higher
Push PC(243)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(243)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 373
Frame sorted d
DelVar result
Push PC(243)
Push PC(121)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 373
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n283
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s286
LoadVar $s286
1-ary IsEmpty
JumpCond True 367
Cut($s286, i)
LoadVar $n283
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n283
Jump 353
DelVar $n283
DelVar $s286
DelVar d
DelVar n
StoreVar result
Return
Push ()
Store bag
Jump 1392
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1392
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s315
LoadVar $s315
1-ary IsEmpty
JumpCond True 397
Cut($s315, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 388
DelVar $s315
StoreVar result
Return
Jump 1392
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s331
LoadVar $s331
1-ary IsEmpty
JumpCond True 434
Cut($s331, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 427
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 408
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 408
DelVar $s331
Return
Jump 1392
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 460
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 464
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1392
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s395
LoadVar $s395
1-ary IsEmpty
JumpCond True 493
Cut($s395, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 482
DelVar $s395
Return
Jump 1392
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1392
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1392
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1392
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 570
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 576
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1392
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 603
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 604
Push False
JumpCond False 613
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 624
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1392
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 642
DelVar bg
DelVar k
Push {}
Push PC(376)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 727
Push PC(466)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 656
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 727
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 668
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 727
Push PC(496)
LoadVar bg
Apply
StoreVar hd
Push PC(578)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(627)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s572
LoadVar $s572
1-ary IsEmpty
JumpCond True 712
Cut($s572, x)
Push PC(541)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 696
DelVar $s572
DelVar hd
Push PC(627)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1392
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1392
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 758
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1392
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1392
Frame Lock ()
DelVar result
Push PC(763)
Push False
Apply
StoreVar result
Return
Jump 1392
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1392
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 794
Jump 797
ReadonlyDec
AtomicDec
Jump 787
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1392
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1392
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1392
Frame Condition ()
DelVar result
Push PC(376)
Push ()
Apply
StoreVar result
Return
Jump 1392
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(437)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(541)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 891
Push PC(437)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 892
Push False
JumpCond False 897
DelVar c
DelVar cnt
DelVar ctx
Jump 900
ReadonlyDec
AtomicDec
Jump 872
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1392
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(376)
Push ()
Apply
2-ary !=
JumpCond False 933
LoadVar c
Push PC(578)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(523)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1392
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(376)
Push ()
Apply
Store
AtomicDec
Return
Jump 1392
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1392
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 964
Jump 967
ReadonlyDec
AtomicDec
Jump 956
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1392
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1392
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1392
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1006
Jump 1009
ReadonlyDec
AtomicDec
Jump 997
ReadonlyDec
Push PC(54)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(63)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1392
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(41)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Jump 1392
Frame Monitor ()
DelVar result
Push PC(770)
Push ()
Apply
StoreVar result
Return
Jump 1392
Frame enter mon
Push PC(786)
LoadVar mon
DelVar mon
Apply
Pop
Return
Jump 1392
Frame exit mon
Push PC(805)
LoadVar mon
DelVar mon
Apply
Pop
Return
Jump 1392
Frame Condition ()
DelVar result
Push ()
Push "sema"
Push PC(763)
Push True
Apply
3-ary DictAdd
Push "count"
Push 0
3-ary DictAdd
StoreVar result
Return
Jump 1392
Frame wait (cond, mon)
LoadVar cond
Push "count"
Address
Dup
Load
Push 1
2-ary +
Store
Push PC(1060)
LoadVar mon
DelVar mon
Apply
Pop
Push PC(786)
LoadVar cond
Push "sema"
Address
Apply
Pop
LoadVar cond
DelVar cond
Push "count"
Address
Dup
Load
Push 1
2-ary -
Store
Return
Jump 1392
Frame signal (cond, mon)
LoadVar cond
Push "count"
Address
Load
Push 0
2-ary >
JumpCond False 1133
Push PC(805)
LoadVar cond
DelVar cond
Push "sema"
Address
Apply
Pop
Push PC(1052)
LoadVar mon
DelVar mon
Apply
Pop
DelVar cond
DelVar mon
Return
Jump 1392
Frame BoundedBuffer size
DelVar result
Push ()
Push "mon"
Push PC(1044)
Push ()
Apply
3-ary DictAdd
Push "prod"
Push PC(1068)
Push ()
Apply
3-ary DictAdd
Push "cons"
Push PC(1068)
Push ()
Apply
3-ary DictAdd
Push "buf"
Push ()
Push 1
LoadVar size
2-ary ..
StoreVar $s994
LoadVar $s994
1-ary IsEmpty
JumpCond True 1170
Cut($s994, x)
LoadVar x
DelVar x
Push ()
3-ary DictAdd
Jump 1161
DelVar $s994
3-ary DictAdd
Push "head"
Push 1
3-ary DictAdd
Push "tail"
Push 1
3-ary DictAdd
Push "count"
Push 0
3-ary DictAdd
Push "size"
LoadVar size
DelVar size
3-ary DictAdd
StoreVar result
Return
Jump 1392
Frame put (bb, item)
Push PC(1052)
LoadVar bb
Push "mon"
Address
Apply
Pop
LoadVar bb
Push "count"
Address
Load
LoadVar bb
Push "size"
Address
Load
2-ary ==
JumpCond False 1219
Push PC(1082)
Push ()
Push 0
LoadVar bb
Push "prod"
Address
3-ary DictAdd
Push 1
LoadVar bb
Push "mon"
Address
3-ary DictAdd
Apply
Pop
LoadVar bb
Push "buf"
Address
LoadVar bb
Push "tail"
Address
Load
Address
LoadVar item
DelVar item
Store
LoadVar bb
Push "tail"
Address
LoadVar bb
Push "tail"
Address
Load
LoadVar bb
Push "size"
Address
Load
2-ary %
Push 1
2-ary +
Store
LoadVar bb
Push "count"
Address
Dup
Load
Push 1
2-ary +
Store
Push PC(1113)
Push ()
Push 0
LoadVar bb
Push "cons"
Address
3-ary DictAdd
Push 1
LoadVar bb
Push "mon"
Address
3-ary DictAdd
Apply
Pop
Push PC(1060)
LoadVar bb
DelVar bb
Push "mon"
Address
Apply
Pop
Return
Jump 1392
Frame get bb
DelVar result
Push PC(1052)
LoadVar bb
Push "mon"
Address
Apply
Pop
LoadVar bb
Push "count"
Address
Load
Push 0
2-ary ==
JumpCond False 1305
Push PC(1082)
Push ()
Push 0
LoadVar bb
Push "cons"
Address
3-ary DictAdd
Push 1
LoadVar bb
Push "mon"
Address
3-ary DictAdd
Apply
Pop
LoadVar bb
Push "buf"
Address
LoadVar bb
Push "head"
Address
Load
Address
Load
StoreVar result
LoadVar bb
Push "head"
Address
LoadVar bb
Push "head"
Address
Load
LoadVar bb
Push "size"
Address
Load
2-ary %
Push 1
2-ary +
Store
LoadVar bb
Push "count"
Address
Dup
Load
Push 1
2-ary -
Store
Push PC(1113)
Push ()
Push 0
LoadVar bb
Push "prod"
Address
3-ary DictAdd
Push 1
LoadVar bb
Push "mon"
Address
3-ary DictAdd
Apply
Pop
Push PC(1060)
LoadVar bb
DelVar bb
Push "mon"
Address
Apply
Pop
Return
Jump 1392
Frame producer (bb, v)
Push PC(1188)
Push ()
Push 0
LoadVar bb
DelVar bb
3-ary DictAdd
Push 1
LoadVar v
DelVar v
3-ary DictAdd
Apply
Pop
Return
Jump 1392
Frame consumer bb
Push PC(1276)
LoadVar bb
DelVar bb
Apply
StoreVar v
ReadonlyInc
AtomicInc(lazy)
LoadVar v
DelVar v
Push { 1, 2 }
2-ary in
Assert
AtomicDec
ReadonlyDec
Return
Push PC(1137)
Push 1
Apply
Store testbb
Push PC(1361)
Push ()
Push 0
Push ?testbb
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push ()
Spawn
Push PC(1361)
Push ()
Push 0
Push ?testbb
3-ary DictAdd
Push 1
Push 2
3-ary DictAdd
Push ()
Spawn
Push PC(1376)
Push ?testbb
Push ()
Spawn
Push PC(1376)
Push ?testbb
Push ()
Spawn
Return
DelVar result
```

Duration: 0.0017639999999999878

---
## -mboundedbuffer=BBhoare -msynch=synchS code/BBtest.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store boundedbuffer
Push ()
Store hoare
Push ()
Store synch
Push ()
Store list
Jump 1152
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n11
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s14
LoadVar $s14
1-ary IsEmpty
JumpCond True 35
Cut($s14, x)
LoadVar $n11
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n11
Jump 23
DelVar $n11
DelVar $s14
DelVar s
StoreVar result
Return
Jump 1152
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 1152
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 1152
Frame tail s
DelVar result
Push PC(10)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 1152
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s71
LoadVar $s71
1-ary IsEmpty
JumpCond True 100
Cut($s71, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 89
DelVar $s71
Return
Jump 1152
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s86
LoadVar $s86
1-ary IsEmpty
JumpCond True 117
Cut($s86, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 109
DelVar $s86
StoreVar result
Return
Jump 1152
Frame list a
DelVar result
Push 0
StoreVar $n99
Push ()
LoadVar a
DelVar a
StoreVar $s102
LoadVar $s102
1-ary IsEmpty
JumpCond True 139
Cut($s102, v)
LoadVar $n99
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n99
Jump 129
DelVar $n99
DelVar $s102
StoreVar result
Return
Jump 1152
Frame values d
DelVar result
Push 0
StoreVar $n117
Push ()
LoadVar d
1-ary keys
StoreVar $s120
LoadVar $s120
1-ary IsEmpty
JumpCond True 164
Cut($s120, k)
LoadVar $n117
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n117
Jump 152
DelVar $n117
DelVar $s120
DelVar d
StoreVar result
Return
Jump 1152
Frame items d
DelVar result
Push 0
StoreVar $n138
Push ()
LoadVar d
1-ary keys
StoreVar $s141
LoadVar $s141
1-ary IsEmpty
JumpCond True 196
Cut($s141, k)
LoadVar $n138
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n138
Jump 178
DelVar $n138
DelVar $s141
DelVar d
StoreVar result
Return
Jump 1152
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s169
LoadVar $s169
1-ary IsEmpty
JumpCond True 238
Cut($s169, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 211
DelVar $s169
DelVar d
DelVar index
Return
Jump 1152
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 253
DelVar a
Push ()
StoreVar result
Jump 328
Push ()
Push 0
Push PC(54)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(63)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n218
Push ()
LoadVar rest
StoreVar $s221
DelVar v
LoadVar $s221
1-ary IsEmpty
JumpCond True 286
Cut($s221, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 271
LoadVar $n218
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n218
Jump 271
DelVar $n218
DelVar $s221
StoreVar lower
Push 0
StoreVar $n237
Push ()
LoadVar rest
DelVar rest
StoreVar $s240
DelVar v
LoadVar $s240
1-ary IsEmpty
JumpCond True 310
Cut($s240, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 295
LoadVar $n237
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n237
Jump 295
DelVar $n237
DelVar $s240
StoreVar higher
Push PC(243)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(243)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 1152
Frame sorted d
DelVar result
Push PC(243)
Push PC(121)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 1152
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n283
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s286
LoadVar $s286
1-ary IsEmpty
JumpCond True 367
Cut($s286, i)
LoadVar $n283
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n283
Jump 353
DelVar $n283
DelVar $s286
DelVar d
DelVar n
StoreVar result
Return
Jump 1152
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1152
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 403
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1152
Frame BinSema acquired
DelVar result
Push ()
Push "acquired"
LoadVar acquired
DelVar acquired
3-ary DictAdd
Push "suspended"
Push ()
3-ary DictAdd
StoreVar result
Return
Jump 1152
Frame Lock ()
DelVar result
Push PC(408)
Push False
Apply
StoreVar result
Return
Jump 1152
Frame acquire binsema
AtomicInc(lazy)
LoadVar binsema
Push "acquired"
Address
Load
JumpCond False 459
LoadVar binsema
Push "suspended"
Address
LoadVar binsema
Push "suspended"
Address
Load
1-ary len
Address
Stop
Continue
Pop
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Load
Assert
AtomicDec
ReadonlyDec
Jump 465
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Push True
Store
AtomicDec
Return
Jump 1152
Frame release binsema
AtomicInc(lazy)
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Push "acquired"
Address
Load
Assert
AtomicDec
ReadonlyDec
LoadVar binsema
Push "suspended"
Address
Load
Push ()
2-ary ==
JumpCond False 493
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Push False
Store
Jump 512
Push ()
Push PC(54)
LoadVar binsema
Push "suspended"
Address
Load
Apply
Go
LoadVar binsema
Push "suspended"
Address
Push PC(63)
LoadVar binsema
DelVar binsema
Push "suspended"
Address
Load
Apply
Store
AtomicDec
Return
Jump 1152
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Load
StoreVar result
Return
Jump 1152
Frame Condition ()
DelVar result
Push ()
StoreVar result
Return
Jump 1152
Frame wait (c, lk)
AtomicInc(lazy)
Push PC(468)
LoadVar lk
Apply
Pop
LoadVar c
LoadVar c
DelVar c
Load
1-ary len
Address
Stop
Continue
Pop
AtomicDec
Push PC(429)
LoadVar lk
DelVar lk
Apply
Pop
Return
Jump 1152
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push ()
2-ary !=
JumpCond False 574
Push ()
Push PC(54)
LoadVar c
Load
Apply
Go
LoadVar c
Push PC(63)
LoadVar c
DelVar c
Load
Apply
Store
DelVar c
AtomicDec
Return
Jump 1152
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
Load
Push ()
2-ary !=
JumpCond False 598
Push ()
Push PC(54)
LoadVar c
Load
Apply
Go
LoadVar c
Push PC(63)
LoadVar c
Load
Apply
Store
Jump 580
DelVar c
AtomicDec
Return
Jump 1152
Frame Semaphore cnt
DelVar result
Push ()
Push "count"
LoadVar cnt
DelVar cnt
3-ary DictAdd
Push "waiters"
Push ()
3-ary DictAdd
StoreVar result
Return
Jump 1152
Frame P sema
AtomicInc(lazy)
LoadVar sema
Push "count"
Address
Load
Push 0
2-ary >
JumpCond False 634
LoadVar sema
DelVar sema
Push "count"
Address
Dup
Load
Push 1
2-ary -
Store
Jump 647
LoadVar sema
Push "waiters"
Address
LoadVar sema
DelVar sema
Push "waiters"
Address
Load
1-ary len
Address
Stop
Continue
Pop
AtomicDec
Return
Jump 1152
Frame V sema
AtomicInc(lazy)
Push ()
Push 0
LoadVar sema
Push "count"
Address
Load
3-ary DictAdd
Push 1
LoadVar sema
Push "waiters"
Address
Load
3-ary DictAdd
StoreVar (cnt, waiters)
LoadVar waiters
Push ()
2-ary !=
JumpCond False 694
ReadonlyInc
AtomicInc(lazy)
LoadVar cnt
DelVar cnt
Push 0
2-ary ==
Assert
AtomicDec
ReadonlyDec
Push ()
LoadVar waiters
Push 0
Apply
Go
LoadVar sema
DelVar sema
Push "waiters"
Address
Push PC(63)
LoadVar waiters
DelVar waiters
Apply
Store
Jump 704
DelVar waiters
LoadVar sema
DelVar sema
Push "count"
Address
LoadVar cnt
DelVar cnt
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1152
Frame Queue ()
DelVar result
Push { "list":(), "waiters":() }
StoreVar result
Return
Jump 1152
Frame get q
DelVar result
AtomicInc(lazy)
LoadVar q
Push "list"
Address
Load
Push ()
2-ary ==
JumpCond False 735
LoadVar q
Push "waiters"
Address
LoadVar q
Push "waiters"
Address
Load
1-ary len
Address
Stop
Continue
Pop
Push PC(54)
LoadVar q
Push "list"
Address
Load
Apply
StoreVar result
LoadVar q
Push "list"
Address
Push PC(63)
LoadVar q
DelVar q
Push "list"
Address
Load
Apply
Store
AtomicDec
Return
Jump 1152
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push "list"
Address
Push PC(41)
Push ()
Push 0
LoadVar q
Push "list"
Address
Load
3-ary DictAdd
Push 1
LoadVar item
3-ary DictAdd
Apply
Store
LoadVar q
Push "waiters"
Address
Load
StoreVar waiters
LoadVar waiters
Push ()
2-ary !=
JumpCond False 798
LoadVar item
DelVar item
LoadVar waiters
Push 0
Apply
Go
LoadVar q
DelVar q
Push "waiters"
Address
Push PC(63)
LoadVar waiters
DelVar waiters
Apply
Store
DelVar item
DelVar q
DelVar waiters
AtomicDec
Return
Jump 1152
Frame Monitor ()
DelVar result
Push PC(421)
Push ()
Apply
StoreVar result
Return
Jump 1152
Frame enter mon
Push PC(429)
LoadVar mon
DelVar mon
Apply
Pop
Return
Jump 1152
Frame exit mon
Push PC(468)
LoadVar mon
DelVar mon
Apply
Pop
Return
Jump 1152
Frame Condition ()
DelVar result
Push ()
Push "sema"
Push PC(408)
Push True
Apply
3-ary DictAdd
Push "count"
Push 0
3-ary DictAdd
StoreVar result
Return
Jump 1152
Frame wait (cond, mon)
LoadVar cond
Push "count"
Address
Dup
Load
Push 1
2-ary +
Store
Push PC(820)
LoadVar mon
DelVar mon
Apply
Pop
Push PC(429)
LoadVar cond
Push "sema"
Address
Apply
Pop
LoadVar cond
DelVar cond
Push "count"
Address
Dup
Load
Push 1
2-ary -
Store
Return
Jump 1152
Frame signal (cond, mon)
LoadVar cond
Push "count"
Address
Load
Push 0
2-ary >
JumpCond False 893
Push PC(468)
LoadVar cond
DelVar cond
Push "sema"
Address
Apply
Pop
Push PC(812)
LoadVar mon
DelVar mon
Apply
Pop
DelVar cond
DelVar mon
Return
Jump 1152
Frame BoundedBuffer size
DelVar result
Push ()
Push "mon"
Push PC(804)
Push ()
Apply
3-ary DictAdd
Push "prod"
Push PC(828)
Push ()
Apply
3-ary DictAdd
Push "cons"
Push PC(828)
Push ()
Apply
3-ary DictAdd
Push "buf"
Push ()
Push 1
LoadVar size
2-ary ..
StoreVar $s796
LoadVar $s796
1-ary IsEmpty
JumpCond True 930
Cut($s796, x)
LoadVar x
DelVar x
Push ()
3-ary DictAdd
Jump 921
DelVar $s796
3-ary DictAdd
Push "head"
Push 1
3-ary DictAdd
Push "tail"
Push 1
3-ary DictAdd
Push "count"
Push 0
3-ary DictAdd
Push "size"
LoadVar size
DelVar size
3-ary DictAdd
StoreVar result
Return
Jump 1152
Frame put (bb, item)
Push PC(812)
LoadVar bb
Push "mon"
Address
Apply
Pop
LoadVar bb
Push "count"
Address
Load
LoadVar bb
Push "size"
Address
Load
2-ary ==
JumpCond False 979
Push PC(842)
Push ()
Push 0
LoadVar bb
Push "prod"
Address
3-ary DictAdd
Push 1
LoadVar bb
Push "mon"
Address
3-ary DictAdd
Apply
Pop
LoadVar bb
Push "buf"
Address
LoadVar bb
Push "tail"
Address
Load
Address
LoadVar item
DelVar item
Store
LoadVar bb
Push "tail"
Address
LoadVar bb
Push "tail"
Address
Load
LoadVar bb
Push "size"
Address
Load
2-ary %
Push 1
2-ary +
Store
LoadVar bb
Push "count"
Address
Dup
Load
Push 1
2-ary +
Store
Push PC(873)
Push ()
Push 0
LoadVar bb
Push "cons"
Address
3-ary DictAdd
Push 1
LoadVar bb
Push "mon"
Address
3-ary DictAdd
Apply
Pop
Push PC(820)
LoadVar bb
DelVar bb
Push "mon"
Address
Apply
Pop
Return
Jump 1152
Frame get bb
DelVar result
Push PC(812)
LoadVar bb
Push "mon"
Address
Apply
Pop
LoadVar bb
Push "count"
Address
Load
Push 0
2-ary ==
JumpCond False 1065
Push PC(842)
Push ()
Push 0
LoadVar bb
Push "cons"
Address
3-ary DictAdd
Push 1
LoadVar bb
Push "mon"
Address
3-ary DictAdd
Apply
Pop
LoadVar bb
Push "buf"
Address
LoadVar bb
Push "head"
Address
Load
Address
Load
StoreVar result
LoadVar bb
Push "head"
Address
LoadVar bb
Push "head"
Address
Load
LoadVar bb
Push "size"
Address
Load
2-ary %
Push 1
2-ary +
Store
LoadVar bb
Push "count"
Address
Dup
Load
Push 1
2-ary -
Store
Push PC(873)
Push ()
Push 0
LoadVar bb
Push "prod"
Address
3-ary DictAdd
Push 1
LoadVar bb
Push "mon"
Address
3-ary DictAdd
Apply
Pop
Push PC(820)
LoadVar bb
DelVar bb
Push "mon"
Address
Apply
Pop
Return
Jump 1152
Frame producer (bb, v)
Push PC(948)
Push ()
Push 0
LoadVar bb
DelVar bb
3-ary DictAdd
Push 1
LoadVar v
DelVar v
3-ary DictAdd
Apply
Pop
Return
Jump 1152
Frame consumer bb
Push PC(1036)
LoadVar bb
DelVar bb
Apply
StoreVar v
ReadonlyInc
AtomicInc(lazy)
LoadVar v
DelVar v
Push { 1, 2 }
2-ary in
Assert
AtomicDec
ReadonlyDec
Return
Push PC(897)
Push 1
Apply
Store testbb
Push PC(1121)
Push ()
Push 0
Push ?testbb
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push ()
Spawn
Push PC(1121)
Push ()
Push 0
Push ?testbb
3-ary DictAdd
Push 1
Push 2
3-ary DictAdd
Push ()
Spawn
Push PC(1136)
Push ?testbb
Push ()
Spawn
Push PC(1136)
Push ?testbb
Push ()
Spawn
Return
DelVar result
```

Duration: 0.0018250999999999962

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store boundedbuffer
Push ()
Store hoare
Push ()
Store synch
Push ()
Store list
Jump 1152
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n11
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s14
LoadVar $s14
1-ary IsEmpty
JumpCond True 35
Cut($s14, x)
LoadVar $n11
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n11
Jump 23
DelVar $n11
DelVar $s14
DelVar s
StoreVar result
Return
Jump 1152
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 1152
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 1152
Frame tail s
DelVar result
Push PC(10)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 1152
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s71
LoadVar $s71
1-ary IsEmpty
JumpCond True 100
Cut($s71, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 89
DelVar $s71
Return
Jump 1152
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s86
LoadVar $s86
1-ary IsEmpty
JumpCond True 117
Cut($s86, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 109
DelVar $s86
StoreVar result
Return
Jump 1152
Frame list a
DelVar result
Push 0
StoreVar $n99
Push ()
LoadVar a
DelVar a
StoreVar $s102
LoadVar $s102
1-ary IsEmpty
JumpCond True 139
Cut($s102, v)
LoadVar $n99
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n99
Jump 129
DelVar $n99
DelVar $s102
StoreVar result
Return
Jump 1152
Frame values d
DelVar result
Push 0
StoreVar $n117
Push ()
LoadVar d
1-ary keys
StoreVar $s120
LoadVar $s120
1-ary IsEmpty
JumpCond True 164
Cut($s120, k)
LoadVar $n117
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n117
Jump 152
DelVar $n117
DelVar $s120
DelVar d
StoreVar result
Return
Jump 1152
Frame items d
DelVar result
Push 0
StoreVar $n138
Push ()
LoadVar d
1-ary keys
StoreVar $s141
LoadVar $s141
1-ary IsEmpty
JumpCond True 196
Cut($s141, k)
LoadVar $n138
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n138
Jump 178
DelVar $n138
DelVar $s141
DelVar d
StoreVar result
Return
Jump 1152
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s169
LoadVar $s169
1-ary IsEmpty
JumpCond True 238
Cut($s169, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 211
DelVar $s169
DelVar d
DelVar index
Return
Jump 1152
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 253
DelVar a
Push ()
StoreVar result
Jump 328
Push ()
Push 0
Push PC(54)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(63)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n218
Push ()
LoadVar rest
StoreVar $s221
DelVar v
LoadVar $s221
1-ary IsEmpty
JumpCond True 286
Cut($s221, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 271
LoadVar $n218
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n218
Jump 271
DelVar $n218
DelVar $s221
StoreVar lower
Push 0
StoreVar $n237
Push ()
LoadVar rest
DelVar rest
StoreVar $s240
DelVar v
LoadVar $s240
1-ary IsEmpty
JumpCond True 310
Cut($s240, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 295
LoadVar $n237
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n237
Jump 295
DelVar $n237
DelVar $s240
StoreVar higher
Push PC(243)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(243)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 1152
Frame sorted d
DelVar result
Push PC(243)
Push PC(121)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 1152
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n283
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s286
LoadVar $s286
1-ary IsEmpty
JumpCond True 367
Cut($s286, i)
LoadVar $n283
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n283
Jump 353
DelVar $n283
DelVar $s286
DelVar d
DelVar n
StoreVar result
Return
Jump 1152
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1152
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 403
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1152
Frame BinSema acquired
DelVar result
Push ()
Push "acquired"
LoadVar acquired
DelVar acquired
3-ary DictAdd
Push "suspended"
Push ()
3-ary DictAdd
StoreVar result
Return
Jump 1152
Frame Lock ()
DelVar result
Push PC(408)
Push False
Apply
StoreVar result
Return
Jump 1152
Frame acquire binsema
AtomicInc(lazy)
LoadVar binsema
Push "acquired"
Address
Load
JumpCond False 459
LoadVar binsema
Push "suspended"
Address
LoadVar binsema
Push "suspended"
Address
Load
1-ary len
Address
Stop
Continue
Pop
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Load
Assert
AtomicDec
ReadonlyDec
Jump 465
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Push True
Store
AtomicDec
Return
Jump 1152
Frame release binsema
AtomicInc(lazy)
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Push "acquired"
Address
Load
Assert
AtomicDec
ReadonlyDec
LoadVar binsema
Push "suspended"
Address
Load
Push ()
2-ary ==
JumpCond False 493
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Push False
Store
Jump 512
Push ()
Push PC(54)
LoadVar binsema
Push "suspended"
Address
Load
Apply
Go
LoadVar binsema
Push "suspended"
Address
Push PC(63)
LoadVar binsema
DelVar binsema
Push "suspended"
Address
Load
Apply
Store
AtomicDec
Return
Jump 1152
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Load
StoreVar result
Return
Jump 1152
Frame Condition ()
DelVar result
Push ()
StoreVar result
Return
Jump 1152
Frame wait (c, lk)
AtomicInc(lazy)
Push PC(468)
LoadVar lk
Apply
Pop
LoadVar c
LoadVar c
DelVar c
Load
1-ary len
Address
Stop
Continue
Pop
AtomicDec
Push PC(429)
LoadVar lk
DelVar lk
Apply
Pop
Return
Jump 1152
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push ()
2-ary !=
JumpCond False 574
Push ()
Push PC(54)
LoadVar c
Load
Apply
Go
LoadVar c
Push PC(63)
LoadVar c
DelVar c
Load
Apply
Store
DelVar c
AtomicDec
Return
Jump 1152
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
Load
Push ()
2-ary !=
JumpCond False 598
Push ()
Push PC(54)
LoadVar c
Load
Apply
Go
LoadVar c
Push PC(63)
LoadVar c
Load
Apply
Store
Jump 580
DelVar c
AtomicDec
Return
Jump 1152
Frame Semaphore cnt
DelVar result
Push ()
Push "count"
LoadVar cnt
DelVar cnt
3-ary DictAdd
Push "waiters"
Push ()
3-ary DictAdd
StoreVar result
Return
Jump 1152
Frame P sema
AtomicInc(lazy)
LoadVar sema
Push "count"
Address
Load
Push 0
2-ary >
JumpCond False 634
LoadVar sema
DelVar sema
Push "count"
Address
Dup
Load
Push 1
2-ary -
Store
Jump 647
LoadVar sema
Push "waiters"
Address
LoadVar sema
DelVar sema
Push "waiters"
Address
Load
1-ary len
Address
Stop
Continue
Pop
AtomicDec
Return
Jump 1152
Frame V sema
AtomicInc(lazy)
Push ()
Push 0
LoadVar sema
Push "count"
Address
Load
3-ary DictAdd
Push 1
LoadVar sema
Push "waiters"
Address
Load
3-ary DictAdd
StoreVar (cnt, waiters)
LoadVar waiters
Push ()
2-ary !=
JumpCond False 694
ReadonlyInc
AtomicInc(lazy)
LoadVar cnt
DelVar cnt
Push 0
2-ary ==
Assert
AtomicDec
ReadonlyDec
Push ()
LoadVar waiters
Push 0
Apply
Go
LoadVar sema
DelVar sema
Push "waiters"
Address
Push PC(63)
LoadVar waiters
DelVar waiters
Apply
Store
Jump 704
DelVar waiters
LoadVar sema
DelVar sema
Push "count"
Address
LoadVar cnt
DelVar cnt
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1152
Frame Queue ()
DelVar result
Push { "list":(), "waiters":() }
StoreVar result
Return
Jump 1152
Frame get q
DelVar result
AtomicInc(lazy)
LoadVar q
Push "list"
Address
Load
Push ()
2-ary ==
JumpCond False 735
LoadVar q
Push "waiters"
Address
LoadVar q
Push "waiters"
Address
Load
1-ary len
Address
Stop
Continue
Pop
Push PC(54)
LoadVar q
Push "list"
Address
Load
Apply
StoreVar result
LoadVar q
Push "list"
Address
Push PC(63)
LoadVar q
DelVar q
Push "list"
Address
Load
Apply
Store
AtomicDec
Return
Jump 1152
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push "list"
Address
Push PC(41)
Push ()
Push 0
LoadVar q
Push "list"
Address
Load
3-ary DictAdd
Push 1
LoadVar item
3-ary DictAdd
Apply
Store
LoadVar q
Push "waiters"
Address
Load
StoreVar waiters
LoadVar waiters
Push ()
2-ary !=
JumpCond False 798
LoadVar item
DelVar item
LoadVar waiters
Push 0
Apply
Go
LoadVar q
DelVar q
Push "waiters"
Address
Push PC(63)
LoadVar waiters
DelVar waiters
Apply
Store
DelVar item
DelVar q
DelVar waiters
AtomicDec
Return
Jump 1152
Frame Monitor ()
DelVar result
Push PC(421)
Push ()
Apply
StoreVar result
Return
Jump 1152
Frame enter mon
Push PC(429)
LoadVar mon
DelVar mon
Apply
Pop
Return
Jump 1152
Frame exit mon
Push PC(468)
LoadVar mon
DelVar mon
Apply
Pop
Return
Jump 1152
Frame Condition ()
DelVar result
Push ()
Push "sema"
Push PC(408)
Push True
Apply
3-ary DictAdd
Push "count"
Push 0
3-ary DictAdd
StoreVar result
Return
Jump 1152
Frame wait (cond, mon)
LoadVar cond
Push "count"
Address
Dup
Load
Push 1
2-ary +
Store
Push PC(820)
LoadVar mon
DelVar mon
Apply
Pop
Push PC(429)
LoadVar cond
Push "sema"
Address
Apply
Pop
LoadVar cond
DelVar cond
Push "count"
Address
Dup
Load
Push 1
2-ary -
Store
Return
Jump 1152
Frame signal (cond, mon)
LoadVar cond
Push "count"
Address
Load
Push 0
2-ary >
JumpCond False 893
Push PC(468)
LoadVar cond
DelVar cond
Push "sema"
Address
Apply
Pop
Push PC(812)
LoadVar mon
DelVar mon
Apply
Pop
DelVar cond
DelVar mon
Return
Jump 1152
Frame BoundedBuffer size
DelVar result
Push ()
Push "mon"
Push PC(804)
Push ()
Apply
3-ary DictAdd
Push "prod"
Push PC(828)
Push ()
Apply
3-ary DictAdd
Push "cons"
Push PC(828)
Push ()
Apply
3-ary DictAdd
Push "buf"
Push ()
Push 1
LoadVar size
2-ary ..
StoreVar $s796
LoadVar $s796
1-ary IsEmpty
JumpCond True 930
Cut($s796, x)
LoadVar x
DelVar x
Push ()
3-ary DictAdd
Jump 921
DelVar $s796
3-ary DictAdd
Push "head"
Push 1
3-ary DictAdd
Push "tail"
Push 1
3-ary DictAdd
Push "count"
Push 0
3-ary DictAdd
Push "size"
LoadVar size
DelVar size
3-ary DictAdd
StoreVar result
Return
Jump 1152
Frame put (bb, item)
Push PC(812)
LoadVar bb
Push "mon"
Address
Apply
Pop
LoadVar bb
Push "count"
Address
Load
LoadVar bb
Push "size"
Address
Load
2-ary ==
JumpCond False 979
Push PC(842)
Push ()
Push 0
LoadVar bb
Push "prod"
Address
3-ary DictAdd
Push 1
LoadVar bb
Push "mon"
Address
3-ary DictAdd
Apply
Pop
LoadVar bb
Push "buf"
Address
LoadVar bb
Push "tail"
Address
Load
Address
LoadVar item
DelVar item
Store
LoadVar bb
Push "tail"
Address
LoadVar bb
Push "tail"
Address
Load
LoadVar bb
Push "size"
Address
Load
2-ary %
Push 1
2-ary +
Store
LoadVar bb
Push "count"
Address
Dup
Load
Push 1
2-ary +
Store
Push PC(873)
Push ()
Push 0
LoadVar bb
Push "cons"
Address
3-ary DictAdd
Push 1
LoadVar bb
Push "mon"
Address
3-ary DictAdd
Apply
Pop
Push PC(820)
LoadVar bb
DelVar bb
Push "mon"
Address
Apply
Pop
Return
Jump 1152
Frame get bb
DelVar result
Push PC(812)
LoadVar bb
Push "mon"
Address
Apply
Pop
LoadVar bb
Push "count"
Address
Load
Push 0
2-ary ==
JumpCond False 1065
Push PC(842)
Push ()
Push 0
LoadVar bb
Push "cons"
Address
3-ary DictAdd
Push 1
LoadVar bb
Push "mon"
Address
3-ary DictAdd
Apply
Pop
LoadVar bb
Push "buf"
Address
LoadVar bb
Push "head"
Address
Load
Address
Load
StoreVar result
LoadVar bb
Push "head"
Address
LoadVar bb
Push "head"
Address
Load
LoadVar bb
Push "size"
Address
Load
2-ary %
Push 1
2-ary +
Store
LoadVar bb
Push "count"
Address
Dup
Load
Push 1
2-ary -
Store
Push PC(873)
Push ()
Push 0
LoadVar bb
Push "prod"
Address
3-ary DictAdd
Push 1
LoadVar bb
Push "mon"
Address
3-ary DictAdd
Apply
Pop
Push PC(820)
LoadVar bb
DelVar bb
Push "mon"
Address
Apply
Pop
Return
Jump 1152
Frame producer (bb, v)
Push PC(948)
Push ()
Push 0
LoadVar bb
DelVar bb
3-ary DictAdd
Push 1
LoadVar v
DelVar v
3-ary DictAdd
Apply
Pop
Return
Jump 1152
Frame consumer bb
Push PC(1036)
LoadVar bb
DelVar bb
Apply
StoreVar v
ReadonlyInc
AtomicInc(lazy)
LoadVar v
DelVar v
Push { 1, 2 }
2-ary in
Assert
AtomicDec
ReadonlyDec
Return
Push PC(897)
Push 1
Apply
Store testbb
Push PC(1121)
Push ()
Push 0
Push ?testbb
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push ()
Spawn
Push PC(1121)
Push ()
Push 0
Push ?testbb
3-ary DictAdd
Push 1
Push 2
3-ary DictAdd
Push ()
Spawn
Push PC(1136)
Push ?testbb
Push ()
Spawn
Push PC(1136)
Push ?testbb
Push ()
Spawn
Return
DelVar result
```

Duration: 0.0016111999999999793

---
## -mRW=RWcv code/RWtest.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store RW
Push ()
Store synch
Push ()
Store list
Jump 371
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n9
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s12
LoadVar $s12
1-ary IsEmpty
JumpCond True 33
Cut($s12, x)
LoadVar $n9
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n9
Jump 21
DelVar $n9
DelVar $s12
DelVar s
StoreVar result
Return
Jump 371
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 371
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 371
Frame tail s
DelVar result
Push PC(8)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 371
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s69
LoadVar $s69
1-ary IsEmpty
JumpCond True 98
Cut($s69, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 87
DelVar $s69
Return
Jump 371
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s84
LoadVar $s84
1-ary IsEmpty
JumpCond True 115
Cut($s84, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 107
DelVar $s84
StoreVar result
Return
Jump 371
Frame list a
DelVar result
Push 0
StoreVar $n97
Push ()
LoadVar a
DelVar a
StoreVar $s100
LoadVar $s100
1-ary IsEmpty
JumpCond True 137
Cut($s100, v)
LoadVar $n97
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n97
Jump 127
DelVar $n97
DelVar $s100
StoreVar result
Return
Jump 371
Frame values d
DelVar result
Push 0
StoreVar $n115
Push ()
LoadVar d
1-ary keys
StoreVar $s118
LoadVar $s118
1-ary IsEmpty
JumpCond True 162
Cut($s118, k)
LoadVar $n115
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n115
Jump 150
DelVar $n115
DelVar $s118
DelVar d
StoreVar result
Return
Jump 371
Frame items d
DelVar result
Push 0
StoreVar $n136
Push ()
LoadVar d
1-ary keys
StoreVar $s139
LoadVar $s139
1-ary IsEmpty
JumpCond True 194
Cut($s139, k)
LoadVar $n136
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n136
Jump 176
DelVar $n136
DelVar $s139
DelVar d
StoreVar result
Return
Jump 371
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s167
LoadVar $s167
1-ary IsEmpty
JumpCond True 236
Cut($s167, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 209
DelVar $s167
DelVar d
DelVar index
Return
Jump 371
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 251
DelVar a
Push ()
StoreVar result
Jump 326
Push ()
Push 0
Push PC(52)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(61)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n216
Push ()
LoadVar rest
StoreVar $s219
DelVar v
LoadVar $s219
1-ary IsEmpty
JumpCond True 284
Cut($s219, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 269
LoadVar $n216
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n216
Jump 269
DelVar $n216
DelVar $s219
StoreVar lower
Push 0
StoreVar $n235
Push ()
LoadVar rest
DelVar rest
StoreVar $s238
DelVar v
LoadVar $s238
1-ary IsEmpty
JumpCond True 308
Cut($s238, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 293
LoadVar $n235
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n235
Jump 293
DelVar $n235
DelVar $s238
StoreVar higher
Push PC(241)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(241)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 371
Frame sorted d
DelVar result
Push PC(241)
Push PC(119)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 371
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n281
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s284
LoadVar $s284
1-ary IsEmpty
JumpCond True 365
Cut($s284, i)
LoadVar $n281
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n281
Jump 351
DelVar $n281
DelVar $s284
DelVar d
DelVar n
StoreVar result
Return
Push ()
Store bag
Jump 1232
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1232
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s313
LoadVar $s313
1-ary IsEmpty
JumpCond True 395
Cut($s313, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 386
DelVar $s313
StoreVar result
Return
Jump 1232
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s329
LoadVar $s329
1-ary IsEmpty
JumpCond True 432
Cut($s329, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 425
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 406
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 406
DelVar $s329
Return
Jump 1232
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 458
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 462
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1232
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s393
LoadVar $s393
1-ary IsEmpty
JumpCond True 491
Cut($s393, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 480
DelVar $s393
Return
Jump 1232
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1232
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1232
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1232
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 568
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 574
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1232
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 601
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 602
Push False
JumpCond False 611
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 622
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1232
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 640
DelVar bg
DelVar k
Push {}
Push PC(374)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 725
Push PC(464)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 654
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 725
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 666
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 725
Push PC(494)
LoadVar bg
Apply
StoreVar hd
Push PC(576)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(625)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s570
LoadVar $s570
1-ary IsEmpty
JumpCond True 710
Cut($s570, x)
Push PC(539)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 694
DelVar $s570
DelVar hd
Push PC(625)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1232
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1232
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 756
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1232
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1232
Frame Lock ()
DelVar result
Push PC(761)
Push False
Apply
StoreVar result
Return
Jump 1232
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1232
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 792
Jump 795
ReadonlyDec
AtomicDec
Jump 785
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1232
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1232
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1232
Frame Condition ()
DelVar result
Push PC(374)
Push ()
Apply
StoreVar result
Return
Jump 1232
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(435)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(539)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 889
Push PC(435)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 890
Push False
JumpCond False 895
DelVar c
DelVar cnt
DelVar ctx
Jump 898
ReadonlyDec
AtomicDec
Jump 870
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1232
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(374)
Push ()
Apply
2-ary !=
JumpCond False 931
LoadVar c
Push PC(576)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(521)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1232
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(374)
Push ()
Apply
Store
AtomicDec
Return
Jump 1232
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1232
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 962
Jump 965
ReadonlyDec
AtomicDec
Jump 954
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1232
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1232
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1232
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1004
Jump 1007
ReadonlyDec
AtomicDec
Jump 995
ReadonlyDec
Push PC(52)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(61)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1232
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(39)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Jump 1232
Frame RWlock ()
DelVar result
Push ()
Push "nreaders"
Push 0
3-ary DictAdd
Push "nwriters"
Push 0
3-ary DictAdd
Push "mutex"
Push PC(768)
Push ()
Apply
3-ary DictAdd
Push "r_cond"
Push PC(827)
Push ()
Apply
3-ary DictAdd
Push "w_cond"
Push PC(827)
Push ()
Apply
3-ary DictAdd
StoreVar result
Return
Jump 1232
Frame read_acquire rw
Push PC(784)
LoadVar rw
Push "mutex"
Address
Apply
Pop
LoadVar rw
Push "nwriters"
Address
Load
Push 0
2-ary >
JumpCond False 1098
Push PC(835)
Push ()
Push 0
LoadVar rw
Push "r_cond"
Address
3-ary DictAdd
Push 1
LoadVar rw
Push "mutex"
Address
3-ary DictAdd
Apply
Pop
Jump 1076
LoadVar rw
Push "nreaders"
Address
Dup
Load
Push 1
2-ary +
Store
Push PC(803)
LoadVar rw
DelVar rw
Push "mutex"
Address
Apply
Pop
Return
Jump 1232
Frame read_release rw
Push PC(784)
LoadVar rw
Push "mutex"
Address
Apply
Pop
LoadVar rw
Push "nreaders"
Address
Dup
Load
Push 1
2-ary -
Store
LoadVar rw
Push "nreaders"
Address
Load
Push 0
2-ary ==
JumpCond False 1143
Push PC(906)
LoadVar rw
Push "w_cond"
Address
Apply
Pop
Push PC(803)
LoadVar rw
DelVar rw
Push "mutex"
Address
Apply
Pop
Return
Jump 1232
Frame write_acquire rw
Push PC(784)
LoadVar rw
Push "mutex"
Address
Apply
Pop
LoadVar rw
Push "nreaders"
Address
Load
LoadVar rw
Push "nwriters"
Address
Load
2-ary +
Push 0
2-ary >
JumpCond False 1186
Push PC(835)
Push ()
Push 0
LoadVar rw
Push "w_cond"
Address
3-ary DictAdd
Push 1
LoadVar rw
Push "mutex"
Address
3-ary DictAdd
Apply
Pop
Jump 1159
LoadVar rw
Push "nwriters"
Address
Push 1
Store
Push PC(803)
LoadVar rw
DelVar rw
Push "mutex"
Address
Apply
Pop
Return
Jump 1232
Frame write_release rw
Push PC(784)
LoadVar rw
Push "mutex"
Address
Apply
Pop
LoadVar rw
Push "nwriters"
Address
Push 0
Store
Push PC(935)
LoadVar rw
Push "r_cond"
Address
Apply
Pop
Push PC(906)
LoadVar rw
Push "w_cond"
Address
Apply
Pop
Push PC(803)
LoadVar rw
DelVar rw
Push "mutex"
Address
Apply
Pop
Return
Push PC(1042)
Push ()
Apply
Store rw
Jump 1301
Frame thread ()
Push { False, True }
Choose
JumpCond False 1300
Push { "read", "write" }
Choose
Push "read"
2-ary ==
JumpCond False 1273
Push PC(1069)
Push ?rw
Apply
Pop
AtomicInc(eager)
ReadonlyInc
AtomicInc(lazy)
Push PC(1250)
1-ary countLabel
Push 1
2-ary >=
JumpCond False 1263
Push PC(1277)
1-ary countLabel
Push 0
2-ary ==
Jump 1264
Push False
Assert
AtomicDec
ReadonlyDec
AtomicDec
Push PC(1115)
Push ?rw
Apply
Pop
Jump 1238
Push PC(1152)
Push ?rw
Apply
Pop
AtomicInc(eager)
ReadonlyInc
AtomicInc(lazy)
Push PC(1250)
1-ary countLabel
Push 0
2-ary ==
JumpCond False 1290
Push PC(1277)
1-ary countLabel
Push 1
2-ary ==
Jump 1291
Push False
Assert
AtomicDec
ReadonlyDec
AtomicDec
Push PC(1200)
Push ?rw
Apply
Pop
Jump 1238
Return
Push { 1, 2, 3 }
StoreVar $s1144
LoadVar $s1144
1-ary IsEmpty
JumpCond True 1313
Cut($s1144, i)
DelVar i
Push PC(1237)
Push ()
Push ()
Spawn
Jump 1303
DelVar $s1144
Return
DelVar result
```

Duration: 0.001464099999999996

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store RW
Push ()
Store synch
Push ()
Store list
Jump 371
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n9
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s12
LoadVar $s12
1-ary IsEmpty
JumpCond True 33
Cut($s12, x)
LoadVar $n9
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n9
Jump 21
DelVar $n9
DelVar $s12
DelVar s
StoreVar result
Return
Jump 371
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 371
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 371
Frame tail s
DelVar result
Push PC(8)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 371
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s69
LoadVar $s69
1-ary IsEmpty
JumpCond True 98
Cut($s69, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 87
DelVar $s69
Return
Jump 371
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s84
LoadVar $s84
1-ary IsEmpty
JumpCond True 115
Cut($s84, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 107
DelVar $s84
StoreVar result
Return
Jump 371
Frame list a
DelVar result
Push 0
StoreVar $n97
Push ()
LoadVar a
DelVar a
StoreVar $s100
LoadVar $s100
1-ary IsEmpty
JumpCond True 137
Cut($s100, v)
LoadVar $n97
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n97
Jump 127
DelVar $n97
DelVar $s100
StoreVar result
Return
Jump 371
Frame values d
DelVar result
Push 0
StoreVar $n115
Push ()
LoadVar d
1-ary keys
StoreVar $s118
LoadVar $s118
1-ary IsEmpty
JumpCond True 162
Cut($s118, k)
LoadVar $n115
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n115
Jump 150
DelVar $n115
DelVar $s118
DelVar d
StoreVar result
Return
Jump 371
Frame items d
DelVar result
Push 0
StoreVar $n136
Push ()
LoadVar d
1-ary keys
StoreVar $s139
LoadVar $s139
1-ary IsEmpty
JumpCond True 194
Cut($s139, k)
LoadVar $n136
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n136
Jump 176
DelVar $n136
DelVar $s139
DelVar d
StoreVar result
Return
Jump 371
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s167
LoadVar $s167
1-ary IsEmpty
JumpCond True 236
Cut($s167, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 209
DelVar $s167
DelVar d
DelVar index
Return
Jump 371
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 251
DelVar a
Push ()
StoreVar result
Jump 326
Push ()
Push 0
Push PC(52)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(61)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n216
Push ()
LoadVar rest
StoreVar $s219
DelVar v
LoadVar $s219
1-ary IsEmpty
JumpCond True 284
Cut($s219, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 269
LoadVar $n216
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n216
Jump 269
DelVar $n216
DelVar $s219
StoreVar lower
Push 0
StoreVar $n235
Push ()
LoadVar rest
DelVar rest
StoreVar $s238
DelVar v
LoadVar $s238
1-ary IsEmpty
JumpCond True 308
Cut($s238, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 293
LoadVar $n235
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n235
Jump 293
DelVar $n235
DelVar $s238
StoreVar higher
Push PC(241)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(241)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 371
Frame sorted d
DelVar result
Push PC(241)
Push PC(119)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 371
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n281
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s284
LoadVar $s284
1-ary IsEmpty
JumpCond True 365
Cut($s284, i)
LoadVar $n281
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n281
Jump 351
DelVar $n281
DelVar $s284
DelVar d
DelVar n
StoreVar result
Return
Push ()
Store bag
Jump 1232
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1232
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s313
LoadVar $s313
1-ary IsEmpty
JumpCond True 395
Cut($s313, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 386
DelVar $s313
StoreVar result
Return
Jump 1232
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s329
LoadVar $s329
1-ary IsEmpty
JumpCond True 432
Cut($s329, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 425
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 406
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 406
DelVar $s329
Return
Jump 1232
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 458
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 462
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1232
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s393
LoadVar $s393
1-ary IsEmpty
JumpCond True 491
Cut($s393, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 480
DelVar $s393
Return
Jump 1232
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1232
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1232
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1232
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 568
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 574
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1232
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 601
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 602
Push False
JumpCond False 611
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 622
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1232
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 640
DelVar bg
DelVar k
Push {}
Push PC(374)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 725
Push PC(464)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 654
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 725
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 666
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 725
Push PC(494)
LoadVar bg
Apply
StoreVar hd
Push PC(576)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(625)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s570
LoadVar $s570
1-ary IsEmpty
JumpCond True 710
Cut($s570, x)
Push PC(539)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 694
DelVar $s570
DelVar hd
Push PC(625)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1232
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1232
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 756
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1232
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1232
Frame Lock ()
DelVar result
Push PC(761)
Push False
Apply
StoreVar result
Return
Jump 1232
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1232
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 792
Jump 795
ReadonlyDec
AtomicDec
Jump 785
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1232
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1232
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1232
Frame Condition ()
DelVar result
Push PC(374)
Push ()
Apply
StoreVar result
Return
Jump 1232
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(435)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(539)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 889
Push PC(435)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 890
Push False
JumpCond False 895
DelVar c
DelVar cnt
DelVar ctx
Jump 898
ReadonlyDec
AtomicDec
Jump 870
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1232
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(374)
Push ()
Apply
2-ary !=
JumpCond False 931
LoadVar c
Push PC(576)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(521)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1232
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(374)
Push ()
Apply
Store
AtomicDec
Return
Jump 1232
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1232
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 962
Jump 965
ReadonlyDec
AtomicDec
Jump 954
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1232
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1232
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1232
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1004
Jump 1007
ReadonlyDec
AtomicDec
Jump 995
ReadonlyDec
Push PC(52)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(61)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1232
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(39)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Jump 1232
Frame RWlock ()
DelVar result
Push ()
Push "nreaders"
Push 0
3-ary DictAdd
Push "nwriters"
Push 0
3-ary DictAdd
Push "mutex"
Push PC(768)
Push ()
Apply
3-ary DictAdd
Push "r_cond"
Push PC(827)
Push ()
Apply
3-ary DictAdd
Push "w_cond"
Push PC(827)
Push ()
Apply
3-ary DictAdd
StoreVar result
Return
Jump 1232
Frame read_acquire rw
Push PC(784)
LoadVar rw
Push "mutex"
Address
Apply
Pop
LoadVar rw
Push "nwriters"
Address
Load
Push 0
2-ary >
JumpCond False 1098
Push PC(835)
Push ()
Push 0
LoadVar rw
Push "r_cond"
Address
3-ary DictAdd
Push 1
LoadVar rw
Push "mutex"
Address
3-ary DictAdd
Apply
Pop
Jump 1076
LoadVar rw
Push "nreaders"
Address
Dup
Load
Push 1
2-ary +
Store
Push PC(803)
LoadVar rw
DelVar rw
Push "mutex"
Address
Apply
Pop
Return
Jump 1232
Frame read_release rw
Push PC(784)
LoadVar rw
Push "mutex"
Address
Apply
Pop
LoadVar rw
Push "nreaders"
Address
Dup
Load
Push 1
2-ary -
Store
LoadVar rw
Push "nreaders"
Address
Load
Push 0
2-ary ==
JumpCond False 1143
Push PC(906)
LoadVar rw
Push "w_cond"
Address
Apply
Pop
Push PC(803)
LoadVar rw
DelVar rw
Push "mutex"
Address
Apply
Pop
Return
Jump 1232
Frame write_acquire rw
Push PC(784)
LoadVar rw
Push "mutex"
Address
Apply
Pop
LoadVar rw
Push "nreaders"
Address
Load
LoadVar rw
Push "nwriters"
Address
Load
2-ary +
Push 0
2-ary >
JumpCond False 1186
Push PC(835)
Push ()
Push 0
LoadVar rw
Push "w_cond"
Address
3-ary DictAdd
Push 1
LoadVar rw
Push "mutex"
Address
3-ary DictAdd
Apply
Pop
Jump 1159
LoadVar rw
Push "nwriters"
Address
Push 1
Store
Push PC(803)
LoadVar rw
DelVar rw
Push "mutex"
Address
Apply
Pop
Return
Jump 1232
Frame write_release rw
Push PC(784)
LoadVar rw
Push "mutex"
Address
Apply
Pop
LoadVar rw
Push "nwriters"
Address
Push 0
Store
Push PC(935)
LoadVar rw
Push "r_cond"
Address
Apply
Pop
Push PC(906)
LoadVar rw
Push "w_cond"
Address
Apply
Pop
Push PC(803)
LoadVar rw
DelVar rw
Push "mutex"
Address
Apply
Pop
Return
Push PC(1042)
Push ()
Apply
Store rw
Jump 1301
Frame thread ()
Push { False, True }
Choose
JumpCond False 1300
Push { "read", "write" }
Choose
Push "read"
2-ary ==
JumpCond False 1273
Push PC(1069)
Push ?rw
Apply
Pop
AtomicInc(eager)
ReadonlyInc
AtomicInc(lazy)
Push PC(1250)
1-ary countLabel
Push 1
2-ary >=
JumpCond False 1263
Push PC(1277)
1-ary countLabel
Push 0
2-ary ==
Jump 1264
Push False
Assert
AtomicDec
ReadonlyDec
AtomicDec
Push PC(1115)
Push ?rw
Apply
Pop
Jump 1238
Push PC(1152)
Push ?rw
Apply
Pop
AtomicInc(eager)
ReadonlyInc
AtomicInc(lazy)
Push PC(1250)
1-ary countLabel
Push 0
2-ary ==
JumpCond False 1290
Push PC(1277)
1-ary countLabel
Push 1
2-ary ==
Jump 1291
Push False
Assert
AtomicDec
ReadonlyDec
AtomicDec
Push PC(1200)
Push ?rw
Apply
Pop
Jump 1238
Return
Push { 1, 2, 3 }
StoreVar $s1144
LoadVar $s1144
1-ary IsEmpty
JumpCond True 1313
Cut($s1144, i)
DelVar i
Push PC(1237)
Push ()
Push ()
Spawn
Jump 1303
DelVar $s1144
Return
DelVar result
```

Duration: 0.0016965000000000174

---
## -mRW=RWcv -msynch=synchS code/RWtest.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store RW
Push ()
Store synch
Push ()
Store list
Jump 992
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n9
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s12
LoadVar $s12
1-ary IsEmpty
JumpCond True 33
Cut($s12, x)
LoadVar $n9
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n9
Jump 21
DelVar $n9
DelVar $s12
DelVar s
StoreVar result
Return
Jump 992
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 992
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 992
Frame tail s
DelVar result
Push PC(8)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 992
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s69
LoadVar $s69
1-ary IsEmpty
JumpCond True 98
Cut($s69, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 87
DelVar $s69
Return
Jump 992
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s84
LoadVar $s84
1-ary IsEmpty
JumpCond True 115
Cut($s84, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 107
DelVar $s84
StoreVar result
Return
Jump 992
Frame list a
DelVar result
Push 0
StoreVar $n97
Push ()
LoadVar a
DelVar a
StoreVar $s100
LoadVar $s100
1-ary IsEmpty
JumpCond True 137
Cut($s100, v)
LoadVar $n97
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n97
Jump 127
DelVar $n97
DelVar $s100
StoreVar result
Return
Jump 992
Frame values d
DelVar result
Push 0
StoreVar $n115
Push ()
LoadVar d
1-ary keys
StoreVar $s118
LoadVar $s118
1-ary IsEmpty
JumpCond True 162
Cut($s118, k)
LoadVar $n115
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n115
Jump 150
DelVar $n115
DelVar $s118
DelVar d
StoreVar result
Return
Jump 992
Frame items d
DelVar result
Push 0
StoreVar $n136
Push ()
LoadVar d
1-ary keys
StoreVar $s139
LoadVar $s139
1-ary IsEmpty
JumpCond True 194
Cut($s139, k)
LoadVar $n136
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n136
Jump 176
DelVar $n136
DelVar $s139
DelVar d
StoreVar result
Return
Jump 992
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s167
LoadVar $s167
1-ary IsEmpty
JumpCond True 236
Cut($s167, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 209
DelVar $s167
DelVar d
DelVar index
Return
Jump 992
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 251
DelVar a
Push ()
StoreVar result
Jump 326
Push ()
Push 0
Push PC(52)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(61)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n216
Push ()
LoadVar rest
StoreVar $s219
DelVar v
LoadVar $s219
1-ary IsEmpty
JumpCond True 284
Cut($s219, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 269
LoadVar $n216
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n216
Jump 269
DelVar $n216
DelVar $s219
StoreVar lower
Push 0
StoreVar $n235
Push ()
LoadVar rest
DelVar rest
StoreVar $s238
DelVar v
LoadVar $s238
1-ary IsEmpty
JumpCond True 308
Cut($s238, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 293
LoadVar $n235
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n235
Jump 293
DelVar $n235
DelVar $s238
StoreVar higher
Push PC(241)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(241)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 992
Frame sorted d
DelVar result
Push PC(241)
Push PC(119)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 992
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n281
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s284
LoadVar $s284
1-ary IsEmpty
JumpCond True 365
Cut($s284, i)
LoadVar $n281
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n281
Jump 351
DelVar $n281
DelVar $s284
DelVar d
DelVar n
StoreVar result
Return
Jump 992
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 992
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 401
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 992
Frame BinSema acquired
DelVar result
Push ()
Push "acquired"
LoadVar acquired
DelVar acquired
3-ary DictAdd
Push "suspended"
Push ()
3-ary DictAdd
StoreVar result
Return
Jump 992
Frame Lock ()
DelVar result
Push PC(406)
Push False
Apply
StoreVar result
Return
Jump 992
Frame acquire binsema
AtomicInc(lazy)
LoadVar binsema
Push "acquired"
Address
Load
JumpCond False 457
LoadVar binsema
Push "suspended"
Address
LoadVar binsema
Push "suspended"
Address
Load
1-ary len
Address
Stop
Continue
Pop
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Load
Assert
AtomicDec
ReadonlyDec
Jump 463
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Push True
Store
AtomicDec
Return
Jump 992
Frame release binsema
AtomicInc(lazy)
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Push "acquired"
Address
Load
Assert
AtomicDec
ReadonlyDec
LoadVar binsema
Push "suspended"
Address
Load
Push ()
2-ary ==
JumpCond False 491
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Push False
Store
Jump 510
Push ()
Push PC(52)
LoadVar binsema
Push "suspended"
Address
Load
Apply
Go
LoadVar binsema
Push "suspended"
Address
Push PC(61)
LoadVar binsema
DelVar binsema
Push "suspended"
Address
Load
Apply
Store
AtomicDec
Return
Jump 992
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Load
StoreVar result
Return
Jump 992
Frame Condition ()
DelVar result
Push ()
StoreVar result
Return
Jump 992
Frame wait (c, lk)
AtomicInc(lazy)
Push PC(466)
LoadVar lk
Apply
Pop
LoadVar c
LoadVar c
DelVar c
Load
1-ary len
Address
Stop
Continue
Pop
AtomicDec
Push PC(427)
LoadVar lk
DelVar lk
Apply
Pop
Return
Jump 992
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push ()
2-ary !=
JumpCond False 572
Push ()
Push PC(52)
LoadVar c
Load
Apply
Go
LoadVar c
Push PC(61)
LoadVar c
DelVar c
Load
Apply
Store
DelVar c
AtomicDec
Return
Jump 992
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
Load
Push ()
2-ary !=
JumpCond False 596
Push ()
Push PC(52)
LoadVar c
Load
Apply
Go
LoadVar c
Push PC(61)
LoadVar c
Load
Apply
Store
Jump 578
DelVar c
AtomicDec
Return
Jump 992
Frame Semaphore cnt
DelVar result
Push ()
Push "count"
LoadVar cnt
DelVar cnt
3-ary DictAdd
Push "waiters"
Push ()
3-ary DictAdd
StoreVar result
Return
Jump 992
Frame P sema
AtomicInc(lazy)
LoadVar sema
Push "count"
Address
Load
Push 0
2-ary >
JumpCond False 632
LoadVar sema
DelVar sema
Push "count"
Address
Dup
Load
Push 1
2-ary -
Store
Jump 645
LoadVar sema
Push "waiters"
Address
LoadVar sema
DelVar sema
Push "waiters"
Address
Load
1-ary len
Address
Stop
Continue
Pop
AtomicDec
Return
Jump 992
Frame V sema
AtomicInc(lazy)
Push ()
Push 0
LoadVar sema
Push "count"
Address
Load
3-ary DictAdd
Push 1
LoadVar sema
Push "waiters"
Address
Load
3-ary DictAdd
StoreVar (cnt, waiters)
LoadVar waiters
Push ()
2-ary !=
JumpCond False 692
ReadonlyInc
AtomicInc(lazy)
LoadVar cnt
DelVar cnt
Push 0
2-ary ==
Assert
AtomicDec
ReadonlyDec
Push ()
LoadVar waiters
Push 0
Apply
Go
LoadVar sema
DelVar sema
Push "waiters"
Address
Push PC(61)
LoadVar waiters
DelVar waiters
Apply
Store
Jump 702
DelVar waiters
LoadVar sema
DelVar sema
Push "count"
Address
LoadVar cnt
DelVar cnt
Push 1
2-ary +
Store
AtomicDec
Return
Jump 992
Frame Queue ()
DelVar result
Push { "list":(), "waiters":() }
StoreVar result
Return
Jump 992
Frame get q
DelVar result
AtomicInc(lazy)
LoadVar q
Push "list"
Address
Load
Push ()
2-ary ==
JumpCond False 733
LoadVar q
Push "waiters"
Address
LoadVar q
Push "waiters"
Address
Load
1-ary len
Address
Stop
Continue
Pop
Push PC(52)
LoadVar q
Push "list"
Address
Load
Apply
StoreVar result
LoadVar q
Push "list"
Address
Push PC(61)
LoadVar q
DelVar q
Push "list"
Address
Load
Apply
Store
AtomicDec
Return
Jump 992
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push "list"
Address
Push PC(39)
Push ()
Push 0
LoadVar q
Push "list"
Address
Load
3-ary DictAdd
Push 1
LoadVar item
3-ary DictAdd
Apply
Store
LoadVar q
Push "waiters"
Address
Load
StoreVar waiters
LoadVar waiters
Push ()
2-ary !=
JumpCond False 796
LoadVar item
DelVar item
LoadVar waiters
Push 0
Apply
Go
LoadVar q
DelVar q
Push "waiters"
Address
Push PC(61)
LoadVar waiters
DelVar waiters
Apply
Store
DelVar item
DelVar q
DelVar waiters
AtomicDec
Return
Jump 992
Frame RWlock ()
DelVar result
Push ()
Push "nreaders"
Push 0
3-ary DictAdd
Push "nwriters"
Push 0
3-ary DictAdd
Push "mutex"
Push PC(419)
Push ()
Apply
3-ary DictAdd
Push "r_cond"
Push PC(523)
Push ()
Apply
3-ary DictAdd
Push "w_cond"
Push PC(523)
Push ()
Apply
3-ary DictAdd
StoreVar result
Return
Jump 992
Frame read_acquire rw
Push PC(427)
LoadVar rw
Push "mutex"
Address
Apply
Pop
LoadVar rw
Push "nwriters"
Address
Load
Push 0
2-ary >
JumpCond False 858
Push PC(529)
Push ()
Push 0
LoadVar rw
Push "r_cond"
Address
3-ary DictAdd
Push 1
LoadVar rw
Push "mutex"
Address
3-ary DictAdd
Apply
Pop
Jump 836
LoadVar rw
Push "nreaders"
Address
Dup
Load
Push 1
2-ary +
Store
Push PC(466)
LoadVar rw
DelVar rw
Push "mutex"
Address
Apply
Pop
Return
Jump 992
Frame read_release rw
Push PC(427)
LoadVar rw
Push "mutex"
Address
Apply
Pop
LoadVar rw
Push "nreaders"
Address
Dup
Load
Push 1
2-ary -
Store
LoadVar rw
Push "nreaders"
Address
Load
Push 0
2-ary ==
JumpCond False 903
Push PC(552)
LoadVar rw
Push "w_cond"
Address
Apply
Pop
Push PC(466)
LoadVar rw
DelVar rw
Push "mutex"
Address
Apply
Pop
Return
Jump 992
Frame write_acquire rw
Push PC(427)
LoadVar rw
Push "mutex"
Address
Apply
Pop
LoadVar rw
Push "nreaders"
Address
Load
LoadVar rw
Push "nwriters"
Address
Load
2-ary +
Push 0
2-ary >
JumpCond False 946
Push PC(529)
Push ()
Push 0
LoadVar rw
Push "w_cond"
Address
3-ary DictAdd
Push 1
LoadVar rw
Push "mutex"
Address
3-ary DictAdd
Apply
Pop
Jump 919
LoadVar rw
Push "nwriters"
Address
Push 1
Store
Push PC(466)
LoadVar rw
DelVar rw
Push "mutex"
Address
Apply
Pop
Return
Jump 992
Frame write_release rw
Push PC(427)
LoadVar rw
Push "mutex"
Address
Apply
Pop
LoadVar rw
Push "nwriters"
Address
Push 0
Store
Push PC(576)
LoadVar rw
Push "r_cond"
Address
Apply
Pop
Push PC(552)
LoadVar rw
Push "w_cond"
Address
Apply
Pop
Push PC(466)
LoadVar rw
DelVar rw
Push "mutex"
Address
Apply
Pop
Return
Push PC(802)
Push ()
Apply
Store rw
Jump 1061
Frame thread ()
Push { False, True }
Choose
JumpCond False 1060
Push { "read", "write" }
Choose
Push "read"
2-ary ==
JumpCond False 1033
Push PC(829)
Push ?rw
Apply
Pop
AtomicInc(eager)
ReadonlyInc
AtomicInc(lazy)
Push PC(1010)
1-ary countLabel
Push 1
2-ary >=
JumpCond False 1023
Push PC(1037)
1-ary countLabel
Push 0
2-ary ==
Jump 1024
Push False
Assert
AtomicDec
ReadonlyDec
AtomicDec
Push PC(875)
Push ?rw
Apply
Pop
Jump 998
Push PC(912)
Push ?rw
Apply
Pop
AtomicInc(eager)
ReadonlyInc
AtomicInc(lazy)
Push PC(1010)
1-ary countLabel
Push 0
2-ary ==
JumpCond False 1050
Push PC(1037)
1-ary countLabel
Push 1
2-ary ==
Jump 1051
Push False
Assert
AtomicDec
ReadonlyDec
AtomicDec
Push PC(960)
Push ?rw
Apply
Pop
Jump 998
Return
Push { 1, 2, 3 }
StoreVar $s946
LoadVar $s946
1-ary IsEmpty
JumpCond True 1073
Cut($s946, i)
DelVar i
Push PC(997)
Push ()
Push ()
Spawn
Jump 1063
DelVar $s946
Return
DelVar result
```

Duration: 0.0013553999999999788

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store RW
Push ()
Store synch
Push ()
Store list
Jump 992
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n9
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s12
LoadVar $s12
1-ary IsEmpty
JumpCond True 33
Cut($s12, x)
LoadVar $n9
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n9
Jump 21
DelVar $n9
DelVar $s12
DelVar s
StoreVar result
Return
Jump 992
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 992
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 992
Frame tail s
DelVar result
Push PC(8)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 992
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s69
LoadVar $s69
1-ary IsEmpty
JumpCond True 98
Cut($s69, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 87
DelVar $s69
Return
Jump 992
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s84
LoadVar $s84
1-ary IsEmpty
JumpCond True 115
Cut($s84, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 107
DelVar $s84
StoreVar result
Return
Jump 992
Frame list a
DelVar result
Push 0
StoreVar $n97
Push ()
LoadVar a
DelVar a
StoreVar $s100
LoadVar $s100
1-ary IsEmpty
JumpCond True 137
Cut($s100, v)
LoadVar $n97
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n97
Jump 127
DelVar $n97
DelVar $s100
StoreVar result
Return
Jump 992
Frame values d
DelVar result
Push 0
StoreVar $n115
Push ()
LoadVar d
1-ary keys
StoreVar $s118
LoadVar $s118
1-ary IsEmpty
JumpCond True 162
Cut($s118, k)
LoadVar $n115
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n115
Jump 150
DelVar $n115
DelVar $s118
DelVar d
StoreVar result
Return
Jump 992
Frame items d
DelVar result
Push 0
StoreVar $n136
Push ()
LoadVar d
1-ary keys
StoreVar $s139
LoadVar $s139
1-ary IsEmpty
JumpCond True 194
Cut($s139, k)
LoadVar $n136
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n136
Jump 176
DelVar $n136
DelVar $s139
DelVar d
StoreVar result
Return
Jump 992
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s167
LoadVar $s167
1-ary IsEmpty
JumpCond True 236
Cut($s167, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 209
DelVar $s167
DelVar d
DelVar index
Return
Jump 992
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 251
DelVar a
Push ()
StoreVar result
Jump 326
Push ()
Push 0
Push PC(52)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(61)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n216
Push ()
LoadVar rest
StoreVar $s219
DelVar v
LoadVar $s219
1-ary IsEmpty
JumpCond True 284
Cut($s219, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 269
LoadVar $n216
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n216
Jump 269
DelVar $n216
DelVar $s219
StoreVar lower
Push 0
StoreVar $n235
Push ()
LoadVar rest
DelVar rest
StoreVar $s238
DelVar v
LoadVar $s238
1-ary IsEmpty
JumpCond True 308
Cut($s238, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 293
LoadVar $n235
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n235
Jump 293
DelVar $n235
DelVar $s238
StoreVar higher
Push PC(241)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(241)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 992
Frame sorted d
DelVar result
Push PC(241)
Push PC(119)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 992
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n281
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s284
LoadVar $s284
1-ary IsEmpty
JumpCond True 365
Cut($s284, i)
LoadVar $n281
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n281
Jump 351
DelVar $n281
DelVar $s284
DelVar d
DelVar n
StoreVar result
Return
Jump 992
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 992
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 401
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 992
Frame BinSema acquired
DelVar result
Push ()
Push "acquired"
LoadVar acquired
DelVar acquired
3-ary DictAdd
Push "suspended"
Push ()
3-ary DictAdd
StoreVar result
Return
Jump 992
Frame Lock ()
DelVar result
Push PC(406)
Push False
Apply
StoreVar result
Return
Jump 992
Frame acquire binsema
AtomicInc(lazy)
LoadVar binsema
Push "acquired"
Address
Load
JumpCond False 457
LoadVar binsema
Push "suspended"
Address
LoadVar binsema
Push "suspended"
Address
Load
1-ary len
Address
Stop
Continue
Pop
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Load
Assert
AtomicDec
ReadonlyDec
Jump 463
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Push True
Store
AtomicDec
Return
Jump 992
Frame release binsema
AtomicInc(lazy)
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Push "acquired"
Address
Load
Assert
AtomicDec
ReadonlyDec
LoadVar binsema
Push "suspended"
Address
Load
Push ()
2-ary ==
JumpCond False 491
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Push False
Store
Jump 510
Push ()
Push PC(52)
LoadVar binsema
Push "suspended"
Address
Load
Apply
Go
LoadVar binsema
Push "suspended"
Address
Push PC(61)
LoadVar binsema
DelVar binsema
Push "suspended"
Address
Load
Apply
Store
AtomicDec
Return
Jump 992
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Load
StoreVar result
Return
Jump 992
Frame Condition ()
DelVar result
Push ()
StoreVar result
Return
Jump 992
Frame wait (c, lk)
AtomicInc(lazy)
Push PC(466)
LoadVar lk
Apply
Pop
LoadVar c
LoadVar c
DelVar c
Load
1-ary len
Address
Stop
Continue
Pop
AtomicDec
Push PC(427)
LoadVar lk
DelVar lk
Apply
Pop
Return
Jump 992
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push ()
2-ary !=
JumpCond False 572
Push ()
Push PC(52)
LoadVar c
Load
Apply
Go
LoadVar c
Push PC(61)
LoadVar c
DelVar c
Load
Apply
Store
DelVar c
AtomicDec
Return
Jump 992
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
Load
Push ()
2-ary !=
JumpCond False 596
Push ()
Push PC(52)
LoadVar c
Load
Apply
Go
LoadVar c
Push PC(61)
LoadVar c
Load
Apply
Store
Jump 578
DelVar c
AtomicDec
Return
Jump 992
Frame Semaphore cnt
DelVar result
Push ()
Push "count"
LoadVar cnt
DelVar cnt
3-ary DictAdd
Push "waiters"
Push ()
3-ary DictAdd
StoreVar result
Return
Jump 992
Frame P sema
AtomicInc(lazy)
LoadVar sema
Push "count"
Address
Load
Push 0
2-ary >
JumpCond False 632
LoadVar sema
DelVar sema
Push "count"
Address
Dup
Load
Push 1
2-ary -
Store
Jump 645
LoadVar sema
Push "waiters"
Address
LoadVar sema
DelVar sema
Push "waiters"
Address
Load
1-ary len
Address
Stop
Continue
Pop
AtomicDec
Return
Jump 992
Frame V sema
AtomicInc(lazy)
Push ()
Push 0
LoadVar sema
Push "count"
Address
Load
3-ary DictAdd
Push 1
LoadVar sema
Push "waiters"
Address
Load
3-ary DictAdd
StoreVar (cnt, waiters)
LoadVar waiters
Push ()
2-ary !=
JumpCond False 692
ReadonlyInc
AtomicInc(lazy)
LoadVar cnt
DelVar cnt
Push 0
2-ary ==
Assert
AtomicDec
ReadonlyDec
Push ()
LoadVar waiters
Push 0
Apply
Go
LoadVar sema
DelVar sema
Push "waiters"
Address
Push PC(61)
LoadVar waiters
DelVar waiters
Apply
Store
Jump 702
DelVar waiters
LoadVar sema
DelVar sema
Push "count"
Address
LoadVar cnt
DelVar cnt
Push 1
2-ary +
Store
AtomicDec
Return
Jump 992
Frame Queue ()
DelVar result
Push { "list":(), "waiters":() }
StoreVar result
Return
Jump 992
Frame get q
DelVar result
AtomicInc(lazy)
LoadVar q
Push "list"
Address
Load
Push ()
2-ary ==
JumpCond False 733
LoadVar q
Push "waiters"
Address
LoadVar q
Push "waiters"
Address
Load
1-ary len
Address
Stop
Continue
Pop
Push PC(52)
LoadVar q
Push "list"
Address
Load
Apply
StoreVar result
LoadVar q
Push "list"
Address
Push PC(61)
LoadVar q
DelVar q
Push "list"
Address
Load
Apply
Store
AtomicDec
Return
Jump 992
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push "list"
Address
Push PC(39)
Push ()
Push 0
LoadVar q
Push "list"
Address
Load
3-ary DictAdd
Push 1
LoadVar item
3-ary DictAdd
Apply
Store
LoadVar q
Push "waiters"
Address
Load
StoreVar waiters
LoadVar waiters
Push ()
2-ary !=
JumpCond False 796
LoadVar item
DelVar item
LoadVar waiters
Push 0
Apply
Go
LoadVar q
DelVar q
Push "waiters"
Address
Push PC(61)
LoadVar waiters
DelVar waiters
Apply
Store
DelVar item
DelVar q
DelVar waiters
AtomicDec
Return
Jump 992
Frame RWlock ()
DelVar result
Push ()
Push "nreaders"
Push 0
3-ary DictAdd
Push "nwriters"
Push 0
3-ary DictAdd
Push "mutex"
Push PC(419)
Push ()
Apply
3-ary DictAdd
Push "r_cond"
Push PC(523)
Push ()
Apply
3-ary DictAdd
Push "w_cond"
Push PC(523)
Push ()
Apply
3-ary DictAdd
StoreVar result
Return
Jump 992
Frame read_acquire rw
Push PC(427)
LoadVar rw
Push "mutex"
Address
Apply
Pop
LoadVar rw
Push "nwriters"
Address
Load
Push 0
2-ary >
JumpCond False 858
Push PC(529)
Push ()
Push 0
LoadVar rw
Push "r_cond"
Address
3-ary DictAdd
Push 1
LoadVar rw
Push "mutex"
Address
3-ary DictAdd
Apply
Pop
Jump 836
LoadVar rw
Push "nreaders"
Address
Dup
Load
Push 1
2-ary +
Store
Push PC(466)
LoadVar rw
DelVar rw
Push "mutex"
Address
Apply
Pop
Return
Jump 992
Frame read_release rw
Push PC(427)
LoadVar rw
Push "mutex"
Address
Apply
Pop
LoadVar rw
Push "nreaders"
Address
Dup
Load
Push 1
2-ary -
Store
LoadVar rw
Push "nreaders"
Address
Load
Push 0
2-ary ==
JumpCond False 903
Push PC(552)
LoadVar rw
Push "w_cond"
Address
Apply
Pop
Push PC(466)
LoadVar rw
DelVar rw
Push "mutex"
Address
Apply
Pop
Return
Jump 992
Frame write_acquire rw
Push PC(427)
LoadVar rw
Push "mutex"
Address
Apply
Pop
LoadVar rw
Push "nreaders"
Address
Load
LoadVar rw
Push "nwriters"
Address
Load
2-ary +
Push 0
2-ary >
JumpCond False 946
Push PC(529)
Push ()
Push 0
LoadVar rw
Push "w_cond"
Address
3-ary DictAdd
Push 1
LoadVar rw
Push "mutex"
Address
3-ary DictAdd
Apply
Pop
Jump 919
LoadVar rw
Push "nwriters"
Address
Push 1
Store
Push PC(466)
LoadVar rw
DelVar rw
Push "mutex"
Address
Apply
Pop
Return
Jump 992
Frame write_release rw
Push PC(427)
LoadVar rw
Push "mutex"
Address
Apply
Pop
LoadVar rw
Push "nwriters"
Address
Push 0
Store
Push PC(576)
LoadVar rw
Push "r_cond"
Address
Apply
Pop
Push PC(552)
LoadVar rw
Push "w_cond"
Address
Apply
Pop
Push PC(466)
LoadVar rw
DelVar rw
Push "mutex"
Address
Apply
Pop
Return
Push PC(802)
Push ()
Apply
Store rw
Jump 1061
Frame thread ()
Push { False, True }
Choose
JumpCond False 1060
Push { "read", "write" }
Choose
Push "read"
2-ary ==
JumpCond False 1033
Push PC(829)
Push ?rw
Apply
Pop
AtomicInc(eager)
ReadonlyInc
AtomicInc(lazy)
Push PC(1010)
1-ary countLabel
Push 1
2-ary >=
JumpCond False 1023
Push PC(1037)
1-ary countLabel
Push 0
2-ary ==
Jump 1024
Push False
Assert
AtomicDec
ReadonlyDec
AtomicDec
Push PC(875)
Push ?rw
Apply
Pop
Jump 998
Push PC(912)
Push ?rw
Apply
Pop
AtomicInc(eager)
ReadonlyInc
AtomicInc(lazy)
Push PC(1010)
1-ary countLabel
Push 0
2-ary ==
JumpCond False 1050
Push PC(1037)
1-ary countLabel
Push 1
2-ary ==
Jump 1051
Push False
Assert
AtomicDec
ReadonlyDec
AtomicDec
Push PC(960)
Push ?rw
Apply
Pop
Jump 998
Return
Push { 1, 2, 3 }
StoreVar $s946
LoadVar $s946
1-ary IsEmpty
JumpCond True 1073
Cut($s946, i)
DelVar i
Push PC(997)
Push ()
Push ()
Spawn
Jump 1063
DelVar $s946
Return
DelVar result
```

Duration: 0.0011783999999999961

---
##  code/qsorttest.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store qsort
Jump 246
Frame Qsort arr
DelVar result
Push ()
Push "arr"
LoadVar arr
3-ary DictAdd
Push "todo"
Push {}
Push ()
Push 0
Push 0
3-ary DictAdd
Push 1
LoadVar arr
DelVar arr
1-ary len
Push 1
2-ary -
3-ary DictAdd
2-ary SetAdd
3-ary DictAdd
StoreVar result
Return
Jump 246
Frame swap (p, q)
LoadVar p
LoadVar q
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar p
DelVar p
Load
3-ary DictAdd
Split 2
Move 3
Move 2
Store
Store
Return
Jump 246
Frame partition (qs, lo, hi)
DelVar result
LoadVar lo
StoreVar result
LoadVar lo
DelVar lo
LoadVar hi
Push 1
2-ary -
2-ary ..
StoreVar $s48
LoadVar $s48
1-ary IsEmpty
JumpCond True 104
Cut($s48, i)
LoadVar qs
Push "arr"
Address
LoadVar i
Address
Load
LoadVar qs
Push "arr"
Address
LoadVar hi
Address
Load
2-ary <=
JumpCond False 102
Push PC(28)
Push ()
Push 0
LoadVar qs
Push "arr"
Address
LoadVar result
Address
3-ary DictAdd
Push 1
LoadVar qs
Push "arr"
Address
LoadVar i
DelVar i
Address
3-ary DictAdd
Apply
Pop
LoadVar result
DelVar result
Push 1
2-ary +
StoreVar result
DelVar i
Jump 60
DelVar $s48
Push PC(28)
Push ()
Push 0
LoadVar qs
Push "arr"
Address
LoadVar result
Address
3-ary DictAdd
Push 1
LoadVar qs
DelVar qs
Push "arr"
Address
LoadVar hi
DelVar hi
Address
3-ary DictAdd
Apply
Pop
Return
Jump 246
Frame sortrange (qs, range)
LoadVar range
DelVar range
StoreVar (lo, hi)
Push PC(49)
Push ()
Push 0
LoadVar qs
3-ary DictAdd
Push 1
LoadVar lo
3-ary DictAdd
Push 2
LoadVar hi
3-ary DictAdd
Apply
StoreVar pivot
LoadVar pivot
Push 1
2-ary -
LoadVar lo
2-ary >
JumpCond False 169
LoadVar qs
Push "todo"
Address
Dup
Load
Push {}
Push ()
Push 0
LoadVar lo
DelVar lo
3-ary DictAdd
Push 1
LoadVar pivot
Push 1
2-ary -
3-ary DictAdd
2-ary SetAdd
2-ary |
Store
DelVar lo
LoadVar pivot
Push 1
2-ary +
LoadVar hi
2-ary <
JumpCond False 197
LoadVar qs
DelVar qs
Push "todo"
Address
Dup
Load
Push {}
Push ()
Push 0
LoadVar pivot
DelVar pivot
Push 1
2-ary +
3-ary DictAdd
Push 1
LoadVar hi
DelVar hi
3-ary DictAdd
2-ary SetAdd
2-ary |
Store
DelVar hi
DelVar pivot
DelVar qs
Return
Jump 246
Frame sort qs
DelVar result
LoadVar qs
Push "todo"
Address
Load
Push {}
2-ary !=
JumpCond False 239
LoadVar qs
Push "todo"
Address
Load
Choose
StoreVar range
LoadVar qs
Push "todo"
Address
Dup
Load
Push {}
LoadVar range
2-ary SetAdd
2-ary -
Store
Push PC(127)
Push ()
Push 0
LoadVar qs
3-ary DictAdd
Push 1
LoadVar range
DelVar range
3-ary DictAdd
Apply
Pop
Jump 203
LoadVar qs
DelVar qs
Push "arr"
Address
Load
StoreVar result
Return
Push ()
Store bag
Jump 601
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 601
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s232
LoadVar $s232
1-ary IsEmpty
JumpCond True 270
Cut($s232, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 261
DelVar $s232
StoreVar result
Return
Jump 601
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s248
LoadVar $s248
1-ary IsEmpty
JumpCond True 307
Cut($s248, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 300
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 281
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 281
DelVar $s248
Return
Jump 601
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 333
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 337
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 601
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s312
LoadVar $s312
1-ary IsEmpty
JumpCond True 366
Cut($s312, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 355
DelVar $s312
Return
Jump 601
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 601
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 601
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 601
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 443
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 449
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 601
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 476
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 477
Push False
JumpCond False 486
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 497
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 601
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 515
DelVar bg
DelVar k
Push {}
Push PC(249)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 600
Push PC(339)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 529
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 600
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 541
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 600
Push PC(369)
LoadVar bg
Apply
StoreVar hd
Push PC(451)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(500)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s489
LoadVar $s489
1-ary IsEmpty
JumpCond True 585
Cut($s489, x)
Push PC(414)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 569
DelVar $s489
DelVar hd
Push PC(500)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Push 0
StoreVar $n528
Push ()
Push 1
Push { 1, 2, 3, 4 }
Choose
2-ary ..
StoreVar $s531
LoadVar $s531
1-ary IsEmpty
JumpCond True 620
Cut($s531, i)
DelVar i
LoadVar $n528
Push { 1, 2, 3, 4 }
Choose
3-ary DictAdd
IncVar $n528
Jump 609
DelVar $n528
DelVar $s531
Store a
Push PC(4)
Load a
Apply
Store testqs
Push PC(202)
Push ?testqs
Apply
Store sa
ReadonlyInc
AtomicInc(lazy)
Push 0
StoreVar $n557
Push ()
Push 1
Load sa
1-ary len
Push 1
2-ary -
2-ary ..
StoreVar $s560
LoadVar $s560
1-ary IsEmpty
JumpCond True 663
Cut($s560, i)
LoadVar $n557
Push ?sa
LoadVar i
Push 1
2-ary -
Address
Load
Push ?sa
LoadVar i
DelVar i
Address
Load
2-ary <=
3-ary DictAdd
IncVar $n557
Jump 643
DelVar $n557
DelVar $s560
1-ary all
Assert
AtomicDec
ReadonlyDec
ReadonlyInc
AtomicInc(lazy)
Push PC(274)
Load a
Apply
Push PC(274)
Load sa
Apply
2-ary ==
Assert
AtomicDec
ReadonlyDec
Return
DelVar result
```

Duration: 0.0014624000000000026

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store qsort
Jump 246
Frame Qsort arr
DelVar result
Push ()
Push "arr"
LoadVar arr
3-ary DictAdd
Push "todo"
Push {}
Push ()
Push 0
Push 0
3-ary DictAdd
Push 1
LoadVar arr
DelVar arr
1-ary len
Push 1
2-ary -
3-ary DictAdd
2-ary SetAdd
3-ary DictAdd
StoreVar result
Return
Jump 246
Frame swap (p, q)
LoadVar p
LoadVar q
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar p
DelVar p
Load
3-ary DictAdd
Split 2
Move 3
Move 2
Store
Store
Return
Jump 246
Frame partition (qs, lo, hi)
DelVar result
LoadVar lo
StoreVar result
LoadVar lo
DelVar lo
LoadVar hi
Push 1
2-ary -
2-ary ..
StoreVar $s48
LoadVar $s48
1-ary IsEmpty
JumpCond True 104
Cut($s48, i)
LoadVar qs
Push "arr"
Address
LoadVar i
Address
Load
LoadVar qs
Push "arr"
Address
LoadVar hi
Address
Load
2-ary <=
JumpCond False 102
Push PC(28)
Push ()
Push 0
LoadVar qs
Push "arr"
Address
LoadVar result
Address
3-ary DictAdd
Push 1
LoadVar qs
Push "arr"
Address
LoadVar i
DelVar i
Address
3-ary DictAdd
Apply
Pop
LoadVar result
DelVar result
Push 1
2-ary +
StoreVar result
DelVar i
Jump 60
DelVar $s48
Push PC(28)
Push ()
Push 0
LoadVar qs
Push "arr"
Address
LoadVar result
Address
3-ary DictAdd
Push 1
LoadVar qs
DelVar qs
Push "arr"
Address
LoadVar hi
DelVar hi
Address
3-ary DictAdd
Apply
Pop
Return
Jump 246
Frame sortrange (qs, range)
LoadVar range
DelVar range
StoreVar (lo, hi)
Push PC(49)
Push ()
Push 0
LoadVar qs
3-ary DictAdd
Push 1
LoadVar lo
3-ary DictAdd
Push 2
LoadVar hi
3-ary DictAdd
Apply
StoreVar pivot
LoadVar pivot
Push 1
2-ary -
LoadVar lo
2-ary >
JumpCond False 169
LoadVar qs
Push "todo"
Address
Dup
Load
Push {}
Push ()
Push 0
LoadVar lo
DelVar lo
3-ary DictAdd
Push 1
LoadVar pivot
Push 1
2-ary -
3-ary DictAdd
2-ary SetAdd
2-ary |
Store
DelVar lo
LoadVar pivot
Push 1
2-ary +
LoadVar hi
2-ary <
JumpCond False 197
LoadVar qs
DelVar qs
Push "todo"
Address
Dup
Load
Push {}
Push ()
Push 0
LoadVar pivot
DelVar pivot
Push 1
2-ary +
3-ary DictAdd
Push 1
LoadVar hi
DelVar hi
3-ary DictAdd
2-ary SetAdd
2-ary |
Store
DelVar hi
DelVar pivot
DelVar qs
Return
Jump 246
Frame sort qs
DelVar result
LoadVar qs
Push "todo"
Address
Load
Push {}
2-ary !=
JumpCond False 239
LoadVar qs
Push "todo"
Address
Load
Choose
StoreVar range
LoadVar qs
Push "todo"
Address
Dup
Load
Push {}
LoadVar range
2-ary SetAdd
2-ary -
Store
Push PC(127)
Push ()
Push 0
LoadVar qs
3-ary DictAdd
Push 1
LoadVar range
DelVar range
3-ary DictAdd
Apply
Pop
Jump 203
LoadVar qs
DelVar qs
Push "arr"
Address
Load
StoreVar result
Return
Push ()
Store bag
Jump 601
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 601
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s232
LoadVar $s232
1-ary IsEmpty
JumpCond True 270
Cut($s232, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 261
DelVar $s232
StoreVar result
Return
Jump 601
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s248
LoadVar $s248
1-ary IsEmpty
JumpCond True 307
Cut($s248, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 300
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 281
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 281
DelVar $s248
Return
Jump 601
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 333
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 337
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 601
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s312
LoadVar $s312
1-ary IsEmpty
JumpCond True 366
Cut($s312, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 355
DelVar $s312
Return
Jump 601
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 601
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 601
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 601
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 443
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 449
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 601
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 476
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 477
Push False
JumpCond False 486
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 497
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 601
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 515
DelVar bg
DelVar k
Push {}
Push PC(249)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 600
Push PC(339)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 529
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 600
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 541
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 600
Push PC(369)
LoadVar bg
Apply
StoreVar hd
Push PC(451)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(500)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s489
LoadVar $s489
1-ary IsEmpty
JumpCond True 585
Cut($s489, x)
Push PC(414)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 569
DelVar $s489
DelVar hd
Push PC(500)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Push 0
StoreVar $n528
Push ()
Push 1
Push { 1, 2, 3, 4 }
Choose
2-ary ..
StoreVar $s531
LoadVar $s531
1-ary IsEmpty
JumpCond True 620
Cut($s531, i)
DelVar i
LoadVar $n528
Push { 1, 2, 3, 4 }
Choose
3-ary DictAdd
IncVar $n528
Jump 609
DelVar $n528
DelVar $s531
Store a
Push PC(4)
Load a
Apply
Store testqs
Push PC(202)
Push ?testqs
Apply
Store sa
ReadonlyInc
AtomicInc(lazy)
Push 0
StoreVar $n557
Push ()
Push 1
Load sa
1-ary len
Push 1
2-ary -
2-ary ..
StoreVar $s560
LoadVar $s560
1-ary IsEmpty
JumpCond True 663
Cut($s560, i)
LoadVar $n557
Push ?sa
LoadVar i
Push 1
2-ary -
Address
Load
Push ?sa
LoadVar i
DelVar i
Address
Load
2-ary <=
3-ary DictAdd
IncVar $n557
Jump 643
DelVar $n557
DelVar $s560
1-ary all
Assert
AtomicDec
ReadonlyDec
ReadonlyInc
AtomicInc(lazy)
Push PC(274)
Load a
Apply
Push PC(274)
Load sa
Apply
2-ary ==
Assert
AtomicDec
ReadonlyDec
Return
DelVar result
```

Duration: 0.0022204000000000113

---
##  code/Diners.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store synch
Push ()
Store list
Jump 369
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 369
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 369
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 369
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 369
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 369
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 369
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 369
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 369
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 369
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 369
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 369
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 369
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Push ()
Store bag
Jump 1039
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1039
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s311
LoadVar $s311
1-ary IsEmpty
JumpCond True 393
Cut($s311, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 384
DelVar $s311
StoreVar result
Return
Jump 1039
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s327
LoadVar $s327
1-ary IsEmpty
JumpCond True 430
Cut($s327, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 423
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 404
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 404
DelVar $s327
Return
Jump 1039
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 456
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 460
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1039
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s391
LoadVar $s391
1-ary IsEmpty
JumpCond True 489
Cut($s391, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 478
DelVar $s391
Return
Jump 1039
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1039
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1039
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1039
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 566
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 572
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1039
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 599
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 600
Push False
JumpCond False 609
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 620
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1039
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 638
DelVar bg
DelVar k
Push {}
Push PC(372)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 723
Push PC(462)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 652
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 723
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 664
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 723
Push PC(492)
LoadVar bg
Apply
StoreVar hd
Push PC(574)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(623)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s568
LoadVar $s568
1-ary IsEmpty
JumpCond True 708
Cut($s568, x)
Push PC(537)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 692
DelVar $s568
DelVar hd
Push PC(623)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1039
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1039
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 754
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1039
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1039
Frame Lock ()
DelVar result
Push PC(759)
Push False
Apply
StoreVar result
Return
Jump 1039
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1039
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 790
Jump 793
ReadonlyDec
AtomicDec
Jump 783
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1039
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1039
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1039
Frame Condition ()
DelVar result
Push PC(372)
Push ()
Apply
StoreVar result
Return
Jump 1039
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(537)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 887
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 888
Push False
JumpCond False 893
DelVar c
DelVar cnt
DelVar ctx
Jump 896
ReadonlyDec
AtomicDec
Jump 868
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1039
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(372)
Push ()
Apply
2-ary !=
JumpCond False 929
LoadVar c
Push PC(574)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(519)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1039
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(372)
Push ()
Apply
Store
AtomicDec
Return
Jump 1039
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1039
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 960
Jump 963
ReadonlyDec
AtomicDec
Jump 952
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1039
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1039
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1039
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1002
Jump 1005
ReadonlyDec
AtomicDec
Jump 993
ReadonlyDec
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1039
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Push ()
Push 0
Push PC(766)
Push ()
Apply
3-ary DictAdd
Push 5
2-ary *
Store forks
Jump 1094
Frame diner which
Push ()
Push 0
LoadVar which
3-ary DictAdd
Push 1
LoadVar which
DelVar which
Push 1
2-ary +
Push 5
2-ary %
3-ary DictAdd
StoreVar (left, right)
Push { False, True }
Choose
JumpCond False 1091
Push PC(782)
Push ?forks
LoadVar left
Address
Apply
Pop
Push PC(782)
Push ?forks
LoadVar right
Address
Apply
Pop
Push PC(801)
Push ?forks
LoadVar left
Address
Apply
Pop
Push PC(801)
Push ?forks
LoadVar right
Address
Apply
Pop
Jump 1063
DelVar left
DelVar right
Return
Push { 0, 1, 2, 3, 4 }
StoreVar $s939
LoadVar $s939
1-ary IsEmpty
JumpCond True 1106
Cut($s939, i)
Push PC(1049)
LoadVar i
DelVar i
Push ()
Spawn
Jump 1096
DelVar $s939
Return
DelVar result
```

Duration: 0.0018469000000000124

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store synch
Push ()
Store list
Jump 369
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 369
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 369
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 369
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 369
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 369
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 369
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 369
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 369
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 369
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 369
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 369
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 369
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Push ()
Store bag
Jump 1039
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1039
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s311
LoadVar $s311
1-ary IsEmpty
JumpCond True 393
Cut($s311, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 384
DelVar $s311
StoreVar result
Return
Jump 1039
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s327
LoadVar $s327
1-ary IsEmpty
JumpCond True 430
Cut($s327, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 423
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 404
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 404
DelVar $s327
Return
Jump 1039
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 456
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 460
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1039
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s391
LoadVar $s391
1-ary IsEmpty
JumpCond True 489
Cut($s391, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 478
DelVar $s391
Return
Jump 1039
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1039
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1039
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1039
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 566
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 572
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1039
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 599
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 600
Push False
JumpCond False 609
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 620
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1039
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 638
DelVar bg
DelVar k
Push {}
Push PC(372)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 723
Push PC(462)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 652
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 723
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 664
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 723
Push PC(492)
LoadVar bg
Apply
StoreVar hd
Push PC(574)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(623)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s568
LoadVar $s568
1-ary IsEmpty
JumpCond True 708
Cut($s568, x)
Push PC(537)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 692
DelVar $s568
DelVar hd
Push PC(623)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1039
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1039
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 754
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1039
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1039
Frame Lock ()
DelVar result
Push PC(759)
Push False
Apply
StoreVar result
Return
Jump 1039
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1039
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 790
Jump 793
ReadonlyDec
AtomicDec
Jump 783
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1039
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1039
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1039
Frame Condition ()
DelVar result
Push PC(372)
Push ()
Apply
StoreVar result
Return
Jump 1039
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(537)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 887
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 888
Push False
JumpCond False 893
DelVar c
DelVar cnt
DelVar ctx
Jump 896
ReadonlyDec
AtomicDec
Jump 868
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1039
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(372)
Push ()
Apply
2-ary !=
JumpCond False 929
LoadVar c
Push PC(574)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(519)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1039
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(372)
Push ()
Apply
Store
AtomicDec
Return
Jump 1039
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1039
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 960
Jump 963
ReadonlyDec
AtomicDec
Jump 952
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1039
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1039
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1039
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1002
Jump 1005
ReadonlyDec
AtomicDec
Jump 993
ReadonlyDec
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1039
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Push ()
Push 0
Push PC(766)
Push ()
Apply
3-ary DictAdd
Push 5
2-ary *
Store forks
Jump 1094
Frame diner which
Push ()
Push 0
LoadVar which
3-ary DictAdd
Push 1
LoadVar which
DelVar which
Push 1
2-ary +
Push 5
2-ary %
3-ary DictAdd
StoreVar (left, right)
Push { False, True }
Choose
JumpCond False 1091
Push PC(782)
Push ?forks
LoadVar left
Address
Apply
Pop
Push PC(782)
Push ?forks
LoadVar right
Address
Apply
Pop
Push PC(801)
Push ?forks
LoadVar left
Address
Apply
Pop
Push PC(801)
Push ?forks
LoadVar right
Address
Apply
Pop
Jump 1063
DelVar left
DelVar right
Return
Push { 0, 1, 2, 3, 4 }
StoreVar $s939
LoadVar $s939
1-ary IsEmpty
JumpCond True 1106
Cut($s939, i)
Push PC(1049)
LoadVar i
DelVar i
Push ()
Spawn
Jump 1096
DelVar $s939
Return
DelVar result
```

Duration: 0.001745400000000008

---
## -msynch=synchS code/Diners.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store synch
Push ()
Store list
Jump 799
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 799
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 799
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 799
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 799
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 799
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 799
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 799
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 799
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 799
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 799
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 799
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 799
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Jump 799
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 799
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 399
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 799
Frame BinSema acquired
DelVar result
Push ()
Push "acquired"
LoadVar acquired
DelVar acquired
3-ary DictAdd
Push "suspended"
Push ()
3-ary DictAdd
StoreVar result
Return
Jump 799
Frame Lock ()
DelVar result
Push PC(404)
Push False
Apply
StoreVar result
Return
Jump 799
Frame acquire binsema
AtomicInc(lazy)
LoadVar binsema
Push "acquired"
Address
Load
JumpCond False 455
LoadVar binsema
Push "suspended"
Address
LoadVar binsema
Push "suspended"
Address
Load
1-ary len
Address
Stop
Continue
Pop
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Load
Assert
AtomicDec
ReadonlyDec
Jump 461
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Push True
Store
AtomicDec
Return
Jump 799
Frame release binsema
AtomicInc(lazy)
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Push "acquired"
Address
Load
Assert
AtomicDec
ReadonlyDec
LoadVar binsema
Push "suspended"
Address
Load
Push ()
2-ary ==
JumpCond False 489
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Push False
Store
Jump 508
Push ()
Push PC(50)
LoadVar binsema
Push "suspended"
Address
Load
Apply
Go
LoadVar binsema
Push "suspended"
Address
Push PC(59)
LoadVar binsema
DelVar binsema
Push "suspended"
Address
Load
Apply
Store
AtomicDec
Return
Jump 799
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Load
StoreVar result
Return
Jump 799
Frame Condition ()
DelVar result
Push ()
StoreVar result
Return
Jump 799
Frame wait (c, lk)
AtomicInc(lazy)
Push PC(464)
LoadVar lk
Apply
Pop
LoadVar c
LoadVar c
DelVar c
Load
1-ary len
Address
Stop
Continue
Pop
AtomicDec
Push PC(425)
LoadVar lk
DelVar lk
Apply
Pop
Return
Jump 799
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push ()
2-ary !=
JumpCond False 570
Push ()
Push PC(50)
LoadVar c
Load
Apply
Go
LoadVar c
Push PC(59)
LoadVar c
DelVar c
Load
Apply
Store
DelVar c
AtomicDec
Return
Jump 799
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
Load
Push ()
2-ary !=
JumpCond False 594
Push ()
Push PC(50)
LoadVar c
Load
Apply
Go
LoadVar c
Push PC(59)
LoadVar c
Load
Apply
Store
Jump 576
DelVar c
AtomicDec
Return
Jump 799
Frame Semaphore cnt
DelVar result
Push ()
Push "count"
LoadVar cnt
DelVar cnt
3-ary DictAdd
Push "waiters"
Push ()
3-ary DictAdd
StoreVar result
Return
Jump 799
Frame P sema
AtomicInc(lazy)
LoadVar sema
Push "count"
Address
Load
Push 0
2-ary >
JumpCond False 630
LoadVar sema
DelVar sema
Push "count"
Address
Dup
Load
Push 1
2-ary -
Store
Jump 643
LoadVar sema
Push "waiters"
Address
LoadVar sema
DelVar sema
Push "waiters"
Address
Load
1-ary len
Address
Stop
Continue
Pop
AtomicDec
Return
Jump 799
Frame V sema
AtomicInc(lazy)
Push ()
Push 0
LoadVar sema
Push "count"
Address
Load
3-ary DictAdd
Push 1
LoadVar sema
Push "waiters"
Address
Load
3-ary DictAdd
StoreVar (cnt, waiters)
LoadVar waiters
Push ()
2-ary !=
JumpCond False 690
ReadonlyInc
AtomicInc(lazy)
LoadVar cnt
DelVar cnt
Push 0
2-ary ==
Assert
AtomicDec
ReadonlyDec
Push ()
LoadVar waiters
Push 0
Apply
Go
LoadVar sema
DelVar sema
Push "waiters"
Address
Push PC(59)
LoadVar waiters
DelVar waiters
Apply
Store
Jump 700
DelVar waiters
LoadVar sema
DelVar sema
Push "count"
Address
LoadVar cnt
DelVar cnt
Push 1
2-ary +
Store
AtomicDec
Return
Jump 799
Frame Queue ()
DelVar result
Push { "list":(), "waiters":() }
StoreVar result
Return
Jump 799
Frame get q
DelVar result
AtomicInc(lazy)
LoadVar q
Push "list"
Address
Load
Push ()
2-ary ==
JumpCond False 731
LoadVar q
Push "waiters"
Address
LoadVar q
Push "waiters"
Address
Load
1-ary len
Address
Stop
Continue
Pop
Push PC(50)
LoadVar q
Push "list"
Address
Load
Apply
StoreVar result
LoadVar q
Push "list"
Address
Push PC(59)
LoadVar q
DelVar q
Push "list"
Address
Load
Apply
Store
AtomicDec
Return
Jump 799
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push "list"
Address
Push PC(37)
Push ()
Push 0
LoadVar q
Push "list"
Address
Load
3-ary DictAdd
Push 1
LoadVar item
3-ary DictAdd
Apply
Store
LoadVar q
Push "waiters"
Address
Load
StoreVar waiters
LoadVar waiters
Push ()
2-ary !=
JumpCond False 794
LoadVar item
DelVar item
LoadVar waiters
Push 0
Apply
Go
LoadVar q
DelVar q
Push "waiters"
Address
Push PC(59)
LoadVar waiters
DelVar waiters
Apply
Store
DelVar item
DelVar q
DelVar waiters
AtomicDec
Return
Push ()
Push 0
Push PC(417)
Push ()
Apply
3-ary DictAdd
Push 5
2-ary *
Store forks
Jump 854
Frame diner which
Push ()
Push 0
LoadVar which
3-ary DictAdd
Push 1
LoadVar which
DelVar which
Push 1
2-ary +
Push 5
2-ary %
3-ary DictAdd
StoreVar (left, right)
Push { False, True }
Choose
JumpCond False 851
Push PC(425)
Push ?forks
LoadVar left
Address
Apply
Pop
Push PC(425)
Push ?forks
LoadVar right
Address
Apply
Pop
Push PC(464)
Push ?forks
LoadVar left
Address
Apply
Pop
Push PC(464)
Push ?forks
LoadVar right
Address
Apply
Pop
Jump 823
DelVar left
DelVar right
Return
Push { 0, 1, 2, 3, 4 }
StoreVar $s741
LoadVar $s741
1-ary IsEmpty
JumpCond True 866
Cut($s741, i)
Push PC(809)
LoadVar i
DelVar i
Push ()
Spawn
Jump 856
DelVar $s741
Return
DelVar result
```

Duration: 0.0015309000000000017

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store synch
Push ()
Store list
Jump 799
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 799
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 799
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 799
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 799
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 799
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 799
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 799
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 799
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 799
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 799
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 799
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 799
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Jump 799
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 799
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 399
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 799
Frame BinSema acquired
DelVar result
Push ()
Push "acquired"
LoadVar acquired
DelVar acquired
3-ary DictAdd
Push "suspended"
Push ()
3-ary DictAdd
StoreVar result
Return
Jump 799
Frame Lock ()
DelVar result
Push PC(404)
Push False
Apply
StoreVar result
Return
Jump 799
Frame acquire binsema
AtomicInc(lazy)
LoadVar binsema
Push "acquired"
Address
Load
JumpCond False 455
LoadVar binsema
Push "suspended"
Address
LoadVar binsema
Push "suspended"
Address
Load
1-ary len
Address
Stop
Continue
Pop
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Load
Assert
AtomicDec
ReadonlyDec
Jump 461
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Push True
Store
AtomicDec
Return
Jump 799
Frame release binsema
AtomicInc(lazy)
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Push "acquired"
Address
Load
Assert
AtomicDec
ReadonlyDec
LoadVar binsema
Push "suspended"
Address
Load
Push ()
2-ary ==
JumpCond False 489
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Push False
Store
Jump 508
Push ()
Push PC(50)
LoadVar binsema
Push "suspended"
Address
Load
Apply
Go
LoadVar binsema
Push "suspended"
Address
Push PC(59)
LoadVar binsema
DelVar binsema
Push "suspended"
Address
Load
Apply
Store
AtomicDec
Return
Jump 799
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Load
StoreVar result
Return
Jump 799
Frame Condition ()
DelVar result
Push ()
StoreVar result
Return
Jump 799
Frame wait (c, lk)
AtomicInc(lazy)
Push PC(464)
LoadVar lk
Apply
Pop
LoadVar c
LoadVar c
DelVar c
Load
1-ary len
Address
Stop
Continue
Pop
AtomicDec
Push PC(425)
LoadVar lk
DelVar lk
Apply
Pop
Return
Jump 799
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push ()
2-ary !=
JumpCond False 570
Push ()
Push PC(50)
LoadVar c
Load
Apply
Go
LoadVar c
Push PC(59)
LoadVar c
DelVar c
Load
Apply
Store
DelVar c
AtomicDec
Return
Jump 799
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
Load
Push ()
2-ary !=
JumpCond False 594
Push ()
Push PC(50)
LoadVar c
Load
Apply
Go
LoadVar c
Push PC(59)
LoadVar c
Load
Apply
Store
Jump 576
DelVar c
AtomicDec
Return
Jump 799
Frame Semaphore cnt
DelVar result
Push ()
Push "count"
LoadVar cnt
DelVar cnt
3-ary DictAdd
Push "waiters"
Push ()
3-ary DictAdd
StoreVar result
Return
Jump 799
Frame P sema
AtomicInc(lazy)
LoadVar sema
Push "count"
Address
Load
Push 0
2-ary >
JumpCond False 630
LoadVar sema
DelVar sema
Push "count"
Address
Dup
Load
Push 1
2-ary -
Store
Jump 643
LoadVar sema
Push "waiters"
Address
LoadVar sema
DelVar sema
Push "waiters"
Address
Load
1-ary len
Address
Stop
Continue
Pop
AtomicDec
Return
Jump 799
Frame V sema
AtomicInc(lazy)
Push ()
Push 0
LoadVar sema
Push "count"
Address
Load
3-ary DictAdd
Push 1
LoadVar sema
Push "waiters"
Address
Load
3-ary DictAdd
StoreVar (cnt, waiters)
LoadVar waiters
Push ()
2-ary !=
JumpCond False 690
ReadonlyInc
AtomicInc(lazy)
LoadVar cnt
DelVar cnt
Push 0
2-ary ==
Assert
AtomicDec
ReadonlyDec
Push ()
LoadVar waiters
Push 0
Apply
Go
LoadVar sema
DelVar sema
Push "waiters"
Address
Push PC(59)
LoadVar waiters
DelVar waiters
Apply
Store
Jump 700
DelVar waiters
LoadVar sema
DelVar sema
Push "count"
Address
LoadVar cnt
DelVar cnt
Push 1
2-ary +
Store
AtomicDec
Return
Jump 799
Frame Queue ()
DelVar result
Push { "list":(), "waiters":() }
StoreVar result
Return
Jump 799
Frame get q
DelVar result
AtomicInc(lazy)
LoadVar q
Push "list"
Address
Load
Push ()
2-ary ==
JumpCond False 731
LoadVar q
Push "waiters"
Address
LoadVar q
Push "waiters"
Address
Load
1-ary len
Address
Stop
Continue
Pop
Push PC(50)
LoadVar q
Push "list"
Address
Load
Apply
StoreVar result
LoadVar q
Push "list"
Address
Push PC(59)
LoadVar q
DelVar q
Push "list"
Address
Load
Apply
Store
AtomicDec
Return
Jump 799
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push "list"
Address
Push PC(37)
Push ()
Push 0
LoadVar q
Push "list"
Address
Load
3-ary DictAdd
Push 1
LoadVar item
3-ary DictAdd
Apply
Store
LoadVar q
Push "waiters"
Address
Load
StoreVar waiters
LoadVar waiters
Push ()
2-ary !=
JumpCond False 794
LoadVar item
DelVar item
LoadVar waiters
Push 0
Apply
Go
LoadVar q
DelVar q
Push "waiters"
Address
Push PC(59)
LoadVar waiters
DelVar waiters
Apply
Store
DelVar item
DelVar q
DelVar waiters
AtomicDec
Return
Push ()
Push 0
Push PC(417)
Push ()
Apply
3-ary DictAdd
Push 5
2-ary *
Store forks
Jump 854
Frame diner which
Push ()
Push 0
LoadVar which
3-ary DictAdd
Push 1
LoadVar which
DelVar which
Push 1
2-ary +
Push 5
2-ary %
3-ary DictAdd
StoreVar (left, right)
Push { False, True }
Choose
JumpCond False 851
Push PC(425)
Push ?forks
LoadVar left
Address
Apply
Pop
Push PC(425)
Push ?forks
LoadVar right
Address
Apply
Pop
Push PC(464)
Push ?forks
LoadVar left
Address
Apply
Pop
Push PC(464)
Push ?forks
LoadVar right
Address
Apply
Pop
Jump 823
DelVar left
DelVar right
Return
Push { 0, 1, 2, 3, 4 }
StoreVar $s741
LoadVar $s741
1-ary IsEmpty
JumpCond True 866
Cut($s741, i)
Push PC(809)
LoadVar i
DelVar i
Push ()
Spawn
Jump 856
DelVar $s741
Return
DelVar result
```

Duration: 0.0019376000000000115

---
##  code/DinersCV.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store synch
Push ()
Store list
Jump 369
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 369
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 369
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 369
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 369
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 369
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 369
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 369
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 369
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 369
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 369
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 369
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 369
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Push ()
Store bag
Jump 1039
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1039
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s311
LoadVar $s311
1-ary IsEmpty
JumpCond True 393
Cut($s311, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 384
DelVar $s311
StoreVar result
Return
Jump 1039
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s327
LoadVar $s327
1-ary IsEmpty
JumpCond True 430
Cut($s327, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 423
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 404
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 404
DelVar $s327
Return
Jump 1039
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 456
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 460
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1039
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s391
LoadVar $s391
1-ary IsEmpty
JumpCond True 489
Cut($s391, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 478
DelVar $s391
Return
Jump 1039
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1039
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1039
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1039
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 566
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 572
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1039
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 599
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 600
Push False
JumpCond False 609
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 620
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1039
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 638
DelVar bg
DelVar k
Push {}
Push PC(372)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 723
Push PC(462)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 652
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 723
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 664
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 723
Push PC(492)
LoadVar bg
Apply
StoreVar hd
Push PC(574)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(623)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s568
LoadVar $s568
1-ary IsEmpty
JumpCond True 708
Cut($s568, x)
Push PC(537)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 692
DelVar $s568
DelVar hd
Push PC(623)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1039
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1039
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 754
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1039
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1039
Frame Lock ()
DelVar result
Push PC(759)
Push False
Apply
StoreVar result
Return
Jump 1039
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1039
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 790
Jump 793
ReadonlyDec
AtomicDec
Jump 783
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1039
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1039
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1039
Frame Condition ()
DelVar result
Push PC(372)
Push ()
Apply
StoreVar result
Return
Jump 1039
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(537)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 887
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 888
Push False
JumpCond False 893
DelVar c
DelVar cnt
DelVar ctx
Jump 896
ReadonlyDec
AtomicDec
Jump 868
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1039
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(372)
Push ()
Apply
2-ary !=
JumpCond False 929
LoadVar c
Push PC(574)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(519)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1039
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(372)
Push ()
Apply
Store
AtomicDec
Return
Jump 1039
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1039
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 960
Jump 963
ReadonlyDec
AtomicDec
Jump 952
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1039
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1039
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1039
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1002
Jump 1005
ReadonlyDec
AtomicDec
Jump 993
ReadonlyDec
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1039
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Push PC(766)
Push ()
Apply
Store mutex
Push [False, False, False, False, False]
Store forks
Push ()
Push 0
Push PC(825)
Push ()
Apply
3-ary DictAdd
Push 5
2-ary *
Store conds
Jump 1192
Frame diner which
Push ()
Push 0
LoadVar which
3-ary DictAdd
Push 1
LoadVar which
DelVar which
Push 1
2-ary +
Push 5
2-ary %
3-ary DictAdd
StoreVar (left, right)
Push { False, True }
Choose
JumpCond False 1189
Push PC(782)
Push ?mutex
Apply
Pop
Push ?forks
LoadVar left
Address
Load
JumpCond True 1086
Push ?forks
LoadVar right
Address
Load
Jump 1087
Push True
JumpCond False 1123
Push ?forks
LoadVar left
Address
Load
JumpCond False 1105
Push PC(833)
Push ()
Push 0
Push ?conds
LoadVar left
Address
3-ary DictAdd
Push 1
Push ?mutex
3-ary DictAdd
Apply
Pop
Push ?forks
LoadVar right
Address
Load
JumpCond False 1076
Push PC(833)
Push ()
Push 0
Push ?conds
LoadVar right
Address
3-ary DictAdd
Push 1
Push ?mutex
3-ary DictAdd
Apply
Pop
Jump 1076
ReadonlyInc
AtomicInc(lazy)
Push ?forks
LoadVar left
Address
Load
JumpCond True 1135
Push ?forks
LoadVar right
Address
Load
Jump 1136
Push True
1-ary not
Assert
AtomicDec
ReadonlyDec
Push ?forks
LoadVar left
Address
Push ?forks
LoadVar right
Address
Push True
Dup
Move 3
Move 2
Store
Store
Push PC(801)
Push ?mutex
Apply
Pop
Push PC(782)
Push ?mutex
Apply
Pop
Push ?forks
LoadVar left
Address
Push ?forks
LoadVar right
Address
Push False
Dup
Move 3
Move 2
Store
Store
Push PC(904)
Push ?conds
LoadVar left
Address
Apply
Pop
Push PC(904)
Push ?conds
LoadVar right
Address
Apply
Pop
Push PC(801)
Push ?mutex
Apply
Pop
Jump 1069
DelVar left
DelVar right
Return
Push { 0, 1, 2, 3, 4 }
StoreVar $s1037
LoadVar $s1037
1-ary IsEmpty
JumpCond True 1204
Cut($s1037, i)
Push PC(1055)
LoadVar i
DelVar i
Push ()
Spawn
Jump 1194
DelVar $s1037
Return
DelVar result
```

Duration: 0.0017488000000000226

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store synch
Push ()
Store list
Jump 369
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 369
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 369
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 369
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 369
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 369
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 369
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 369
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 369
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 369
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 369
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 369
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 369
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Push ()
Store bag
Jump 1039
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1039
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s311
LoadVar $s311
1-ary IsEmpty
JumpCond True 393
Cut($s311, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 384
DelVar $s311
StoreVar result
Return
Jump 1039
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s327
LoadVar $s327
1-ary IsEmpty
JumpCond True 430
Cut($s327, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 423
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 404
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 404
DelVar $s327
Return
Jump 1039
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 456
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 460
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1039
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s391
LoadVar $s391
1-ary IsEmpty
JumpCond True 489
Cut($s391, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 478
DelVar $s391
Return
Jump 1039
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1039
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1039
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1039
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 566
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 572
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1039
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 599
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 600
Push False
JumpCond False 609
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 620
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1039
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 638
DelVar bg
DelVar k
Push {}
Push PC(372)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 723
Push PC(462)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 652
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 723
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 664
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 723
Push PC(492)
LoadVar bg
Apply
StoreVar hd
Push PC(574)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(623)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s568
LoadVar $s568
1-ary IsEmpty
JumpCond True 708
Cut($s568, x)
Push PC(537)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 692
DelVar $s568
DelVar hd
Push PC(623)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1039
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1039
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 754
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1039
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1039
Frame Lock ()
DelVar result
Push PC(759)
Push False
Apply
StoreVar result
Return
Jump 1039
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1039
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 790
Jump 793
ReadonlyDec
AtomicDec
Jump 783
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1039
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1039
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1039
Frame Condition ()
DelVar result
Push PC(372)
Push ()
Apply
StoreVar result
Return
Jump 1039
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(537)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 887
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 888
Push False
JumpCond False 893
DelVar c
DelVar cnt
DelVar ctx
Jump 896
ReadonlyDec
AtomicDec
Jump 868
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1039
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(372)
Push ()
Apply
2-ary !=
JumpCond False 929
LoadVar c
Push PC(574)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(519)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1039
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(372)
Push ()
Apply
Store
AtomicDec
Return
Jump 1039
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1039
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 960
Jump 963
ReadonlyDec
AtomicDec
Jump 952
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1039
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1039
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1039
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1002
Jump 1005
ReadonlyDec
AtomicDec
Jump 993
ReadonlyDec
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1039
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Push PC(766)
Push ()
Apply
Store mutex
Push [False, False, False, False, False]
Store forks
Push ()
Push 0
Push PC(825)
Push ()
Apply
3-ary DictAdd
Push 5
2-ary *
Store conds
Jump 1192
Frame diner which
Push ()
Push 0
LoadVar which
3-ary DictAdd
Push 1
LoadVar which
DelVar which
Push 1
2-ary +
Push 5
2-ary %
3-ary DictAdd
StoreVar (left, right)
Push { False, True }
Choose
JumpCond False 1189
Push PC(782)
Push ?mutex
Apply
Pop
Push ?forks
LoadVar left
Address
Load
JumpCond True 1086
Push ?forks
LoadVar right
Address
Load
Jump 1087
Push True
JumpCond False 1123
Push ?forks
LoadVar left
Address
Load
JumpCond False 1105
Push PC(833)
Push ()
Push 0
Push ?conds
LoadVar left
Address
3-ary DictAdd
Push 1
Push ?mutex
3-ary DictAdd
Apply
Pop
Push ?forks
LoadVar right
Address
Load
JumpCond False 1076
Push PC(833)
Push ()
Push 0
Push ?conds
LoadVar right
Address
3-ary DictAdd
Push 1
Push ?mutex
3-ary DictAdd
Apply
Pop
Jump 1076
ReadonlyInc
AtomicInc(lazy)
Push ?forks
LoadVar left
Address
Load
JumpCond True 1135
Push ?forks
LoadVar right
Address
Load
Jump 1136
Push True
1-ary not
Assert
AtomicDec
ReadonlyDec
Push ?forks
LoadVar left
Address
Push ?forks
LoadVar right
Address
Push True
Dup
Move 3
Move 2
Store
Store
Push PC(801)
Push ?mutex
Apply
Pop
Push PC(782)
Push ?mutex
Apply
Pop
Push ?forks
LoadVar left
Address
Push ?forks
LoadVar right
Address
Push False
Dup
Move 3
Move 2
Store
Store
Push PC(904)
Push ?conds
LoadVar left
Address
Apply
Pop
Push PC(904)
Push ?conds
LoadVar right
Address
Apply
Pop
Push PC(801)
Push ?mutex
Apply
Pop
Jump 1069
DelVar left
DelVar right
Return
Push { 0, 1, 2, 3, 4 }
StoreVar $s1037
LoadVar $s1037
1-ary IsEmpty
JumpCond True 1204
Cut($s1037, i)
Push PC(1055)
LoadVar i
DelVar i
Push ()
Spawn
Jump 1194
DelVar $s1037
Return
DelVar result
```

Duration: 0.001632400000000006

---
## -msynch=synchS code/DinersCV.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store synch
Push ()
Store list
Jump 799
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 799
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 799
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 799
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 799
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 799
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 799
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 799
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 799
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 799
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 799
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 799
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 799
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Jump 799
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 799
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 399
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 799
Frame BinSema acquired
DelVar result
Push ()
Push "acquired"
LoadVar acquired
DelVar acquired
3-ary DictAdd
Push "suspended"
Push ()
3-ary DictAdd
StoreVar result
Return
Jump 799
Frame Lock ()
DelVar result
Push PC(404)
Push False
Apply
StoreVar result
Return
Jump 799
Frame acquire binsema
AtomicInc(lazy)
LoadVar binsema
Push "acquired"
Address
Load
JumpCond False 455
LoadVar binsema
Push "suspended"
Address
LoadVar binsema
Push "suspended"
Address
Load
1-ary len
Address
Stop
Continue
Pop
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Load
Assert
AtomicDec
ReadonlyDec
Jump 461
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Push True
Store
AtomicDec
Return
Jump 799
Frame release binsema
AtomicInc(lazy)
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Push "acquired"
Address
Load
Assert
AtomicDec
ReadonlyDec
LoadVar binsema
Push "suspended"
Address
Load
Push ()
2-ary ==
JumpCond False 489
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Push False
Store
Jump 508
Push ()
Push PC(50)
LoadVar binsema
Push "suspended"
Address
Load
Apply
Go
LoadVar binsema
Push "suspended"
Address
Push PC(59)
LoadVar binsema
DelVar binsema
Push "suspended"
Address
Load
Apply
Store
AtomicDec
Return
Jump 799
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Load
StoreVar result
Return
Jump 799
Frame Condition ()
DelVar result
Push ()
StoreVar result
Return
Jump 799
Frame wait (c, lk)
AtomicInc(lazy)
Push PC(464)
LoadVar lk
Apply
Pop
LoadVar c
LoadVar c
DelVar c
Load
1-ary len
Address
Stop
Continue
Pop
AtomicDec
Push PC(425)
LoadVar lk
DelVar lk
Apply
Pop
Return
Jump 799
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push ()
2-ary !=
JumpCond False 570
Push ()
Push PC(50)
LoadVar c
Load
Apply
Go
LoadVar c
Push PC(59)
LoadVar c
DelVar c
Load
Apply
Store
DelVar c
AtomicDec
Return
Jump 799
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
Load
Push ()
2-ary !=
JumpCond False 594
Push ()
Push PC(50)
LoadVar c
Load
Apply
Go
LoadVar c
Push PC(59)
LoadVar c
Load
Apply
Store
Jump 576
DelVar c
AtomicDec
Return
Jump 799
Frame Semaphore cnt
DelVar result
Push ()
Push "count"
LoadVar cnt
DelVar cnt
3-ary DictAdd
Push "waiters"
Push ()
3-ary DictAdd
StoreVar result
Return
Jump 799
Frame P sema
AtomicInc(lazy)
LoadVar sema
Push "count"
Address
Load
Push 0
2-ary >
JumpCond False 630
LoadVar sema
DelVar sema
Push "count"
Address
Dup
Load
Push 1
2-ary -
Store
Jump 643
LoadVar sema
Push "waiters"
Address
LoadVar sema
DelVar sema
Push "waiters"
Address
Load
1-ary len
Address
Stop
Continue
Pop
AtomicDec
Return
Jump 799
Frame V sema
AtomicInc(lazy)
Push ()
Push 0
LoadVar sema
Push "count"
Address
Load
3-ary DictAdd
Push 1
LoadVar sema
Push "waiters"
Address
Load
3-ary DictAdd
StoreVar (cnt, waiters)
LoadVar waiters
Push ()
2-ary !=
JumpCond False 690
ReadonlyInc
AtomicInc(lazy)
LoadVar cnt
DelVar cnt
Push 0
2-ary ==
Assert
AtomicDec
ReadonlyDec
Push ()
LoadVar waiters
Push 0
Apply
Go
LoadVar sema
DelVar sema
Push "waiters"
Address
Push PC(59)
LoadVar waiters
DelVar waiters
Apply
Store
Jump 700
DelVar waiters
LoadVar sema
DelVar sema
Push "count"
Address
LoadVar cnt
DelVar cnt
Push 1
2-ary +
Store
AtomicDec
Return
Jump 799
Frame Queue ()
DelVar result
Push { "list":(), "waiters":() }
StoreVar result
Return
Jump 799
Frame get q
DelVar result
AtomicInc(lazy)
LoadVar q
Push "list"
Address
Load
Push ()
2-ary ==
JumpCond False 731
LoadVar q
Push "waiters"
Address
LoadVar q
Push "waiters"
Address
Load
1-ary len
Address
Stop
Continue
Pop
Push PC(50)
LoadVar q
Push "list"
Address
Load
Apply
StoreVar result
LoadVar q
Push "list"
Address
Push PC(59)
LoadVar q
DelVar q
Push "list"
Address
Load
Apply
Store
AtomicDec
Return
Jump 799
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push "list"
Address
Push PC(37)
Push ()
Push 0
LoadVar q
Push "list"
Address
Load
3-ary DictAdd
Push 1
LoadVar item
3-ary DictAdd
Apply
Store
LoadVar q
Push "waiters"
Address
Load
StoreVar waiters
LoadVar waiters
Push ()
2-ary !=
JumpCond False 794
LoadVar item
DelVar item
LoadVar waiters
Push 0
Apply
Go
LoadVar q
DelVar q
Push "waiters"
Address
Push PC(59)
LoadVar waiters
DelVar waiters
Apply
Store
DelVar item
DelVar q
DelVar waiters
AtomicDec
Return
Push PC(417)
Push ()
Apply
Store mutex
Push [False, False, False, False, False]
Store forks
Push ()
Push 0
Push PC(521)
Push ()
Apply
3-ary DictAdd
Push 5
2-ary *
Store conds
Jump 952
Frame diner which
Push ()
Push 0
LoadVar which
3-ary DictAdd
Push 1
LoadVar which
DelVar which
Push 1
2-ary +
Push 5
2-ary %
3-ary DictAdd
StoreVar (left, right)
Push { False, True }
Choose
JumpCond False 949
Push PC(425)
Push ?mutex
Apply
Pop
Push ?forks
LoadVar left
Address
Load
JumpCond True 846
Push ?forks
LoadVar right
Address
Load
Jump 847
Push True
JumpCond False 883
Push ?forks
LoadVar left
Address
Load
JumpCond False 865
Push PC(527)
Push ()
Push 0
Push ?conds
LoadVar left
Address
3-ary DictAdd
Push 1
Push ?mutex
3-ary DictAdd
Apply
Pop
Push ?forks
LoadVar right
Address
Load
JumpCond False 836
Push PC(527)
Push ()
Push 0
Push ?conds
LoadVar right
Address
3-ary DictAdd
Push 1
Push ?mutex
3-ary DictAdd
Apply
Pop
Jump 836
ReadonlyInc
AtomicInc(lazy)
Push ?forks
LoadVar left
Address
Load
JumpCond True 895
Push ?forks
LoadVar right
Address
Load
Jump 896
Push True
1-ary not
Assert
AtomicDec
ReadonlyDec
Push ?forks
LoadVar left
Address
Push ?forks
LoadVar right
Address
Push True
Dup
Move 3
Move 2
Store
Store
Push PC(464)
Push ?mutex
Apply
Pop
Push PC(425)
Push ?mutex
Apply
Pop
Push ?forks
LoadVar left
Address
Push ?forks
LoadVar right
Address
Push False
Dup
Move 3
Move 2
Store
Store
Push PC(550)
Push ?conds
LoadVar left
Address
Apply
Pop
Push PC(550)
Push ?conds
LoadVar right
Address
Apply
Pop
Push PC(464)
Push ?mutex
Apply
Pop
Jump 829
DelVar left
DelVar right
Return
Push { 0, 1, 2, 3, 4 }
StoreVar $s839
LoadVar $s839
1-ary IsEmpty
JumpCond True 964
Cut($s839, i)
Push PC(815)
LoadVar i
DelVar i
Push ()
Spawn
Jump 954
DelVar $s839
Return
DelVar result
```

Duration: 0.0012525999999999926

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store synch
Push ()
Store list
Jump 799
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 799
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 799
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 799
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 799
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 799
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 799
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 799
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 799
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 799
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 799
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 799
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 799
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Jump 799
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 799
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 399
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 799
Frame BinSema acquired
DelVar result
Push ()
Push "acquired"
LoadVar acquired
DelVar acquired
3-ary DictAdd
Push "suspended"
Push ()
3-ary DictAdd
StoreVar result
Return
Jump 799
Frame Lock ()
DelVar result
Push PC(404)
Push False
Apply
StoreVar result
Return
Jump 799
Frame acquire binsema
AtomicInc(lazy)
LoadVar binsema
Push "acquired"
Address
Load
JumpCond False 455
LoadVar binsema
Push "suspended"
Address
LoadVar binsema
Push "suspended"
Address
Load
1-ary len
Address
Stop
Continue
Pop
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Load
Assert
AtomicDec
ReadonlyDec
Jump 461
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Push True
Store
AtomicDec
Return
Jump 799
Frame release binsema
AtomicInc(lazy)
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Push "acquired"
Address
Load
Assert
AtomicDec
ReadonlyDec
LoadVar binsema
Push "suspended"
Address
Load
Push ()
2-ary ==
JumpCond False 489
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Push False
Store
Jump 508
Push ()
Push PC(50)
LoadVar binsema
Push "suspended"
Address
Load
Apply
Go
LoadVar binsema
Push "suspended"
Address
Push PC(59)
LoadVar binsema
DelVar binsema
Push "suspended"
Address
Load
Apply
Store
AtomicDec
Return
Jump 799
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Load
StoreVar result
Return
Jump 799
Frame Condition ()
DelVar result
Push ()
StoreVar result
Return
Jump 799
Frame wait (c, lk)
AtomicInc(lazy)
Push PC(464)
LoadVar lk
Apply
Pop
LoadVar c
LoadVar c
DelVar c
Load
1-ary len
Address
Stop
Continue
Pop
AtomicDec
Push PC(425)
LoadVar lk
DelVar lk
Apply
Pop
Return
Jump 799
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push ()
2-ary !=
JumpCond False 570
Push ()
Push PC(50)
LoadVar c
Load
Apply
Go
LoadVar c
Push PC(59)
LoadVar c
DelVar c
Load
Apply
Store
DelVar c
AtomicDec
Return
Jump 799
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
Load
Push ()
2-ary !=
JumpCond False 594
Push ()
Push PC(50)
LoadVar c
Load
Apply
Go
LoadVar c
Push PC(59)
LoadVar c
Load
Apply
Store
Jump 576
DelVar c
AtomicDec
Return
Jump 799
Frame Semaphore cnt
DelVar result
Push ()
Push "count"
LoadVar cnt
DelVar cnt
3-ary DictAdd
Push "waiters"
Push ()
3-ary DictAdd
StoreVar result
Return
Jump 799
Frame P sema
AtomicInc(lazy)
LoadVar sema
Push "count"
Address
Load
Push 0
2-ary >
JumpCond False 630
LoadVar sema
DelVar sema
Push "count"
Address
Dup
Load
Push 1
2-ary -
Store
Jump 643
LoadVar sema
Push "waiters"
Address
LoadVar sema
DelVar sema
Push "waiters"
Address
Load
1-ary len
Address
Stop
Continue
Pop
AtomicDec
Return
Jump 799
Frame V sema
AtomicInc(lazy)
Push ()
Push 0
LoadVar sema
Push "count"
Address
Load
3-ary DictAdd
Push 1
LoadVar sema
Push "waiters"
Address
Load
3-ary DictAdd
StoreVar (cnt, waiters)
LoadVar waiters
Push ()
2-ary !=
JumpCond False 690
ReadonlyInc
AtomicInc(lazy)
LoadVar cnt
DelVar cnt
Push 0
2-ary ==
Assert
AtomicDec
ReadonlyDec
Push ()
LoadVar waiters
Push 0
Apply
Go
LoadVar sema
DelVar sema
Push "waiters"
Address
Push PC(59)
LoadVar waiters
DelVar waiters
Apply
Store
Jump 700
DelVar waiters
LoadVar sema
DelVar sema
Push "count"
Address
LoadVar cnt
DelVar cnt
Push 1
2-ary +
Store
AtomicDec
Return
Jump 799
Frame Queue ()
DelVar result
Push { "list":(), "waiters":() }
StoreVar result
Return
Jump 799
Frame get q
DelVar result
AtomicInc(lazy)
LoadVar q
Push "list"
Address
Load
Push ()
2-ary ==
JumpCond False 731
LoadVar q
Push "waiters"
Address
LoadVar q
Push "waiters"
Address
Load
1-ary len
Address
Stop
Continue
Pop
Push PC(50)
LoadVar q
Push "list"
Address
Load
Apply
StoreVar result
LoadVar q
Push "list"
Address
Push PC(59)
LoadVar q
DelVar q
Push "list"
Address
Load
Apply
Store
AtomicDec
Return
Jump 799
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push "list"
Address
Push PC(37)
Push ()
Push 0
LoadVar q
Push "list"
Address
Load
3-ary DictAdd
Push 1
LoadVar item
3-ary DictAdd
Apply
Store
LoadVar q
Push "waiters"
Address
Load
StoreVar waiters
LoadVar waiters
Push ()
2-ary !=
JumpCond False 794
LoadVar item
DelVar item
LoadVar waiters
Push 0
Apply
Go
LoadVar q
DelVar q
Push "waiters"
Address
Push PC(59)
LoadVar waiters
DelVar waiters
Apply
Store
DelVar item
DelVar q
DelVar waiters
AtomicDec
Return
Push PC(417)
Push ()
Apply
Store mutex
Push [False, False, False, False, False]
Store forks
Push ()
Push 0
Push PC(521)
Push ()
Apply
3-ary DictAdd
Push 5
2-ary *
Store conds
Jump 952
Frame diner which
Push ()
Push 0
LoadVar which
3-ary DictAdd
Push 1
LoadVar which
DelVar which
Push 1
2-ary +
Push 5
2-ary %
3-ary DictAdd
StoreVar (left, right)
Push { False, True }
Choose
JumpCond False 949
Push PC(425)
Push ?mutex
Apply
Pop
Push ?forks
LoadVar left
Address
Load
JumpCond True 846
Push ?forks
LoadVar right
Address
Load
Jump 847
Push True
JumpCond False 883
Push ?forks
LoadVar left
Address
Load
JumpCond False 865
Push PC(527)
Push ()
Push 0
Push ?conds
LoadVar left
Address
3-ary DictAdd
Push 1
Push ?mutex
3-ary DictAdd
Apply
Pop
Push ?forks
LoadVar right
Address
Load
JumpCond False 836
Push PC(527)
Push ()
Push 0
Push ?conds
LoadVar right
Address
3-ary DictAdd
Push 1
Push ?mutex
3-ary DictAdd
Apply
Pop
Jump 836
ReadonlyInc
AtomicInc(lazy)
Push ?forks
LoadVar left
Address
Load
JumpCond True 895
Push ?forks
LoadVar right
Address
Load
Jump 896
Push True
1-ary not
Assert
AtomicDec
ReadonlyDec
Push ?forks
LoadVar left
Address
Push ?forks
LoadVar right
Address
Push True
Dup
Move 3
Move 2
Store
Store
Push PC(464)
Push ?mutex
Apply
Pop
Push PC(425)
Push ?mutex
Apply
Pop
Push ?forks
LoadVar left
Address
Push ?forks
LoadVar right
Address
Push False
Dup
Move 3
Move 2
Store
Store
Push PC(550)
Push ?conds
LoadVar left
Address
Apply
Pop
Push PC(550)
Push ?conds
LoadVar right
Address
Apply
Pop
Push PC(464)
Push ?mutex
Apply
Pop
Jump 829
DelVar left
DelVar right
Return
Push { 0, 1, 2, 3, 4 }
StoreVar $s839
LoadVar $s839
1-ary IsEmpty
JumpCond True 964
Cut($s839, i)
Push PC(815)
LoadVar i
DelVar i
Push ()
Spawn
Jump 954
DelVar $s839
Return
DelVar result
```

Duration: 0.0014561000000000157

---
##  code/DinersAvoid.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store synch
Push ()
Store list
Jump 369
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 369
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 369
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 369
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 369
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 369
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 369
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 369
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 369
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 369
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 369
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 369
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 369
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Push ()
Store bag
Jump 1039
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1039
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s311
LoadVar $s311
1-ary IsEmpty
JumpCond True 393
Cut($s311, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 384
DelVar $s311
StoreVar result
Return
Jump 1039
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s327
LoadVar $s327
1-ary IsEmpty
JumpCond True 430
Cut($s327, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 423
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 404
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 404
DelVar $s327
Return
Jump 1039
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 456
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 460
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1039
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s391
LoadVar $s391
1-ary IsEmpty
JumpCond True 489
Cut($s391, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 478
DelVar $s391
Return
Jump 1039
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1039
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1039
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1039
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 566
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 572
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1039
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 599
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 600
Push False
JumpCond False 609
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 620
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1039
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 638
DelVar bg
DelVar k
Push {}
Push PC(372)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 723
Push PC(462)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 652
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 723
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 664
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 723
Push PC(492)
LoadVar bg
Apply
StoreVar hd
Push PC(574)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(623)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s568
LoadVar $s568
1-ary IsEmpty
JumpCond True 708
Cut($s568, x)
Push PC(537)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 692
DelVar $s568
DelVar hd
Push PC(623)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1039
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1039
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 754
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1039
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1039
Frame Lock ()
DelVar result
Push PC(759)
Push False
Apply
StoreVar result
Return
Jump 1039
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1039
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 790
Jump 793
ReadonlyDec
AtomicDec
Jump 783
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1039
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1039
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1039
Frame Condition ()
DelVar result
Push PC(372)
Push ()
Apply
StoreVar result
Return
Jump 1039
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(537)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 887
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 888
Push False
JumpCond False 893
DelVar c
DelVar cnt
DelVar ctx
Jump 896
ReadonlyDec
AtomicDec
Jump 868
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1039
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(372)
Push ()
Apply
2-ary !=
JumpCond False 929
LoadVar c
Push PC(574)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(519)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1039
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(372)
Push ()
Apply
Store
AtomicDec
Return
Jump 1039
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1039
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 960
Jump 963
ReadonlyDec
AtomicDec
Jump 952
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1039
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1039
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1039
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1002
Jump 1005
ReadonlyDec
AtomicDec
Jump 993
ReadonlyDec
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1039
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Push ()
Push 0
Push PC(766)
Push ()
Apply
3-ary DictAdd
Push 5
2-ary *
Store forks
Push PC(944)
Push 4
Apply
Store sema
Jump 1106
Frame diner which
Push ()
Push 0
LoadVar which
3-ary DictAdd
Push 1
LoadVar which
DelVar which
Push 1
2-ary +
Push 5
2-ary %
3-ary DictAdd
StoreVar (left, right)
Push { False, True }
Choose
JumpCond False 1103
Push PC(951)
Push ?sema
Apply
Pop
Push PC(782)
Push ?forks
LoadVar left
Address
Apply
Pop
Push PC(782)
Push ?forks
LoadVar right
Address
Apply
Pop
Push PC(801)
Push ?forks
LoadVar left
Address
Apply
Pop
Push PC(801)
Push ?forks
LoadVar right
Address
Apply
Pop
Push PC(974)
Push ?sema
Apply
Pop
Jump 1067
DelVar left
DelVar right
Return
Push { 0, 1, 2, 3, 4 }
StoreVar $s951
LoadVar $s951
1-ary IsEmpty
JumpCond True 1118
Cut($s951, i)
Push PC(1053)
LoadVar i
DelVar i
Push ()
Spawn
Jump 1108
DelVar $s951
Return
DelVar result
```

Duration: 0.002185500000000007

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store synch
Push ()
Store list
Jump 369
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 369
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 369
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 369
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 369
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 369
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 369
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 369
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 369
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 369
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 369
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 369
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 369
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Push ()
Store bag
Jump 1039
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1039
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s311
LoadVar $s311
1-ary IsEmpty
JumpCond True 393
Cut($s311, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 384
DelVar $s311
StoreVar result
Return
Jump 1039
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s327
LoadVar $s327
1-ary IsEmpty
JumpCond True 430
Cut($s327, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 423
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 404
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 404
DelVar $s327
Return
Jump 1039
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 456
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 460
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1039
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s391
LoadVar $s391
1-ary IsEmpty
JumpCond True 489
Cut($s391, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 478
DelVar $s391
Return
Jump 1039
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1039
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1039
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1039
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 566
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 572
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1039
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 599
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 600
Push False
JumpCond False 609
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 620
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1039
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 638
DelVar bg
DelVar k
Push {}
Push PC(372)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 723
Push PC(462)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 652
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 723
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 664
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 723
Push PC(492)
LoadVar bg
Apply
StoreVar hd
Push PC(574)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(623)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s568
LoadVar $s568
1-ary IsEmpty
JumpCond True 708
Cut($s568, x)
Push PC(537)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 692
DelVar $s568
DelVar hd
Push PC(623)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1039
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1039
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 754
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1039
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1039
Frame Lock ()
DelVar result
Push PC(759)
Push False
Apply
StoreVar result
Return
Jump 1039
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1039
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 790
Jump 793
ReadonlyDec
AtomicDec
Jump 783
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1039
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1039
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1039
Frame Condition ()
DelVar result
Push PC(372)
Push ()
Apply
StoreVar result
Return
Jump 1039
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(537)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 887
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 888
Push False
JumpCond False 893
DelVar c
DelVar cnt
DelVar ctx
Jump 896
ReadonlyDec
AtomicDec
Jump 868
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1039
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(372)
Push ()
Apply
2-ary !=
JumpCond False 929
LoadVar c
Push PC(574)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(519)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1039
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(372)
Push ()
Apply
Store
AtomicDec
Return
Jump 1039
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1039
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 960
Jump 963
ReadonlyDec
AtomicDec
Jump 952
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1039
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1039
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1039
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1002
Jump 1005
ReadonlyDec
AtomicDec
Jump 993
ReadonlyDec
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1039
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Push ()
Push 0
Push PC(766)
Push ()
Apply
3-ary DictAdd
Push 5
2-ary *
Store forks
Push PC(944)
Push 4
Apply
Store sema
Jump 1106
Frame diner which
Push ()
Push 0
LoadVar which
3-ary DictAdd
Push 1
LoadVar which
DelVar which
Push 1
2-ary +
Push 5
2-ary %
3-ary DictAdd
StoreVar (left, right)
Push { False, True }
Choose
JumpCond False 1103
Push PC(951)
Push ?sema
Apply
Pop
Push PC(782)
Push ?forks
LoadVar left
Address
Apply
Pop
Push PC(782)
Push ?forks
LoadVar right
Address
Apply
Pop
Push PC(801)
Push ?forks
LoadVar left
Address
Apply
Pop
Push PC(801)
Push ?forks
LoadVar right
Address
Apply
Pop
Push PC(974)
Push ?sema
Apply
Pop
Jump 1067
DelVar left
DelVar right
Return
Push { 0, 1, 2, 3, 4 }
StoreVar $s951
LoadVar $s951
1-ary IsEmpty
JumpCond True 1118
Cut($s951, i)
Push PC(1053)
LoadVar i
DelVar i
Push ()
Spawn
Jump 1108
DelVar $s951
Return
DelVar result
```

Duration: 0.0016695999999999933

---
## -msynch=synchS code/DinersAvoid.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store synch
Push ()
Store list
Jump 799
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 799
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 799
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 799
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 799
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 799
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 799
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 799
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 799
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 799
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 799
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 799
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 799
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Jump 799
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 799
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 399
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 799
Frame BinSema acquired
DelVar result
Push ()
Push "acquired"
LoadVar acquired
DelVar acquired
3-ary DictAdd
Push "suspended"
Push ()
3-ary DictAdd
StoreVar result
Return
Jump 799
Frame Lock ()
DelVar result
Push PC(404)
Push False
Apply
StoreVar result
Return
Jump 799
Frame acquire binsema
AtomicInc(lazy)
LoadVar binsema
Push "acquired"
Address
Load
JumpCond False 455
LoadVar binsema
Push "suspended"
Address
LoadVar binsema
Push "suspended"
Address
Load
1-ary len
Address
Stop
Continue
Pop
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Load
Assert
AtomicDec
ReadonlyDec
Jump 461
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Push True
Store
AtomicDec
Return
Jump 799
Frame release binsema
AtomicInc(lazy)
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Push "acquired"
Address
Load
Assert
AtomicDec
ReadonlyDec
LoadVar binsema
Push "suspended"
Address
Load
Push ()
2-ary ==
JumpCond False 489
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Push False
Store
Jump 508
Push ()
Push PC(50)
LoadVar binsema
Push "suspended"
Address
Load
Apply
Go
LoadVar binsema
Push "suspended"
Address
Push PC(59)
LoadVar binsema
DelVar binsema
Push "suspended"
Address
Load
Apply
Store
AtomicDec
Return
Jump 799
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Load
StoreVar result
Return
Jump 799
Frame Condition ()
DelVar result
Push ()
StoreVar result
Return
Jump 799
Frame wait (c, lk)
AtomicInc(lazy)
Push PC(464)
LoadVar lk
Apply
Pop
LoadVar c
LoadVar c
DelVar c
Load
1-ary len
Address
Stop
Continue
Pop
AtomicDec
Push PC(425)
LoadVar lk
DelVar lk
Apply
Pop
Return
Jump 799
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push ()
2-ary !=
JumpCond False 570
Push ()
Push PC(50)
LoadVar c
Load
Apply
Go
LoadVar c
Push PC(59)
LoadVar c
DelVar c
Load
Apply
Store
DelVar c
AtomicDec
Return
Jump 799
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
Load
Push ()
2-ary !=
JumpCond False 594
Push ()
Push PC(50)
LoadVar c
Load
Apply
Go
LoadVar c
Push PC(59)
LoadVar c
Load
Apply
Store
Jump 576
DelVar c
AtomicDec
Return
Jump 799
Frame Semaphore cnt
DelVar result
Push ()
Push "count"
LoadVar cnt
DelVar cnt
3-ary DictAdd
Push "waiters"
Push ()
3-ary DictAdd
StoreVar result
Return
Jump 799
Frame P sema
AtomicInc(lazy)
LoadVar sema
Push "count"
Address
Load
Push 0
2-ary >
JumpCond False 630
LoadVar sema
DelVar sema
Push "count"
Address
Dup
Load
Push 1
2-ary -
Store
Jump 643
LoadVar sema
Push "waiters"
Address
LoadVar sema
DelVar sema
Push "waiters"
Address
Load
1-ary len
Address
Stop
Continue
Pop
AtomicDec
Return
Jump 799
Frame V sema
AtomicInc(lazy)
Push ()
Push 0
LoadVar sema
Push "count"
Address
Load
3-ary DictAdd
Push 1
LoadVar sema
Push "waiters"
Address
Load
3-ary DictAdd
StoreVar (cnt, waiters)
LoadVar waiters
Push ()
2-ary !=
JumpCond False 690
ReadonlyInc
AtomicInc(lazy)
LoadVar cnt
DelVar cnt
Push 0
2-ary ==
Assert
AtomicDec
ReadonlyDec
Push ()
LoadVar waiters
Push 0
Apply
Go
LoadVar sema
DelVar sema
Push "waiters"
Address
Push PC(59)
LoadVar waiters
DelVar waiters
Apply
Store
Jump 700
DelVar waiters
LoadVar sema
DelVar sema
Push "count"
Address
LoadVar cnt
DelVar cnt
Push 1
2-ary +
Store
AtomicDec
Return
Jump 799
Frame Queue ()
DelVar result
Push { "list":(), "waiters":() }
StoreVar result
Return
Jump 799
Frame get q
DelVar result
AtomicInc(lazy)
LoadVar q
Push "list"
Address
Load
Push ()
2-ary ==
JumpCond False 731
LoadVar q
Push "waiters"
Address
LoadVar q
Push "waiters"
Address
Load
1-ary len
Address
Stop
Continue
Pop
Push PC(50)
LoadVar q
Push "list"
Address
Load
Apply
StoreVar result
LoadVar q
Push "list"
Address
Push PC(59)
LoadVar q
DelVar q
Push "list"
Address
Load
Apply
Store
AtomicDec
Return
Jump 799
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push "list"
Address
Push PC(37)
Push ()
Push 0
LoadVar q
Push "list"
Address
Load
3-ary DictAdd
Push 1
LoadVar item
3-ary DictAdd
Apply
Store
LoadVar q
Push "waiters"
Address
Load
StoreVar waiters
LoadVar waiters
Push ()
2-ary !=
JumpCond False 794
LoadVar item
DelVar item
LoadVar waiters
Push 0
Apply
Go
LoadVar q
DelVar q
Push "waiters"
Address
Push PC(59)
LoadVar waiters
DelVar waiters
Apply
Store
DelVar item
DelVar q
DelVar waiters
AtomicDec
Return
Push ()
Push 0
Push PC(417)
Push ()
Apply
3-ary DictAdd
Push 5
2-ary *
Store forks
Push PC(598)
Push 4
Apply
Store sema
Jump 866
Frame diner which
Push ()
Push 0
LoadVar which
3-ary DictAdd
Push 1
LoadVar which
DelVar which
Push 1
2-ary +
Push 5
2-ary %
3-ary DictAdd
StoreVar (left, right)
Push { False, True }
Choose
JumpCond False 863
Push PC(611)
Push ?sema
Apply
Pop
Push PC(425)
Push ?forks
LoadVar left
Address
Apply
Pop
Push PC(425)
Push ?forks
LoadVar right
Address
Apply
Pop
Push PC(464)
Push ?forks
LoadVar left
Address
Apply
Pop
Push PC(464)
Push ?forks
LoadVar right
Address
Apply
Pop
Push PC(646)
Push ?sema
Apply
Pop
Jump 827
DelVar left
DelVar right
Return
Push { 0, 1, 2, 3, 4 }
StoreVar $s753
LoadVar $s753
1-ary IsEmpty
JumpCond True 878
Cut($s753, i)
Push PC(813)
LoadVar i
DelVar i
Push ()
Spawn
Jump 868
DelVar $s753
Return
DelVar result
```

Duration: 0.001544600000000007

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store synch
Push ()
Store list
Jump 799
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 799
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 799
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 799
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 799
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 799
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 799
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 799
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 799
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 799
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 799
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 799
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 799
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Jump 799
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 799
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 399
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 799
Frame BinSema acquired
DelVar result
Push ()
Push "acquired"
LoadVar acquired
DelVar acquired
3-ary DictAdd
Push "suspended"
Push ()
3-ary DictAdd
StoreVar result
Return
Jump 799
Frame Lock ()
DelVar result
Push PC(404)
Push False
Apply
StoreVar result
Return
Jump 799
Frame acquire binsema
AtomicInc(lazy)
LoadVar binsema
Push "acquired"
Address
Load
JumpCond False 455
LoadVar binsema
Push "suspended"
Address
LoadVar binsema
Push "suspended"
Address
Load
1-ary len
Address
Stop
Continue
Pop
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Load
Assert
AtomicDec
ReadonlyDec
Jump 461
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Push True
Store
AtomicDec
Return
Jump 799
Frame release binsema
AtomicInc(lazy)
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Push "acquired"
Address
Load
Assert
AtomicDec
ReadonlyDec
LoadVar binsema
Push "suspended"
Address
Load
Push ()
2-ary ==
JumpCond False 489
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Push False
Store
Jump 508
Push ()
Push PC(50)
LoadVar binsema
Push "suspended"
Address
Load
Apply
Go
LoadVar binsema
Push "suspended"
Address
Push PC(59)
LoadVar binsema
DelVar binsema
Push "suspended"
Address
Load
Apply
Store
AtomicDec
Return
Jump 799
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Load
StoreVar result
Return
Jump 799
Frame Condition ()
DelVar result
Push ()
StoreVar result
Return
Jump 799
Frame wait (c, lk)
AtomicInc(lazy)
Push PC(464)
LoadVar lk
Apply
Pop
LoadVar c
LoadVar c
DelVar c
Load
1-ary len
Address
Stop
Continue
Pop
AtomicDec
Push PC(425)
LoadVar lk
DelVar lk
Apply
Pop
Return
Jump 799
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push ()
2-ary !=
JumpCond False 570
Push ()
Push PC(50)
LoadVar c
Load
Apply
Go
LoadVar c
Push PC(59)
LoadVar c
DelVar c
Load
Apply
Store
DelVar c
AtomicDec
Return
Jump 799
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
Load
Push ()
2-ary !=
JumpCond False 594
Push ()
Push PC(50)
LoadVar c
Load
Apply
Go
LoadVar c
Push PC(59)
LoadVar c
Load
Apply
Store
Jump 576
DelVar c
AtomicDec
Return
Jump 799
Frame Semaphore cnt
DelVar result
Push ()
Push "count"
LoadVar cnt
DelVar cnt
3-ary DictAdd
Push "waiters"
Push ()
3-ary DictAdd
StoreVar result
Return
Jump 799
Frame P sema
AtomicInc(lazy)
LoadVar sema
Push "count"
Address
Load
Push 0
2-ary >
JumpCond False 630
LoadVar sema
DelVar sema
Push "count"
Address
Dup
Load
Push 1
2-ary -
Store
Jump 643
LoadVar sema
Push "waiters"
Address
LoadVar sema
DelVar sema
Push "waiters"
Address
Load
1-ary len
Address
Stop
Continue
Pop
AtomicDec
Return
Jump 799
Frame V sema
AtomicInc(lazy)
Push ()
Push 0
LoadVar sema
Push "count"
Address
Load
3-ary DictAdd
Push 1
LoadVar sema
Push "waiters"
Address
Load
3-ary DictAdd
StoreVar (cnt, waiters)
LoadVar waiters
Push ()
2-ary !=
JumpCond False 690
ReadonlyInc
AtomicInc(lazy)
LoadVar cnt
DelVar cnt
Push 0
2-ary ==
Assert
AtomicDec
ReadonlyDec
Push ()
LoadVar waiters
Push 0
Apply
Go
LoadVar sema
DelVar sema
Push "waiters"
Address
Push PC(59)
LoadVar waiters
DelVar waiters
Apply
Store
Jump 700
DelVar waiters
LoadVar sema
DelVar sema
Push "count"
Address
LoadVar cnt
DelVar cnt
Push 1
2-ary +
Store
AtomicDec
Return
Jump 799
Frame Queue ()
DelVar result
Push { "list":(), "waiters":() }
StoreVar result
Return
Jump 799
Frame get q
DelVar result
AtomicInc(lazy)
LoadVar q
Push "list"
Address
Load
Push ()
2-ary ==
JumpCond False 731
LoadVar q
Push "waiters"
Address
LoadVar q
Push "waiters"
Address
Load
1-ary len
Address
Stop
Continue
Pop
Push PC(50)
LoadVar q
Push "list"
Address
Load
Apply
StoreVar result
LoadVar q
Push "list"
Address
Push PC(59)
LoadVar q
DelVar q
Push "list"
Address
Load
Apply
Store
AtomicDec
Return
Jump 799
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push "list"
Address
Push PC(37)
Push ()
Push 0
LoadVar q
Push "list"
Address
Load
3-ary DictAdd
Push 1
LoadVar item
3-ary DictAdd
Apply
Store
LoadVar q
Push "waiters"
Address
Load
StoreVar waiters
LoadVar waiters
Push ()
2-ary !=
JumpCond False 794
LoadVar item
DelVar item
LoadVar waiters
Push 0
Apply
Go
LoadVar q
DelVar q
Push "waiters"
Address
Push PC(59)
LoadVar waiters
DelVar waiters
Apply
Store
DelVar item
DelVar q
DelVar waiters
AtomicDec
Return
Push ()
Push 0
Push PC(417)
Push ()
Apply
3-ary DictAdd
Push 5
2-ary *
Store forks
Push PC(598)
Push 4
Apply
Store sema
Jump 866
Frame diner which
Push ()
Push 0
LoadVar which
3-ary DictAdd
Push 1
LoadVar which
DelVar which
Push 1
2-ary +
Push 5
2-ary %
3-ary DictAdd
StoreVar (left, right)
Push { False, True }
Choose
JumpCond False 863
Push PC(611)
Push ?sema
Apply
Pop
Push PC(425)
Push ?forks
LoadVar left
Address
Apply
Pop
Push PC(425)
Push ?forks
LoadVar right
Address
Apply
Pop
Push PC(464)
Push ?forks
LoadVar left
Address
Apply
Pop
Push PC(464)
Push ?forks
LoadVar right
Address
Apply
Pop
Push PC(646)
Push ?sema
Apply
Pop
Jump 827
DelVar left
DelVar right
Return
Push { 0, 1, 2, 3, 4 }
StoreVar $s753
LoadVar $s753
1-ary IsEmpty
JumpCond True 878
Cut($s753, i)
Push PC(813)
LoadVar i
DelVar i
Push ()
Spawn
Jump 868
DelVar $s753
Return
DelVar result
```

Duration: 0.0013588999999999962

---
##  code/bank.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store synch
Push ()
Store list
Jump 369
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 369
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 369
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 369
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 369
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 369
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 369
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 369
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 369
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 369
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 369
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 369
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 369
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Push ()
Store bag
Jump 1039
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1039
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s311
LoadVar $s311
1-ary IsEmpty
JumpCond True 393
Cut($s311, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 384
DelVar $s311
StoreVar result
Return
Jump 1039
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s327
LoadVar $s327
1-ary IsEmpty
JumpCond True 430
Cut($s327, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 423
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 404
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 404
DelVar $s327
Return
Jump 1039
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 456
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 460
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1039
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s391
LoadVar $s391
1-ary IsEmpty
JumpCond True 489
Cut($s391, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 478
DelVar $s391
Return
Jump 1039
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1039
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1039
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1039
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 566
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 572
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1039
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 599
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 600
Push False
JumpCond False 609
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 620
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1039
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 638
DelVar bg
DelVar k
Push {}
Push PC(372)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 723
Push PC(462)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 652
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 723
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 664
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 723
Push PC(492)
LoadVar bg
Apply
StoreVar hd
Push PC(574)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(623)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s568
LoadVar $s568
1-ary IsEmpty
JumpCond True 708
Cut($s568, x)
Push PC(537)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 692
DelVar $s568
DelVar hd
Push PC(623)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1039
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1039
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 754
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1039
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1039
Frame Lock ()
DelVar result
Push PC(759)
Push False
Apply
StoreVar result
Return
Jump 1039
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1039
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 790
Jump 793
ReadonlyDec
AtomicDec
Jump 783
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1039
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1039
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1039
Frame Condition ()
DelVar result
Push PC(372)
Push ()
Apply
StoreVar result
Return
Jump 1039
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(537)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 887
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 888
Push False
JumpCond False 893
DelVar c
DelVar cnt
DelVar ctx
Jump 896
ReadonlyDec
AtomicDec
Jump 868
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1039
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(372)
Push ()
Apply
2-ary !=
JumpCond False 929
LoadVar c
Push PC(574)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(519)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1039
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(372)
Push ()
Apply
Store
AtomicDec
Return
Jump 1039
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1039
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 960
Jump 963
ReadonlyDec
AtomicDec
Jump 952
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1039
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1039
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1039
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1002
Jump 1005
ReadonlyDec
AtomicDec
Jump 993
ReadonlyDec
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1039
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Push 0
StoreVar $n887
Push ()
Push { 1, 2 }
StoreVar $s890
LoadVar $s890
1-ary IsEmpty
JumpCond True 1063
Cut($s890, i)
DelVar i
LoadVar $n887
Push ()
Push "lock"
Push PC(766)
Push ()
Apply
3-ary DictAdd
Push "balance"
Push { 0, 1, 2 }
Choose
3-ary DictAdd
3-ary DictAdd
IncVar $n887
Jump 1044
DelVar $n887
DelVar $s890
Store accounts
Jump 1170
Frame transfer (a1, a2, amount)
DelVar result
Push PC(782)
Push ?accounts
LoadVar a1
Address
Push "lock"
Address
Apply
Pop
LoadVar amount
Push ?accounts
LoadVar a1
Address
Push "balance"
Address
Load
2-ary <=
JumpCond False 1127
Push ?accounts
LoadVar a1
Address
Push "balance"
Address
Dup
Load
LoadVar amount
2-ary -
Store
Push PC(782)
Push ?accounts
LoadVar a2
Address
Push "lock"
Address
Apply
Pop
Push ?accounts
LoadVar a2
Address
Push "balance"
Address
Dup
Load
LoadVar amount
DelVar amount
2-ary +
Store
Push PC(801)
Push ?accounts
LoadVar a2
DelVar a2
Address
Push "lock"
Address
Apply
Pop
Push True
StoreVar result
Jump 1131
DelVar a2
DelVar amount
Push False
StoreVar result
Push PC(801)
Push ?accounts
LoadVar a1
DelVar a1
Address
Push "lock"
Address
Apply
Pop
Return
Jump 1170
Frame thread ()
Push { 0, 1 }
Choose
StoreVar a1
Push { 0, 1 }
Push {}
LoadVar a1
2-ary SetAdd
2-ary -
Choose
StoreVar a2
Push PC(1067)
Push ()
Push 0
LoadVar a1
DelVar a1
3-ary DictAdd
Push 1
LoadVar a2
DelVar a2
3-ary DictAdd
Push 2
Push { 1, 2 }
Choose
3-ary DictAdd
Apply
Pop
Return
Push { 1, 2 }
StoreVar $s1007
LoadVar $s1007
1-ary IsEmpty
JumpCond True 1182
Cut($s1007, i)
DelVar i
Push PC(1142)
Push ()
Push ()
Spawn
Jump 1172
DelVar $s1007
Return
DelVar result
```

Duration: 0.001596299999999995

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store synch
Push ()
Store list
Jump 369
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 369
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 369
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 369
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 369
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 369
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 369
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 369
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 369
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 369
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 369
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 369
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 369
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Push ()
Store bag
Jump 1039
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1039
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s311
LoadVar $s311
1-ary IsEmpty
JumpCond True 393
Cut($s311, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 384
DelVar $s311
StoreVar result
Return
Jump 1039
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s327
LoadVar $s327
1-ary IsEmpty
JumpCond True 430
Cut($s327, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 423
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 404
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 404
DelVar $s327
Return
Jump 1039
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 456
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 460
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1039
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s391
LoadVar $s391
1-ary IsEmpty
JumpCond True 489
Cut($s391, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 478
DelVar $s391
Return
Jump 1039
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1039
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1039
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1039
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 566
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 572
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1039
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 599
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 600
Push False
JumpCond False 609
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 620
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1039
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 638
DelVar bg
DelVar k
Push {}
Push PC(372)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 723
Push PC(462)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 652
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 723
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 664
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 723
Push PC(492)
LoadVar bg
Apply
StoreVar hd
Push PC(574)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(623)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s568
LoadVar $s568
1-ary IsEmpty
JumpCond True 708
Cut($s568, x)
Push PC(537)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 692
DelVar $s568
DelVar hd
Push PC(623)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1039
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1039
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 754
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1039
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1039
Frame Lock ()
DelVar result
Push PC(759)
Push False
Apply
StoreVar result
Return
Jump 1039
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1039
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 790
Jump 793
ReadonlyDec
AtomicDec
Jump 783
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1039
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1039
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1039
Frame Condition ()
DelVar result
Push PC(372)
Push ()
Apply
StoreVar result
Return
Jump 1039
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(537)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 887
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 888
Push False
JumpCond False 893
DelVar c
DelVar cnt
DelVar ctx
Jump 896
ReadonlyDec
AtomicDec
Jump 868
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1039
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(372)
Push ()
Apply
2-ary !=
JumpCond False 929
LoadVar c
Push PC(574)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(519)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1039
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(372)
Push ()
Apply
Store
AtomicDec
Return
Jump 1039
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1039
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 960
Jump 963
ReadonlyDec
AtomicDec
Jump 952
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1039
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1039
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1039
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1002
Jump 1005
ReadonlyDec
AtomicDec
Jump 993
ReadonlyDec
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1039
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Push 0
StoreVar $n887
Push ()
Push { 1, 2 }
StoreVar $s890
LoadVar $s890
1-ary IsEmpty
JumpCond True 1063
Cut($s890, i)
DelVar i
LoadVar $n887
Push ()
Push "lock"
Push PC(766)
Push ()
Apply
3-ary DictAdd
Push "balance"
Push { 0, 1, 2 }
Choose
3-ary DictAdd
3-ary DictAdd
IncVar $n887
Jump 1044
DelVar $n887
DelVar $s890
Store accounts
Jump 1170
Frame transfer (a1, a2, amount)
DelVar result
Push PC(782)
Push ?accounts
LoadVar a1
Address
Push "lock"
Address
Apply
Pop
LoadVar amount
Push ?accounts
LoadVar a1
Address
Push "balance"
Address
Load
2-ary <=
JumpCond False 1127
Push ?accounts
LoadVar a1
Address
Push "balance"
Address
Dup
Load
LoadVar amount
2-ary -
Store
Push PC(782)
Push ?accounts
LoadVar a2
Address
Push "lock"
Address
Apply
Pop
Push ?accounts
LoadVar a2
Address
Push "balance"
Address
Dup
Load
LoadVar amount
DelVar amount
2-ary +
Store
Push PC(801)
Push ?accounts
LoadVar a2
DelVar a2
Address
Push "lock"
Address
Apply
Pop
Push True
StoreVar result
Jump 1131
DelVar a2
DelVar amount
Push False
StoreVar result
Push PC(801)
Push ?accounts
LoadVar a1
DelVar a1
Address
Push "lock"
Address
Apply
Pop
Return
Jump 1170
Frame thread ()
Push { 0, 1 }
Choose
StoreVar a1
Push { 0, 1 }
Push {}
LoadVar a1
2-ary SetAdd
2-ary -
Choose
StoreVar a2
Push PC(1067)
Push ()
Push 0
LoadVar a1
DelVar a1
3-ary DictAdd
Push 1
LoadVar a2
DelVar a2
3-ary DictAdd
Push 2
Push { 1, 2 }
Choose
3-ary DictAdd
Apply
Pop
Return
Push { 1, 2 }
StoreVar $s1007
LoadVar $s1007
1-ary IsEmpty
JumpCond True 1182
Cut($s1007, i)
DelVar i
Push PC(1142)
Push ()
Push ()
Spawn
Jump 1172
DelVar $s1007
Return
DelVar result
```

Duration: 0.0015833999999999848

---
##  code/counter.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store synch
Push ()
Store list
Jump 369
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 369
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 369
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 369
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 369
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 369
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 369
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 369
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 369
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 369
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 369
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 369
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 369
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Push ()
Store bag
Jump 1039
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1039
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s311
LoadVar $s311
1-ary IsEmpty
JumpCond True 393
Cut($s311, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 384
DelVar $s311
StoreVar result
Return
Jump 1039
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s327
LoadVar $s327
1-ary IsEmpty
JumpCond True 430
Cut($s327, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 423
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 404
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 404
DelVar $s327
Return
Jump 1039
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 456
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 460
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1039
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s391
LoadVar $s391
1-ary IsEmpty
JumpCond True 489
Cut($s391, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 478
DelVar $s391
Return
Jump 1039
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1039
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1039
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1039
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 566
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 572
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1039
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 599
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 600
Push False
JumpCond False 609
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 620
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1039
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 638
DelVar bg
DelVar k
Push {}
Push PC(372)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 723
Push PC(462)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 652
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 723
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 664
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 723
Push PC(492)
LoadVar bg
Apply
StoreVar hd
Push PC(574)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(623)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s568
LoadVar $s568
1-ary IsEmpty
JumpCond True 708
Cut($s568, x)
Push PC(537)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 692
DelVar $s568
DelVar hd
Push PC(623)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1039
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1039
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 754
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1039
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1039
Frame Lock ()
DelVar result
Push PC(759)
Push False
Apply
StoreVar result
Return
Jump 1039
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1039
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 790
Jump 793
ReadonlyDec
AtomicDec
Jump 783
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1039
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1039
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1039
Frame Condition ()
DelVar result
Push PC(372)
Push ()
Apply
StoreVar result
Return
Jump 1039
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(537)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 887
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 888
Push False
JumpCond False 893
DelVar c
DelVar cnt
DelVar ctx
Jump 896
ReadonlyDec
AtomicDec
Jump 868
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1039
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(372)
Push ()
Apply
2-ary !=
JumpCond False 929
LoadVar c
Push PC(574)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(519)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1039
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(372)
Push ()
Apply
Store
AtomicDec
Return
Jump 1039
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1039
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 960
Jump 963
ReadonlyDec
AtomicDec
Jump 952
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1039
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1039
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1039
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1002
Jump 1005
ReadonlyDec
AtomicDec
Jump 993
ReadonlyDec
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1039
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Push PC(986)
Push ()
Apply
Store server_queue
Jump 1072
Frame server ()
Push 0
StoreVar counter
Push True
JumpCond False 1070
Push PC(992)
Push ?server_queue
Apply
StoreVar q
Push PC(1021)
Push ()
Push 0
LoadVar q
DelVar q
3-ary DictAdd
Push 1
LoadVar counter
3-ary DictAdd
Apply
Pop
LoadVar counter
DelVar counter
Push 1
2-ary +
StoreVar counter
Jump 1047
DelVar counter
Return
Push PC(1044)
Push ()
Push ()
Spawn
Push ?done
Sequential
Push [False, False, False]
Store done
Jump 1109
Frame client client_queue
Push PC(1021)
Push ()
Push 0
Push ?server_queue
3-ary DictAdd
Push 1
LoadVar client_queue
3-ary DictAdd
Apply
Pop
Push PC(992)
LoadVar client_queue
DelVar client_queue
Apply
StoreVar response
Push ?done
LoadVar response
DelVar response
Address
Push True
Store
Load done
1-ary all
JumpCond False 1103
Jump 1108
Jump 1103
Return
Push PC(986)
Push ()
Apply
Store alice_queue
Push PC(1081)
Push ?alice_queue
Push ()
Spawn
Push PC(986)
Push ()
Apply
Store bob_queue
Push PC(1081)
Push ?bob_queue
Push ()
Spawn
Push PC(986)
Push ()
Apply
Store charlie_queue
Push PC(1081)
Push ?charlie_queue
Push ()
Spawn
Return
DelVar result
```

Duration: 0.0018094999999999917

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store synch
Push ()
Store list
Jump 369
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 369
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 369
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 369
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 369
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 369
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 369
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 369
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 369
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 369
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 369
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 369
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 369
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Push ()
Store bag
Jump 1039
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1039
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s311
LoadVar $s311
1-ary IsEmpty
JumpCond True 393
Cut($s311, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 384
DelVar $s311
StoreVar result
Return
Jump 1039
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s327
LoadVar $s327
1-ary IsEmpty
JumpCond True 430
Cut($s327, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 423
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 404
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 404
DelVar $s327
Return
Jump 1039
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 456
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 460
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1039
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s391
LoadVar $s391
1-ary IsEmpty
JumpCond True 489
Cut($s391, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 478
DelVar $s391
Return
Jump 1039
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1039
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1039
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1039
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 566
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 572
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1039
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 599
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 600
Push False
JumpCond False 609
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 620
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1039
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 638
DelVar bg
DelVar k
Push {}
Push PC(372)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 723
Push PC(462)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 652
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 723
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 664
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 723
Push PC(492)
LoadVar bg
Apply
StoreVar hd
Push PC(574)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(623)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s568
LoadVar $s568
1-ary IsEmpty
JumpCond True 708
Cut($s568, x)
Push PC(537)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 692
DelVar $s568
DelVar hd
Push PC(623)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1039
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1039
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 754
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1039
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1039
Frame Lock ()
DelVar result
Push PC(759)
Push False
Apply
StoreVar result
Return
Jump 1039
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1039
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 790
Jump 793
ReadonlyDec
AtomicDec
Jump 783
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1039
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1039
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1039
Frame Condition ()
DelVar result
Push PC(372)
Push ()
Apply
StoreVar result
Return
Jump 1039
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(537)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 887
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 888
Push False
JumpCond False 893
DelVar c
DelVar cnt
DelVar ctx
Jump 896
ReadonlyDec
AtomicDec
Jump 868
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1039
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(372)
Push ()
Apply
2-ary !=
JumpCond False 929
LoadVar c
Push PC(574)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(519)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1039
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(372)
Push ()
Apply
Store
AtomicDec
Return
Jump 1039
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1039
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 960
Jump 963
ReadonlyDec
AtomicDec
Jump 952
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1039
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1039
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1039
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1002
Jump 1005
ReadonlyDec
AtomicDec
Jump 993
ReadonlyDec
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1039
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Push PC(986)
Push ()
Apply
Store server_queue
Jump 1072
Frame server ()
Push 0
StoreVar counter
Push True
JumpCond False 1070
Push PC(992)
Push ?server_queue
Apply
StoreVar q
Push PC(1021)
Push ()
Push 0
LoadVar q
DelVar q
3-ary DictAdd
Push 1
LoadVar counter
3-ary DictAdd
Apply
Pop
LoadVar counter
DelVar counter
Push 1
2-ary +
StoreVar counter
Jump 1047
DelVar counter
Return
Push PC(1044)
Push ()
Push ()
Spawn
Push ?done
Sequential
Push [False, False, False]
Store done
Jump 1109
Frame client client_queue
Push PC(1021)
Push ()
Push 0
Push ?server_queue
3-ary DictAdd
Push 1
LoadVar client_queue
3-ary DictAdd
Apply
Pop
Push PC(992)
LoadVar client_queue
DelVar client_queue
Apply
StoreVar response
Push ?done
LoadVar response
DelVar response
Address
Push True
Store
Load done
1-ary all
JumpCond False 1103
Jump 1108
Jump 1103
Return
Push PC(986)
Push ()
Apply
Store alice_queue
Push PC(1081)
Push ?alice_queue
Push ()
Spawn
Push PC(986)
Push ()
Apply
Store bob_queue
Push PC(1081)
Push ?bob_queue
Push ()
Spawn
Push PC(986)
Push ()
Apply
Store charlie_queue
Push PC(1081)
Push ?charlie_queue
Push ()
Spawn
Return
DelVar result
```

Duration: 0.001936199999999999

---
##  code/qbarrier.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store synch
Push ()
Store list
Jump 369
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 369
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 369
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 369
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 369
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 369
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 369
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 369
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 369
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 369
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 369
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 369
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 369
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Push ()
Store bag
Jump 1039
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1039
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s311
LoadVar $s311
1-ary IsEmpty
JumpCond True 393
Cut($s311, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 384
DelVar $s311
StoreVar result
Return
Jump 1039
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s327
LoadVar $s327
1-ary IsEmpty
JumpCond True 430
Cut($s327, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 423
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 404
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 404
DelVar $s327
Return
Jump 1039
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 456
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 460
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1039
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s391
LoadVar $s391
1-ary IsEmpty
JumpCond True 489
Cut($s391, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 478
DelVar $s391
Return
Jump 1039
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1039
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1039
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1039
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 566
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 572
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1039
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 599
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 600
Push False
JumpCond False 609
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 620
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1039
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 638
DelVar bg
DelVar k
Push {}
Push PC(372)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 723
Push PC(462)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 652
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 723
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 664
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 723
Push PC(492)
LoadVar bg
Apply
StoreVar hd
Push PC(574)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(623)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s568
LoadVar $s568
1-ary IsEmpty
JumpCond True 708
Cut($s568, x)
Push PC(537)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 692
DelVar $s568
DelVar hd
Push PC(623)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1039
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1039
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 754
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1039
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1039
Frame Lock ()
DelVar result
Push PC(759)
Push False
Apply
StoreVar result
Return
Jump 1039
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1039
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 790
Jump 793
ReadonlyDec
AtomicDec
Jump 783
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1039
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1039
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1039
Frame Condition ()
DelVar result
Push PC(372)
Push ()
Apply
StoreVar result
Return
Jump 1039
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(537)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 887
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 888
Push False
JumpCond False 893
DelVar c
DelVar cnt
DelVar ctx
Jump 896
ReadonlyDec
AtomicDec
Jump 868
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1039
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(372)
Push ()
Apply
2-ary !=
JumpCond False 929
LoadVar c
Push PC(574)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(519)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1039
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(372)
Push ()
Apply
Store
AtomicDec
Return
Jump 1039
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1039
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 960
Jump 963
ReadonlyDec
AtomicDec
Jump 952
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1039
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1039
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1039
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1002
Jump 1005
ReadonlyDec
AtomicDec
Jump 993
ReadonlyDec
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1039
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Push [0, 0, 0]
Store round
Invariant 1050
Load round
1-ary max
Load round
1-ary min
2-ary -
Push 1
2-ary <=
Continue
Return
Push ()
Push 0
Push PC(986)
Push ()
Apply
3-ary DictAdd
Push 3
2-ary *
Store q
Jump 1126
Frame thread self
Push { 1, 2, 3, 4 }
StoreVar $s910
LoadVar $s910
1-ary IsEmpty
JumpCond True 1123
Cut($s910, r)
DelVar r
Push { 0, 1, 2 }
StoreVar $s916
DelVar i
LoadVar $s916
1-ary IsEmpty
JumpCond True 1094
Cut($s916, i)
LoadVar i
LoadVar self
2-ary !=
JumpCond False 1071
Push PC(1021)
Push ()
Push 0
Push ?q
LoadVar i
DelVar i
Address
3-ary DictAdd
Push 1
Push None
3-ary DictAdd
Apply
Pop
Jump 1071
DelVar $s916
Push { 0, 1, 2 }
StoreVar $s939
LoadVar $s939
1-ary IsEmpty
JumpCond True 1113
Cut($s939, i)
LoadVar i
DelVar i
LoadVar self
2-ary !=
JumpCond False 1097
Push PC(992)
Push ?q
LoadVar self
Address
Apply
Pop
Jump 1097
DelVar $s939
Push ?round
LoadVar self
Address
Dup
Load
Push 1
2-ary +
Store
Jump 1064
DelVar $s910
DelVar self
Return
Push { 0, 1, 2 }
StoreVar $s966
LoadVar $s966
1-ary IsEmpty
JumpCond True 1138
Cut($s966, i)
Push PC(1061)
LoadVar i
DelVar i
Push ()
Spawn
Jump 1128
DelVar $s966
Return
DelVar result
```

Duration: 0.0015519000000000227

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store synch
Push ()
Store list
Jump 369
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 369
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 369
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 369
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 369
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 369
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 369
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 369
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 369
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 369
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 369
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 369
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 369
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Push ()
Store bag
Jump 1039
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1039
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s311
LoadVar $s311
1-ary IsEmpty
JumpCond True 393
Cut($s311, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 384
DelVar $s311
StoreVar result
Return
Jump 1039
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s327
LoadVar $s327
1-ary IsEmpty
JumpCond True 430
Cut($s327, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 423
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 404
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 404
DelVar $s327
Return
Jump 1039
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 456
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 460
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1039
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s391
LoadVar $s391
1-ary IsEmpty
JumpCond True 489
Cut($s391, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 478
DelVar $s391
Return
Jump 1039
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1039
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1039
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1039
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 566
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 572
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1039
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 599
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 600
Push False
JumpCond False 609
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 620
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1039
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 638
DelVar bg
DelVar k
Push {}
Push PC(372)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 723
Push PC(462)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 652
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 723
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 664
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 723
Push PC(492)
LoadVar bg
Apply
StoreVar hd
Push PC(574)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(623)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s568
LoadVar $s568
1-ary IsEmpty
JumpCond True 708
Cut($s568, x)
Push PC(537)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 692
DelVar $s568
DelVar hd
Push PC(623)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1039
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1039
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 754
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1039
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1039
Frame Lock ()
DelVar result
Push PC(759)
Push False
Apply
StoreVar result
Return
Jump 1039
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1039
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 790
Jump 793
ReadonlyDec
AtomicDec
Jump 783
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1039
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1039
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1039
Frame Condition ()
DelVar result
Push PC(372)
Push ()
Apply
StoreVar result
Return
Jump 1039
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(537)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 887
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 888
Push False
JumpCond False 893
DelVar c
DelVar cnt
DelVar ctx
Jump 896
ReadonlyDec
AtomicDec
Jump 868
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1039
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(372)
Push ()
Apply
2-ary !=
JumpCond False 929
LoadVar c
Push PC(574)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(519)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1039
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(372)
Push ()
Apply
Store
AtomicDec
Return
Jump 1039
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1039
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 960
Jump 963
ReadonlyDec
AtomicDec
Jump 952
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1039
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1039
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1039
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1002
Jump 1005
ReadonlyDec
AtomicDec
Jump 993
ReadonlyDec
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1039
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Push [0, 0, 0]
Store round
Invariant 1050
Load round
1-ary max
Load round
1-ary min
2-ary -
Push 1
2-ary <=
Continue
Return
Push ()
Push 0
Push PC(986)
Push ()
Apply
3-ary DictAdd
Push 3
2-ary *
Store q
Jump 1126
Frame thread self
Push { 1, 2, 3, 4 }
StoreVar $s910
LoadVar $s910
1-ary IsEmpty
JumpCond True 1123
Cut($s910, r)
DelVar r
Push { 0, 1, 2 }
StoreVar $s916
DelVar i
LoadVar $s916
1-ary IsEmpty
JumpCond True 1094
Cut($s916, i)
LoadVar i
LoadVar self
2-ary !=
JumpCond False 1071
Push PC(1021)
Push ()
Push 0
Push ?q
LoadVar i
DelVar i
Address
3-ary DictAdd
Push 1
Push None
3-ary DictAdd
Apply
Pop
Jump 1071
DelVar $s916
Push { 0, 1, 2 }
StoreVar $s939
LoadVar $s939
1-ary IsEmpty
JumpCond True 1113
Cut($s939, i)
LoadVar i
DelVar i
LoadVar self
2-ary !=
JumpCond False 1097
Push PC(992)
Push ?q
LoadVar self
Address
Apply
Pop
Jump 1097
DelVar $s939
Push ?round
LoadVar self
Address
Dup
Load
Push 1
2-ary +
Store
Jump 1064
DelVar $s910
DelVar self
Return
Push { 0, 1, 2 }
StoreVar $s966
LoadVar $s966
1-ary IsEmpty
JumpCond True 1138
Cut($s966, i)
Push PC(1061)
LoadVar i
DelVar i
Push ()
Spawn
Jump 1128
DelVar $s966
Return
DelVar result
```

Duration: 0.0018096999999999974

---
## -msynch=synchS code/qbarrier.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store synch
Push ()
Store list
Jump 799
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 799
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 799
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 799
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 799
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 799
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 799
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 799
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 799
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 799
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 799
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 799
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 799
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Jump 799
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 799
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 399
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 799
Frame BinSema acquired
DelVar result
Push ()
Push "acquired"
LoadVar acquired
DelVar acquired
3-ary DictAdd
Push "suspended"
Push ()
3-ary DictAdd
StoreVar result
Return
Jump 799
Frame Lock ()
DelVar result
Push PC(404)
Push False
Apply
StoreVar result
Return
Jump 799
Frame acquire binsema
AtomicInc(lazy)
LoadVar binsema
Push "acquired"
Address
Load
JumpCond False 455
LoadVar binsema
Push "suspended"
Address
LoadVar binsema
Push "suspended"
Address
Load
1-ary len
Address
Stop
Continue
Pop
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Load
Assert
AtomicDec
ReadonlyDec
Jump 461
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Push True
Store
AtomicDec
Return
Jump 799
Frame release binsema
AtomicInc(lazy)
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Push "acquired"
Address
Load
Assert
AtomicDec
ReadonlyDec
LoadVar binsema
Push "suspended"
Address
Load
Push ()
2-ary ==
JumpCond False 489
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Push False
Store
Jump 508
Push ()
Push PC(50)
LoadVar binsema
Push "suspended"
Address
Load
Apply
Go
LoadVar binsema
Push "suspended"
Address
Push PC(59)
LoadVar binsema
DelVar binsema
Push "suspended"
Address
Load
Apply
Store
AtomicDec
Return
Jump 799
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Load
StoreVar result
Return
Jump 799
Frame Condition ()
DelVar result
Push ()
StoreVar result
Return
Jump 799
Frame wait (c, lk)
AtomicInc(lazy)
Push PC(464)
LoadVar lk
Apply
Pop
LoadVar c
LoadVar c
DelVar c
Load
1-ary len
Address
Stop
Continue
Pop
AtomicDec
Push PC(425)
LoadVar lk
DelVar lk
Apply
Pop
Return
Jump 799
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push ()
2-ary !=
JumpCond False 570
Push ()
Push PC(50)
LoadVar c
Load
Apply
Go
LoadVar c
Push PC(59)
LoadVar c
DelVar c
Load
Apply
Store
DelVar c
AtomicDec
Return
Jump 799
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
Load
Push ()
2-ary !=
JumpCond False 594
Push ()
Push PC(50)
LoadVar c
Load
Apply
Go
LoadVar c
Push PC(59)
LoadVar c
Load
Apply
Store
Jump 576
DelVar c
AtomicDec
Return
Jump 799
Frame Semaphore cnt
DelVar result
Push ()
Push "count"
LoadVar cnt
DelVar cnt
3-ary DictAdd
Push "waiters"
Push ()
3-ary DictAdd
StoreVar result
Return
Jump 799
Frame P sema
AtomicInc(lazy)
LoadVar sema
Push "count"
Address
Load
Push 0
2-ary >
JumpCond False 630
LoadVar sema
DelVar sema
Push "count"
Address
Dup
Load
Push 1
2-ary -
Store
Jump 643
LoadVar sema
Push "waiters"
Address
LoadVar sema
DelVar sema
Push "waiters"
Address
Load
1-ary len
Address
Stop
Continue
Pop
AtomicDec
Return
Jump 799
Frame V sema
AtomicInc(lazy)
Push ()
Push 0
LoadVar sema
Push "count"
Address
Load
3-ary DictAdd
Push 1
LoadVar sema
Push "waiters"
Address
Load
3-ary DictAdd
StoreVar (cnt, waiters)
LoadVar waiters
Push ()
2-ary !=
JumpCond False 690
ReadonlyInc
AtomicInc(lazy)
LoadVar cnt
DelVar cnt
Push 0
2-ary ==
Assert
AtomicDec
ReadonlyDec
Push ()
LoadVar waiters
Push 0
Apply
Go
LoadVar sema
DelVar sema
Push "waiters"
Address
Push PC(59)
LoadVar waiters
DelVar waiters
Apply
Store
Jump 700
DelVar waiters
LoadVar sema
DelVar sema
Push "count"
Address
LoadVar cnt
DelVar cnt
Push 1
2-ary +
Store
AtomicDec
Return
Jump 799
Frame Queue ()
DelVar result
Push { "list":(), "waiters":() }
StoreVar result
Return
Jump 799
Frame get q
DelVar result
AtomicInc(lazy)
LoadVar q
Push "list"
Address
Load
Push ()
2-ary ==
JumpCond False 731
LoadVar q
Push "waiters"
Address
LoadVar q
Push "waiters"
Address
Load
1-ary len
Address
Stop
Continue
Pop
Push PC(50)
LoadVar q
Push "list"
Address
Load
Apply
StoreVar result
LoadVar q
Push "list"
Address
Push PC(59)
LoadVar q
DelVar q
Push "list"
Address
Load
Apply
Store
AtomicDec
Return
Jump 799
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push "list"
Address
Push PC(37)
Push ()
Push 0
LoadVar q
Push "list"
Address
Load
3-ary DictAdd
Push 1
LoadVar item
3-ary DictAdd
Apply
Store
LoadVar q
Push "waiters"
Address
Load
StoreVar waiters
LoadVar waiters
Push ()
2-ary !=
JumpCond False 794
LoadVar item
DelVar item
LoadVar waiters
Push 0
Apply
Go
LoadVar q
DelVar q
Push "waiters"
Address
Push PC(59)
LoadVar waiters
DelVar waiters
Apply
Store
DelVar item
DelVar q
DelVar waiters
AtomicDec
Return
Push [0, 0, 0]
Store round
Invariant 810
Load round
1-ary max
Load round
1-ary min
2-ary -
Push 1
2-ary <=
Continue
Return
Push ()
Push 0
Push PC(703)
Push ()
Apply
3-ary DictAdd
Push 3
2-ary *
Store q
Jump 886
Frame thread self
Push { 1, 2, 3, 4 }
StoreVar $s712
LoadVar $s712
1-ary IsEmpty
JumpCond True 883
Cut($s712, r)
DelVar r
Push { 0, 1, 2 }
StoreVar $s718
DelVar i
LoadVar $s718
1-ary IsEmpty
JumpCond True 854
Cut($s718, i)
LoadVar i
LoadVar self
2-ary !=
JumpCond False 831
Push PC(752)
Push ()
Push 0
Push ?q
LoadVar i
DelVar i
Address
3-ary DictAdd
Push 1
Push None
3-ary DictAdd
Apply
Pop
Jump 831
DelVar $s718
Push { 0, 1, 2 }
StoreVar $s741
LoadVar $s741
1-ary IsEmpty
JumpCond True 873
Cut($s741, i)
LoadVar i
DelVar i
LoadVar self
2-ary !=
JumpCond False 857
Push PC(709)
Push ?q
LoadVar self
Address
Apply
Pop
Jump 857
DelVar $s741
Push ?round
LoadVar self
Address
Dup
Load
Push 1
2-ary +
Store
Jump 824
DelVar $s712
DelVar self
Return
Push { 0, 1, 2 }
StoreVar $s768
LoadVar $s768
1-ary IsEmpty
JumpCond True 898
Cut($s768, i)
Push PC(821)
LoadVar i
DelVar i
Push ()
Spawn
Jump 888
DelVar $s768
Return
DelVar result
```

Duration: 0.0018245000000000067

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store synch
Push ()
Store list
Jump 799
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 799
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 799
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 799
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 799
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 799
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 799
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 799
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 799
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 799
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 799
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 799
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 799
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Jump 799
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 799
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 399
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 799
Frame BinSema acquired
DelVar result
Push ()
Push "acquired"
LoadVar acquired
DelVar acquired
3-ary DictAdd
Push "suspended"
Push ()
3-ary DictAdd
StoreVar result
Return
Jump 799
Frame Lock ()
DelVar result
Push PC(404)
Push False
Apply
StoreVar result
Return
Jump 799
Frame acquire binsema
AtomicInc(lazy)
LoadVar binsema
Push "acquired"
Address
Load
JumpCond False 455
LoadVar binsema
Push "suspended"
Address
LoadVar binsema
Push "suspended"
Address
Load
1-ary len
Address
Stop
Continue
Pop
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Load
Assert
AtomicDec
ReadonlyDec
Jump 461
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Push True
Store
AtomicDec
Return
Jump 799
Frame release binsema
AtomicInc(lazy)
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Push "acquired"
Address
Load
Assert
AtomicDec
ReadonlyDec
LoadVar binsema
Push "suspended"
Address
Load
Push ()
2-ary ==
JumpCond False 489
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Push False
Store
Jump 508
Push ()
Push PC(50)
LoadVar binsema
Push "suspended"
Address
Load
Apply
Go
LoadVar binsema
Push "suspended"
Address
Push PC(59)
LoadVar binsema
DelVar binsema
Push "suspended"
Address
Load
Apply
Store
AtomicDec
Return
Jump 799
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Load
StoreVar result
Return
Jump 799
Frame Condition ()
DelVar result
Push ()
StoreVar result
Return
Jump 799
Frame wait (c, lk)
AtomicInc(lazy)
Push PC(464)
LoadVar lk
Apply
Pop
LoadVar c
LoadVar c
DelVar c
Load
1-ary len
Address
Stop
Continue
Pop
AtomicDec
Push PC(425)
LoadVar lk
DelVar lk
Apply
Pop
Return
Jump 799
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push ()
2-ary !=
JumpCond False 570
Push ()
Push PC(50)
LoadVar c
Load
Apply
Go
LoadVar c
Push PC(59)
LoadVar c
DelVar c
Load
Apply
Store
DelVar c
AtomicDec
Return
Jump 799
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
Load
Push ()
2-ary !=
JumpCond False 594
Push ()
Push PC(50)
LoadVar c
Load
Apply
Go
LoadVar c
Push PC(59)
LoadVar c
Load
Apply
Store
Jump 576
DelVar c
AtomicDec
Return
Jump 799
Frame Semaphore cnt
DelVar result
Push ()
Push "count"
LoadVar cnt
DelVar cnt
3-ary DictAdd
Push "waiters"
Push ()
3-ary DictAdd
StoreVar result
Return
Jump 799
Frame P sema
AtomicInc(lazy)
LoadVar sema
Push "count"
Address
Load
Push 0
2-ary >
JumpCond False 630
LoadVar sema
DelVar sema
Push "count"
Address
Dup
Load
Push 1
2-ary -
Store
Jump 643
LoadVar sema
Push "waiters"
Address
LoadVar sema
DelVar sema
Push "waiters"
Address
Load
1-ary len
Address
Stop
Continue
Pop
AtomicDec
Return
Jump 799
Frame V sema
AtomicInc(lazy)
Push ()
Push 0
LoadVar sema
Push "count"
Address
Load
3-ary DictAdd
Push 1
LoadVar sema
Push "waiters"
Address
Load
3-ary DictAdd
StoreVar (cnt, waiters)
LoadVar waiters
Push ()
2-ary !=
JumpCond False 690
ReadonlyInc
AtomicInc(lazy)
LoadVar cnt
DelVar cnt
Push 0
2-ary ==
Assert
AtomicDec
ReadonlyDec
Push ()
LoadVar waiters
Push 0
Apply
Go
LoadVar sema
DelVar sema
Push "waiters"
Address
Push PC(59)
LoadVar waiters
DelVar waiters
Apply
Store
Jump 700
DelVar waiters
LoadVar sema
DelVar sema
Push "count"
Address
LoadVar cnt
DelVar cnt
Push 1
2-ary +
Store
AtomicDec
Return
Jump 799
Frame Queue ()
DelVar result
Push { "list":(), "waiters":() }
StoreVar result
Return
Jump 799
Frame get q
DelVar result
AtomicInc(lazy)
LoadVar q
Push "list"
Address
Load
Push ()
2-ary ==
JumpCond False 731
LoadVar q
Push "waiters"
Address
LoadVar q
Push "waiters"
Address
Load
1-ary len
Address
Stop
Continue
Pop
Push PC(50)
LoadVar q
Push "list"
Address
Load
Apply
StoreVar result
LoadVar q
Push "list"
Address
Push PC(59)
LoadVar q
DelVar q
Push "list"
Address
Load
Apply
Store
AtomicDec
Return
Jump 799
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push "list"
Address
Push PC(37)
Push ()
Push 0
LoadVar q
Push "list"
Address
Load
3-ary DictAdd
Push 1
LoadVar item
3-ary DictAdd
Apply
Store
LoadVar q
Push "waiters"
Address
Load
StoreVar waiters
LoadVar waiters
Push ()
2-ary !=
JumpCond False 794
LoadVar item
DelVar item
LoadVar waiters
Push 0
Apply
Go
LoadVar q
DelVar q
Push "waiters"
Address
Push PC(59)
LoadVar waiters
DelVar waiters
Apply
Store
DelVar item
DelVar q
DelVar waiters
AtomicDec
Return
Push [0, 0, 0]
Store round
Invariant 810
Load round
1-ary max
Load round
1-ary min
2-ary -
Push 1
2-ary <=
Continue
Return
Push ()
Push 0
Push PC(703)
Push ()
Apply
3-ary DictAdd
Push 3
2-ary *
Store q
Jump 886
Frame thread self
Push { 1, 2, 3, 4 }
StoreVar $s712
LoadVar $s712
1-ary IsEmpty
JumpCond True 883
Cut($s712, r)
DelVar r
Push { 0, 1, 2 }
StoreVar $s718
DelVar i
LoadVar $s718
1-ary IsEmpty
JumpCond True 854
Cut($s718, i)
LoadVar i
LoadVar self
2-ary !=
JumpCond False 831
Push PC(752)
Push ()
Push 0
Push ?q
LoadVar i
DelVar i
Address
3-ary DictAdd
Push 1
Push None
3-ary DictAdd
Apply
Pop
Jump 831
DelVar $s718
Push { 0, 1, 2 }
StoreVar $s741
LoadVar $s741
1-ary IsEmpty
JumpCond True 873
Cut($s741, i)
LoadVar i
DelVar i
LoadVar self
2-ary !=
JumpCond False 857
Push PC(709)
Push ?q
LoadVar self
Address
Apply
Pop
Jump 857
DelVar $s741
Push ?round
LoadVar self
Address
Dup
Load
Push 1
2-ary +
Store
Jump 824
DelVar $s712
DelVar self
Return
Push { 0, 1, 2 }
StoreVar $s768
LoadVar $s768
1-ary IsEmpty
JumpCond True 898
Cut($s768, i)
Push PC(821)
LoadVar i
DelVar i
Push ()
Spawn
Jump 888
DelVar $s768
Return
DelVar result
```

Duration: 0.0014732000000000078

---
##  code/barriertest.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store barrier
Push ()
Store synch
Push ()
Store list
Jump 371
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n9
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s12
LoadVar $s12
1-ary IsEmpty
JumpCond True 33
Cut($s12, x)
LoadVar $n9
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n9
Jump 21
DelVar $n9
DelVar $s12
DelVar s
StoreVar result
Return
Jump 371
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 371
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 371
Frame tail s
DelVar result
Push PC(8)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 371
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s69
LoadVar $s69
1-ary IsEmpty
JumpCond True 98
Cut($s69, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 87
DelVar $s69
Return
Jump 371
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s84
LoadVar $s84
1-ary IsEmpty
JumpCond True 115
Cut($s84, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 107
DelVar $s84
StoreVar result
Return
Jump 371
Frame list a
DelVar result
Push 0
StoreVar $n97
Push ()
LoadVar a
DelVar a
StoreVar $s100
LoadVar $s100
1-ary IsEmpty
JumpCond True 137
Cut($s100, v)
LoadVar $n97
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n97
Jump 127
DelVar $n97
DelVar $s100
StoreVar result
Return
Jump 371
Frame values d
DelVar result
Push 0
StoreVar $n115
Push ()
LoadVar d
1-ary keys
StoreVar $s118
LoadVar $s118
1-ary IsEmpty
JumpCond True 162
Cut($s118, k)
LoadVar $n115
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n115
Jump 150
DelVar $n115
DelVar $s118
DelVar d
StoreVar result
Return
Jump 371
Frame items d
DelVar result
Push 0
StoreVar $n136
Push ()
LoadVar d
1-ary keys
StoreVar $s139
LoadVar $s139
1-ary IsEmpty
JumpCond True 194
Cut($s139, k)
LoadVar $n136
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n136
Jump 176
DelVar $n136
DelVar $s139
DelVar d
StoreVar result
Return
Jump 371
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s167
LoadVar $s167
1-ary IsEmpty
JumpCond True 236
Cut($s167, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 209
DelVar $s167
DelVar d
DelVar index
Return
Jump 371
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 251
DelVar a
Push ()
StoreVar result
Jump 326
Push ()
Push 0
Push PC(52)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(61)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n216
Push ()
LoadVar rest
StoreVar $s219
DelVar v
LoadVar $s219
1-ary IsEmpty
JumpCond True 284
Cut($s219, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 269
LoadVar $n216
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n216
Jump 269
DelVar $n216
DelVar $s219
StoreVar lower
Push 0
StoreVar $n235
Push ()
LoadVar rest
DelVar rest
StoreVar $s238
DelVar v
LoadVar $s238
1-ary IsEmpty
JumpCond True 308
Cut($s238, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 293
LoadVar $n235
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n235
Jump 293
DelVar $n235
DelVar $s238
StoreVar higher
Push PC(241)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(241)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 371
Frame sorted d
DelVar result
Push PC(241)
Push PC(119)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 371
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n281
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s284
LoadVar $s284
1-ary IsEmpty
JumpCond True 365
Cut($s284, i)
LoadVar $n281
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n281
Jump 351
DelVar $n281
DelVar $s284
DelVar d
DelVar n
StoreVar result
Return
Push ()
Store bag
Jump 1153
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1153
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s313
LoadVar $s313
1-ary IsEmpty
JumpCond True 395
Cut($s313, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 386
DelVar $s313
StoreVar result
Return
Jump 1153
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s329
LoadVar $s329
1-ary IsEmpty
JumpCond True 432
Cut($s329, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 425
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 406
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 406
DelVar $s329
Return
Jump 1153
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 458
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 462
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1153
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s393
LoadVar $s393
1-ary IsEmpty
JumpCond True 491
Cut($s393, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 480
DelVar $s393
Return
Jump 1153
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1153
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1153
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1153
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 568
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 574
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1153
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 601
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 602
Push False
JumpCond False 611
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 622
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1153
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 640
DelVar bg
DelVar k
Push {}
Push PC(374)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 725
Push PC(464)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 654
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 725
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 666
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 725
Push PC(494)
LoadVar bg
Apply
StoreVar hd
Push PC(576)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(625)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s570
LoadVar $s570
1-ary IsEmpty
JumpCond True 710
Cut($s570, x)
Push PC(539)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 694
DelVar $s570
DelVar hd
Push PC(625)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1153
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1153
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 756
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1153
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1153
Frame Lock ()
DelVar result
Push PC(761)
Push False
Apply
StoreVar result
Return
Jump 1153
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1153
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 792
Jump 795
ReadonlyDec
AtomicDec
Jump 785
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1153
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1153
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1153
Frame Condition ()
DelVar result
Push PC(374)
Push ()
Apply
StoreVar result
Return
Jump 1153
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(435)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(539)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 889
Push PC(435)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 890
Push False
JumpCond False 895
DelVar c
DelVar cnt
DelVar ctx
Jump 898
ReadonlyDec
AtomicDec
Jump 870
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1153
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(374)
Push ()
Apply
2-ary !=
JumpCond False 931
LoadVar c
Push PC(576)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(521)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1153
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(374)
Push ()
Apply
Store
AtomicDec
Return
Jump 1153
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1153
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 962
Jump 965
ReadonlyDec
AtomicDec
Jump 954
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1153
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1153
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1153
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1004
Jump 1007
ReadonlyDec
AtomicDec
Jump 995
ReadonlyDec
Push PC(52)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(61)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1153
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(39)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Jump 1153
Frame Barrier required
DelVar result
Push ()
Push "mutex"
Push PC(768)
Push ()
Apply
3-ary DictAdd
Push "cond"
Push PC(827)
Push ()
Apply
3-ary DictAdd
Push "required"
LoadVar required
3-ary DictAdd
Push "left"
LoadVar required
DelVar required
3-ary DictAdd
Push "cycle"
Push 0
3-ary DictAdd
StoreVar result
Return
Jump 1153
Frame bwait b
Push PC(784)
LoadVar b
Push "mutex"
Address
Apply
Pop
LoadVar b
Push "left"
Address
Dup
Load
Push 1
2-ary -
Store
LoadVar b
Push "left"
Address
Load
Push 0
2-ary ==
JumpCond False 1117
LoadVar b
Push "cycle"
Address
LoadVar b
Push "cycle"
Address
Load
Push 1
2-ary +
Push 2
2-ary %
Store
LoadVar b
Push "left"
Address
LoadVar b
Push "required"
Address
Load
Store
Push PC(935)
LoadVar b
Push "cond"
Address
Apply
Pop
Jump 1144
LoadVar b
Push "cycle"
Address
Load
StoreVar cycle
LoadVar b
Push "cycle"
Address
Load
LoadVar cycle
2-ary ==
JumpCond False 1144
Push PC(835)
Push ()
Push 0
LoadVar b
Push "cond"
Address
3-ary DictAdd
Push 1
LoadVar b
Push "mutex"
Address
3-ary DictAdd
Apply
Pop
Jump 1122
DelVar cycle
Push PC(803)
LoadVar b
DelVar b
Push "mutex"
Address
Apply
Pop
Return
Push [0, 0, 0]
Store round
Invariant 1164
Load round
1-ary max
Load round
1-ary min
2-ary -
Push 1
2-ary <=
Continue
Return
Push PC(1042)
Push 3
Apply
Store barr
Jump 1194
Frame thread self
Push { 0, 1, 2, 3 }
StoreVar $s1015
LoadVar $s1015
1-ary IsEmpty
JumpCond True 1191
Cut($s1015, r)
DelVar r
Push PC(1068)
Push ?barr
Apply
Pop
Push ?round
LoadVar self
Address
Dup
Load
Push 1
2-ary +
Store
Jump 1173
DelVar $s1015
DelVar self
Return
Push { 0, 1, 2 }
StoreVar $s1035
LoadVar $s1035
1-ary IsEmpty
JumpCond True 1206
Cut($s1035, i)
Push PC(1170)
LoadVar i
DelVar i
Push ()
Spawn
Jump 1196
DelVar $s1035
Return
DelVar result
```

Duration: 0.00148029999999999

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store barrier
Push ()
Store synch
Push ()
Store list
Jump 371
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n9
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s12
LoadVar $s12
1-ary IsEmpty
JumpCond True 33
Cut($s12, x)
LoadVar $n9
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n9
Jump 21
DelVar $n9
DelVar $s12
DelVar s
StoreVar result
Return
Jump 371
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 371
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 371
Frame tail s
DelVar result
Push PC(8)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 371
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s69
LoadVar $s69
1-ary IsEmpty
JumpCond True 98
Cut($s69, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 87
DelVar $s69
Return
Jump 371
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s84
LoadVar $s84
1-ary IsEmpty
JumpCond True 115
Cut($s84, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 107
DelVar $s84
StoreVar result
Return
Jump 371
Frame list a
DelVar result
Push 0
StoreVar $n97
Push ()
LoadVar a
DelVar a
StoreVar $s100
LoadVar $s100
1-ary IsEmpty
JumpCond True 137
Cut($s100, v)
LoadVar $n97
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n97
Jump 127
DelVar $n97
DelVar $s100
StoreVar result
Return
Jump 371
Frame values d
DelVar result
Push 0
StoreVar $n115
Push ()
LoadVar d
1-ary keys
StoreVar $s118
LoadVar $s118
1-ary IsEmpty
JumpCond True 162
Cut($s118, k)
LoadVar $n115
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n115
Jump 150
DelVar $n115
DelVar $s118
DelVar d
StoreVar result
Return
Jump 371
Frame items d
DelVar result
Push 0
StoreVar $n136
Push ()
LoadVar d
1-ary keys
StoreVar $s139
LoadVar $s139
1-ary IsEmpty
JumpCond True 194
Cut($s139, k)
LoadVar $n136
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n136
Jump 176
DelVar $n136
DelVar $s139
DelVar d
StoreVar result
Return
Jump 371
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s167
LoadVar $s167
1-ary IsEmpty
JumpCond True 236
Cut($s167, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 209
DelVar $s167
DelVar d
DelVar index
Return
Jump 371
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 251
DelVar a
Push ()
StoreVar result
Jump 326
Push ()
Push 0
Push PC(52)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(61)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n216
Push ()
LoadVar rest
StoreVar $s219
DelVar v
LoadVar $s219
1-ary IsEmpty
JumpCond True 284
Cut($s219, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 269
LoadVar $n216
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n216
Jump 269
DelVar $n216
DelVar $s219
StoreVar lower
Push 0
StoreVar $n235
Push ()
LoadVar rest
DelVar rest
StoreVar $s238
DelVar v
LoadVar $s238
1-ary IsEmpty
JumpCond True 308
Cut($s238, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 293
LoadVar $n235
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n235
Jump 293
DelVar $n235
DelVar $s238
StoreVar higher
Push PC(241)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(241)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 371
Frame sorted d
DelVar result
Push PC(241)
Push PC(119)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 371
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n281
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s284
LoadVar $s284
1-ary IsEmpty
JumpCond True 365
Cut($s284, i)
LoadVar $n281
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n281
Jump 351
DelVar $n281
DelVar $s284
DelVar d
DelVar n
StoreVar result
Return
Push ()
Store bag
Jump 1153
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1153
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s313
LoadVar $s313
1-ary IsEmpty
JumpCond True 395
Cut($s313, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 386
DelVar $s313
StoreVar result
Return
Jump 1153
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s329
LoadVar $s329
1-ary IsEmpty
JumpCond True 432
Cut($s329, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 425
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 406
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 406
DelVar $s329
Return
Jump 1153
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 458
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 462
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1153
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s393
LoadVar $s393
1-ary IsEmpty
JumpCond True 491
Cut($s393, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 480
DelVar $s393
Return
Jump 1153
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1153
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1153
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1153
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 568
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 574
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1153
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 601
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 602
Push False
JumpCond False 611
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 622
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1153
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 640
DelVar bg
DelVar k
Push {}
Push PC(374)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 725
Push PC(464)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 654
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 725
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 666
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 725
Push PC(494)
LoadVar bg
Apply
StoreVar hd
Push PC(576)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(625)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s570
LoadVar $s570
1-ary IsEmpty
JumpCond True 710
Cut($s570, x)
Push PC(539)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 694
DelVar $s570
DelVar hd
Push PC(625)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1153
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1153
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 756
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1153
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1153
Frame Lock ()
DelVar result
Push PC(761)
Push False
Apply
StoreVar result
Return
Jump 1153
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1153
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 792
Jump 795
ReadonlyDec
AtomicDec
Jump 785
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1153
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1153
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1153
Frame Condition ()
DelVar result
Push PC(374)
Push ()
Apply
StoreVar result
Return
Jump 1153
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(435)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(539)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 889
Push PC(435)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 890
Push False
JumpCond False 895
DelVar c
DelVar cnt
DelVar ctx
Jump 898
ReadonlyDec
AtomicDec
Jump 870
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1153
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(374)
Push ()
Apply
2-ary !=
JumpCond False 931
LoadVar c
Push PC(576)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(521)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1153
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(374)
Push ()
Apply
Store
AtomicDec
Return
Jump 1153
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1153
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 962
Jump 965
ReadonlyDec
AtomicDec
Jump 954
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1153
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1153
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1153
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1004
Jump 1007
ReadonlyDec
AtomicDec
Jump 995
ReadonlyDec
Push PC(52)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(61)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1153
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(39)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Jump 1153
Frame Barrier required
DelVar result
Push ()
Push "mutex"
Push PC(768)
Push ()
Apply
3-ary DictAdd
Push "cond"
Push PC(827)
Push ()
Apply
3-ary DictAdd
Push "required"
LoadVar required
3-ary DictAdd
Push "left"
LoadVar required
DelVar required
3-ary DictAdd
Push "cycle"
Push 0
3-ary DictAdd
StoreVar result
Return
Jump 1153
Frame bwait b
Push PC(784)
LoadVar b
Push "mutex"
Address
Apply
Pop
LoadVar b
Push "left"
Address
Dup
Load
Push 1
2-ary -
Store
LoadVar b
Push "left"
Address
Load
Push 0
2-ary ==
JumpCond False 1117
LoadVar b
Push "cycle"
Address
LoadVar b
Push "cycle"
Address
Load
Push 1
2-ary +
Push 2
2-ary %
Store
LoadVar b
Push "left"
Address
LoadVar b
Push "required"
Address
Load
Store
Push PC(935)
LoadVar b
Push "cond"
Address
Apply
Pop
Jump 1144
LoadVar b
Push "cycle"
Address
Load
StoreVar cycle
LoadVar b
Push "cycle"
Address
Load
LoadVar cycle
2-ary ==
JumpCond False 1144
Push PC(835)
Push ()
Push 0
LoadVar b
Push "cond"
Address
3-ary DictAdd
Push 1
LoadVar b
Push "mutex"
Address
3-ary DictAdd
Apply
Pop
Jump 1122
DelVar cycle
Push PC(803)
LoadVar b
DelVar b
Push "mutex"
Address
Apply
Pop
Return
Push [0, 0, 0]
Store round
Invariant 1164
Load round
1-ary max
Load round
1-ary min
2-ary -
Push 1
2-ary <=
Continue
Return
Push PC(1042)
Push 3
Apply
Store barr
Jump 1194
Frame thread self
Push { 0, 1, 2, 3 }
StoreVar $s1015
LoadVar $s1015
1-ary IsEmpty
JumpCond True 1191
Cut($s1015, r)
DelVar r
Push PC(1068)
Push ?barr
Apply
Pop
Push ?round
LoadVar self
Address
Dup
Load
Push 1
2-ary +
Store
Jump 1173
DelVar $s1015
DelVar self
Return
Push { 0, 1, 2 }
StoreVar $s1035
LoadVar $s1035
1-ary IsEmpty
JumpCond True 1206
Cut($s1035, i)
Push PC(1170)
LoadVar i
DelVar i
Push ()
Spawn
Jump 1196
DelVar $s1035
Return
DelVar result
```

Duration: 0.001736599999999977

---
## -msynch=synchS code/barriertest.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store barrier
Push ()
Store synch
Push ()
Store list
Jump 913
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n9
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s12
LoadVar $s12
1-ary IsEmpty
JumpCond True 33
Cut($s12, x)
LoadVar $n9
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n9
Jump 21
DelVar $n9
DelVar $s12
DelVar s
StoreVar result
Return
Jump 913
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 913
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 913
Frame tail s
DelVar result
Push PC(8)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 913
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s69
LoadVar $s69
1-ary IsEmpty
JumpCond True 98
Cut($s69, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 87
DelVar $s69
Return
Jump 913
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s84
LoadVar $s84
1-ary IsEmpty
JumpCond True 115
Cut($s84, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 107
DelVar $s84
StoreVar result
Return
Jump 913
Frame list a
DelVar result
Push 0
StoreVar $n97
Push ()
LoadVar a
DelVar a
StoreVar $s100
LoadVar $s100
1-ary IsEmpty
JumpCond True 137
Cut($s100, v)
LoadVar $n97
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n97
Jump 127
DelVar $n97
DelVar $s100
StoreVar result
Return
Jump 913
Frame values d
DelVar result
Push 0
StoreVar $n115
Push ()
LoadVar d
1-ary keys
StoreVar $s118
LoadVar $s118
1-ary IsEmpty
JumpCond True 162
Cut($s118, k)
LoadVar $n115
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n115
Jump 150
DelVar $n115
DelVar $s118
DelVar d
StoreVar result
Return
Jump 913
Frame items d
DelVar result
Push 0
StoreVar $n136
Push ()
LoadVar d
1-ary keys
StoreVar $s139
LoadVar $s139
1-ary IsEmpty
JumpCond True 194
Cut($s139, k)
LoadVar $n136
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n136
Jump 176
DelVar $n136
DelVar $s139
DelVar d
StoreVar result
Return
Jump 913
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s167
LoadVar $s167
1-ary IsEmpty
JumpCond True 236
Cut($s167, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 209
DelVar $s167
DelVar d
DelVar index
Return
Jump 913
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 251
DelVar a
Push ()
StoreVar result
Jump 326
Push ()
Push 0
Push PC(52)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(61)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n216
Push ()
LoadVar rest
StoreVar $s219
DelVar v
LoadVar $s219
1-ary IsEmpty
JumpCond True 284
Cut($s219, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 269
LoadVar $n216
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n216
Jump 269
DelVar $n216
DelVar $s219
StoreVar lower
Push 0
StoreVar $n235
Push ()
LoadVar rest
DelVar rest
StoreVar $s238
DelVar v
LoadVar $s238
1-ary IsEmpty
JumpCond True 308
Cut($s238, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 293
LoadVar $n235
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n235
Jump 293
DelVar $n235
DelVar $s238
StoreVar higher
Push PC(241)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(241)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 913
Frame sorted d
DelVar result
Push PC(241)
Push PC(119)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 913
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n281
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s284
LoadVar $s284
1-ary IsEmpty
JumpCond True 365
Cut($s284, i)
LoadVar $n281
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n281
Jump 351
DelVar $n281
DelVar $s284
DelVar d
DelVar n
StoreVar result
Return
Jump 913
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 913
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 401
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 913
Frame BinSema acquired
DelVar result
Push ()
Push "acquired"
LoadVar acquired
DelVar acquired
3-ary DictAdd
Push "suspended"
Push ()
3-ary DictAdd
StoreVar result
Return
Jump 913
Frame Lock ()
DelVar result
Push PC(406)
Push False
Apply
StoreVar result
Return
Jump 913
Frame acquire binsema
AtomicInc(lazy)
LoadVar binsema
Push "acquired"
Address
Load
JumpCond False 457
LoadVar binsema
Push "suspended"
Address
LoadVar binsema
Push "suspended"
Address
Load
1-ary len
Address
Stop
Continue
Pop
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Load
Assert
AtomicDec
ReadonlyDec
Jump 463
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Push True
Store
AtomicDec
Return
Jump 913
Frame release binsema
AtomicInc(lazy)
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Push "acquired"
Address
Load
Assert
AtomicDec
ReadonlyDec
LoadVar binsema
Push "suspended"
Address
Load
Push ()
2-ary ==
JumpCond False 491
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Push False
Store
Jump 510
Push ()
Push PC(52)
LoadVar binsema
Push "suspended"
Address
Load
Apply
Go
LoadVar binsema
Push "suspended"
Address
Push PC(61)
LoadVar binsema
DelVar binsema
Push "suspended"
Address
Load
Apply
Store
AtomicDec
Return
Jump 913
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Load
StoreVar result
Return
Jump 913
Frame Condition ()
DelVar result
Push ()
StoreVar result
Return
Jump 913
Frame wait (c, lk)
AtomicInc(lazy)
Push PC(466)
LoadVar lk
Apply
Pop
LoadVar c
LoadVar c
DelVar c
Load
1-ary len
Address
Stop
Continue
Pop
AtomicDec
Push PC(427)
LoadVar lk
DelVar lk
Apply
Pop
Return
Jump 913
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push ()
2-ary !=
JumpCond False 572
Push ()
Push PC(52)
LoadVar c
Load
Apply
Go
LoadVar c
Push PC(61)
LoadVar c
DelVar c
Load
Apply
Store
DelVar c
AtomicDec
Return
Jump 913
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
Load
Push ()
2-ary !=
JumpCond False 596
Push ()
Push PC(52)
LoadVar c
Load
Apply
Go
LoadVar c
Push PC(61)
LoadVar c
Load
Apply
Store
Jump 578
DelVar c
AtomicDec
Return
Jump 913
Frame Semaphore cnt
DelVar result
Push ()
Push "count"
LoadVar cnt
DelVar cnt
3-ary DictAdd
Push "waiters"
Push ()
3-ary DictAdd
StoreVar result
Return
Jump 913
Frame P sema
AtomicInc(lazy)
LoadVar sema
Push "count"
Address
Load
Push 0
2-ary >
JumpCond False 632
LoadVar sema
DelVar sema
Push "count"
Address
Dup
Load
Push 1
2-ary -
Store
Jump 645
LoadVar sema
Push "waiters"
Address
LoadVar sema
DelVar sema
Push "waiters"
Address
Load
1-ary len
Address
Stop
Continue
Pop
AtomicDec
Return
Jump 913
Frame V sema
AtomicInc(lazy)
Push ()
Push 0
LoadVar sema
Push "count"
Address
Load
3-ary DictAdd
Push 1
LoadVar sema
Push "waiters"
Address
Load
3-ary DictAdd
StoreVar (cnt, waiters)
LoadVar waiters
Push ()
2-ary !=
JumpCond False 692
ReadonlyInc
AtomicInc(lazy)
LoadVar cnt
DelVar cnt
Push 0
2-ary ==
Assert
AtomicDec
ReadonlyDec
Push ()
LoadVar waiters
Push 0
Apply
Go
LoadVar sema
DelVar sema
Push "waiters"
Address
Push PC(61)
LoadVar waiters
DelVar waiters
Apply
Store
Jump 702
DelVar waiters
LoadVar sema
DelVar sema
Push "count"
Address
LoadVar cnt
DelVar cnt
Push 1
2-ary +
Store
AtomicDec
Return
Jump 913
Frame Queue ()
DelVar result
Push { "list":(), "waiters":() }
StoreVar result
Return
Jump 913
Frame get q
DelVar result
AtomicInc(lazy)
LoadVar q
Push "list"
Address
Load
Push ()
2-ary ==
JumpCond False 733
LoadVar q
Push "waiters"
Address
LoadVar q
Push "waiters"
Address
Load
1-ary len
Address
Stop
Continue
Pop
Push PC(52)
LoadVar q
Push "list"
Address
Load
Apply
StoreVar result
LoadVar q
Push "list"
Address
Push PC(61)
LoadVar q
DelVar q
Push "list"
Address
Load
Apply
Store
AtomicDec
Return
Jump 913
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push "list"
Address
Push PC(39)
Push ()
Push 0
LoadVar q
Push "list"
Address
Load
3-ary DictAdd
Push 1
LoadVar item
3-ary DictAdd
Apply
Store
LoadVar q
Push "waiters"
Address
Load
StoreVar waiters
LoadVar waiters
Push ()
2-ary !=
JumpCond False 796
LoadVar item
DelVar item
LoadVar waiters
Push 0
Apply
Go
LoadVar q
DelVar q
Push "waiters"
Address
Push PC(61)
LoadVar waiters
DelVar waiters
Apply
Store
DelVar item
DelVar q
DelVar waiters
AtomicDec
Return
Jump 913
Frame Barrier required
DelVar result
Push ()
Push "mutex"
Push PC(419)
Push ()
Apply
3-ary DictAdd
Push "cond"
Push PC(523)
Push ()
Apply
3-ary DictAdd
Push "required"
LoadVar required
3-ary DictAdd
Push "left"
LoadVar required
DelVar required
3-ary DictAdd
Push "cycle"
Push 0
3-ary DictAdd
StoreVar result
Return
Jump 913
Frame bwait b
Push PC(427)
LoadVar b
Push "mutex"
Address
Apply
Pop
LoadVar b
Push "left"
Address
Dup
Load
Push 1
2-ary -
Store
LoadVar b
Push "left"
Address
Load
Push 0
2-ary ==
JumpCond False 877
LoadVar b
Push "cycle"
Address
LoadVar b
Push "cycle"
Address
Load
Push 1
2-ary +
Push 2
2-ary %
Store
LoadVar b
Push "left"
Address
LoadVar b
Push "required"
Address
Load
Store
Push PC(576)
LoadVar b
Push "cond"
Address
Apply
Pop
Jump 904
LoadVar b
Push "cycle"
Address
Load
StoreVar cycle
LoadVar b
Push "cycle"
Address
Load
LoadVar cycle
2-ary ==
JumpCond False 904
Push PC(529)
Push ()
Push 0
LoadVar b
Push "cond"
Address
3-ary DictAdd
Push 1
LoadVar b
Push "mutex"
Address
3-ary DictAdd
Apply
Pop
Jump 882
DelVar cycle
Push PC(466)
LoadVar b
DelVar b
Push "mutex"
Address
Apply
Pop
Return
Push [0, 0, 0]
Store round
Invariant 924
Load round
1-ary max
Load round
1-ary min
2-ary -
Push 1
2-ary <=
Continue
Return
Push PC(802)
Push 3
Apply
Store barr
Jump 954
Frame thread self
Push { 0, 1, 2, 3 }
StoreVar $s817
LoadVar $s817
1-ary IsEmpty
JumpCond True 951
Cut($s817, r)
DelVar r
Push PC(828)
Push ?barr
Apply
Pop
Push ?round
LoadVar self
Address
Dup
Load
Push 1
2-ary +
Store
Jump 933
DelVar $s817
DelVar self
Return
Push { 0, 1, 2 }
StoreVar $s837
LoadVar $s837
1-ary IsEmpty
JumpCond True 966
Cut($s837, i)
Push PC(930)
LoadVar i
DelVar i
Push ()
Spawn
Jump 956
DelVar $s837
Return
DelVar result
```

Duration: 0.0017906999999999784

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store barrier
Push ()
Store synch
Push ()
Store list
Jump 913
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n9
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s12
LoadVar $s12
1-ary IsEmpty
JumpCond True 33
Cut($s12, x)
LoadVar $n9
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n9
Jump 21
DelVar $n9
DelVar $s12
DelVar s
StoreVar result
Return
Jump 913
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 913
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 913
Frame tail s
DelVar result
Push PC(8)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 913
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s69
LoadVar $s69
1-ary IsEmpty
JumpCond True 98
Cut($s69, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 87
DelVar $s69
Return
Jump 913
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s84
LoadVar $s84
1-ary IsEmpty
JumpCond True 115
Cut($s84, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 107
DelVar $s84
StoreVar result
Return
Jump 913
Frame list a
DelVar result
Push 0
StoreVar $n97
Push ()
LoadVar a
DelVar a
StoreVar $s100
LoadVar $s100
1-ary IsEmpty
JumpCond True 137
Cut($s100, v)
LoadVar $n97
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n97
Jump 127
DelVar $n97
DelVar $s100
StoreVar result
Return
Jump 913
Frame values d
DelVar result
Push 0
StoreVar $n115
Push ()
LoadVar d
1-ary keys
StoreVar $s118
LoadVar $s118
1-ary IsEmpty
JumpCond True 162
Cut($s118, k)
LoadVar $n115
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n115
Jump 150
DelVar $n115
DelVar $s118
DelVar d
StoreVar result
Return
Jump 913
Frame items d
DelVar result
Push 0
StoreVar $n136
Push ()
LoadVar d
1-ary keys
StoreVar $s139
LoadVar $s139
1-ary IsEmpty
JumpCond True 194
Cut($s139, k)
LoadVar $n136
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n136
Jump 176
DelVar $n136
DelVar $s139
DelVar d
StoreVar result
Return
Jump 913
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s167
LoadVar $s167
1-ary IsEmpty
JumpCond True 236
Cut($s167, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 209
DelVar $s167
DelVar d
DelVar index
Return
Jump 913
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 251
DelVar a
Push ()
StoreVar result
Jump 326
Push ()
Push 0
Push PC(52)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(61)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n216
Push ()
LoadVar rest
StoreVar $s219
DelVar v
LoadVar $s219
1-ary IsEmpty
JumpCond True 284
Cut($s219, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 269
LoadVar $n216
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n216
Jump 269
DelVar $n216
DelVar $s219
StoreVar lower
Push 0
StoreVar $n235
Push ()
LoadVar rest
DelVar rest
StoreVar $s238
DelVar v
LoadVar $s238
1-ary IsEmpty
JumpCond True 308
Cut($s238, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 293
LoadVar $n235
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n235
Jump 293
DelVar $n235
DelVar $s238
StoreVar higher
Push PC(241)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(241)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 913
Frame sorted d
DelVar result
Push PC(241)
Push PC(119)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 913
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n281
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s284
LoadVar $s284
1-ary IsEmpty
JumpCond True 365
Cut($s284, i)
LoadVar $n281
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n281
Jump 351
DelVar $n281
DelVar $s284
DelVar d
DelVar n
StoreVar result
Return
Jump 913
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 913
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 401
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 913
Frame BinSema acquired
DelVar result
Push ()
Push "acquired"
LoadVar acquired
DelVar acquired
3-ary DictAdd
Push "suspended"
Push ()
3-ary DictAdd
StoreVar result
Return
Jump 913
Frame Lock ()
DelVar result
Push PC(406)
Push False
Apply
StoreVar result
Return
Jump 913
Frame acquire binsema
AtomicInc(lazy)
LoadVar binsema
Push "acquired"
Address
Load
JumpCond False 457
LoadVar binsema
Push "suspended"
Address
LoadVar binsema
Push "suspended"
Address
Load
1-ary len
Address
Stop
Continue
Pop
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Load
Assert
AtomicDec
ReadonlyDec
Jump 463
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Push True
Store
AtomicDec
Return
Jump 913
Frame release binsema
AtomicInc(lazy)
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Push "acquired"
Address
Load
Assert
AtomicDec
ReadonlyDec
LoadVar binsema
Push "suspended"
Address
Load
Push ()
2-ary ==
JumpCond False 491
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Push False
Store
Jump 510
Push ()
Push PC(52)
LoadVar binsema
Push "suspended"
Address
Load
Apply
Go
LoadVar binsema
Push "suspended"
Address
Push PC(61)
LoadVar binsema
DelVar binsema
Push "suspended"
Address
Load
Apply
Store
AtomicDec
Return
Jump 913
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Load
StoreVar result
Return
Jump 913
Frame Condition ()
DelVar result
Push ()
StoreVar result
Return
Jump 913
Frame wait (c, lk)
AtomicInc(lazy)
Push PC(466)
LoadVar lk
Apply
Pop
LoadVar c
LoadVar c
DelVar c
Load
1-ary len
Address
Stop
Continue
Pop
AtomicDec
Push PC(427)
LoadVar lk
DelVar lk
Apply
Pop
Return
Jump 913
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push ()
2-ary !=
JumpCond False 572
Push ()
Push PC(52)
LoadVar c
Load
Apply
Go
LoadVar c
Push PC(61)
LoadVar c
DelVar c
Load
Apply
Store
DelVar c
AtomicDec
Return
Jump 913
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
Load
Push ()
2-ary !=
JumpCond False 596
Push ()
Push PC(52)
LoadVar c
Load
Apply
Go
LoadVar c
Push PC(61)
LoadVar c
Load
Apply
Store
Jump 578
DelVar c
AtomicDec
Return
Jump 913
Frame Semaphore cnt
DelVar result
Push ()
Push "count"
LoadVar cnt
DelVar cnt
3-ary DictAdd
Push "waiters"
Push ()
3-ary DictAdd
StoreVar result
Return
Jump 913
Frame P sema
AtomicInc(lazy)
LoadVar sema
Push "count"
Address
Load
Push 0
2-ary >
JumpCond False 632
LoadVar sema
DelVar sema
Push "count"
Address
Dup
Load
Push 1
2-ary -
Store
Jump 645
LoadVar sema
Push "waiters"
Address
LoadVar sema
DelVar sema
Push "waiters"
Address
Load
1-ary len
Address
Stop
Continue
Pop
AtomicDec
Return
Jump 913
Frame V sema
AtomicInc(lazy)
Push ()
Push 0
LoadVar sema
Push "count"
Address
Load
3-ary DictAdd
Push 1
LoadVar sema
Push "waiters"
Address
Load
3-ary DictAdd
StoreVar (cnt, waiters)
LoadVar waiters
Push ()
2-ary !=
JumpCond False 692
ReadonlyInc
AtomicInc(lazy)
LoadVar cnt
DelVar cnt
Push 0
2-ary ==
Assert
AtomicDec
ReadonlyDec
Push ()
LoadVar waiters
Push 0
Apply
Go
LoadVar sema
DelVar sema
Push "waiters"
Address
Push PC(61)
LoadVar waiters
DelVar waiters
Apply
Store
Jump 702
DelVar waiters
LoadVar sema
DelVar sema
Push "count"
Address
LoadVar cnt
DelVar cnt
Push 1
2-ary +
Store
AtomicDec
Return
Jump 913
Frame Queue ()
DelVar result
Push { "list":(), "waiters":() }
StoreVar result
Return
Jump 913
Frame get q
DelVar result
AtomicInc(lazy)
LoadVar q
Push "list"
Address
Load
Push ()
2-ary ==
JumpCond False 733
LoadVar q
Push "waiters"
Address
LoadVar q
Push "waiters"
Address
Load
1-ary len
Address
Stop
Continue
Pop
Push PC(52)
LoadVar q
Push "list"
Address
Load
Apply
StoreVar result
LoadVar q
Push "list"
Address
Push PC(61)
LoadVar q
DelVar q
Push "list"
Address
Load
Apply
Store
AtomicDec
Return
Jump 913
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push "list"
Address
Push PC(39)
Push ()
Push 0
LoadVar q
Push "list"
Address
Load
3-ary DictAdd
Push 1
LoadVar item
3-ary DictAdd
Apply
Store
LoadVar q
Push "waiters"
Address
Load
StoreVar waiters
LoadVar waiters
Push ()
2-ary !=
JumpCond False 796
LoadVar item
DelVar item
LoadVar waiters
Push 0
Apply
Go
LoadVar q
DelVar q
Push "waiters"
Address
Push PC(61)
LoadVar waiters
DelVar waiters
Apply
Store
DelVar item
DelVar q
DelVar waiters
AtomicDec
Return
Jump 913
Frame Barrier required
DelVar result
Push ()
Push "mutex"
Push PC(419)
Push ()
Apply
3-ary DictAdd
Push "cond"
Push PC(523)
Push ()
Apply
3-ary DictAdd
Push "required"
LoadVar required
3-ary DictAdd
Push "left"
LoadVar required
DelVar required
3-ary DictAdd
Push "cycle"
Push 0
3-ary DictAdd
StoreVar result
Return
Jump 913
Frame bwait b
Push PC(427)
LoadVar b
Push "mutex"
Address
Apply
Pop
LoadVar b
Push "left"
Address
Dup
Load
Push 1
2-ary -
Store
LoadVar b
Push "left"
Address
Load
Push 0
2-ary ==
JumpCond False 877
LoadVar b
Push "cycle"
Address
LoadVar b
Push "cycle"
Address
Load
Push 1
2-ary +
Push 2
2-ary %
Store
LoadVar b
Push "left"
Address
LoadVar b
Push "required"
Address
Load
Store
Push PC(576)
LoadVar b
Push "cond"
Address
Apply
Pop
Jump 904
LoadVar b
Push "cycle"
Address
Load
StoreVar cycle
LoadVar b
Push "cycle"
Address
Load
LoadVar cycle
2-ary ==
JumpCond False 904
Push PC(529)
Push ()
Push 0
LoadVar b
Push "cond"
Address
3-ary DictAdd
Push 1
LoadVar b
Push "mutex"
Address
3-ary DictAdd
Apply
Pop
Jump 882
DelVar cycle
Push PC(466)
LoadVar b
DelVar b
Push "mutex"
Address
Apply
Pop
Return
Push [0, 0, 0]
Store round
Invariant 924
Load round
1-ary max
Load round
1-ary min
2-ary -
Push 1
2-ary <=
Continue
Return
Push PC(802)
Push 3
Apply
Store barr
Jump 954
Frame thread self
Push { 0, 1, 2, 3 }
StoreVar $s817
LoadVar $s817
1-ary IsEmpty
JumpCond True 951
Cut($s817, r)
DelVar r
Push PC(828)
Push ?barr
Apply
Pop
Push ?round
LoadVar self
Address
Dup
Load
Push 1
2-ary +
Store
Jump 933
DelVar $s817
DelVar self
Return
Push { 0, 1, 2 }
StoreVar $s837
LoadVar $s837
1-ary IsEmpty
JumpCond True 966
Cut($s837, i)
Push PC(930)
LoadVar i
DelVar i
Push ()
Spawn
Jump 956
DelVar $s837
Return
DelVar result
```

Duration: 0.0018203999999999998

---
##  code/trap.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ?done
Sequential
Push 0
Store count
Push False
Store done
Jump 34
Frame handler ()
Load count
Push 1
2-ary +
Store count
Push True
Store done
Return
Jump 34
Frame main ()
Push ()
Push PC(8)
Trap
Load done
JumpCond False 21
Jump 25
Jump 21
ReadonlyInc
AtomicInc(lazy)
Load count
Push 1
2-ary ==
Assert
AtomicDec
ReadonlyDec
Return
Push PC(17)
Push ()
Push ()
Spawn
Return
DelVar result
```

Duration: 0.0012924000000000269

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ?done
Sequential
Push 0
Store count
Push False
Store done
Jump 34
Frame handler ()
Load count
Push 1
2-ary +
Store count
Push True
Store done
Return
Jump 34
Frame main ()
Push ()
Push PC(8)
Trap
Load done
JumpCond False 21
Jump 25
Jump 21
ReadonlyInc
AtomicInc(lazy)
Load count
Push 1
2-ary ==
Assert
AtomicDec
ReadonlyDec
Return
Push PC(17)
Push ()
Push ()
Spawn
Return
DelVar result
```

Duration: 0.0011773999999999951

---
##  code/trap2.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ?done
Sequential
Push 0
Store count
Push False
Store done
Jump 38
Frame handler ()
Load count
Push 1
2-ary +
Store count
Push True
Store done
Return
Jump 38
Frame main ()
Push ()
Push PC(8)
Trap
Load count
Push 1
2-ary +
Store count
Load done
JumpCond False 25
Jump 29
Jump 25
ReadonlyInc
AtomicInc(lazy)
Load count
Push 2
2-ary ==
Assert
AtomicDec
ReadonlyDec
Return
Push PC(17)
Push ()
Push ()
Spawn
Return
DelVar result
```

Duration: 0.001512200000000019

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ?done
Sequential
Push 0
Store count
Push False
Store done
Jump 38
Frame handler ()
Load count
Push 1
2-ary +
Store count
Push True
Store done
Return
Jump 38
Frame main ()
Push ()
Push PC(8)
Trap
Load count
Push 1
2-ary +
Store count
Load done
JumpCond False 25
Jump 29
Jump 25
ReadonlyInc
AtomicInc(lazy)
Load count
Push 2
2-ary ==
Assert
AtomicDec
ReadonlyDec
Return
Push PC(17)
Push ()
Push ()
Spawn
Return
DelVar result
```

Duration: 0.0011329999999999951

---
##  code/trap3.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store synch
Push ()
Store list
Jump 369
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 369
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 369
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 369
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 369
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 369
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 369
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 369
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 369
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 369
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 369
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 369
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 369
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Push ()
Store bag
Jump 1039
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1039
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s311
LoadVar $s311
1-ary IsEmpty
JumpCond True 393
Cut($s311, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 384
DelVar $s311
StoreVar result
Return
Jump 1039
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s327
LoadVar $s327
1-ary IsEmpty
JumpCond True 430
Cut($s327, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 423
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 404
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 404
DelVar $s327
Return
Jump 1039
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 456
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 460
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1039
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s391
LoadVar $s391
1-ary IsEmpty
JumpCond True 489
Cut($s391, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 478
DelVar $s391
Return
Jump 1039
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1039
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1039
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1039
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 566
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 572
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1039
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 599
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 600
Push False
JumpCond False 609
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 620
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1039
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 638
DelVar bg
DelVar k
Push {}
Push PC(372)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 723
Push PC(462)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 652
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 723
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 664
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 723
Push PC(492)
LoadVar bg
Apply
StoreVar hd
Push PC(574)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(623)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s568
LoadVar $s568
1-ary IsEmpty
JumpCond True 708
Cut($s568, x)
Push PC(537)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 692
DelVar $s568
DelVar hd
Push PC(623)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1039
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1039
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 754
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1039
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1039
Frame Lock ()
DelVar result
Push PC(759)
Push False
Apply
StoreVar result
Return
Jump 1039
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1039
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 790
Jump 793
ReadonlyDec
AtomicDec
Jump 783
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1039
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1039
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1039
Frame Condition ()
DelVar result
Push PC(372)
Push ()
Apply
StoreVar result
Return
Jump 1039
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(537)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 887
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 888
Push False
JumpCond False 893
DelVar c
DelVar cnt
DelVar ctx
Jump 896
ReadonlyDec
AtomicDec
Jump 868
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1039
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(372)
Push ()
Apply
2-ary !=
JumpCond False 929
LoadVar c
Push PC(574)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(519)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1039
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(372)
Push ()
Apply
Store
AtomicDec
Return
Jump 1039
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1039
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 960
Jump 963
ReadonlyDec
AtomicDec
Jump 952
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1039
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1039
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1039
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1002
Jump 1005
ReadonlyDec
AtomicDec
Jump 993
ReadonlyDec
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1039
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Push ?done
Sequential
Push PC(766)
Push ()
Apply
Store countlock
Push 0
Store count
Push False
Store done
Jump 1096
Frame handler ()
Push PC(782)
Push ?countlock
Apply
Pop
Load count
Push 1
2-ary +
Store count
Push PC(801)
Push ?countlock
Apply
Pop
Push True
Store done
Return
Jump 1096
Frame main ()
Push ()
Push PC(1050)
Trap
Push PC(782)
Push ?countlock
Apply
Pop
Load count
Push 1
2-ary +
Store count
Push PC(801)
Push ?countlock
Apply
Pop
Load done
JumpCond False 1083
Jump 1087
Jump 1083
ReadonlyInc
AtomicInc(lazy)
Load count
Push 2
2-ary ==
Assert
AtomicDec
ReadonlyDec
Return
Push PC(1067)
Push ()
Push ()
Spawn
Return
DelVar result
```

Duration: 0.0018420000000000103

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store synch
Push ()
Store list
Jump 369
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 369
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 369
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 369
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 369
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 369
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 369
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 369
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 369
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 369
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 369
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 369
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 369
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Push ()
Store bag
Jump 1039
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1039
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s311
LoadVar $s311
1-ary IsEmpty
JumpCond True 393
Cut($s311, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 384
DelVar $s311
StoreVar result
Return
Jump 1039
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s327
LoadVar $s327
1-ary IsEmpty
JumpCond True 430
Cut($s327, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 423
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 404
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 404
DelVar $s327
Return
Jump 1039
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 456
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 460
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1039
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s391
LoadVar $s391
1-ary IsEmpty
JumpCond True 489
Cut($s391, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 478
DelVar $s391
Return
Jump 1039
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1039
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1039
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1039
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 566
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 572
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1039
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 599
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 600
Push False
JumpCond False 609
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 620
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1039
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 638
DelVar bg
DelVar k
Push {}
Push PC(372)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 723
Push PC(462)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 652
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 723
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 664
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 723
Push PC(492)
LoadVar bg
Apply
StoreVar hd
Push PC(574)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(623)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s568
LoadVar $s568
1-ary IsEmpty
JumpCond True 708
Cut($s568, x)
Push PC(537)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 692
DelVar $s568
DelVar hd
Push PC(623)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1039
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1039
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 754
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1039
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1039
Frame Lock ()
DelVar result
Push PC(759)
Push False
Apply
StoreVar result
Return
Jump 1039
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1039
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 790
Jump 793
ReadonlyDec
AtomicDec
Jump 783
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1039
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1039
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1039
Frame Condition ()
DelVar result
Push PC(372)
Push ()
Apply
StoreVar result
Return
Jump 1039
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(537)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 887
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 888
Push False
JumpCond False 893
DelVar c
DelVar cnt
DelVar ctx
Jump 896
ReadonlyDec
AtomicDec
Jump 868
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1039
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(372)
Push ()
Apply
2-ary !=
JumpCond False 929
LoadVar c
Push PC(574)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(519)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1039
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(372)
Push ()
Apply
Store
AtomicDec
Return
Jump 1039
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1039
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 960
Jump 963
ReadonlyDec
AtomicDec
Jump 952
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1039
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1039
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1039
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1002
Jump 1005
ReadonlyDec
AtomicDec
Jump 993
ReadonlyDec
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1039
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Push ?done
Sequential
Push PC(766)
Push ()
Apply
Store countlock
Push 0
Store count
Push False
Store done
Jump 1096
Frame handler ()
Push PC(782)
Push ?countlock
Apply
Pop
Load count
Push 1
2-ary +
Store count
Push PC(801)
Push ?countlock
Apply
Pop
Push True
Store done
Return
Jump 1096
Frame main ()
Push ()
Push PC(1050)
Trap
Push PC(782)
Push ?countlock
Apply
Pop
Load count
Push 1
2-ary +
Store count
Push PC(801)
Push ?countlock
Apply
Pop
Load done
JumpCond False 1083
Jump 1087
Jump 1083
ReadonlyInc
AtomicInc(lazy)
Load count
Push 2
2-ary ==
Assert
AtomicDec
ReadonlyDec
Return
Push PC(1067)
Push ()
Push ()
Spawn
Return
DelVar result
```

Duration: 0.00141589999999997

---
##  code/trap4.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ?done
Sequential
Push 0
Store count
Push False
Store done
Jump 44
Frame handler ()
Load count
Push 1
2-ary +
Store count
Push True
Store done
Return
Jump 44
Frame main ()
Push ()
Push PC(8)
Trap
Push True
SetIntLevel
Pop
Load count
Push 1
2-ary +
Store count
Push False
SetIntLevel
Pop
Load done
JumpCond False 31
Jump 35
Jump 31
ReadonlyInc
AtomicInc(lazy)
Load count
Push 2
2-ary ==
Assert
AtomicDec
ReadonlyDec
Return
Push PC(17)
Push ()
Push ()
Spawn
Return
DelVar result
```

Duration: 0.0011376000000000164

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ?done
Sequential
Push 0
Store count
Push False
Store done
Jump 44
Frame handler ()
Load count
Push 1
2-ary +
Store count
Push True
Store done
Return
Jump 44
Frame main ()
Push ()
Push PC(8)
Trap
Push True
SetIntLevel
Pop
Load count
Push 1
2-ary +
Store count
Push False
SetIntLevel
Pop
Load done
JumpCond False 31
Jump 35
Jump 31
ReadonlyInc
AtomicInc(lazy)
Load count
Push 2
2-ary ==
Assert
AtomicDec
ReadonlyDec
Return
Push PC(17)
Push ()
Push ()
Spawn
Return
DelVar result
```

Duration: 0.0012184000000000084

---
##  code/trap5.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ?done
Sequential
Push 0
Store count
Push False
Store done
Jump 52
Frame increment ()
Push True
SetIntLevel
StoreVar prior
Load count
Push 1
2-ary +
Store count
LoadVar prior
DelVar prior
SetIntLevel
Pop
Return
Jump 52
Frame handler ()
Push PC(8)
Push ()
Apply
Pop
Push True
Store done
Return
Jump 52
Frame main ()
Push ()
Push PC(22)
Trap
Push PC(8)
Push ()
Apply
Pop
Load done
JumpCond False 39
Jump 43
Jump 39
ReadonlyInc
AtomicInc(lazy)
Load count
Push 2
2-ary ==
Assert
AtomicDec
ReadonlyDec
Return
Push PC(31)
Push ()
Push ()
Spawn
Return
DelVar result
```

Duration: 0.0013844000000000078

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ?done
Sequential
Push 0
Store count
Push False
Store done
Jump 52
Frame increment ()
Push True
SetIntLevel
StoreVar prior
Load count
Push 1
2-ary +
Store count
LoadVar prior
DelVar prior
SetIntLevel
Pop
Return
Jump 52
Frame handler ()
Push PC(8)
Push ()
Apply
Pop
Push True
Store done
Return
Jump 52
Frame main ()
Push ()
Push PC(22)
Trap
Push PC(8)
Push ()
Apply
Pop
Load done
JumpCond False 39
Jump 43
Jump 39
ReadonlyInc
AtomicInc(lazy)
Load count
Push 2
2-ary ==
Assert
AtomicDec
ReadonlyDec
Return
Push PC(31)
Push ()
Push ()
Spawn
Return
DelVar result
```

Duration: 0.001346600000000031

---
##  code/trap6.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store synch
Push ()
Store list
Jump 369
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 369
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 369
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 369
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 369
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 369
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 369
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 369
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 369
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 369
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 369
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 369
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 369
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Push ()
Store bag
Jump 1039
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1039
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s311
LoadVar $s311
1-ary IsEmpty
JumpCond True 393
Cut($s311, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 384
DelVar $s311
StoreVar result
Return
Jump 1039
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s327
LoadVar $s327
1-ary IsEmpty
JumpCond True 430
Cut($s327, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 423
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 404
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 404
DelVar $s327
Return
Jump 1039
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 456
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 460
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1039
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s391
LoadVar $s391
1-ary IsEmpty
JumpCond True 489
Cut($s391, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 478
DelVar $s391
Return
Jump 1039
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1039
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1039
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1039
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 566
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 572
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1039
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 599
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 600
Push False
JumpCond False 609
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 620
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1039
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 638
DelVar bg
DelVar k
Push {}
Push PC(372)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 723
Push PC(462)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 652
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 723
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 664
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 723
Push PC(492)
LoadVar bg
Apply
StoreVar hd
Push PC(574)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(623)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s568
LoadVar $s568
1-ary IsEmpty
JumpCond True 708
Cut($s568, x)
Push PC(537)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 692
DelVar $s568
DelVar hd
Push PC(623)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1039
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1039
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 754
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1039
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1039
Frame Lock ()
DelVar result
Push PC(759)
Push False
Apply
StoreVar result
Return
Jump 1039
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1039
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 790
Jump 793
ReadonlyDec
AtomicDec
Jump 783
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1039
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1039
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1039
Frame Condition ()
DelVar result
Push PC(372)
Push ()
Apply
StoreVar result
Return
Jump 1039
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(537)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 887
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 888
Push False
JumpCond False 893
DelVar c
DelVar cnt
DelVar ctx
Jump 896
ReadonlyDec
AtomicDec
Jump 868
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1039
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(372)
Push ()
Apply
2-ary !=
JumpCond False 929
LoadVar c
Push PC(574)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(519)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1039
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(372)
Push ()
Apply
Store
AtomicDec
Return
Jump 1039
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1039
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 960
Jump 963
ReadonlyDec
AtomicDec
Jump 952
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1039
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1039
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1039
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1002
Jump 1005
ReadonlyDec
AtomicDec
Jump 993
ReadonlyDec
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1039
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Push ?done
Sequential
Push 0
Store count
Push PC(766)
Push ()
Apply
Store countlock
Push [False, False]
Store done
Jump 1109
Frame increment ()
Push True
SetIntLevel
StoreVar prior
Push PC(782)
Push ?countlock
Apply
Pop
Load count
Push 1
2-ary +
Store count
Push PC(801)
Push ?countlock
Apply
Pop
LoadVar prior
DelVar prior
SetIntLevel
Pop
Return
Jump 1109
Frame handler self
Push PC(1050)
Push ()
Apply
Pop
Push ?done
LoadVar self
DelVar self
Address
Push True
Store
Return
Jump 1109
Frame thread self
LoadVar self
DelVar self
Push PC(1072)
Trap
Push PC(1050)
Push ()
Apply
Pop
Load done
1-ary all
JumpCond False 1094
Jump 1099
Jump 1094
ReadonlyInc
AtomicInc(lazy)
Load count
Push 4
2-ary ==
Load count
Assert2
AtomicDec
ReadonlyDec
Return
Push PC(1085)
Push 0
Push ()
Spawn
Push PC(1085)
Push 1
Push ()
Spawn
Return
DelVar result
```

Duration: 0.0022040999999999866

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store synch
Push ()
Store list
Jump 369
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 369
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 369
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 369
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 369
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 369
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 369
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 369
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 369
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 369
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 369
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 369
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 369
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Push ()
Store bag
Jump 1039
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1039
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s311
LoadVar $s311
1-ary IsEmpty
JumpCond True 393
Cut($s311, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 384
DelVar $s311
StoreVar result
Return
Jump 1039
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s327
LoadVar $s327
1-ary IsEmpty
JumpCond True 430
Cut($s327, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 423
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 404
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 404
DelVar $s327
Return
Jump 1039
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 456
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 460
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1039
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s391
LoadVar $s391
1-ary IsEmpty
JumpCond True 489
Cut($s391, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 478
DelVar $s391
Return
Jump 1039
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1039
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1039
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1039
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 566
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 572
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1039
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 599
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 600
Push False
JumpCond False 609
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 620
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1039
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 638
DelVar bg
DelVar k
Push {}
Push PC(372)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 723
Push PC(462)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 652
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 723
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 664
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 723
Push PC(492)
LoadVar bg
Apply
StoreVar hd
Push PC(574)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(623)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s568
LoadVar $s568
1-ary IsEmpty
JumpCond True 708
Cut($s568, x)
Push PC(537)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 692
DelVar $s568
DelVar hd
Push PC(623)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1039
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1039
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 754
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1039
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1039
Frame Lock ()
DelVar result
Push PC(759)
Push False
Apply
StoreVar result
Return
Jump 1039
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1039
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 790
Jump 793
ReadonlyDec
AtomicDec
Jump 783
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1039
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1039
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1039
Frame Condition ()
DelVar result
Push PC(372)
Push ()
Apply
StoreVar result
Return
Jump 1039
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(537)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 887
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 888
Push False
JumpCond False 893
DelVar c
DelVar cnt
DelVar ctx
Jump 896
ReadonlyDec
AtomicDec
Jump 868
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1039
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(372)
Push ()
Apply
2-ary !=
JumpCond False 929
LoadVar c
Push PC(574)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(519)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1039
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(372)
Push ()
Apply
Store
AtomicDec
Return
Jump 1039
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1039
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 960
Jump 963
ReadonlyDec
AtomicDec
Jump 952
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1039
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1039
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1039
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1002
Jump 1005
ReadonlyDec
AtomicDec
Jump 993
ReadonlyDec
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1039
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Push ?done
Sequential
Push 0
Store count
Push PC(766)
Push ()
Apply
Store countlock
Push [False, False]
Store done
Jump 1109
Frame increment ()
Push True
SetIntLevel
StoreVar prior
Push PC(782)
Push ?countlock
Apply
Pop
Load count
Push 1
2-ary +
Store count
Push PC(801)
Push ?countlock
Apply
Pop
LoadVar prior
DelVar prior
SetIntLevel
Pop
Return
Jump 1109
Frame handler self
Push PC(1050)
Push ()
Apply
Pop
Push ?done
LoadVar self
DelVar self
Address
Push True
Store
Return
Jump 1109
Frame thread self
LoadVar self
DelVar self
Push PC(1072)
Trap
Push PC(1050)
Push ()
Apply
Pop
Load done
1-ary all
JumpCond False 1094
Jump 1099
Jump 1094
ReadonlyInc
AtomicInc(lazy)
Load count
Push 4
2-ary ==
Load count
Assert2
AtomicDec
ReadonlyDec
Return
Push PC(1085)
Push 0
Push ()
Spawn
Push PC(1085)
Push 1
Push ()
Spawn
Return
DelVar result
```

Duration: 0.001671400000000045

---
## -msynch=synchS code/trap6.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store synch
Push ()
Store list
Jump 799
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 799
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 799
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 799
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 799
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 799
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 799
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 799
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 799
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 799
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 799
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 799
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 799
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Jump 799
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 799
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 399
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 799
Frame BinSema acquired
DelVar result
Push ()
Push "acquired"
LoadVar acquired
DelVar acquired
3-ary DictAdd
Push "suspended"
Push ()
3-ary DictAdd
StoreVar result
Return
Jump 799
Frame Lock ()
DelVar result
Push PC(404)
Push False
Apply
StoreVar result
Return
Jump 799
Frame acquire binsema
AtomicInc(lazy)
LoadVar binsema
Push "acquired"
Address
Load
JumpCond False 455
LoadVar binsema
Push "suspended"
Address
LoadVar binsema
Push "suspended"
Address
Load
1-ary len
Address
Stop
Continue
Pop
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Load
Assert
AtomicDec
ReadonlyDec
Jump 461
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Push True
Store
AtomicDec
Return
Jump 799
Frame release binsema
AtomicInc(lazy)
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Push "acquired"
Address
Load
Assert
AtomicDec
ReadonlyDec
LoadVar binsema
Push "suspended"
Address
Load
Push ()
2-ary ==
JumpCond False 489
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Push False
Store
Jump 508
Push ()
Push PC(50)
LoadVar binsema
Push "suspended"
Address
Load
Apply
Go
LoadVar binsema
Push "suspended"
Address
Push PC(59)
LoadVar binsema
DelVar binsema
Push "suspended"
Address
Load
Apply
Store
AtomicDec
Return
Jump 799
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Load
StoreVar result
Return
Jump 799
Frame Condition ()
DelVar result
Push ()
StoreVar result
Return
Jump 799
Frame wait (c, lk)
AtomicInc(lazy)
Push PC(464)
LoadVar lk
Apply
Pop
LoadVar c
LoadVar c
DelVar c
Load
1-ary len
Address
Stop
Continue
Pop
AtomicDec
Push PC(425)
LoadVar lk
DelVar lk
Apply
Pop
Return
Jump 799
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push ()
2-ary !=
JumpCond False 570
Push ()
Push PC(50)
LoadVar c
Load
Apply
Go
LoadVar c
Push PC(59)
LoadVar c
DelVar c
Load
Apply
Store
DelVar c
AtomicDec
Return
Jump 799
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
Load
Push ()
2-ary !=
JumpCond False 594
Push ()
Push PC(50)
LoadVar c
Load
Apply
Go
LoadVar c
Push PC(59)
LoadVar c
Load
Apply
Store
Jump 576
DelVar c
AtomicDec
Return
Jump 799
Frame Semaphore cnt
DelVar result
Push ()
Push "count"
LoadVar cnt
DelVar cnt
3-ary DictAdd
Push "waiters"
Push ()
3-ary DictAdd
StoreVar result
Return
Jump 799
Frame P sema
AtomicInc(lazy)
LoadVar sema
Push "count"
Address
Load
Push 0
2-ary >
JumpCond False 630
LoadVar sema
DelVar sema
Push "count"
Address
Dup
Load
Push 1
2-ary -
Store
Jump 643
LoadVar sema
Push "waiters"
Address
LoadVar sema
DelVar sema
Push "waiters"
Address
Load
1-ary len
Address
Stop
Continue
Pop
AtomicDec
Return
Jump 799
Frame V sema
AtomicInc(lazy)
Push ()
Push 0
LoadVar sema
Push "count"
Address
Load
3-ary DictAdd
Push 1
LoadVar sema
Push "waiters"
Address
Load
3-ary DictAdd
StoreVar (cnt, waiters)
LoadVar waiters
Push ()
2-ary !=
JumpCond False 690
ReadonlyInc
AtomicInc(lazy)
LoadVar cnt
DelVar cnt
Push 0
2-ary ==
Assert
AtomicDec
ReadonlyDec
Push ()
LoadVar waiters
Push 0
Apply
Go
LoadVar sema
DelVar sema
Push "waiters"
Address
Push PC(59)
LoadVar waiters
DelVar waiters
Apply
Store
Jump 700
DelVar waiters
LoadVar sema
DelVar sema
Push "count"
Address
LoadVar cnt
DelVar cnt
Push 1
2-ary +
Store
AtomicDec
Return
Jump 799
Frame Queue ()
DelVar result
Push { "list":(), "waiters":() }
StoreVar result
Return
Jump 799
Frame get q
DelVar result
AtomicInc(lazy)
LoadVar q
Push "list"
Address
Load
Push ()
2-ary ==
JumpCond False 731
LoadVar q
Push "waiters"
Address
LoadVar q
Push "waiters"
Address
Load
1-ary len
Address
Stop
Continue
Pop
Push PC(50)
LoadVar q
Push "list"
Address
Load
Apply
StoreVar result
LoadVar q
Push "list"
Address
Push PC(59)
LoadVar q
DelVar q
Push "list"
Address
Load
Apply
Store
AtomicDec
Return
Jump 799
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push "list"
Address
Push PC(37)
Push ()
Push 0
LoadVar q
Push "list"
Address
Load
3-ary DictAdd
Push 1
LoadVar item
3-ary DictAdd
Apply
Store
LoadVar q
Push "waiters"
Address
Load
StoreVar waiters
LoadVar waiters
Push ()
2-ary !=
JumpCond False 794
LoadVar item
DelVar item
LoadVar waiters
Push 0
Apply
Go
LoadVar q
DelVar q
Push "waiters"
Address
Push PC(59)
LoadVar waiters
DelVar waiters
Apply
Store
DelVar item
DelVar q
DelVar waiters
AtomicDec
Return
Push ?done
Sequential
Push 0
Store count
Push PC(417)
Push ()
Apply
Store countlock
Push [False, False]
Store done
Jump 869
Frame increment ()
Push True
SetIntLevel
StoreVar prior
Push PC(425)
Push ?countlock
Apply
Pop
Load count
Push 1
2-ary +
Store count
Push PC(464)
Push ?countlock
Apply
Pop
LoadVar prior
DelVar prior
SetIntLevel
Pop
Return
Jump 869
Frame handler self
Push PC(810)
Push ()
Apply
Pop
Push ?done
LoadVar self
DelVar self
Address
Push True
Store
Return
Jump 869
Frame thread self
LoadVar self
DelVar self
Push PC(832)
Trap
Push PC(810)
Push ()
Apply
Pop
Load done
1-ary all
JumpCond False 854
Jump 859
Jump 854
ReadonlyInc
AtomicInc(lazy)
Load count
Push 4
2-ary ==
Load count
Assert2
AtomicDec
ReadonlyDec
Return
Push PC(845)
Push 0
Push ()
Spawn
Push PC(845)
Push 1
Push ()
Spawn
Return
DelVar result
```

Duration: 0.0018991999999999898

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store synch
Push ()
Store list
Jump 799
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 799
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 799
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 799
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 799
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 799
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 799
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 799
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 799
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 799
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 799
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 799
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 799
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Jump 799
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 799
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 399
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 799
Frame BinSema acquired
DelVar result
Push ()
Push "acquired"
LoadVar acquired
DelVar acquired
3-ary DictAdd
Push "suspended"
Push ()
3-ary DictAdd
StoreVar result
Return
Jump 799
Frame Lock ()
DelVar result
Push PC(404)
Push False
Apply
StoreVar result
Return
Jump 799
Frame acquire binsema
AtomicInc(lazy)
LoadVar binsema
Push "acquired"
Address
Load
JumpCond False 455
LoadVar binsema
Push "suspended"
Address
LoadVar binsema
Push "suspended"
Address
Load
1-ary len
Address
Stop
Continue
Pop
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Load
Assert
AtomicDec
ReadonlyDec
Jump 461
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Push True
Store
AtomicDec
Return
Jump 799
Frame release binsema
AtomicInc(lazy)
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Push "acquired"
Address
Load
Assert
AtomicDec
ReadonlyDec
LoadVar binsema
Push "suspended"
Address
Load
Push ()
2-ary ==
JumpCond False 489
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Push False
Store
Jump 508
Push ()
Push PC(50)
LoadVar binsema
Push "suspended"
Address
Load
Apply
Go
LoadVar binsema
Push "suspended"
Address
Push PC(59)
LoadVar binsema
DelVar binsema
Push "suspended"
Address
Load
Apply
Store
AtomicDec
Return
Jump 799
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Push "acquired"
Address
Load
StoreVar result
Return
Jump 799
Frame Condition ()
DelVar result
Push ()
StoreVar result
Return
Jump 799
Frame wait (c, lk)
AtomicInc(lazy)
Push PC(464)
LoadVar lk
Apply
Pop
LoadVar c
LoadVar c
DelVar c
Load
1-ary len
Address
Stop
Continue
Pop
AtomicDec
Push PC(425)
LoadVar lk
DelVar lk
Apply
Pop
Return
Jump 799
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push ()
2-ary !=
JumpCond False 570
Push ()
Push PC(50)
LoadVar c
Load
Apply
Go
LoadVar c
Push PC(59)
LoadVar c
DelVar c
Load
Apply
Store
DelVar c
AtomicDec
Return
Jump 799
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
Load
Push ()
2-ary !=
JumpCond False 594
Push ()
Push PC(50)
LoadVar c
Load
Apply
Go
LoadVar c
Push PC(59)
LoadVar c
Load
Apply
Store
Jump 576
DelVar c
AtomicDec
Return
Jump 799
Frame Semaphore cnt
DelVar result
Push ()
Push "count"
LoadVar cnt
DelVar cnt
3-ary DictAdd
Push "waiters"
Push ()
3-ary DictAdd
StoreVar result
Return
Jump 799
Frame P sema
AtomicInc(lazy)
LoadVar sema
Push "count"
Address
Load
Push 0
2-ary >
JumpCond False 630
LoadVar sema
DelVar sema
Push "count"
Address
Dup
Load
Push 1
2-ary -
Store
Jump 643
LoadVar sema
Push "waiters"
Address
LoadVar sema
DelVar sema
Push "waiters"
Address
Load
1-ary len
Address
Stop
Continue
Pop
AtomicDec
Return
Jump 799
Frame V sema
AtomicInc(lazy)
Push ()
Push 0
LoadVar sema
Push "count"
Address
Load
3-ary DictAdd
Push 1
LoadVar sema
Push "waiters"
Address
Load
3-ary DictAdd
StoreVar (cnt, waiters)
LoadVar waiters
Push ()
2-ary !=
JumpCond False 690
ReadonlyInc
AtomicInc(lazy)
LoadVar cnt
DelVar cnt
Push 0
2-ary ==
Assert
AtomicDec
ReadonlyDec
Push ()
LoadVar waiters
Push 0
Apply
Go
LoadVar sema
DelVar sema
Push "waiters"
Address
Push PC(59)
LoadVar waiters
DelVar waiters
Apply
Store
Jump 700
DelVar waiters
LoadVar sema
DelVar sema
Push "count"
Address
LoadVar cnt
DelVar cnt
Push 1
2-ary +
Store
AtomicDec
Return
Jump 799
Frame Queue ()
DelVar result
Push { "list":(), "waiters":() }
StoreVar result
Return
Jump 799
Frame get q
DelVar result
AtomicInc(lazy)
LoadVar q
Push "list"
Address
Load
Push ()
2-ary ==
JumpCond False 731
LoadVar q
Push "waiters"
Address
LoadVar q
Push "waiters"
Address
Load
1-ary len
Address
Stop
Continue
Pop
Push PC(50)
LoadVar q
Push "list"
Address
Load
Apply
StoreVar result
LoadVar q
Push "list"
Address
Push PC(59)
LoadVar q
DelVar q
Push "list"
Address
Load
Apply
Store
AtomicDec
Return
Jump 799
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push "list"
Address
Push PC(37)
Push ()
Push 0
LoadVar q
Push "list"
Address
Load
3-ary DictAdd
Push 1
LoadVar item
3-ary DictAdd
Apply
Store
LoadVar q
Push "waiters"
Address
Load
StoreVar waiters
LoadVar waiters
Push ()
2-ary !=
JumpCond False 794
LoadVar item
DelVar item
LoadVar waiters
Push 0
Apply
Go
LoadVar q
DelVar q
Push "waiters"
Address
Push PC(59)
LoadVar waiters
DelVar waiters
Apply
Store
DelVar item
DelVar q
DelVar waiters
AtomicDec
Return
Push ?done
Sequential
Push 0
Store count
Push PC(417)
Push ()
Apply
Store countlock
Push [False, False]
Store done
Jump 869
Frame increment ()
Push True
SetIntLevel
StoreVar prior
Push PC(425)
Push ?countlock
Apply
Pop
Load count
Push 1
2-ary +
Store count
Push PC(464)
Push ?countlock
Apply
Pop
LoadVar prior
DelVar prior
SetIntLevel
Pop
Return
Jump 869
Frame handler self
Push PC(810)
Push ()
Apply
Pop
Push ?done
LoadVar self
DelVar self
Address
Push True
Store
Return
Jump 869
Frame thread self
LoadVar self
DelVar self
Push PC(832)
Trap
Push PC(810)
Push ()
Apply
Pop
Load done
1-ary all
JumpCond False 854
Jump 859
Jump 854
ReadonlyInc
AtomicInc(lazy)
Load count
Push 4
2-ary ==
Load count
Assert2
AtomicDec
ReadonlyDec
Return
Push PC(845)
Push 0
Push ()
Spawn
Push PC(845)
Push 1
Push ()
Spawn
Return
DelVar result
```

Duration: 0.0017278000000000016

---
##  code/hw.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ?back
Sequential
Push ?items
Sequential
Push 0
Store back
Push [None, None, None]
Store items
Jump 86
Frame inc pcnt
DelVar result
AtomicInc(lazy)
LoadVar pcnt
Load
StoreVar result
LoadVar pcnt
DelVar pcnt
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 86
Frame exch pv
DelVar result
AtomicInc(lazy)
LoadVar pv
Load
StoreVar result
LoadVar pv
DelVar pv
Push None
Store
AtomicDec
Return
Jump 86
Frame produce item
Push ?items
Push PC(10)
Push ?back
Apply
Address
LoadVar item
DelVar item
Store
Return
Jump 86
Frame consume ()
DelVar result
Push None
StoreVar result
LoadVar result
Push None
2-ary ==
JumpCond False 85
Push 0
StoreVar i
LoadVar i
Load back
2-ary <
JumpCond False 68
LoadVar result
Push None
2-ary ==
Jump 69
Push False
JumpCond False 83
DelVar result
Push PC(26)
Push ?items
LoadVar i
Address
Apply
StoreVar result
LoadVar i
DelVar i
Push 1
2-ary +
StoreVar i
Jump 60
DelVar i
Jump 54
Return
Push { 1, 2, 3 }
StoreVar $s77
LoadVar $s77
1-ary IsEmpty
JumpCond True 98
Cut($s77, i)
Push PC(39)
LoadVar i
DelVar i
Push ()
Spawn
Jump 88
DelVar $s77
Push 1
Push { 0, 1, 2, 3 }
Choose
2-ary ..
StoreVar $s88
LoadVar $s88
1-ary IsEmpty
JumpCond True 114
Cut($s88, i)
DelVar i
Push PC(50)
Push ()
Push ()
Spawn
Jump 104
DelVar $s88
Return
DelVar result
```

Duration: 0.0015494999999999814

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ?back
Sequential
Push ?items
Sequential
Push 0
Store back
Push [None, None, None]
Store items
Jump 86
Frame inc pcnt
DelVar result
AtomicInc(lazy)
LoadVar pcnt
Load
StoreVar result
LoadVar pcnt
DelVar pcnt
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 86
Frame exch pv
DelVar result
AtomicInc(lazy)
LoadVar pv
Load
StoreVar result
LoadVar pv
DelVar pv
Push None
Store
AtomicDec
Return
Jump 86
Frame produce item
Push ?items
Push PC(10)
Push ?back
Apply
Address
LoadVar item
DelVar item
Store
Return
Jump 86
Frame consume ()
DelVar result
Push None
StoreVar result
LoadVar result
Push None
2-ary ==
JumpCond False 85
Push 0
StoreVar i
LoadVar i
Load back
2-ary <
JumpCond False 68
LoadVar result
Push None
2-ary ==
Jump 69
Push False
JumpCond False 83
DelVar result
Push PC(26)
Push ?items
LoadVar i
Address
Apply
StoreVar result
LoadVar i
DelVar i
Push 1
2-ary +
StoreVar i
Jump 60
DelVar i
Jump 54
Return
Push { 1, 2, 3 }
StoreVar $s77
LoadVar $s77
1-ary IsEmpty
JumpCond True 98
Cut($s77, i)
Push PC(39)
LoadVar i
DelVar i
Push ()
Spawn
Jump 88
DelVar $s77
Push 1
Push { 0, 1, 2, 3 }
Choose
2-ary ..
StoreVar $s88
LoadVar $s88
1-ary IsEmpty
JumpCond True 114
Cut($s88, i)
DelVar i
Push PC(50)
Push ()
Push ()
Spawn
Jump 104
DelVar $s88
Return
DelVar result
```

Duration: 0.0012689000000000172

---
##  code/abptest.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store abp
Push ?abp"s_chan"
Sequential
Push ?abp"r_chan"
Sequential
Push ()
Dup
Store abp.r_chan
Store abp.s_chan
Push 0
Dup
Store abp.r_seq
Store abp.s_seq
Jump 195
Frame net_send (pchan, m, reliable)
LoadVar pchan
DelVar pchan
LoadVar reliable
DelVar reliable
JumpCond True 25
Push { False, True }
Choose
Jump 26
Push True
JumpCond False 30
LoadVar m
DelVar m
Jump 32
DelVar m
Push ()
Store
Return
Jump 195
Frame net_recv pchan
DelVar result
LoadVar pchan
DelVar pchan
Load
StoreVar result
Return
Jump 195
Frame app_send payload
Push 1
Load abp.s_seq
2-ary -
Store abp.s_seq
Push ()
Push "seq"
Load abp.s_seq
3-ary DictAdd
Push "payload"
LoadVar payload
DelVar payload
3-ary DictAdd
StoreVar m
Push True
StoreVar blocked
LoadVar blocked
DelVar blocked
JumpCond False 94
Push PC(16)
Push ()
Push 0
Push ?abp"s_chan"
3-ary DictAdd
Push 1
LoadVar m
3-ary DictAdd
Push 2
Push False
3-ary DictAdd
Apply
Pop
Push PC(35)
Push ?abp"r_chan"
Apply
StoreVar response
LoadVar response
Push ()
2-ary ==
JumpCond True 90
LoadVar response
DelVar response
Push "ack"
Apply
Load abp.s_seq
2-ary !=
Jump 92
DelVar response
Push True
StoreVar blocked
Jump 59
DelVar m
Return
Jump 195
Frame app_recv reliable
Push 1
Load abp.r_seq
2-ary -
Store abp.r_seq
Push True
StoreVar blocked
LoadVar blocked
JumpCond False 149
Push PC(35)
Push ?abp"s_chan"
Apply
StoreVar m
LoadVar m
Push ()
2-ary !=
JumpCond False 147
Push PC(16)
Push ()
Push 0
Push ?abp"r_chan"
3-ary DictAdd
Push 1
Push ()
Push "ack"
LoadVar m
Push "seq"
Apply
3-ary DictAdd
3-ary DictAdd
Push 2
LoadVar reliable
3-ary DictAdd
Apply
Pop
LoadVar m
Push "seq"
Apply
Load abp.r_seq
2-ary ==
JumpCond False 147
DelVar blocked
DelVar result
LoadVar m
DelVar m
Push "payload"
Apply
StoreVar result
Push False
StoreVar blocked
DelVar m
Jump 104
DelVar blocked
DelVar reliable
Return
Jump 195
Frame sender ()
Push { 1, 2, 3, 4, 5 }
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 166
Cut($s137, i)
Push PC(43)
LoadVar i
DelVar i
Apply
Pop
Jump 156
DelVar $s137
Return
Jump 195
Frame receiver ()
Push { 1, 2, 3, 4, 5 }
StoreVar $s151
LoadVar $s151
1-ary IsEmpty
JumpCond True 193
Cut($s151, i)
Push PC(97)
LoadVar i
Push 5
2-ary ==
Apply
StoreVar payload
ReadonlyInc
AtomicInc(lazy)
LoadVar payload
DelVar payload
LoadVar i
DelVar i
2-ary ==
Assert
AtomicDec
ReadonlyDec
Jump 172
DelVar $s151
Return
Push PC(153)
Push ()
Push ()
Spawn
Push PC(169)
Push ()
Push ()
Spawn
Return
DelVar result
```

Duration: 0.001594299999999993

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store abp
Push ?abp"s_chan"
Sequential
Push ?abp"r_chan"
Sequential
Push ()
Dup
Store abp.r_chan
Store abp.s_chan
Push 0
Dup
Store abp.r_seq
Store abp.s_seq
Jump 195
Frame net_send (pchan, m, reliable)
LoadVar pchan
DelVar pchan
LoadVar reliable
DelVar reliable
JumpCond True 25
Push { False, True }
Choose
Jump 26
Push True
JumpCond False 30
LoadVar m
DelVar m
Jump 32
DelVar m
Push ()
Store
Return
Jump 195
Frame net_recv pchan
DelVar result
LoadVar pchan
DelVar pchan
Load
StoreVar result
Return
Jump 195
Frame app_send payload
Push 1
Load abp.s_seq
2-ary -
Store abp.s_seq
Push ()
Push "seq"
Load abp.s_seq
3-ary DictAdd
Push "payload"
LoadVar payload
DelVar payload
3-ary DictAdd
StoreVar m
Push True
StoreVar blocked
LoadVar blocked
DelVar blocked
JumpCond False 94
Push PC(16)
Push ()
Push 0
Push ?abp"s_chan"
3-ary DictAdd
Push 1
LoadVar m
3-ary DictAdd
Push 2
Push False
3-ary DictAdd
Apply
Pop
Push PC(35)
Push ?abp"r_chan"
Apply
StoreVar response
LoadVar response
Push ()
2-ary ==
JumpCond True 90
LoadVar response
DelVar response
Push "ack"
Apply
Load abp.s_seq
2-ary !=
Jump 92
DelVar response
Push True
StoreVar blocked
Jump 59
DelVar m
Return
Jump 195
Frame app_recv reliable
Push 1
Load abp.r_seq
2-ary -
Store abp.r_seq
Push True
StoreVar blocked
LoadVar blocked
JumpCond False 149
Push PC(35)
Push ?abp"s_chan"
Apply
StoreVar m
LoadVar m
Push ()
2-ary !=
JumpCond False 147
Push PC(16)
Push ()
Push 0
Push ?abp"r_chan"
3-ary DictAdd
Push 1
Push ()
Push "ack"
LoadVar m
Push "seq"
Apply
3-ary DictAdd
3-ary DictAdd
Push 2
LoadVar reliable
3-ary DictAdd
Apply
Pop
LoadVar m
Push "seq"
Apply
Load abp.r_seq
2-ary ==
JumpCond False 147
DelVar blocked
DelVar result
LoadVar m
DelVar m
Push "payload"
Apply
StoreVar result
Push False
StoreVar blocked
DelVar m
Jump 104
DelVar blocked
DelVar reliable
Return
Jump 195
Frame sender ()
Push { 1, 2, 3, 4, 5 }
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 166
Cut($s137, i)
Push PC(43)
LoadVar i
DelVar i
Apply
Pop
Jump 156
DelVar $s137
Return
Jump 195
Frame receiver ()
Push { 1, 2, 3, 4, 5 }
StoreVar $s151
LoadVar $s151
1-ary IsEmpty
JumpCond True 193
Cut($s151, i)
Push PC(97)
LoadVar i
Push 5
2-ary ==
Apply
StoreVar payload
ReadonlyInc
AtomicInc(lazy)
LoadVar payload
DelVar payload
LoadVar i
DelVar i
2-ary ==
Assert
AtomicDec
ReadonlyDec
Jump 172
DelVar $s151
Return
Push PC(153)
Push ()
Push ()
Spawn
Push PC(169)
Push ()
Push ()
Spawn
Return
DelVar result
```

Duration: 0.0012435000000000085

---
##  code/byzbosco.hny

### Summary

Duration is good: ✅

Output is good: ❌

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Cannot assign to constant ('proposal', 'code/byzbosco.hny', 23, 17) ErrorToken(line=23, message="Cannot assign to constant ('proposal', 'code/byzbosco.hny', 23, 17)", column=26, lexeme='=', filename='code/byzbosco.hny', is_eof_error=False)
```

Duration: 0.001336299999999957

### Current Output

```
Phase 1: compile Harmony program to bytecode
Line 23:17 at code/byzbosco.hny, Cannot assign to constant ('proposal', 'code/byzbosco.hny', 23, 17)
```

Duration: 0.001310599999999995

---
##  code/BBsematest.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store BBsema
Push ()
Store synch
Push ()
Store list
Jump 371
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n9
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s12
LoadVar $s12
1-ary IsEmpty
JumpCond True 33
Cut($s12, x)
LoadVar $n9
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n9
Jump 21
DelVar $n9
DelVar $s12
DelVar s
StoreVar result
Return
Jump 371
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 371
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 371
Frame tail s
DelVar result
Push PC(8)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 371
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s69
LoadVar $s69
1-ary IsEmpty
JumpCond True 98
Cut($s69, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 87
DelVar $s69
Return
Jump 371
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s84
LoadVar $s84
1-ary IsEmpty
JumpCond True 115
Cut($s84, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 107
DelVar $s84
StoreVar result
Return
Jump 371
Frame list a
DelVar result
Push 0
StoreVar $n97
Push ()
LoadVar a
DelVar a
StoreVar $s100
LoadVar $s100
1-ary IsEmpty
JumpCond True 137
Cut($s100, v)
LoadVar $n97
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n97
Jump 127
DelVar $n97
DelVar $s100
StoreVar result
Return
Jump 371
Frame values d
DelVar result
Push 0
StoreVar $n115
Push ()
LoadVar d
1-ary keys
StoreVar $s118
LoadVar $s118
1-ary IsEmpty
JumpCond True 162
Cut($s118, k)
LoadVar $n115
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n115
Jump 150
DelVar $n115
DelVar $s118
DelVar d
StoreVar result
Return
Jump 371
Frame items d
DelVar result
Push 0
StoreVar $n136
Push ()
LoadVar d
1-ary keys
StoreVar $s139
LoadVar $s139
1-ary IsEmpty
JumpCond True 194
Cut($s139, k)
LoadVar $n136
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n136
Jump 176
DelVar $n136
DelVar $s139
DelVar d
StoreVar result
Return
Jump 371
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s167
LoadVar $s167
1-ary IsEmpty
JumpCond True 236
Cut($s167, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 209
DelVar $s167
DelVar d
DelVar index
Return
Jump 371
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 251
DelVar a
Push ()
StoreVar result
Jump 326
Push ()
Push 0
Push PC(52)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(61)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n216
Push ()
LoadVar rest
StoreVar $s219
DelVar v
LoadVar $s219
1-ary IsEmpty
JumpCond True 284
Cut($s219, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 269
LoadVar $n216
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n216
Jump 269
DelVar $n216
DelVar $s219
StoreVar lower
Push 0
StoreVar $n235
Push ()
LoadVar rest
DelVar rest
StoreVar $s238
DelVar v
LoadVar $s238
1-ary IsEmpty
JumpCond True 308
Cut($s238, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 293
LoadVar $n235
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n235
Jump 293
DelVar $n235
DelVar $s238
StoreVar higher
Push PC(241)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(241)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 371
Frame sorted d
DelVar result
Push PC(241)
Push PC(119)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 371
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n281
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s284
LoadVar $s284
1-ary IsEmpty
JumpCond True 365
Cut($s284, i)
LoadVar $n281
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n281
Jump 351
DelVar $n281
DelVar $s284
DelVar d
DelVar n
StoreVar result
Return
Push ()
Store bag
Jump 1111
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1111
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s313
LoadVar $s313
1-ary IsEmpty
JumpCond True 395
Cut($s313, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 386
DelVar $s313
StoreVar result
Return
Jump 1111
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s329
LoadVar $s329
1-ary IsEmpty
JumpCond True 432
Cut($s329, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 425
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 406
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 406
DelVar $s329
Return
Jump 1111
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 458
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 462
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1111
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s393
LoadVar $s393
1-ary IsEmpty
JumpCond True 491
Cut($s393, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 480
DelVar $s393
Return
Jump 1111
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1111
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1111
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1111
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 568
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 574
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1111
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 601
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 602
Push False
JumpCond False 611
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 622
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1111
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 640
DelVar bg
DelVar k
Push {}
Push PC(374)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 725
Push PC(464)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 654
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 725
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 666
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 725
Push PC(494)
LoadVar bg
Apply
StoreVar hd
Push PC(576)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(625)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s570
LoadVar $s570
1-ary IsEmpty
JumpCond True 710
Cut($s570, x)
Push PC(539)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 694
DelVar $s570
DelVar hd
Push PC(625)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1111
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1111
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 756
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1111
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1111
Frame Lock ()
DelVar result
Push PC(761)
Push False
Apply
StoreVar result
Return
Jump 1111
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1111
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 792
Jump 795
ReadonlyDec
AtomicDec
Jump 785
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1111
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1111
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1111
Frame Condition ()
DelVar result
Push PC(374)
Push ()
Apply
StoreVar result
Return
Jump 1111
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(435)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(539)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 889
Push PC(435)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 890
Push False
JumpCond False 895
DelVar c
DelVar cnt
DelVar ctx
Jump 898
ReadonlyDec
AtomicDec
Jump 870
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1111
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(374)
Push ()
Apply
2-ary !=
JumpCond False 931
LoadVar c
Push PC(576)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(521)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1111
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(374)
Push ()
Apply
Store
AtomicDec
Return
Jump 1111
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1111
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 962
Jump 965
ReadonlyDec
AtomicDec
Jump 954
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1111
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1111
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1111
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1004
Jump 1007
ReadonlyDec
AtomicDec
Jump 995
ReadonlyDec
Push PC(52)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(61)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1111
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(39)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Jump 1111
Frame produce item
Push ?BBsema"P"
Push ?BBsema"n_empty"
Address
Load
Pop
Push ?BBsema"P"
Push ?BBsema"l_in"
Address
Load
Pop
Push ?BBsema"buf"
Load BBsema.b_in
Address
LoadVar item
DelVar item
Store
Load BBsema.b_in
Push 2
2-ary %
Push 1
2-ary +
Store BBsema.b_in
Push ?BBsema"V"
Push ?BBsema"l_in"
Address
Load
Pop
Push ?BBsema"V"
Push ?BBsema"n_full"
Address
Load
Pop
Return
Jump 1111
Frame consume ()
DelVar result
Push ?BBsema"P"
Push ?BBsema"n_full"
Address
Load
Pop
Push ?BBsema"P"
Push ?BBsema"l_out"
Address
Load
Pop
Push ?BBsema"buf"
Load BBsema.b_out
Address
Load
StoreVar result
Load BBsema.b_out
Push 2
2-ary %
Push 1
2-ary +
Store BBsema.b_out
Push ?BBsema"V"
Push ?BBsema"l_out"
Address
Load
Pop
Push ?BBsema"V"
Push ?BBsema"n_empty"
Address
Load
Pop
Return
Push ()
Push { 1, 2 }
StoreVar $s958
LoadVar $s958
1-ary IsEmpty
JumpCond True 1123
Cut($s958, x)
LoadVar x
DelVar x
Push ()
3-ary DictAdd
Jump 1114
DelVar $s958
Store BBsema.buf
Push 1
Store BBsema.b_in
Push 1
Store BBsema.b_out
Push ?BBsema"Semaphore"
Push 1
Address
Load
Store BBsema.l_in
Push ?BBsema"Semaphore"
Push 1
Address
Load
Store BBsema.l_out
Push ?BBsema"Semaphore"
Push 0
Address
Load
Store BBsema.n_full
Push ?BBsema"Semaphore"
Push 2
Address
Load
Store BBsema.n_empty
Push { 1, 2, 3 }
StoreVar $s993
LoadVar $s993
1-ary IsEmpty
JumpCond True 1161
Cut($s993, i)
Load produce
LoadVar i
DelVar i
Push ()
Spawn
Jump 1151
DelVar $s993
Push { 1, 2, 3 }
StoreVar $s1004
LoadVar $s1004
1-ary IsEmpty
JumpCond True 1174
Cut($s1004, i)
DelVar i
Load consume
Push ()
Push ()
Spawn
Jump 1164
DelVar $s1004
Return
DelVar result
```

Duration: 0.001487000000000016

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store BBsema
Push ()
Store synch
Push ()
Store list
Jump 371
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n9
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s12
LoadVar $s12
1-ary IsEmpty
JumpCond True 33
Cut($s12, x)
LoadVar $n9
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n9
Jump 21
DelVar $n9
DelVar $s12
DelVar s
StoreVar result
Return
Jump 371
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 371
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 371
Frame tail s
DelVar result
Push PC(8)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 371
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s69
LoadVar $s69
1-ary IsEmpty
JumpCond True 98
Cut($s69, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 87
DelVar $s69
Return
Jump 371
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s84
LoadVar $s84
1-ary IsEmpty
JumpCond True 115
Cut($s84, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 107
DelVar $s84
StoreVar result
Return
Jump 371
Frame list a
DelVar result
Push 0
StoreVar $n97
Push ()
LoadVar a
DelVar a
StoreVar $s100
LoadVar $s100
1-ary IsEmpty
JumpCond True 137
Cut($s100, v)
LoadVar $n97
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n97
Jump 127
DelVar $n97
DelVar $s100
StoreVar result
Return
Jump 371
Frame values d
DelVar result
Push 0
StoreVar $n115
Push ()
LoadVar d
1-ary keys
StoreVar $s118
LoadVar $s118
1-ary IsEmpty
JumpCond True 162
Cut($s118, k)
LoadVar $n115
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n115
Jump 150
DelVar $n115
DelVar $s118
DelVar d
StoreVar result
Return
Jump 371
Frame items d
DelVar result
Push 0
StoreVar $n136
Push ()
LoadVar d
1-ary keys
StoreVar $s139
LoadVar $s139
1-ary IsEmpty
JumpCond True 194
Cut($s139, k)
LoadVar $n136
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n136
Jump 176
DelVar $n136
DelVar $s139
DelVar d
StoreVar result
Return
Jump 371
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s167
LoadVar $s167
1-ary IsEmpty
JumpCond True 236
Cut($s167, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 209
DelVar $s167
DelVar d
DelVar index
Return
Jump 371
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 251
DelVar a
Push ()
StoreVar result
Jump 326
Push ()
Push 0
Push PC(52)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(61)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n216
Push ()
LoadVar rest
StoreVar $s219
DelVar v
LoadVar $s219
1-ary IsEmpty
JumpCond True 284
Cut($s219, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 269
LoadVar $n216
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n216
Jump 269
DelVar $n216
DelVar $s219
StoreVar lower
Push 0
StoreVar $n235
Push ()
LoadVar rest
DelVar rest
StoreVar $s238
DelVar v
LoadVar $s238
1-ary IsEmpty
JumpCond True 308
Cut($s238, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 293
LoadVar $n235
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n235
Jump 293
DelVar $n235
DelVar $s238
StoreVar higher
Push PC(241)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(241)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 371
Frame sorted d
DelVar result
Push PC(241)
Push PC(119)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 371
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n281
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s284
LoadVar $s284
1-ary IsEmpty
JumpCond True 365
Cut($s284, i)
LoadVar $n281
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n281
Jump 351
DelVar $n281
DelVar $s284
DelVar d
DelVar n
StoreVar result
Return
Push ()
Store bag
Jump 1111
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1111
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s313
LoadVar $s313
1-ary IsEmpty
JumpCond True 395
Cut($s313, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 386
DelVar $s313
StoreVar result
Return
Jump 1111
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s329
LoadVar $s329
1-ary IsEmpty
JumpCond True 432
Cut($s329, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 425
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 406
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 406
DelVar $s329
Return
Jump 1111
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 458
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 462
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1111
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s393
LoadVar $s393
1-ary IsEmpty
JumpCond True 491
Cut($s393, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 480
DelVar $s393
Return
Jump 1111
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1111
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1111
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1111
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 568
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 574
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1111
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 601
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 602
Push False
JumpCond False 611
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 622
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1111
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 640
DelVar bg
DelVar k
Push {}
Push PC(374)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 725
Push PC(464)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 654
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 725
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 666
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 725
Push PC(494)
LoadVar bg
Apply
StoreVar hd
Push PC(576)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(625)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s570
LoadVar $s570
1-ary IsEmpty
JumpCond True 710
Cut($s570, x)
Push PC(539)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 694
DelVar $s570
DelVar hd
Push PC(625)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1111
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1111
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 756
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1111
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1111
Frame Lock ()
DelVar result
Push PC(761)
Push False
Apply
StoreVar result
Return
Jump 1111
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1111
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 792
Jump 795
ReadonlyDec
AtomicDec
Jump 785
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1111
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1111
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1111
Frame Condition ()
DelVar result
Push PC(374)
Push ()
Apply
StoreVar result
Return
Jump 1111
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(435)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(539)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 889
Push PC(435)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 890
Push False
JumpCond False 895
DelVar c
DelVar cnt
DelVar ctx
Jump 898
ReadonlyDec
AtomicDec
Jump 870
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1111
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(374)
Push ()
Apply
2-ary !=
JumpCond False 931
LoadVar c
Push PC(576)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(521)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1111
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(374)
Push ()
Apply
Store
AtomicDec
Return
Jump 1111
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1111
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 962
Jump 965
ReadonlyDec
AtomicDec
Jump 954
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1111
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1111
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1111
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1004
Jump 1007
ReadonlyDec
AtomicDec
Jump 995
ReadonlyDec
Push PC(52)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(61)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1111
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(39)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Jump 1111
Frame produce item
Push ?BBsema"P"
Push ?BBsema"n_empty"
Address
Load
Pop
Push ?BBsema"P"
Push ?BBsema"l_in"
Address
Load
Pop
Push ?BBsema"buf"
Load BBsema.b_in
Address
LoadVar item
DelVar item
Store
Load BBsema.b_in
Push 2
2-ary %
Push 1
2-ary +
Store BBsema.b_in
Push ?BBsema"V"
Push ?BBsema"l_in"
Address
Load
Pop
Push ?BBsema"V"
Push ?BBsema"n_full"
Address
Load
Pop
Return
Jump 1111
Frame consume ()
DelVar result
Push ?BBsema"P"
Push ?BBsema"n_full"
Address
Load
Pop
Push ?BBsema"P"
Push ?BBsema"l_out"
Address
Load
Pop
Push ?BBsema"buf"
Load BBsema.b_out
Address
Load
StoreVar result
Load BBsema.b_out
Push 2
2-ary %
Push 1
2-ary +
Store BBsema.b_out
Push ?BBsema"V"
Push ?BBsema"l_out"
Address
Load
Pop
Push ?BBsema"V"
Push ?BBsema"n_empty"
Address
Load
Pop
Return
Push ()
Push { 1, 2 }
StoreVar $s958
LoadVar $s958
1-ary IsEmpty
JumpCond True 1123
Cut($s958, x)
LoadVar x
DelVar x
Push ()
3-ary DictAdd
Jump 1114
DelVar $s958
Store BBsema.buf
Push 1
Store BBsema.b_in
Push 1
Store BBsema.b_out
Push ?BBsema"Semaphore"
Push 1
Address
Load
Store BBsema.l_in
Push ?BBsema"Semaphore"
Push 1
Address
Load
Store BBsema.l_out
Push ?BBsema"Semaphore"
Push 0
Address
Load
Store BBsema.n_full
Push ?BBsema"Semaphore"
Push 2
Address
Load
Store BBsema.n_empty
Push { 1, 2, 3 }
StoreVar $s993
LoadVar $s993
1-ary IsEmpty
JumpCond True 1161
Cut($s993, i)
Load produce
LoadVar i
DelVar i
Push ()
Spawn
Jump 1151
DelVar $s993
Push { 1, 2, 3 }
StoreVar $s1004
LoadVar $s1004
1-ary IsEmpty
JumpCond True 1174
Cut($s1004, i)
DelVar i
Load consume
Push ()
Push ()
Spawn
Jump 1164
DelVar $s1004
Return
DelVar result
```

Duration: 0.00130269999999999

---
##  code/ky.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push 0
Store x
Load x
Push 11
2-ary <
JumpCond False 87
Push { False, True }
Choose
Store coin
Load x
Push 0
2-ary ==
JumpCond False 21
Load coin
JumpCond False 18
Push 1
Jump 19
Push 2
Store x
Jump 3
Load x
Push 1
2-ary ==
JumpCond False 32
Load coin
JumpCond False 29
Push 3
Jump 30
Push 4
Store x
Jump 3
Load x
Push 2
2-ary ==
JumpCond False 43
Load coin
JumpCond False 40
Push 5
Jump 41
Push 6
Store x
Jump 3
Load x
Push 3
2-ary ==
JumpCond False 54
Load coin
JumpCond False 51
Push 1
Jump 52
Push 11
Store x
Jump 3
Load x
Push 4
2-ary ==
JumpCond False 65
Load coin
JumpCond False 62
Push 12
Jump 63
Push 13
Store x
Jump 3
Load x
Push 5
2-ary ==
JumpCond False 76
Load coin
JumpCond False 73
Push 14
Jump 74
Push 15
Store x
Jump 3
Load x
Push 6
2-ary ==
JumpCond False 3
Load coin
JumpCond False 84
Push 16
Jump 85
Push 2
Store x
Jump 3
Load x
Print
Return
DelVar result
```

Duration: 0.0014254999999999685

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push 0
Store x
Load x
Push 11
2-ary <
JumpCond False 87
Push { False, True }
Choose
Store coin
Load x
Push 0
2-ary ==
JumpCond False 21
Load coin
JumpCond False 18
Push 1
Jump 19
Push 2
Store x
Jump 3
Load x
Push 1
2-ary ==
JumpCond False 32
Load coin
JumpCond False 29
Push 3
Jump 30
Push 4
Store x
Jump 3
Load x
Push 2
2-ary ==
JumpCond False 43
Load coin
JumpCond False 40
Push 5
Jump 41
Push 6
Store x
Jump 3
Load x
Push 3
2-ary ==
JumpCond False 54
Load coin
JumpCond False 51
Push 1
Jump 52
Push 11
Store x
Jump 3
Load x
Push 4
2-ary ==
JumpCond False 65
Load coin
JumpCond False 62
Push 12
Jump 63
Push 13
Store x
Jump 3
Load x
Push 5
2-ary ==
JumpCond False 76
Load coin
JumpCond False 73
Push 14
Jump 74
Push 15
Store x
Jump 3
Load x
Push 6
2-ary ==
JumpCond False 3
Load coin
JumpCond False 84
Push 16
Jump 85
Push 2
Store x
Jump 3
Load x
Print
Return
DelVar result
```

Duration: 0.001241900000000018

---
##  code/bosco.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store bag
Jump 356
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 356
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s11
LoadVar $s11
1-ary IsEmpty
JumpCond True 25
Cut($s11, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 16
DelVar $s11
StoreVar result
Return
Jump 356
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s27
LoadVar $s27
1-ary IsEmpty
JumpCond True 62
Cut($s27, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 55
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 36
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 36
DelVar $s27
Return
Jump 356
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 88
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 92
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 356
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s91
LoadVar $s91
1-ary IsEmpty
JumpCond True 121
Cut($s91, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 110
DelVar $s91
Return
Jump 356
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 356
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 356
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 356
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 198
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 204
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 356
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 231
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 232
Push False
JumpCond False 241
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 252
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 356
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 270
DelVar bg
DelVar k
Push {}
Push PC(4)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 355
Push PC(94)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 284
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 355
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 296
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 355
Push PC(124)
LoadVar bg
Apply
StoreVar hd
Push PC(206)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(255)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s268
LoadVar $s268
1-ary IsEmpty
JumpCond True 340
Cut($s268, x)
Push PC(169)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 324
DelVar $s268
DelVar hd
Push PC(255)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Push 0
StoreVar $n307
Push ()
Push { 0, 1, 2, 3 }
StoreVar $s310
LoadVar $s310
1-ary IsEmpty
JumpCond True 372
Cut($s310, i)
DelVar i
LoadVar $n307
Push { 0, 1 }
Choose
3-ary DictAdd
IncVar $n307
Jump 361
DelVar $n307
DelVar $s310
Store proposals
Push PC(4)
Push ()
Apply
Store network
Jump 580
Frame broadcast msg
AtomicInc(lazy)
Push PC(169)
Push ()
Push 0
Load network
3-ary DictAdd
Push 1
LoadVar msg
DelVar msg
3-ary DictAdd
Apply
Store network
AtomicDec
Return
Jump 580
Frame receive (round, k)
DelVar result
Push ()
Load network
StoreVar $s345
DelVar c
DelVar e
LoadVar $s345
1-ary IsEmpty
JumpCond True 418
Cut($s345, (r, e), c)
LoadVar r
DelVar r
LoadVar round
2-ary ==
JumpCond False 401
LoadVar e
DelVar e
LoadVar c
DelVar c
3-ary DictAdd
Jump 401
DelVar $s345
DelVar round
StoreVar msgs
Push PC(255)
Push ()
Push 0
LoadVar msgs
DelVar msgs
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
StoreVar result
Return
Jump 580
Frame processor proposal
Push ()
Push 0
LoadVar proposal
DelVar proposal
3-ary DictAdd
Push 1
Push False
3-ary DictAdd
StoreVar (estimate, decided)
Push PC(380)
Push ()
Push 0
Push 0
3-ary DictAdd
Push 1
LoadVar estimate
DelVar estimate
3-ary DictAdd
Apply
Pop
Push { 0, 1, 2 }
StoreVar $s391
LoadVar $s391
1-ary IsEmpty
JumpCond True 577
Cut($s391, round)
AtomicInc(lazy)
ReadonlyInc
Push PC(396)
Push ()
Push 0
LoadVar round
3-ary DictAdd
Push 1
Push 3
3-ary DictAdd
Apply
Dup
Push {}
2-ary ==
JumpCond False 481
Pop
ReadonlyDec
AtomicDec
Jump 462
Choose
StoreVar quorum
Jump 487
ReadonlyDec
AtomicDec
Jump 462
ReadonlyDec
Push 0
StoreVar $n423
Push ()
Push { 0, 1 }
StoreVar $s426
LoadVar $s426
1-ary IsEmpty
JumpCond True 511
Cut($s426, i)
LoadVar $n423
Push PC(65)
Push ()
Push 0
LoadVar quorum
3-ary DictAdd
Push 1
LoadVar i
DelVar i
3-ary DictAdd
Apply
3-ary DictAdd
IncVar $n423
Jump 493
DelVar $n423
DelVar $s426
DelVar quorum
StoreVar count
ReadonlyInc
AtomicInc(lazy)
LoadVar count
Push 0
Apply
LoadVar count
Push 1
Apply
2-ary !=
Assert
AtomicDec
ReadonlyDec
LoadVar count
Push 0
Apply
LoadVar count
Push 1
Apply
2-ary >
JumpCond False 537
Push 0
Jump 538
Push 1
StoreVar estimate
LoadVar count
DelVar count
LoadVar estimate
Apply
Push 3
2-ary ==
JumpCond False 561
LoadVar decided
JumpCond True 553
DelVar decided
LoadVar estimate
Print
Push True
StoreVar decided
ReadonlyInc
AtomicInc(lazy)
LoadVar estimate
Load proposals
2-ary in
Assert
AtomicDec
ReadonlyDec
Push PC(380)
Push ()
Push 0
LoadVar round
DelVar round
Push 1
2-ary +
3-ary DictAdd
Push 1
LoadVar estimate
DelVar estimate
3-ary DictAdd
Apply
Pop
AtomicDec
Jump 458
DelVar $s391
DelVar decided
Return
Load proposals
Print
Push { 0, 1, 2, 3 }
StoreVar $s507
LoadVar $s507
1-ary IsEmpty
JumpCond True 597
Cut($s507, i)
Push PC(435)
Push ?proposals
LoadVar i
DelVar i
Address
Load
Push ()
Spawn
Jump 584
DelVar $s507
Return
DelVar result
```

Duration: 0.0013876999999999917

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store bag
Jump 356
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 356
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s11
LoadVar $s11
1-ary IsEmpty
JumpCond True 25
Cut($s11, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 16
DelVar $s11
StoreVar result
Return
Jump 356
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s27
LoadVar $s27
1-ary IsEmpty
JumpCond True 62
Cut($s27, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 55
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 36
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 36
DelVar $s27
Return
Jump 356
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 88
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 92
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 356
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s91
LoadVar $s91
1-ary IsEmpty
JumpCond True 121
Cut($s91, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 110
DelVar $s91
Return
Jump 356
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 356
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 356
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 356
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 198
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 204
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 356
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 231
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 232
Push False
JumpCond False 241
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 252
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 356
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 270
DelVar bg
DelVar k
Push {}
Push PC(4)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 355
Push PC(94)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 284
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 355
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 296
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 355
Push PC(124)
LoadVar bg
Apply
StoreVar hd
Push PC(206)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(255)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s268
LoadVar $s268
1-ary IsEmpty
JumpCond True 340
Cut($s268, x)
Push PC(169)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 324
DelVar $s268
DelVar hd
Push PC(255)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Push 0
StoreVar $n307
Push ()
Push { 0, 1, 2, 3 }
StoreVar $s310
LoadVar $s310
1-ary IsEmpty
JumpCond True 372
Cut($s310, i)
DelVar i
LoadVar $n307
Push { 0, 1 }
Choose
3-ary DictAdd
IncVar $n307
Jump 361
DelVar $n307
DelVar $s310
Store proposals
Push PC(4)
Push ()
Apply
Store network
Jump 580
Frame broadcast msg
AtomicInc(lazy)
Push PC(169)
Push ()
Push 0
Load network
3-ary DictAdd
Push 1
LoadVar msg
DelVar msg
3-ary DictAdd
Apply
Store network
AtomicDec
Return
Jump 580
Frame receive (round, k)
DelVar result
Push ()
Load network
StoreVar $s345
DelVar c
DelVar e
LoadVar $s345
1-ary IsEmpty
JumpCond True 418
Cut($s345, (r, e), c)
LoadVar r
DelVar r
LoadVar round
2-ary ==
JumpCond False 401
LoadVar e
DelVar e
LoadVar c
DelVar c
3-ary DictAdd
Jump 401
DelVar $s345
DelVar round
StoreVar msgs
Push PC(255)
Push ()
Push 0
LoadVar msgs
DelVar msgs
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
StoreVar result
Return
Jump 580
Frame processor proposal
Push ()
Push 0
LoadVar proposal
DelVar proposal
3-ary DictAdd
Push 1
Push False
3-ary DictAdd
StoreVar (estimate, decided)
Push PC(380)
Push ()
Push 0
Push 0
3-ary DictAdd
Push 1
LoadVar estimate
DelVar estimate
3-ary DictAdd
Apply
Pop
Push { 0, 1, 2 }
StoreVar $s391
LoadVar $s391
1-ary IsEmpty
JumpCond True 577
Cut($s391, round)
AtomicInc(lazy)
ReadonlyInc
Push PC(396)
Push ()
Push 0
LoadVar round
3-ary DictAdd
Push 1
Push 3
3-ary DictAdd
Apply
Dup
Push {}
2-ary ==
JumpCond False 481
Pop
ReadonlyDec
AtomicDec
Jump 462
Choose
StoreVar quorum
Jump 487
ReadonlyDec
AtomicDec
Jump 462
ReadonlyDec
Push 0
StoreVar $n423
Push ()
Push { 0, 1 }
StoreVar $s426
LoadVar $s426
1-ary IsEmpty
JumpCond True 511
Cut($s426, i)
LoadVar $n423
Push PC(65)
Push ()
Push 0
LoadVar quorum
3-ary DictAdd
Push 1
LoadVar i
DelVar i
3-ary DictAdd
Apply
3-ary DictAdd
IncVar $n423
Jump 493
DelVar $n423
DelVar $s426
DelVar quorum
StoreVar count
ReadonlyInc
AtomicInc(lazy)
LoadVar count
Push 0
Apply
LoadVar count
Push 1
Apply
2-ary !=
Assert
AtomicDec
ReadonlyDec
LoadVar count
Push 0
Apply
LoadVar count
Push 1
Apply
2-ary >
JumpCond False 537
Push 0
Jump 538
Push 1
StoreVar estimate
LoadVar count
DelVar count
LoadVar estimate
Apply
Push 3
2-ary ==
JumpCond False 561
LoadVar decided
JumpCond True 553
DelVar decided
LoadVar estimate
Print
Push True
StoreVar decided
ReadonlyInc
AtomicInc(lazy)
LoadVar estimate
Load proposals
2-ary in
Assert
AtomicDec
ReadonlyDec
Push PC(380)
Push ()
Push 0
LoadVar round
DelVar round
Push 1
2-ary +
3-ary DictAdd
Push 1
LoadVar estimate
DelVar estimate
3-ary DictAdd
Apply
Pop
AtomicDec
Jump 458
DelVar $s391
DelVar decided
Return
Load proposals
Print
Push { 0, 1, 2, 3 }
StoreVar $s507
LoadVar $s507
1-ary IsEmpty
JumpCond True 597
Cut($s507, i)
Push PC(435)
Push ?proposals
LoadVar i
DelVar i
Address
Load
Push ()
Spawn
Jump 584
DelVar $s507
Return
DelVar result
```

Duration: 0.001269499999999979

---
##  code/RWsbs.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store synch
Push ()
Store list
Jump 369
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 369
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 369
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 369
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 369
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 369
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 369
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 369
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 369
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 369
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 369
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 369
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 369
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Push ()
Store bag
Jump 1320
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1320
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s311
LoadVar $s311
1-ary IsEmpty
JumpCond True 393
Cut($s311, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 384
DelVar $s311
StoreVar result
Return
Jump 1320
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s327
LoadVar $s327
1-ary IsEmpty
JumpCond True 430
Cut($s327, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 423
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 404
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 404
DelVar $s327
Return
Jump 1320
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 456
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 460
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1320
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s391
LoadVar $s391
1-ary IsEmpty
JumpCond True 489
Cut($s391, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 478
DelVar $s391
Return
Jump 1320
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1320
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1320
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1320
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 566
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 572
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1320
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 599
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 600
Push False
JumpCond False 609
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 620
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1320
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 638
DelVar bg
DelVar k
Push {}
Push PC(372)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 723
Push PC(462)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 652
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 723
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 664
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 723
Push PC(492)
LoadVar bg
Apply
StoreVar hd
Push PC(574)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(623)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s568
LoadVar $s568
1-ary IsEmpty
JumpCond True 708
Cut($s568, x)
Push PC(537)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 692
DelVar $s568
DelVar hd
Push PC(623)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1320
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1320
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 754
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1320
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1320
Frame Lock ()
DelVar result
Push PC(759)
Push False
Apply
StoreVar result
Return
Jump 1320
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1320
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 790
Jump 793
ReadonlyDec
AtomicDec
Jump 783
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1320
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1320
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1320
Frame Condition ()
DelVar result
Push PC(372)
Push ()
Apply
StoreVar result
Return
Jump 1320
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(537)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 887
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 888
Push False
JumpCond False 893
DelVar c
DelVar cnt
DelVar ctx
Jump 896
ReadonlyDec
AtomicDec
Jump 868
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1320
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(372)
Push ()
Apply
2-ary !=
JumpCond False 929
LoadVar c
Push PC(574)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(519)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1320
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(372)
Push ()
Apply
Store
AtomicDec
Return
Jump 1320
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1320
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 960
Jump 963
ReadonlyDec
AtomicDec
Jump 952
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1320
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1320
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1320
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1002
Jump 1005
ReadonlyDec
AtomicDec
Jump 993
ReadonlyDec
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1320
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Jump 1320
Frame RWlock ()
DelVar result
Push ()
Push "nreaders"
Push 0
3-ary DictAdd
Push "nwriters"
Push 0
3-ary DictAdd
Push "mutex"
Push PC(759)
Push False
Apply
3-ary DictAdd
Push "r_gate"
Push ()
Push "sema"
Push PC(759)
Push True
Apply
3-ary DictAdd
Push "count"
Push 0
3-ary DictAdd
3-ary DictAdd
Push "w_gate"
Push ()
Push "sema"
Push PC(759)
Push True
Apply
3-ary DictAdd
Push "count"
Push 0
3-ary DictAdd
3-ary DictAdd
StoreVar result
Return
Jump 1320
Frame release_one rw
LoadVar rw
Push "nwriters"
Address
Load
Push 0
2-ary ==
JumpCond False 1096
LoadVar rw
Push "r_gate"
Address
Push "count"
Address
Load
Push 0
2-ary >
Jump 1097
Push False
JumpCond False 1108
Push PC(801)
LoadVar rw
DelVar rw
Push "r_gate"
Address
Push "sema"
Address
Apply
Pop
Jump 1148
LoadVar rw
Push "nreaders"
Address
Load
LoadVar rw
Push "nwriters"
Address
Load
2-ary +
Push 0
2-ary ==
JumpCond False 1129
LoadVar rw
Push "w_gate"
Address
Push "count"
Address
Load
Push 0
2-ary >
Jump 1130
Push False
JumpCond False 1141
Push PC(801)
LoadVar rw
DelVar rw
Push "w_gate"
Address
Push "sema"
Address
Apply
Pop
Jump 1148
Push PC(801)
LoadVar rw
DelVar rw
Push "mutex"
Address
Apply
Pop
Return
Jump 1320
Frame read_acquire rw
Push PC(782)
LoadVar rw
Push "mutex"
Address
Apply
Pop
LoadVar rw
Push "nwriters"
Address
Load
Push 0
2-ary >
JumpCond False 1196
LoadVar rw
Push "r_gate"
Address
Push "count"
Address
Dup
Load
Push 1
2-ary +
Store
Push PC(1079)
LoadVar rw
Apply
Pop
Push PC(782)
LoadVar rw
Push "r_gate"
Address
Push "sema"
Address
Apply
Pop
LoadVar rw
Push "r_gate"
Address
Push "count"
Address
Dup
Load
Push 1
2-ary -
Store
LoadVar rw
Push "nreaders"
Address
Dup
Load
Push 1
2-ary +
Store
Push PC(1079)
LoadVar rw
DelVar rw
Apply
Pop
Return
Jump 1320
Frame read_release rw
Push PC(782)
LoadVar rw
Push "mutex"
Address
Apply
Pop
LoadVar rw
Push "nreaders"
Address
Dup
Load
Push 1
2-ary -
Store
Push PC(1079)
LoadVar rw
DelVar rw
Apply
Pop
Return
Jump 1320
Frame write_acquire rw
Push PC(782)
LoadVar rw
Push "mutex"
Address
Apply
Pop
LoadVar rw
Push "nreaders"
Address
Load
LoadVar rw
Push "nwriters"
Address
Load
2-ary +
Push 0
2-ary >
JumpCond False 1284
LoadVar rw
Push "w_gate"
Address
Push "count"
Address
Dup
Load
Push 1
2-ary +
Store
Push PC(1079)
LoadVar rw
Apply
Pop
Push PC(782)
LoadVar rw
Push "w_gate"
Address
Push "sema"
Address
Apply
Pop
LoadVar rw
Push "w_gate"
Address
Push "count"
Address
Dup
Load
Push 1
2-ary -
Store
LoadVar rw
Push "nwriters"
Address
Dup
Load
Push 1
2-ary +
Store
Push PC(1079)
LoadVar rw
DelVar rw
Apply
Pop
Return
Jump 1320
Frame write_release rw
Push PC(782)
LoadVar rw
Push "mutex"
Address
Apply
Pop
LoadVar rw
Push "nwriters"
Address
Dup
Load
Push 1
2-ary -
Store
Push PC(1079)
LoadVar rw
DelVar rw
Apply
Pop
Return
Return
DelVar result
```

Duration: 0.0016795000000000004

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store synch
Push ()
Store list
Jump 369
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 369
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 369
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 369
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 369
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 369
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 369
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 369
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 369
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 369
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 369
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 369
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 369
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Push ()
Store bag
Jump 1320
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1320
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s311
LoadVar $s311
1-ary IsEmpty
JumpCond True 393
Cut($s311, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 384
DelVar $s311
StoreVar result
Return
Jump 1320
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s327
LoadVar $s327
1-ary IsEmpty
JumpCond True 430
Cut($s327, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 423
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 404
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 404
DelVar $s327
Return
Jump 1320
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 456
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 460
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1320
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s391
LoadVar $s391
1-ary IsEmpty
JumpCond True 489
Cut($s391, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 478
DelVar $s391
Return
Jump 1320
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1320
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1320
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1320
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 566
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 572
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1320
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 599
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 600
Push False
JumpCond False 609
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 620
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1320
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 638
DelVar bg
DelVar k
Push {}
Push PC(372)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 723
Push PC(462)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 652
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 723
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 664
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 723
Push PC(492)
LoadVar bg
Apply
StoreVar hd
Push PC(574)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(623)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s568
LoadVar $s568
1-ary IsEmpty
JumpCond True 708
Cut($s568, x)
Push PC(537)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 692
DelVar $s568
DelVar hd
Push PC(623)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1320
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1320
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 754
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1320
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1320
Frame Lock ()
DelVar result
Push PC(759)
Push False
Apply
StoreVar result
Return
Jump 1320
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1320
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 790
Jump 793
ReadonlyDec
AtomicDec
Jump 783
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1320
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1320
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1320
Frame Condition ()
DelVar result
Push PC(372)
Push ()
Apply
StoreVar result
Return
Jump 1320
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(537)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 887
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 888
Push False
JumpCond False 893
DelVar c
DelVar cnt
DelVar ctx
Jump 896
ReadonlyDec
AtomicDec
Jump 868
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1320
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(372)
Push ()
Apply
2-ary !=
JumpCond False 929
LoadVar c
Push PC(574)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(519)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1320
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(372)
Push ()
Apply
Store
AtomicDec
Return
Jump 1320
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1320
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 960
Jump 963
ReadonlyDec
AtomicDec
Jump 952
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1320
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1320
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1320
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1002
Jump 1005
ReadonlyDec
AtomicDec
Jump 993
ReadonlyDec
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1320
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Jump 1320
Frame RWlock ()
DelVar result
Push ()
Push "nreaders"
Push 0
3-ary DictAdd
Push "nwriters"
Push 0
3-ary DictAdd
Push "mutex"
Push PC(759)
Push False
Apply
3-ary DictAdd
Push "r_gate"
Push ()
Push "sema"
Push PC(759)
Push True
Apply
3-ary DictAdd
Push "count"
Push 0
3-ary DictAdd
3-ary DictAdd
Push "w_gate"
Push ()
Push "sema"
Push PC(759)
Push True
Apply
3-ary DictAdd
Push "count"
Push 0
3-ary DictAdd
3-ary DictAdd
StoreVar result
Return
Jump 1320
Frame release_one rw
LoadVar rw
Push "nwriters"
Address
Load
Push 0
2-ary ==
JumpCond False 1096
LoadVar rw
Push "r_gate"
Address
Push "count"
Address
Load
Push 0
2-ary >
Jump 1097
Push False
JumpCond False 1108
Push PC(801)
LoadVar rw
DelVar rw
Push "r_gate"
Address
Push "sema"
Address
Apply
Pop
Jump 1148
LoadVar rw
Push "nreaders"
Address
Load
LoadVar rw
Push "nwriters"
Address
Load
2-ary +
Push 0
2-ary ==
JumpCond False 1129
LoadVar rw
Push "w_gate"
Address
Push "count"
Address
Load
Push 0
2-ary >
Jump 1130
Push False
JumpCond False 1141
Push PC(801)
LoadVar rw
DelVar rw
Push "w_gate"
Address
Push "sema"
Address
Apply
Pop
Jump 1148
Push PC(801)
LoadVar rw
DelVar rw
Push "mutex"
Address
Apply
Pop
Return
Jump 1320
Frame read_acquire rw
Push PC(782)
LoadVar rw
Push "mutex"
Address
Apply
Pop
LoadVar rw
Push "nwriters"
Address
Load
Push 0
2-ary >
JumpCond False 1196
LoadVar rw
Push "r_gate"
Address
Push "count"
Address
Dup
Load
Push 1
2-ary +
Store
Push PC(1079)
LoadVar rw
Apply
Pop
Push PC(782)
LoadVar rw
Push "r_gate"
Address
Push "sema"
Address
Apply
Pop
LoadVar rw
Push "r_gate"
Address
Push "count"
Address
Dup
Load
Push 1
2-ary -
Store
LoadVar rw
Push "nreaders"
Address
Dup
Load
Push 1
2-ary +
Store
Push PC(1079)
LoadVar rw
DelVar rw
Apply
Pop
Return
Jump 1320
Frame read_release rw
Push PC(782)
LoadVar rw
Push "mutex"
Address
Apply
Pop
LoadVar rw
Push "nreaders"
Address
Dup
Load
Push 1
2-ary -
Store
Push PC(1079)
LoadVar rw
DelVar rw
Apply
Pop
Return
Jump 1320
Frame write_acquire rw
Push PC(782)
LoadVar rw
Push "mutex"
Address
Apply
Pop
LoadVar rw
Push "nreaders"
Address
Load
LoadVar rw
Push "nwriters"
Address
Load
2-ary +
Push 0
2-ary >
JumpCond False 1284
LoadVar rw
Push "w_gate"
Address
Push "count"
Address
Dup
Load
Push 1
2-ary +
Store
Push PC(1079)
LoadVar rw
Apply
Pop
Push PC(782)
LoadVar rw
Push "w_gate"
Address
Push "sema"
Address
Apply
Pop
LoadVar rw
Push "w_gate"
Address
Push "count"
Address
Dup
Load
Push 1
2-ary -
Store
LoadVar rw
Push "nwriters"
Address
Dup
Load
Push 1
2-ary +
Store
Push PC(1079)
LoadVar rw
DelVar rw
Apply
Pop
Return
Jump 1320
Frame write_release rw
Push PC(782)
LoadVar rw
Push "mutex"
Address
Apply
Pop
LoadVar rw
Push "nwriters"
Address
Dup
Load
Push 1
2-ary -
Store
Push PC(1079)
LoadVar rw
DelVar rw
Apply
Pop
Return
Return
DelVar result
```

Duration: 0.0015905999999999976

---
##  code/queuebroken.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store synch
Push ()
Store list
Jump 369
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 369
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 369
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 369
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 369
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 369
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 369
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 369
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 369
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 369
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 369
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 369
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 369
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Push ()
Store bag
Jump 1039
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1039
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s311
LoadVar $s311
1-ary IsEmpty
JumpCond True 393
Cut($s311, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 384
DelVar $s311
StoreVar result
Return
Jump 1039
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s327
LoadVar $s327
1-ary IsEmpty
JumpCond True 430
Cut($s327, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 423
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 404
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 404
DelVar $s327
Return
Jump 1039
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 456
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 460
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1039
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s391
LoadVar $s391
1-ary IsEmpty
JumpCond True 489
Cut($s391, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 478
DelVar $s391
Return
Jump 1039
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1039
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1039
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1039
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 566
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 572
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1039
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 599
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 600
Push False
JumpCond False 609
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 620
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1039
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 638
DelVar bg
DelVar k
Push {}
Push PC(372)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 723
Push PC(462)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 652
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 723
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 664
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 723
Push PC(492)
LoadVar bg
Apply
StoreVar hd
Push PC(574)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(623)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s568
LoadVar $s568
1-ary IsEmpty
JumpCond True 708
Cut($s568, x)
Push PC(537)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 692
DelVar $s568
DelVar hd
Push PC(623)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1039
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1039
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 754
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1039
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1039
Frame Lock ()
DelVar result
Push PC(759)
Push False
Apply
StoreVar result
Return
Jump 1039
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1039
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 790
Jump 793
ReadonlyDec
AtomicDec
Jump 783
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1039
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1039
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1039
Frame Condition ()
DelVar result
Push PC(372)
Push ()
Apply
StoreVar result
Return
Jump 1039
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(537)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 887
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 888
Push False
JumpCond False 893
DelVar c
DelVar cnt
DelVar ctx
Jump 896
ReadonlyDec
AtomicDec
Jump 868
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1039
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(372)
Push ()
Apply
2-ary !=
JumpCond False 929
LoadVar c
Push PC(574)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(519)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1039
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(372)
Push ()
Apply
Store
AtomicDec
Return
Jump 1039
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1039
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 960
Jump 963
ReadonlyDec
AtomicDec
Jump 952
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1039
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1039
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1039
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1002
Jump 1005
ReadonlyDec
AtomicDec
Jump 993
ReadonlyDec
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1039
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Push ()
Store alloc
Push ()
Store alloc.pool
Push 0
Store alloc.next
Jump 1211
Frame malloc v
DelVar result
AtomicInc(lazy)
Push ?alloc"pool"
Load alloc.next
Address
LoadVar v
DelVar v
Store
Push ?alloc"pool"
Load alloc.next
Address
StoreVar result
Load alloc.next
Push 1
2-ary +
Store alloc.next
AtomicDec
Return
Jump 1211
Frame free r
AtomicInc(lazy)
LoadVar r
DelVar r
Del
AtomicDec
Return
Jump 1211
Frame leak_check ()
ReadonlyInc
AtomicInc(lazy)
Load alloc.pool
Push ()
2-ary ==
Push "alloc_leak"
Assert2
AtomicDec
ReadonlyDec
Return
Jump 1211
Frame Queue ()
DelVar result
Push ()
Push "next"
Push None
3-ary DictAdd
Push "value"
Push None
3-ary DictAdd
Push "lock"
Push PC(766)
Push ()
Apply
3-ary DictAdd
StoreVar result
Return
Jump 1211
Frame put (q, v)
Push PC(1046)
Push ()
Push "next"
Push None
3-ary DictAdd
Push "value"
LoadVar v
DelVar v
3-ary DictAdd
Push "lock"
Push PC(766)
Push ()
Apply
3-ary DictAdd
Apply
StoreVar node
LoadVar q
DelVar q
StoreVar nq
LoadVar nq
Push None
2-ary !=
JumpCond False 1158
Push PC(782)
LoadVar nq
Push "lock"
Address
Apply
Pop
LoadVar nq
Push "next"
Address
Load
StoreVar n
LoadVar n
Push None
2-ary ==
JumpCond False 1147
LoadVar nq
Push "next"
Address
LoadVar node
Store
Push PC(801)
LoadVar nq
DelVar nq
Push "lock"
Address
Apply
Pop
LoadVar n
DelVar n
StoreVar nq
Jump 1123
DelVar node
DelVar nq
Return
Jump 1211
Frame get q
DelVar result
Push PC(782)
LoadVar q
Push "lock"
Address
Apply
Pop
LoadVar q
Push "next"
Address
Load
Push None
2-ary ==
JumpCond False 1180
Push None
StoreVar result
Jump 1203
LoadVar q
Push "next"
Address
Load
StoreVar node
LoadVar q
Push "next"
Address
LoadVar node
Push "next"
Address
Load
Store
LoadVar node
Push "value"
Address
Load
StoreVar result
Push PC(1066)
LoadVar node
DelVar node
Apply
Pop
Push PC(801)
LoadVar q
DelVar q
Push "lock"
Address
Apply
Pop
Return
Return
DelVar result
```

Duration: 0.0015742000000000256

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store synch
Push ()
Store list
Jump 369
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 369
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 369
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 369
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 369
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 369
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 369
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 369
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 369
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 369
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 369
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 369
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 369
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Push ()
Store bag
Jump 1039
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1039
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s311
LoadVar $s311
1-ary IsEmpty
JumpCond True 393
Cut($s311, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 384
DelVar $s311
StoreVar result
Return
Jump 1039
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s327
LoadVar $s327
1-ary IsEmpty
JumpCond True 430
Cut($s327, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 423
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 404
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 404
DelVar $s327
Return
Jump 1039
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 456
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 460
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1039
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s391
LoadVar $s391
1-ary IsEmpty
JumpCond True 489
Cut($s391, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 478
DelVar $s391
Return
Jump 1039
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1039
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1039
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1039
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 566
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 572
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1039
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 599
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 600
Push False
JumpCond False 609
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 620
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1039
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 638
DelVar bg
DelVar k
Push {}
Push PC(372)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 723
Push PC(462)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 652
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 723
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 664
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 723
Push PC(492)
LoadVar bg
Apply
StoreVar hd
Push PC(574)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(623)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s568
LoadVar $s568
1-ary IsEmpty
JumpCond True 708
Cut($s568, x)
Push PC(537)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 692
DelVar $s568
DelVar hd
Push PC(623)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1039
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1039
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 754
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1039
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1039
Frame Lock ()
DelVar result
Push PC(759)
Push False
Apply
StoreVar result
Return
Jump 1039
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1039
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 790
Jump 793
ReadonlyDec
AtomicDec
Jump 783
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1039
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1039
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1039
Frame Condition ()
DelVar result
Push PC(372)
Push ()
Apply
StoreVar result
Return
Jump 1039
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(537)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 887
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 888
Push False
JumpCond False 893
DelVar c
DelVar cnt
DelVar ctx
Jump 896
ReadonlyDec
AtomicDec
Jump 868
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1039
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(372)
Push ()
Apply
2-ary !=
JumpCond False 929
LoadVar c
Push PC(574)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(519)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1039
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(372)
Push ()
Apply
Store
AtomicDec
Return
Jump 1039
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1039
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 960
Jump 963
ReadonlyDec
AtomicDec
Jump 952
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1039
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1039
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1039
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1002
Jump 1005
ReadonlyDec
AtomicDec
Jump 993
ReadonlyDec
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1039
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Push ()
Store alloc
Push ()
Store alloc.pool
Push 0
Store alloc.next
Jump 1211
Frame malloc v
DelVar result
AtomicInc(lazy)
Push ?alloc"pool"
Load alloc.next
Address
LoadVar v
DelVar v
Store
Push ?alloc"pool"
Load alloc.next
Address
StoreVar result
Load alloc.next
Push 1
2-ary +
Store alloc.next
AtomicDec
Return
Jump 1211
Frame free r
AtomicInc(lazy)
LoadVar r
DelVar r
Del
AtomicDec
Return
Jump 1211
Frame leak_check ()
ReadonlyInc
AtomicInc(lazy)
Load alloc.pool
Push ()
2-ary ==
Push "alloc_leak"
Assert2
AtomicDec
ReadonlyDec
Return
Jump 1211
Frame Queue ()
DelVar result
Push ()
Push "next"
Push None
3-ary DictAdd
Push "value"
Push None
3-ary DictAdd
Push "lock"
Push PC(766)
Push ()
Apply
3-ary DictAdd
StoreVar result
Return
Jump 1211
Frame put (q, v)
Push PC(1046)
Push ()
Push "next"
Push None
3-ary DictAdd
Push "value"
LoadVar v
DelVar v
3-ary DictAdd
Push "lock"
Push PC(766)
Push ()
Apply
3-ary DictAdd
Apply
StoreVar node
LoadVar q
DelVar q
StoreVar nq
LoadVar nq
Push None
2-ary !=
JumpCond False 1158
Push PC(782)
LoadVar nq
Push "lock"
Address
Apply
Pop
LoadVar nq
Push "next"
Address
Load
StoreVar n
LoadVar n
Push None
2-ary ==
JumpCond False 1147
LoadVar nq
Push "next"
Address
LoadVar node
Store
Push PC(801)
LoadVar nq
DelVar nq
Push "lock"
Address
Apply
Pop
LoadVar n
DelVar n
StoreVar nq
Jump 1123
DelVar node
DelVar nq
Return
Jump 1211
Frame get q
DelVar result
Push PC(782)
LoadVar q
Push "lock"
Address
Apply
Pop
LoadVar q
Push "next"
Address
Load
Push None
2-ary ==
JumpCond False 1180
Push None
StoreVar result
Jump 1203
LoadVar q
Push "next"
Address
Load
StoreVar node
LoadVar q
Push "next"
Address
LoadVar node
Push "next"
Address
Load
Store
LoadVar node
Push "value"
Address
Load
StoreVar result
Push PC(1066)
LoadVar node
DelVar node
Apply
Pop
Push PC(801)
LoadVar q
DelVar q
Push "lock"
Address
Apply
Pop
Return
Return
DelVar result
```

Duration: 0.0014388999999999652

---
##  code/hello7.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Jump 9
Frame hello name
Push "hello"
Print
LoadVar name
DelVar name
Print
Return
Push PC(2)
Push "Lesley"
Push ()
Spawn
Push PC(2)
Push "Robbert"
Push ()
Spawn
Return
DelVar result
```

Duration: 0.0023586999999999914

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Jump 9
Frame hello name
Push "hello"
Print
LoadVar name
DelVar name
Print
Return
Push PC(2)
Push "Lesley"
Push ()
Spawn
Push PC(2)
Push "Robbert"
Push ()
Spawn
Return
DelVar result
```

Duration: 0.0017019999999999813

---
##  code/multitest.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Jump 13
Frame seq_test ()
Return
Jump 13
Frame conc_test1 ()
Return
Jump 13
Frame conc_test2 ()
Return
Jump 13
Frame conc_test3 ()
Return
Push PC(2)
Push ()
Apply
Pop
Push { PC(5), PC(8), PC(11) }
Choose
StoreVar test
LoadVar test
DelVar test
Push ()
Apply
Pop
Return
DelVar result
```

Duration: 0.0015236000000000138

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Jump 13
Frame seq_test ()
Return
Jump 13
Frame conc_test1 ()
Return
Jump 13
Frame conc_test2 ()
Return
Jump 13
Frame conc_test3 ()
Return
Push PC(2)
Push ()
Apply
Pop
Push { PC(5), PC(8), PC(11) }
Choose
StoreVar test
LoadVar test
DelVar test
Push ()
Apply
Pop
Return
DelVar result
```

Duration: 0.0015160000000000173

---
##  code/qsort.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Jump 244
Frame Qsort arr
DelVar result
Push ()
Push "arr"
LoadVar arr
3-ary DictAdd
Push "todo"
Push {}
Push ()
Push 0
Push 0
3-ary DictAdd
Push 1
LoadVar arr
DelVar arr
1-ary len
Push 1
2-ary -
3-ary DictAdd
2-ary SetAdd
3-ary DictAdd
StoreVar result
Return
Jump 244
Frame swap (p, q)
LoadVar p
LoadVar q
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar p
DelVar p
Load
3-ary DictAdd
Split 2
Move 3
Move 2
Store
Store
Return
Jump 244
Frame partition (qs, lo, hi)
DelVar result
LoadVar lo
StoreVar result
LoadVar lo
DelVar lo
LoadVar hi
Push 1
2-ary -
2-ary ..
StoreVar $s46
LoadVar $s46
1-ary IsEmpty
JumpCond True 102
Cut($s46, i)
LoadVar qs
Push "arr"
Address
LoadVar i
Address
Load
LoadVar qs
Push "arr"
Address
LoadVar hi
Address
Load
2-ary <=
JumpCond False 100
Push PC(26)
Push ()
Push 0
LoadVar qs
Push "arr"
Address
LoadVar result
Address
3-ary DictAdd
Push 1
LoadVar qs
Push "arr"
Address
LoadVar i
DelVar i
Address
3-ary DictAdd
Apply
Pop
LoadVar result
DelVar result
Push 1
2-ary +
StoreVar result
DelVar i
Jump 58
DelVar $s46
Push PC(26)
Push ()
Push 0
LoadVar qs
Push "arr"
Address
LoadVar result
Address
3-ary DictAdd
Push 1
LoadVar qs
DelVar qs
Push "arr"
Address
LoadVar hi
DelVar hi
Address
3-ary DictAdd
Apply
Pop
Return
Jump 244
Frame sortrange (qs, range)
LoadVar range
DelVar range
StoreVar (lo, hi)
Push PC(47)
Push ()
Push 0
LoadVar qs
3-ary DictAdd
Push 1
LoadVar lo
3-ary DictAdd
Push 2
LoadVar hi
3-ary DictAdd
Apply
StoreVar pivot
LoadVar pivot
Push 1
2-ary -
LoadVar lo
2-ary >
JumpCond False 167
LoadVar qs
Push "todo"
Address
Dup
Load
Push {}
Push ()
Push 0
LoadVar lo
DelVar lo
3-ary DictAdd
Push 1
LoadVar pivot
Push 1
2-ary -
3-ary DictAdd
2-ary SetAdd
2-ary |
Store
DelVar lo
LoadVar pivot
Push 1
2-ary +
LoadVar hi
2-ary <
JumpCond False 195
LoadVar qs
DelVar qs
Push "todo"
Address
Dup
Load
Push {}
Push ()
Push 0
LoadVar pivot
DelVar pivot
Push 1
2-ary +
3-ary DictAdd
Push 1
LoadVar hi
DelVar hi
3-ary DictAdd
2-ary SetAdd
2-ary |
Store
DelVar hi
DelVar pivot
DelVar qs
Return
Jump 244
Frame sort qs
DelVar result
LoadVar qs
Push "todo"
Address
Load
Push {}
2-ary !=
JumpCond False 237
LoadVar qs
Push "todo"
Address
Load
Choose
StoreVar range
LoadVar qs
Push "todo"
Address
Dup
Load
Push {}
LoadVar range
2-ary SetAdd
2-ary -
Store
Push PC(125)
Push ()
Push 0
LoadVar qs
3-ary DictAdd
Push 1
LoadVar range
DelVar range
3-ary DictAdd
Apply
Pop
Jump 201
LoadVar qs
DelVar qs
Push "arr"
Address
Load
StoreVar result
Return
Return
DelVar result
```

Duration: 0.0014817000000000302

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Jump 244
Frame Qsort arr
DelVar result
Push ()
Push "arr"
LoadVar arr
3-ary DictAdd
Push "todo"
Push {}
Push ()
Push 0
Push 0
3-ary DictAdd
Push 1
LoadVar arr
DelVar arr
1-ary len
Push 1
2-ary -
3-ary DictAdd
2-ary SetAdd
3-ary DictAdd
StoreVar result
Return
Jump 244
Frame swap (p, q)
LoadVar p
LoadVar q
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar p
DelVar p
Load
3-ary DictAdd
Split 2
Move 3
Move 2
Store
Store
Return
Jump 244
Frame partition (qs, lo, hi)
DelVar result
LoadVar lo
StoreVar result
LoadVar lo
DelVar lo
LoadVar hi
Push 1
2-ary -
2-ary ..
StoreVar $s46
LoadVar $s46
1-ary IsEmpty
JumpCond True 102
Cut($s46, i)
LoadVar qs
Push "arr"
Address
LoadVar i
Address
Load
LoadVar qs
Push "arr"
Address
LoadVar hi
Address
Load
2-ary <=
JumpCond False 100
Push PC(26)
Push ()
Push 0
LoadVar qs
Push "arr"
Address
LoadVar result
Address
3-ary DictAdd
Push 1
LoadVar qs
Push "arr"
Address
LoadVar i
DelVar i
Address
3-ary DictAdd
Apply
Pop
LoadVar result
DelVar result
Push 1
2-ary +
StoreVar result
DelVar i
Jump 58
DelVar $s46
Push PC(26)
Push ()
Push 0
LoadVar qs
Push "arr"
Address
LoadVar result
Address
3-ary DictAdd
Push 1
LoadVar qs
DelVar qs
Push "arr"
Address
LoadVar hi
DelVar hi
Address
3-ary DictAdd
Apply
Pop
Return
Jump 244
Frame sortrange (qs, range)
LoadVar range
DelVar range
StoreVar (lo, hi)
Push PC(47)
Push ()
Push 0
LoadVar qs
3-ary DictAdd
Push 1
LoadVar lo
3-ary DictAdd
Push 2
LoadVar hi
3-ary DictAdd
Apply
StoreVar pivot
LoadVar pivot
Push 1
2-ary -
LoadVar lo
2-ary >
JumpCond False 167
LoadVar qs
Push "todo"
Address
Dup
Load
Push {}
Push ()
Push 0
LoadVar lo
DelVar lo
3-ary DictAdd
Push 1
LoadVar pivot
Push 1
2-ary -
3-ary DictAdd
2-ary SetAdd
2-ary |
Store
DelVar lo
LoadVar pivot
Push 1
2-ary +
LoadVar hi
2-ary <
JumpCond False 195
LoadVar qs
DelVar qs
Push "todo"
Address
Dup
Load
Push {}
Push ()
Push 0
LoadVar pivot
DelVar pivot
Push 1
2-ary +
3-ary DictAdd
Push 1
LoadVar hi
DelVar hi
3-ary DictAdd
2-ary SetAdd
2-ary |
Store
DelVar hi
DelVar pivot
DelVar qs
Return
Jump 244
Frame sort qs
DelVar result
LoadVar qs
Push "todo"
Address
Load
Push {}
2-ary !=
JumpCond False 237
LoadVar qs
Push "todo"
Address
Load
Choose
StoreVar range
LoadVar qs
Push "todo"
Address
Dup
Load
Push {}
LoadVar range
2-ary SetAdd
2-ary -
Store
Push PC(125)
Push ()
Push 0
LoadVar qs
3-ary DictAdd
Push 1
LoadVar range
DelVar range
3-ary DictAdd
Apply
Pop
Jump 201
LoadVar qs
DelVar qs
Push "arr"
Address
Load
StoreVar result
Return
Return
DelVar result
```

Duration: 0.0015223999999999793

---
##  code/setobj.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store alloc
Push ()
Store alloc.pool
Push 0
Store alloc.next
Jump 98
Frame malloc v
DelVar result
AtomicInc(lazy)
Push ?alloc"pool"
Load alloc.next
Address
LoadVar v
DelVar v
Store
Push ?alloc"pool"
Load alloc.next
Address
StoreVar result
Load alloc.next
Push 1
2-ary +
Store alloc.next
AtomicDec
Return
Jump 98
Frame free r
AtomicInc(lazy)
LoadVar r
DelVar r
Del
AtomicDec
Return
Jump 98
Frame leak_check ()
ReadonlyInc
AtomicInc(lazy)
Load alloc.pool
Push ()
2-ary ==
Push "alloc_leak"
Assert2
AtomicDec
ReadonlyDec
Return
Jump 98
Frame SetObject ()
DelVar result
Push PC(8)
Push {}
Apply
StoreVar result
Return
Jump 98
Frame insert (s, v)
AtomicInc(lazy)
LoadVar s
DelVar s
Dup
Load
Push {}
LoadVar v
DelVar v
2-ary SetAdd
2-ary |
Store
AtomicDec
Return
Jump 98
Frame remove (s, v)
AtomicInc(lazy)
LoadVar s
DelVar s
Dup
Load
Push {}
LoadVar v
DelVar v
2-ary SetAdd
2-ary -
Store
AtomicDec
Return
Jump 98
Frame contains (s, v)
DelVar result
AtomicInc(lazy)
LoadVar v
DelVar v
LoadVar s
DelVar s
Load
2-ary in
StoreVar result
AtomicDec
Return
Return
DelVar result
```

Duration: 0.0014059000000000155

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store alloc
Push ()
Store alloc.pool
Push 0
Store alloc.next
Jump 98
Frame malloc v
DelVar result
AtomicInc(lazy)
Push ?alloc"pool"
Load alloc.next
Address
LoadVar v
DelVar v
Store
Push ?alloc"pool"
Load alloc.next
Address
StoreVar result
Load alloc.next
Push 1
2-ary +
Store alloc.next
AtomicDec
Return
Jump 98
Frame free r
AtomicInc(lazy)
LoadVar r
DelVar r
Del
AtomicDec
Return
Jump 98
Frame leak_check ()
ReadonlyInc
AtomicInc(lazy)
Load alloc.pool
Push ()
2-ary ==
Push "alloc_leak"
Assert2
AtomicDec
ReadonlyDec
Return
Jump 98
Frame SetObject ()
DelVar result
Push PC(8)
Push {}
Apply
StoreVar result
Return
Jump 98
Frame insert (s, v)
AtomicInc(lazy)
LoadVar s
DelVar s
Dup
Load
Push {}
LoadVar v
DelVar v
2-ary SetAdd
2-ary |
Store
AtomicDec
Return
Jump 98
Frame remove (s, v)
AtomicInc(lazy)
LoadVar s
DelVar s
Dup
Load
Push {}
LoadVar v
DelVar v
2-ary SetAdd
2-ary -
Store
AtomicDec
Return
Jump 98
Frame contains (s, v)
DelVar result
AtomicInc(lazy)
LoadVar v
DelVar v
LoadVar s
DelVar s
Load
2-ary in
StoreVar result
AtomicDec
Return
Return
DelVar result
```

Duration: 0.0013776000000000344

---
##  code/baddblwait.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ?forks
Load left
Address
Load
JumpCond False 22
Push ?synch
Push "wait"
Address
Push ()
Push 0
Push ?conds
Load left
Address
3-ary DictAdd
Push 1
Push ?mutex
3-ary DictAdd
Address
Load
Pop
Jump 1
Push ?forks
Load right
Address
Load
JumpCond False 43
Push ?synch
Push "wait"
Address
Push ()
Push 0
Push ?conds
Load right
Address
3-ary DictAdd
Push 1
Push ?mutex
3-ary DictAdd
Address
Load
Pop
Jump 22
Return
DelVar result
```

Duration: 0.0015624000000000193

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ?forks
Load left
Address
Load
JumpCond False 22
Push ?synch
Push "wait"
Address
Push ()
Push 0
Push ?conds
Load left
Address
3-ary DictAdd
Push 1
Push ?mutex
3-ary DictAdd
Address
Load
Pop
Jump 1
Push ?forks
Load right
Address
Load
JumpCond False 43
Push ?synch
Push "wait"
Address
Push ()
Push 0
Push ?conds
Load right
Address
3-ary DictAdd
Push 1
Push ?mutex
3-ary DictAdd
Address
Load
Pop
Jump 22
Return
DelVar result
```

Duration: 0.006289099999999992

---
##  code/nbqueuetest.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store queue
Push ()
Store list
Jump 421
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 421
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 421
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 421
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 421
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 421
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 421
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 421
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 421
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 421
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 421
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 421
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 421
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Jump 421
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 421
Frame put (q, v)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar v
DelVar v
3-ary DictAdd
Apply
Store
AtomicDec
Return
Jump 421
Frame get q
DelVar result
AtomicInc(lazy)
LoadVar q
Load
Push ()
2-ary ==
JumpCond False 407
DelVar q
Push None
StoreVar result
Jump 419
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Push PC(370)
Push ()
Apply
Store myq
Jump 466
Frame thread v
Push { "get", "put" }
Choose
Push "put"
2-ary ==
JumpCond False 444
Push PC(376)
Push ()
Push 0
Push ?myq
3-ary DictAdd
Push 1
LoadVar v
DelVar v
3-ary DictAdd
Apply
Pop
Jump 465
DelVar v
Push PC(395)
Push ?myq
Apply
StoreVar v
ReadonlyInc
AtomicInc(lazy)
LoadVar v
Push None
2-ary ==
JumpCond True 460
LoadVar v
DelVar v
Push { 1, 2, 3, 4 }
2-ary in
Jump 462
DelVar v
Push True
Assert
AtomicDec
ReadonlyDec
Return
Push { 1, 2, 3, 4 }
StoreVar $s388
LoadVar $s388
1-ary IsEmpty
JumpCond True 478
Cut($s388, i)
Push PC(426)
LoadVar i
DelVar i
Push ()
Spawn
Jump 468
DelVar $s388
Return
DelVar result
```

Duration: 0.001363900000000029

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store queue
Push ()
Store list
Jump 421
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 421
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 421
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 421
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 421
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 421
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 421
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 421
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 421
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 421
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 421
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 421
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 421
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Jump 421
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 421
Frame put (q, v)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar v
DelVar v
3-ary DictAdd
Apply
Store
AtomicDec
Return
Jump 421
Frame get q
DelVar result
AtomicInc(lazy)
LoadVar q
Load
Push ()
2-ary ==
JumpCond False 407
DelVar q
Push None
StoreVar result
Jump 419
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Push PC(370)
Push ()
Apply
Store myq
Jump 466
Frame thread v
Push { "get", "put" }
Choose
Push "put"
2-ary ==
JumpCond False 444
Push PC(376)
Push ()
Push 0
Push ?myq
3-ary DictAdd
Push 1
LoadVar v
DelVar v
3-ary DictAdd
Apply
Pop
Jump 465
DelVar v
Push PC(395)
Push ?myq
Apply
StoreVar v
ReadonlyInc
AtomicInc(lazy)
LoadVar v
Push None
2-ary ==
JumpCond True 460
LoadVar v
DelVar v
Push { 1, 2, 3, 4 }
2-ary in
Jump 462
DelVar v
Push True
Assert
AtomicDec
ReadonlyDec
Return
Push { 1, 2, 3, 4 }
StoreVar $s388
LoadVar $s388
1-ary IsEmpty
JumpCond True 478
Cut($s388, i)
Push PC(426)
LoadVar i
DelVar i
Push ()
Spawn
Jump 468
DelVar $s388
Return
DelVar result
```

Duration: 0.001167100000000032

---
##  code/cssynch.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store synch
Push ()
Store list
Jump 369
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 369
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 369
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 369
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 369
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 369
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 369
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 369
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 369
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 369
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 369
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 369
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 369
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Push ()
Store bag
Jump 1039
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1039
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s311
LoadVar $s311
1-ary IsEmpty
JumpCond True 393
Cut($s311, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 384
DelVar $s311
StoreVar result
Return
Jump 1039
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s327
LoadVar $s327
1-ary IsEmpty
JumpCond True 430
Cut($s327, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 423
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 404
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 404
DelVar $s327
Return
Jump 1039
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 456
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 460
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1039
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s391
LoadVar $s391
1-ary IsEmpty
JumpCond True 489
Cut($s391, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 478
DelVar $s391
Return
Jump 1039
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1039
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1039
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1039
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 566
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 572
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1039
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 599
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 600
Push False
JumpCond False 609
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 620
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1039
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 638
DelVar bg
DelVar k
Push {}
Push PC(372)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 723
Push PC(462)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 652
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 723
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 664
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 723
Push PC(492)
LoadVar bg
Apply
StoreVar hd
Push PC(574)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(623)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s568
LoadVar $s568
1-ary IsEmpty
JumpCond True 708
Cut($s568, x)
Push PC(537)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 692
DelVar $s568
DelVar hd
Push PC(623)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1039
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1039
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 754
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1039
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1039
Frame Lock ()
DelVar result
Push PC(759)
Push False
Apply
StoreVar result
Return
Jump 1039
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1039
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 790
Jump 793
ReadonlyDec
AtomicDec
Jump 783
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1039
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1039
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1039
Frame Condition ()
DelVar result
Push PC(372)
Push ()
Apply
StoreVar result
Return
Jump 1039
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(537)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 887
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 888
Push False
JumpCond False 893
DelVar c
DelVar cnt
DelVar ctx
Jump 896
ReadonlyDec
AtomicDec
Jump 868
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1039
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(372)
Push ()
Apply
2-ary !=
JumpCond False 929
LoadVar c
Push PC(574)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(519)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1039
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(372)
Push ()
Apply
Store
AtomicDec
Return
Jump 1039
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1039
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 960
Jump 963
ReadonlyDec
AtomicDec
Jump 952
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1039
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1039
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1039
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1002
Jump 1005
ReadonlyDec
AtomicDec
Jump 993
ReadonlyDec
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1039
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Push PC(766)
Push ()
Apply
Store lock
Jump 1069
Frame thread ()
Push { False, True }
Choose
JumpCond False 1068
Push PC(782)
Push ?lock
Apply
Pop
AtomicInc(eager)
ReadonlyInc
AtomicInc(lazy)
Push PC(1052)
1-ary countLabel
Push 1
2-ary ==
Assert
AtomicDec
ReadonlyDec
AtomicDec
Push PC(801)
Push ?lock
Apply
Pop
Jump 1045
Return
Push { 1, 2 }
StoreVar $s917
LoadVar $s917
1-ary IsEmpty
JumpCond True 1081
Cut($s917, i)
DelVar i
Push PC(1044)
Push ()
Push ()
Spawn
Jump 1071
DelVar $s917
Return
DelVar result
```

Duration: 0.0014133000000000062

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store synch
Push ()
Store list
Jump 369
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 369
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 369
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 369
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 369
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 369
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 369
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 369
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 369
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 369
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 369
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 369
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 369
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Push ()
Store bag
Jump 1039
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1039
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s311
LoadVar $s311
1-ary IsEmpty
JumpCond True 393
Cut($s311, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 384
DelVar $s311
StoreVar result
Return
Jump 1039
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s327
LoadVar $s327
1-ary IsEmpty
JumpCond True 430
Cut($s327, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 423
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 404
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 404
DelVar $s327
Return
Jump 1039
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 456
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 460
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1039
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s391
LoadVar $s391
1-ary IsEmpty
JumpCond True 489
Cut($s391, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 478
DelVar $s391
Return
Jump 1039
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1039
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1039
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1039
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 566
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 572
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1039
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 599
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 600
Push False
JumpCond False 609
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 620
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1039
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 638
DelVar bg
DelVar k
Push {}
Push PC(372)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 723
Push PC(462)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 652
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 723
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 664
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 723
Push PC(492)
LoadVar bg
Apply
StoreVar hd
Push PC(574)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(623)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s568
LoadVar $s568
1-ary IsEmpty
JumpCond True 708
Cut($s568, x)
Push PC(537)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 692
DelVar $s568
DelVar hd
Push PC(623)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1039
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1039
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 754
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1039
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1039
Frame Lock ()
DelVar result
Push PC(759)
Push False
Apply
StoreVar result
Return
Jump 1039
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1039
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 790
Jump 793
ReadonlyDec
AtomicDec
Jump 783
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1039
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1039
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1039
Frame Condition ()
DelVar result
Push PC(372)
Push ()
Apply
StoreVar result
Return
Jump 1039
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(537)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 887
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 888
Push False
JumpCond False 893
DelVar c
DelVar cnt
DelVar ctx
Jump 896
ReadonlyDec
AtomicDec
Jump 868
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1039
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(372)
Push ()
Apply
2-ary !=
JumpCond False 929
LoadVar c
Push PC(574)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(519)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1039
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(372)
Push ()
Apply
Store
AtomicDec
Return
Jump 1039
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1039
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 960
Jump 963
ReadonlyDec
AtomicDec
Jump 952
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1039
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1039
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1039
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1002
Jump 1005
ReadonlyDec
AtomicDec
Jump 993
ReadonlyDec
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1039
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Push PC(766)
Push ()
Apply
Store lock
Jump 1069
Frame thread ()
Push { False, True }
Choose
JumpCond False 1068
Push PC(782)
Push ?lock
Apply
Pop
AtomicInc(eager)
ReadonlyInc
AtomicInc(lazy)
Push PC(1052)
1-ary countLabel
Push 1
2-ary ==
Assert
AtomicDec
ReadonlyDec
AtomicDec
Push PC(801)
Push ?lock
Apply
Pop
Jump 1045
Return
Push { 1, 2 }
StoreVar $s917
LoadVar $s917
1-ary IsEmpty
JumpCond True 1081
Cut($s917, i)
DelVar i
Push PC(1044)
Push ()
Push ()
Spawn
Jump 1071
DelVar $s917
Return
DelVar result
```

Duration: 0.0015524000000000093

---
##  code/stack3.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Jump 37
Frame Stack ()
DelVar result
Push ()
StoreVar result
Return
Jump 37
Frame push (st, v)
LoadVar st
Push ()
Push 0
LoadVar v
DelVar v
3-ary DictAdd
Push 1
LoadVar st
DelVar st
Load
3-ary DictAdd
Store
Return
Jump 37
Frame pop st
DelVar result
LoadVar st
Load
StoreVar (top, rest)
LoadVar top
DelVar top
StoreVar result
LoadVar st
DelVar st
LoadVar rest
DelVar rest
Store
Return
Return
DelVar result
```

Duration: 0.0012294999999999945

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Jump 37
Frame Stack ()
DelVar result
Push ()
StoreVar result
Return
Jump 37
Frame push (st, v)
LoadVar st
Push ()
Push 0
LoadVar v
DelVar v
3-ary DictAdd
Push 1
LoadVar st
DelVar st
Load
3-ary DictAdd
Store
Return
Jump 37
Frame pop st
DelVar result
LoadVar st
Load
StoreVar (top, rest)
LoadVar top
DelVar top
StoreVar result
LoadVar st
DelVar st
LoadVar rest
DelVar rest
Store
Return
Return
DelVar result
```

Duration: 0.0016335999999999573

---
##  code/RWqueue.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store synch
Push ()
Store list
Jump 369
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 369
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 369
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 369
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 369
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 369
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 369
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 369
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 369
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 369
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 369
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 369
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 369
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Push ()
Store bag
Jump 1251
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1251
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s311
LoadVar $s311
1-ary IsEmpty
JumpCond True 393
Cut($s311, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 384
DelVar $s311
StoreVar result
Return
Jump 1251
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s327
LoadVar $s327
1-ary IsEmpty
JumpCond True 430
Cut($s327, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 423
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 404
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 404
DelVar $s327
Return
Jump 1251
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 456
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 460
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1251
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s391
LoadVar $s391
1-ary IsEmpty
JumpCond True 489
Cut($s391, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 478
DelVar $s391
Return
Jump 1251
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1251
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1251
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1251
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 566
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 572
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1251
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 599
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 600
Push False
JumpCond False 609
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 620
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1251
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 638
DelVar bg
DelVar k
Push {}
Push PC(372)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 723
Push PC(462)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 652
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 723
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 664
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 723
Push PC(492)
LoadVar bg
Apply
StoreVar hd
Push PC(574)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(623)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s568
LoadVar $s568
1-ary IsEmpty
JumpCond True 708
Cut($s568, x)
Push PC(537)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 692
DelVar $s568
DelVar hd
Push PC(623)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1251
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1251
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 754
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1251
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1251
Frame Lock ()
DelVar result
Push PC(759)
Push False
Apply
StoreVar result
Return
Jump 1251
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1251
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 790
Jump 793
ReadonlyDec
AtomicDec
Jump 783
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1251
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1251
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1251
Frame Condition ()
DelVar result
Push PC(372)
Push ()
Apply
StoreVar result
Return
Jump 1251
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(537)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 887
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 888
Push False
JumpCond False 893
DelVar c
DelVar cnt
DelVar ctx
Jump 896
ReadonlyDec
AtomicDec
Jump 868
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1251
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(372)
Push ()
Apply
2-ary !=
JumpCond False 929
LoadVar c
Push PC(574)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(519)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1251
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(372)
Push ()
Apply
Store
AtomicDec
Return
Jump 1251
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1251
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 960
Jump 963
ReadonlyDec
AtomicDec
Jump 952
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1251
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1251
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1251
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1002
Jump 1005
ReadonlyDec
AtomicDec
Jump 993
ReadonlyDec
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1251
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Jump 1251
Frame V_one ()
Load queue
Push ()
2-ary ==
JumpCond False 1051
Push ?V
Push ?mutex
Address
Load
Pop
Jump 1106
Push ?head
Load queue
Address
Load
StoreVar h
LoadVar h
Push 0
Apply
Push "read"
2-ary ==
JumpCond False 1066
Load w_entered
Push 0
2-ary ==
Jump 1067
Push False
JumpCond False 1077
Push ?V
LoadVar h
DelVar h
Push 1
Apply
Address
Load
Pop
Jump 1106
LoadVar h
Push 0
Apply
Push "write"
2-ary ==
JumpCond False 1089
Load r_entered
Load w_entered
2-ary +
Push 0
2-ary ==
Jump 1090
Push False
JumpCond False 1100
Push ?V
LoadVar h
DelVar h
Push 1
Apply
Address
Load
Pop
Jump 1106
DelVar h
Push ?V
Push ?mutex
Address
Load
Pop
Return
Jump 1251
Frame acquire_rlock psema
Push ?P
Push ?mutex
Address
Load
Pop
Load w_entered
Push 0
2-ary >
JumpCond True 1122
Load queue
Push ()
2-ary !=
Jump 1123
Push True
JumpCond False 1157
Push ?append
Push ()
Push 0
Load queue
3-ary DictAdd
Push 1
Push ()
Push 0
Push "read"
3-ary DictAdd
Push 1
LoadVar psema
3-ary DictAdd
3-ary DictAdd
Address
Load
Store queue
Push ?V
Push ?mutex
Address
Load
Pop
Push ?P
LoadVar psema
DelVar psema
Address
Load
Pop
Push ?tail
Load queue
Address
Load
Store queue
DelVar psema
Load r_entered
Push 1
2-ary +
Store r_entered
Push PC(1040)
Push ()
Apply
Pop
Return
Jump 1251
Frame release_rlock ()
Push ?P
Push ?mutex
Address
Load
Pop
Load r_entered
Push 1
2-ary -
Store r_entered
Push PC(1040)
Push ()
Apply
Pop
Return
Jump 1251
Frame acquire_wlock psema
Push ?P
Push ?mutex
Address
Load
Pop
Load r_entered
Load w_entered
2-ary +
Push 0
2-ary >
JumpCond False 1229
Push ?append
Push ()
Push 0
Load queue
3-ary DictAdd
Push 1
Push ()
Push 0
Push "write"
3-ary DictAdd
Push 1
LoadVar psema
3-ary DictAdd
3-ary DictAdd
Address
Load
Store queue
Push ?V
Push ?mutex
Address
Load
Pop
Push ?P
LoadVar psema
DelVar psema
Address
Load
Pop
Push ?tail
Load queue
Address
Load
Store queue
DelVar psema
Push 1
Store w_entered
Push PC(1040)
Push ()
Apply
Pop
Return
Jump 1251
Frame release_wlock ()
Push ?P
Push ?mutex
Address
Load
Pop
Push 0
Store w_entered
Push PC(1040)
Push ()
Apply
Pop
Return
Push ?Semaphore
Push 1
Address
Load
Store mutex
Push ?r_entered
Push ?w_entered
Push [0, 0]
Split 2
Move 3
Move 2
Store
Store
Push ()
Store queue
Return
DelVar result
```

Duration: 0.0015084000000000208

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store synch
Push ()
Store list
Jump 369
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 369
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 369
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 369
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 369
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 369
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 369
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 369
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 369
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 369
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 369
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 369
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 369
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Push ()
Store bag
Jump 1251
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1251
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s311
LoadVar $s311
1-ary IsEmpty
JumpCond True 393
Cut($s311, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 384
DelVar $s311
StoreVar result
Return
Jump 1251
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s327
LoadVar $s327
1-ary IsEmpty
JumpCond True 430
Cut($s327, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 423
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 404
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 404
DelVar $s327
Return
Jump 1251
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 456
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 460
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1251
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s391
LoadVar $s391
1-ary IsEmpty
JumpCond True 489
Cut($s391, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 478
DelVar $s391
Return
Jump 1251
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1251
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1251
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1251
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 566
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 572
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1251
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 599
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 600
Push False
JumpCond False 609
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 620
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1251
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 638
DelVar bg
DelVar k
Push {}
Push PC(372)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 723
Push PC(462)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 652
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 723
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 664
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 723
Push PC(492)
LoadVar bg
Apply
StoreVar hd
Push PC(574)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(623)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s568
LoadVar $s568
1-ary IsEmpty
JumpCond True 708
Cut($s568, x)
Push PC(537)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 692
DelVar $s568
DelVar hd
Push PC(623)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1251
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1251
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 754
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1251
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1251
Frame Lock ()
DelVar result
Push PC(759)
Push False
Apply
StoreVar result
Return
Jump 1251
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1251
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 790
Jump 793
ReadonlyDec
AtomicDec
Jump 783
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1251
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1251
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1251
Frame Condition ()
DelVar result
Push PC(372)
Push ()
Apply
StoreVar result
Return
Jump 1251
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(537)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 887
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 888
Push False
JumpCond False 893
DelVar c
DelVar cnt
DelVar ctx
Jump 896
ReadonlyDec
AtomicDec
Jump 868
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1251
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(372)
Push ()
Apply
2-ary !=
JumpCond False 929
LoadVar c
Push PC(574)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(519)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1251
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(372)
Push ()
Apply
Store
AtomicDec
Return
Jump 1251
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1251
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 960
Jump 963
ReadonlyDec
AtomicDec
Jump 952
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1251
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1251
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1251
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1002
Jump 1005
ReadonlyDec
AtomicDec
Jump 993
ReadonlyDec
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1251
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Jump 1251
Frame V_one ()
Load queue
Push ()
2-ary ==
JumpCond False 1051
Push ?V
Push ?mutex
Address
Load
Pop
Jump 1106
Push ?head
Load queue
Address
Load
StoreVar h
LoadVar h
Push 0
Apply
Push "read"
2-ary ==
JumpCond False 1066
Load w_entered
Push 0
2-ary ==
Jump 1067
Push False
JumpCond False 1077
Push ?V
LoadVar h
DelVar h
Push 1
Apply
Address
Load
Pop
Jump 1106
LoadVar h
Push 0
Apply
Push "write"
2-ary ==
JumpCond False 1089
Load r_entered
Load w_entered
2-ary +
Push 0
2-ary ==
Jump 1090
Push False
JumpCond False 1100
Push ?V
LoadVar h
DelVar h
Push 1
Apply
Address
Load
Pop
Jump 1106
DelVar h
Push ?V
Push ?mutex
Address
Load
Pop
Return
Jump 1251
Frame acquire_rlock psema
Push ?P
Push ?mutex
Address
Load
Pop
Load w_entered
Push 0
2-ary >
JumpCond True 1122
Load queue
Push ()
2-ary !=
Jump 1123
Push True
JumpCond False 1157
Push ?append
Push ()
Push 0
Load queue
3-ary DictAdd
Push 1
Push ()
Push 0
Push "read"
3-ary DictAdd
Push 1
LoadVar psema
3-ary DictAdd
3-ary DictAdd
Address
Load
Store queue
Push ?V
Push ?mutex
Address
Load
Pop
Push ?P
LoadVar psema
DelVar psema
Address
Load
Pop
Push ?tail
Load queue
Address
Load
Store queue
DelVar psema
Load r_entered
Push 1
2-ary +
Store r_entered
Push PC(1040)
Push ()
Apply
Pop
Return
Jump 1251
Frame release_rlock ()
Push ?P
Push ?mutex
Address
Load
Pop
Load r_entered
Push 1
2-ary -
Store r_entered
Push PC(1040)
Push ()
Apply
Pop
Return
Jump 1251
Frame acquire_wlock psema
Push ?P
Push ?mutex
Address
Load
Pop
Load r_entered
Load w_entered
2-ary +
Push 0
2-ary >
JumpCond False 1229
Push ?append
Push ()
Push 0
Load queue
3-ary DictAdd
Push 1
Push ()
Push 0
Push "write"
3-ary DictAdd
Push 1
LoadVar psema
3-ary DictAdd
3-ary DictAdd
Address
Load
Store queue
Push ?V
Push ?mutex
Address
Load
Pop
Push ?P
LoadVar psema
DelVar psema
Address
Load
Pop
Push ?tail
Load queue
Address
Load
Store queue
DelVar psema
Push 1
Store w_entered
Push PC(1040)
Push ()
Apply
Pop
Return
Jump 1251
Frame release_wlock ()
Push ?P
Push ?mutex
Address
Load
Pop
Push 0
Store w_entered
Push PC(1040)
Push ()
Apply
Pop
Return
Push ?Semaphore
Push 1
Address
Load
Store mutex
Push ?r_entered
Push ?w_entered
Push [0, 0]
Split 2
Move 3
Move 2
Store
Store
Push ()
Store queue
Return
DelVar result
```

Duration: 0.00158419999999998

---
##  code/RWcv.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store synch
Push ()
Store list
Jump 369
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 369
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 369
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 369
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 369
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 369
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 369
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 369
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 369
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 369
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 369
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 369
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 369
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Push ()
Store bag
Jump 1230
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1230
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s311
LoadVar $s311
1-ary IsEmpty
JumpCond True 393
Cut($s311, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 384
DelVar $s311
StoreVar result
Return
Jump 1230
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s327
LoadVar $s327
1-ary IsEmpty
JumpCond True 430
Cut($s327, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 423
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 404
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 404
DelVar $s327
Return
Jump 1230
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 456
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 460
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1230
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s391
LoadVar $s391
1-ary IsEmpty
JumpCond True 489
Cut($s391, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 478
DelVar $s391
Return
Jump 1230
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1230
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1230
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1230
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 566
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 572
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1230
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 599
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 600
Push False
JumpCond False 609
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 620
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1230
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 638
DelVar bg
DelVar k
Push {}
Push PC(372)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 723
Push PC(462)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 652
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 723
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 664
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 723
Push PC(492)
LoadVar bg
Apply
StoreVar hd
Push PC(574)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(623)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s568
LoadVar $s568
1-ary IsEmpty
JumpCond True 708
Cut($s568, x)
Push PC(537)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 692
DelVar $s568
DelVar hd
Push PC(623)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1230
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1230
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 754
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1230
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1230
Frame Lock ()
DelVar result
Push PC(759)
Push False
Apply
StoreVar result
Return
Jump 1230
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1230
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 790
Jump 793
ReadonlyDec
AtomicDec
Jump 783
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1230
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1230
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1230
Frame Condition ()
DelVar result
Push PC(372)
Push ()
Apply
StoreVar result
Return
Jump 1230
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(537)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 887
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 888
Push False
JumpCond False 893
DelVar c
DelVar cnt
DelVar ctx
Jump 896
ReadonlyDec
AtomicDec
Jump 868
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1230
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(372)
Push ()
Apply
2-ary !=
JumpCond False 929
LoadVar c
Push PC(574)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(519)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1230
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(372)
Push ()
Apply
Store
AtomicDec
Return
Jump 1230
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1230
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 960
Jump 963
ReadonlyDec
AtomicDec
Jump 952
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1230
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1230
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1230
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1002
Jump 1005
ReadonlyDec
AtomicDec
Jump 993
ReadonlyDec
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1230
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Jump 1230
Frame RWlock ()
DelVar result
Push ()
Push "nreaders"
Push 0
3-ary DictAdd
Push "nwriters"
Push 0
3-ary DictAdd
Push "mutex"
Push PC(766)
Push ()
Apply
3-ary DictAdd
Push "r_cond"
Push PC(825)
Push ()
Apply
3-ary DictAdd
Push "w_cond"
Push PC(825)
Push ()
Apply
3-ary DictAdd
StoreVar result
Return
Jump 1230
Frame read_acquire rw
Push PC(782)
LoadVar rw
Push "mutex"
Address
Apply
Pop
LoadVar rw
Push "nwriters"
Address
Load
Push 0
2-ary >
JumpCond False 1096
Push PC(833)
Push ()
Push 0
LoadVar rw
Push "r_cond"
Address
3-ary DictAdd
Push 1
LoadVar rw
Push "mutex"
Address
3-ary DictAdd
Apply
Pop
Jump 1074
LoadVar rw
Push "nreaders"
Address
Dup
Load
Push 1
2-ary +
Store
Push PC(801)
LoadVar rw
DelVar rw
Push "mutex"
Address
Apply
Pop
Return
Jump 1230
Frame read_release rw
Push PC(782)
LoadVar rw
Push "mutex"
Address
Apply
Pop
LoadVar rw
Push "nreaders"
Address
Dup
Load
Push 1
2-ary -
Store
LoadVar rw
Push "nreaders"
Address
Load
Push 0
2-ary ==
JumpCond False 1141
Push PC(904)
LoadVar rw
Push "w_cond"
Address
Apply
Pop
Push PC(801)
LoadVar rw
DelVar rw
Push "mutex"
Address
Apply
Pop
Return
Jump 1230
Frame write_acquire rw
Push PC(782)
LoadVar rw
Push "mutex"
Address
Apply
Pop
LoadVar rw
Push "nreaders"
Address
Load
LoadVar rw
Push "nwriters"
Address
Load
2-ary +
Push 0
2-ary >
JumpCond False 1184
Push PC(833)
Push ()
Push 0
LoadVar rw
Push "w_cond"
Address
3-ary DictAdd
Push 1
LoadVar rw
Push "mutex"
Address
3-ary DictAdd
Apply
Pop
Jump 1157
LoadVar rw
Push "nwriters"
Address
Push 1
Store
Push PC(801)
LoadVar rw
DelVar rw
Push "mutex"
Address
Apply
Pop
Return
Jump 1230
Frame write_release rw
Push PC(782)
LoadVar rw
Push "mutex"
Address
Apply
Pop
LoadVar rw
Push "nwriters"
Address
Push 0
Store
Push PC(933)
LoadVar rw
Push "r_cond"
Address
Apply
Pop
Push PC(904)
LoadVar rw
Push "w_cond"
Address
Apply
Pop
Push PC(801)
LoadVar rw
DelVar rw
Push "mutex"
Address
Apply
Pop
Return
Return
DelVar result
```

Duration: 0.0015721000000000207

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store synch
Push ()
Store list
Jump 369
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 369
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 369
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 369
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 369
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 369
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 369
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 369
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 369
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 369
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 369
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 369
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 369
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Push ()
Store bag
Jump 1230
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1230
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s311
LoadVar $s311
1-ary IsEmpty
JumpCond True 393
Cut($s311, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 384
DelVar $s311
StoreVar result
Return
Jump 1230
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s327
LoadVar $s327
1-ary IsEmpty
JumpCond True 430
Cut($s327, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 423
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 404
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 404
DelVar $s327
Return
Jump 1230
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 456
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 460
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1230
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s391
LoadVar $s391
1-ary IsEmpty
JumpCond True 489
Cut($s391, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 478
DelVar $s391
Return
Jump 1230
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1230
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1230
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1230
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 566
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 572
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1230
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 599
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 600
Push False
JumpCond False 609
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 620
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1230
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 638
DelVar bg
DelVar k
Push {}
Push PC(372)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 723
Push PC(462)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 652
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 723
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 664
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 723
Push PC(492)
LoadVar bg
Apply
StoreVar hd
Push PC(574)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(623)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s568
LoadVar $s568
1-ary IsEmpty
JumpCond True 708
Cut($s568, x)
Push PC(537)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 692
DelVar $s568
DelVar hd
Push PC(623)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1230
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1230
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 754
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1230
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1230
Frame Lock ()
DelVar result
Push PC(759)
Push False
Apply
StoreVar result
Return
Jump 1230
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1230
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 790
Jump 793
ReadonlyDec
AtomicDec
Jump 783
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1230
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1230
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1230
Frame Condition ()
DelVar result
Push PC(372)
Push ()
Apply
StoreVar result
Return
Jump 1230
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(537)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 887
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 888
Push False
JumpCond False 893
DelVar c
DelVar cnt
DelVar ctx
Jump 896
ReadonlyDec
AtomicDec
Jump 868
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1230
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(372)
Push ()
Apply
2-ary !=
JumpCond False 929
LoadVar c
Push PC(574)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(519)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1230
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(372)
Push ()
Apply
Store
AtomicDec
Return
Jump 1230
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1230
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 960
Jump 963
ReadonlyDec
AtomicDec
Jump 952
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1230
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1230
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1230
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1002
Jump 1005
ReadonlyDec
AtomicDec
Jump 993
ReadonlyDec
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1230
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Jump 1230
Frame RWlock ()
DelVar result
Push ()
Push "nreaders"
Push 0
3-ary DictAdd
Push "nwriters"
Push 0
3-ary DictAdd
Push "mutex"
Push PC(766)
Push ()
Apply
3-ary DictAdd
Push "r_cond"
Push PC(825)
Push ()
Apply
3-ary DictAdd
Push "w_cond"
Push PC(825)
Push ()
Apply
3-ary DictAdd
StoreVar result
Return
Jump 1230
Frame read_acquire rw
Push PC(782)
LoadVar rw
Push "mutex"
Address
Apply
Pop
LoadVar rw
Push "nwriters"
Address
Load
Push 0
2-ary >
JumpCond False 1096
Push PC(833)
Push ()
Push 0
LoadVar rw
Push "r_cond"
Address
3-ary DictAdd
Push 1
LoadVar rw
Push "mutex"
Address
3-ary DictAdd
Apply
Pop
Jump 1074
LoadVar rw
Push "nreaders"
Address
Dup
Load
Push 1
2-ary +
Store
Push PC(801)
LoadVar rw
DelVar rw
Push "mutex"
Address
Apply
Pop
Return
Jump 1230
Frame read_release rw
Push PC(782)
LoadVar rw
Push "mutex"
Address
Apply
Pop
LoadVar rw
Push "nreaders"
Address
Dup
Load
Push 1
2-ary -
Store
LoadVar rw
Push "nreaders"
Address
Load
Push 0
2-ary ==
JumpCond False 1141
Push PC(904)
LoadVar rw
Push "w_cond"
Address
Apply
Pop
Push PC(801)
LoadVar rw
DelVar rw
Push "mutex"
Address
Apply
Pop
Return
Jump 1230
Frame write_acquire rw
Push PC(782)
LoadVar rw
Push "mutex"
Address
Apply
Pop
LoadVar rw
Push "nreaders"
Address
Load
LoadVar rw
Push "nwriters"
Address
Load
2-ary +
Push 0
2-ary >
JumpCond False 1184
Push PC(833)
Push ()
Push 0
LoadVar rw
Push "w_cond"
Address
3-ary DictAdd
Push 1
LoadVar rw
Push "mutex"
Address
3-ary DictAdd
Apply
Pop
Jump 1157
LoadVar rw
Push "nwriters"
Address
Push 1
Store
Push PC(801)
LoadVar rw
DelVar rw
Push "mutex"
Address
Apply
Pop
Return
Jump 1230
Frame write_release rw
Push PC(782)
LoadVar rw
Push "mutex"
Address
Apply
Pop
LoadVar rw
Push "nwriters"
Address
Push 0
Store
Push PC(933)
LoadVar rw
Push "r_cond"
Address
Apply
Pop
Push PC(904)
LoadVar rw
Push "w_cond"
Address
Apply
Pop
Push PC(801)
LoadVar rw
DelVar rw
Push "mutex"
Address
Apply
Pop
Return
Return
DelVar result
```

Duration: 0.0015547999999999673

---
##  code/2pc.hny

### Summary

Duration is good: ✅

Output is good: ❌

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Cannot operate on constant ('balance', 'code/2pc.hny', 20, 21) ErrorToken(line=20, message="Cannot operate on constant ('balance', 'code/2pc.hny', 20, 21)", column=29, lexeme='-=', filename='code/2pc.hny', is_eof_error=False)
```

Duration: 0.0014612999999999987

### Current Output

```
Phase 1: compile Harmony program to bytecode
Line 20:29 at code/2pc.hny, Cannot operate on constant ('balance', 'code/2pc.hny', 20, 21)
```

Duration: 0.0017117999999999856

---
##  code/queueconc.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store synch
Push ()
Store list
Jump 369
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 369
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 369
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 369
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 369
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 369
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 369
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 369
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 369
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 369
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 369
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 369
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 369
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Push ()
Store bag
Jump 1039
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1039
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s311
LoadVar $s311
1-ary IsEmpty
JumpCond True 393
Cut($s311, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 384
DelVar $s311
StoreVar result
Return
Jump 1039
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s327
LoadVar $s327
1-ary IsEmpty
JumpCond True 430
Cut($s327, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 423
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 404
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 404
DelVar $s327
Return
Jump 1039
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 456
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 460
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1039
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s391
LoadVar $s391
1-ary IsEmpty
JumpCond True 489
Cut($s391, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 478
DelVar $s391
Return
Jump 1039
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1039
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1039
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1039
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 566
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 572
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1039
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 599
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 600
Push False
JumpCond False 609
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 620
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1039
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 638
DelVar bg
DelVar k
Push {}
Push PC(372)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 723
Push PC(462)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 652
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 723
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 664
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 723
Push PC(492)
LoadVar bg
Apply
StoreVar hd
Push PC(574)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(623)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s568
LoadVar $s568
1-ary IsEmpty
JumpCond True 708
Cut($s568, x)
Push PC(537)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 692
DelVar $s568
DelVar hd
Push PC(623)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1039
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1039
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 754
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1039
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1039
Frame Lock ()
DelVar result
Push PC(759)
Push False
Apply
StoreVar result
Return
Jump 1039
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1039
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 790
Jump 793
ReadonlyDec
AtomicDec
Jump 783
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1039
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1039
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1039
Frame Condition ()
DelVar result
Push PC(372)
Push ()
Apply
StoreVar result
Return
Jump 1039
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(537)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 887
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 888
Push False
JumpCond False 893
DelVar c
DelVar cnt
DelVar ctx
Jump 896
ReadonlyDec
AtomicDec
Jump 868
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1039
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(372)
Push ()
Apply
2-ary !=
JumpCond False 929
LoadVar c
Push PC(574)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(519)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1039
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(372)
Push ()
Apply
Store
AtomicDec
Return
Jump 1039
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1039
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 960
Jump 963
ReadonlyDec
AtomicDec
Jump 952
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1039
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1039
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1039
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1002
Jump 1005
ReadonlyDec
AtomicDec
Jump 993
ReadonlyDec
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1039
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Push ()
Store alloc
Push ()
Store alloc.pool
Push 0
Store alloc.next
Jump 1227
Frame malloc v
DelVar result
AtomicInc(lazy)
Push ?alloc"pool"
Load alloc.next
Address
LoadVar v
DelVar v
Store
Push ?alloc"pool"
Load alloc.next
Address
StoreVar result
Load alloc.next
Push 1
2-ary +
Store alloc.next
AtomicDec
Return
Jump 1227
Frame free r
AtomicInc(lazy)
LoadVar r
DelVar r
Del
AtomicDec
Return
Jump 1227
Frame leak_check ()
ReadonlyInc
AtomicInc(lazy)
Load alloc.pool
Push ()
2-ary ==
Push "alloc_leak"
Assert2
AtomicDec
ReadonlyDec
Return
Jump 1227
Frame Queue ()
DelVar result
Push ()
Push "head"
Push None
3-ary DictAdd
Push "tail"
Push None
3-ary DictAdd
Push "lock"
Push PC(766)
Push ()
Apply
3-ary DictAdd
Push "time"
Push 0
3-ary DictAdd
StoreVar result
Return
Jump 1227
Frame put (q, v)
Push PC(1046)
Push ()
Push "value"
LoadVar v
DelVar v
3-ary DictAdd
Push "next"
Push None
3-ary DictAdd
Apply
StoreVar node
Push PC(782)
LoadVar q
Push "lock"
Address
Apply
Pop
LoadVar q
Push "tail"
Address
Load
Push None
2-ary ==
JumpCond False 1145
LoadVar q
Push "tail"
Address
LoadVar q
Push "head"
Address
LoadVar node
DelVar node
Dup
Move 3
Move 2
Store
Store
Jump 1159
LoadVar q
Push "tail"
Address
Load
Push "next"
Address
LoadVar node
Store
LoadVar q
Push "tail"
Address
LoadVar node
DelVar node
Store
Push PC(801)
LoadVar q
DelVar q
Push "lock"
Address
Apply
Pop
Return
Jump 1227
Frame get q
DelVar result
Push PC(782)
LoadVar q
Push "lock"
Address
Apply
Pop
LoadVar q
Push "head"
Address
Load
StoreVar node
LoadVar node
Push None
2-ary ==
JumpCond False 1189
DelVar node
Push None
StoreVar result
Jump 1219
LoadVar node
Push "value"
Address
Load
StoreVar result
LoadVar q
Push "head"
Address
LoadVar node
Push "next"
Address
Load
Store
LoadVar q
Push "head"
Address
Load
Push None
2-ary ==
JumpCond False 1214
LoadVar q
Push "tail"
Address
Push None
Store
Push PC(1066)
LoadVar node
DelVar node
Apply
Pop
Push PC(801)
LoadVar q
DelVar q
Push "lock"
Address
Apply
Pop
Return
Return
DelVar result
```

Duration: 0.0013560999999999712

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store synch
Push ()
Store list
Jump 369
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 369
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 369
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 369
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 369
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 369
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 369
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 369
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 369
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 369
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 369
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 369
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 369
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Push ()
Store bag
Jump 1039
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1039
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s311
LoadVar $s311
1-ary IsEmpty
JumpCond True 393
Cut($s311, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 384
DelVar $s311
StoreVar result
Return
Jump 1039
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s327
LoadVar $s327
1-ary IsEmpty
JumpCond True 430
Cut($s327, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 423
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 404
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 404
DelVar $s327
Return
Jump 1039
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 456
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 460
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1039
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s391
LoadVar $s391
1-ary IsEmpty
JumpCond True 489
Cut($s391, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 478
DelVar $s391
Return
Jump 1039
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1039
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1039
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1039
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 566
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 572
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1039
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 599
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 600
Push False
JumpCond False 609
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 620
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1039
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 638
DelVar bg
DelVar k
Push {}
Push PC(372)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 723
Push PC(462)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 652
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 723
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 664
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 723
Push PC(492)
LoadVar bg
Apply
StoreVar hd
Push PC(574)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(623)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s568
LoadVar $s568
1-ary IsEmpty
JumpCond True 708
Cut($s568, x)
Push PC(537)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 692
DelVar $s568
DelVar hd
Push PC(623)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1039
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1039
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 754
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1039
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1039
Frame Lock ()
DelVar result
Push PC(759)
Push False
Apply
StoreVar result
Return
Jump 1039
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1039
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 790
Jump 793
ReadonlyDec
AtomicDec
Jump 783
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1039
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1039
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1039
Frame Condition ()
DelVar result
Push PC(372)
Push ()
Apply
StoreVar result
Return
Jump 1039
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(537)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 887
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 888
Push False
JumpCond False 893
DelVar c
DelVar cnt
DelVar ctx
Jump 896
ReadonlyDec
AtomicDec
Jump 868
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1039
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(372)
Push ()
Apply
2-ary !=
JumpCond False 929
LoadVar c
Push PC(574)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(519)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1039
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(372)
Push ()
Apply
Store
AtomicDec
Return
Jump 1039
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1039
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 960
Jump 963
ReadonlyDec
AtomicDec
Jump 952
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1039
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1039
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1039
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1002
Jump 1005
ReadonlyDec
AtomicDec
Jump 993
ReadonlyDec
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1039
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Push ()
Store alloc
Push ()
Store alloc.pool
Push 0
Store alloc.next
Jump 1227
Frame malloc v
DelVar result
AtomicInc(lazy)
Push ?alloc"pool"
Load alloc.next
Address
LoadVar v
DelVar v
Store
Push ?alloc"pool"
Load alloc.next
Address
StoreVar result
Load alloc.next
Push 1
2-ary +
Store alloc.next
AtomicDec
Return
Jump 1227
Frame free r
AtomicInc(lazy)
LoadVar r
DelVar r
Del
AtomicDec
Return
Jump 1227
Frame leak_check ()
ReadonlyInc
AtomicInc(lazy)
Load alloc.pool
Push ()
2-ary ==
Push "alloc_leak"
Assert2
AtomicDec
ReadonlyDec
Return
Jump 1227
Frame Queue ()
DelVar result
Push ()
Push "head"
Push None
3-ary DictAdd
Push "tail"
Push None
3-ary DictAdd
Push "lock"
Push PC(766)
Push ()
Apply
3-ary DictAdd
Push "time"
Push 0
3-ary DictAdd
StoreVar result
Return
Jump 1227
Frame put (q, v)
Push PC(1046)
Push ()
Push "value"
LoadVar v
DelVar v
3-ary DictAdd
Push "next"
Push None
3-ary DictAdd
Apply
StoreVar node
Push PC(782)
LoadVar q
Push "lock"
Address
Apply
Pop
LoadVar q
Push "tail"
Address
Load
Push None
2-ary ==
JumpCond False 1145
LoadVar q
Push "tail"
Address
LoadVar q
Push "head"
Address
LoadVar node
DelVar node
Dup
Move 3
Move 2
Store
Store
Jump 1159
LoadVar q
Push "tail"
Address
Load
Push "next"
Address
LoadVar node
Store
LoadVar q
Push "tail"
Address
LoadVar node
DelVar node
Store
Push PC(801)
LoadVar q
DelVar q
Push "lock"
Address
Apply
Pop
Return
Jump 1227
Frame get q
DelVar result
Push PC(782)
LoadVar q
Push "lock"
Address
Apply
Pop
LoadVar q
Push "head"
Address
Load
StoreVar node
LoadVar node
Push None
2-ary ==
JumpCond False 1189
DelVar node
Push None
StoreVar result
Jump 1219
LoadVar node
Push "value"
Address
Load
StoreVar result
LoadVar q
Push "head"
Address
LoadVar node
Push "next"
Address
Load
Store
LoadVar q
Push "head"
Address
Load
Push None
2-ary ==
JumpCond False 1214
LoadVar q
Push "tail"
Address
Push None
Store
Push PC(1066)
LoadVar node
DelVar node
Apply
Pop
Push PC(801)
LoadVar q
DelVar q
Push "lock"
Address
Apply
Pop
Return
Return
DelVar result
```

Duration: 0.0015422999999999965

---
##  code/queuelin.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store synch
Push ()
Store list
Jump 369
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 369
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 369
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 369
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 369
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 369
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 369
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 369
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 369
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 369
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 369
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 369
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 369
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Push ()
Store bag
Jump 1039
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1039
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s311
LoadVar $s311
1-ary IsEmpty
JumpCond True 393
Cut($s311, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 384
DelVar $s311
StoreVar result
Return
Jump 1039
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s327
LoadVar $s327
1-ary IsEmpty
JumpCond True 430
Cut($s327, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 423
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 404
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 404
DelVar $s327
Return
Jump 1039
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 456
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 460
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1039
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s391
LoadVar $s391
1-ary IsEmpty
JumpCond True 489
Cut($s391, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 478
DelVar $s391
Return
Jump 1039
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1039
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1039
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1039
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 566
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 572
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1039
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 599
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 600
Push False
JumpCond False 609
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 620
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1039
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 638
DelVar bg
DelVar k
Push {}
Push PC(372)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 723
Push PC(462)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 652
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 723
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 664
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 723
Push PC(492)
LoadVar bg
Apply
StoreVar hd
Push PC(574)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(623)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s568
LoadVar $s568
1-ary IsEmpty
JumpCond True 708
Cut($s568, x)
Push PC(537)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 692
DelVar $s568
DelVar hd
Push PC(623)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1039
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1039
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 754
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1039
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1039
Frame Lock ()
DelVar result
Push PC(759)
Push False
Apply
StoreVar result
Return
Jump 1039
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1039
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 790
Jump 793
ReadonlyDec
AtomicDec
Jump 783
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1039
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1039
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1039
Frame Condition ()
DelVar result
Push PC(372)
Push ()
Apply
StoreVar result
Return
Jump 1039
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(537)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 887
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 888
Push False
JumpCond False 893
DelVar c
DelVar cnt
DelVar ctx
Jump 896
ReadonlyDec
AtomicDec
Jump 868
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1039
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(372)
Push ()
Apply
2-ary !=
JumpCond False 929
LoadVar c
Push PC(574)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(519)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1039
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(372)
Push ()
Apply
Store
AtomicDec
Return
Jump 1039
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1039
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 960
Jump 963
ReadonlyDec
AtomicDec
Jump 952
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1039
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1039
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1039
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1002
Jump 1005
ReadonlyDec
AtomicDec
Jump 993
ReadonlyDec
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1039
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Push ()
Store alloc
Push ()
Store alloc.pool
Push 0
Store alloc.next
Jump 1257
Frame malloc v
DelVar result
AtomicInc(lazy)
Push ?alloc"pool"
Load alloc.next
Address
LoadVar v
DelVar v
Store
Push ?alloc"pool"
Load alloc.next
Address
StoreVar result
Load alloc.next
Push 1
2-ary +
Store alloc.next
AtomicDec
Return
Jump 1257
Frame free r
AtomicInc(lazy)
LoadVar r
DelVar r
Del
AtomicDec
Return
Jump 1257
Frame leak_check ()
ReadonlyInc
AtomicInc(lazy)
Load alloc.pool
Push ()
2-ary ==
Push "alloc_leak"
Assert2
AtomicDec
ReadonlyDec
Return
Jump 1257
Frame Queue ()
DelVar result
Push ()
Push "head"
Push None
3-ary DictAdd
Push "tail"
Push None
3-ary DictAdd
Push "lock"
Push PC(766)
Push ()
Apply
3-ary DictAdd
Push "time"
Push 0
3-ary DictAdd
StoreVar result
Return
Jump 1257
Frame _linpoint q
AtomicInc(lazy)
Push ?this
Push "qtime"
Address
LoadVar q
Push "time"
Address
Load
StoreVar [this]
LoadVar q
DelVar q
Push "time"
Address
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1257
Frame put (q, v)
Push PC(1046)
Push ()
Push "value"
LoadVar v
DelVar v
3-ary DictAdd
Push "next"
Push None
3-ary DictAdd
Apply
StoreVar node
Push PC(782)
LoadVar q
Push "lock"
Address
Apply
Pop
LoadVar q
Push "tail"
Address
Load
Push None
2-ary ==
JumpCond False 1167
LoadVar q
Push "tail"
Address
LoadVar q
Push "head"
Address
LoadVar node
DelVar node
Dup
Move 3
Move 2
Store
Store
Jump 1181
LoadVar q
Push "tail"
Address
Load
Push "next"
Address
LoadVar node
Store
LoadVar q
Push "tail"
Address
LoadVar node
DelVar node
Store
Push PC(1106)
LoadVar q
Apply
Pop
Push PC(801)
LoadVar q
DelVar q
Push "lock"
Address
Apply
Pop
Return
Jump 1257
Frame get q
DelVar result
Push PC(782)
LoadVar q
Push "lock"
Address
Apply
Pop
LoadVar q
Push "head"
Address
Load
StoreVar node
LoadVar node
Push None
2-ary ==
JumpCond False 1215
DelVar node
Push None
StoreVar result
Jump 1245
LoadVar node
Push "value"
Address
Load
StoreVar result
LoadVar q
Push "head"
Address
LoadVar node
Push "next"
Address
Load
Store
LoadVar q
Push "head"
Address
Load
Push None
2-ary ==
JumpCond False 1240
LoadVar q
Push "tail"
Address
Push None
Store
Push PC(1066)
LoadVar node
DelVar node
Apply
Pop
Push PC(1106)
LoadVar q
Apply
Pop
Push PC(801)
LoadVar q
DelVar q
Push "lock"
Address
Apply
Pop
Return
Return
DelVar result
```

Duration: 0.001547400000000032

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store synch
Push ()
Store list
Jump 369
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 369
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 369
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 369
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 369
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 369
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 369
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 369
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 369
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 369
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 369
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 369
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 369
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Push ()
Store bag
Jump 1039
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1039
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s311
LoadVar $s311
1-ary IsEmpty
JumpCond True 393
Cut($s311, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 384
DelVar $s311
StoreVar result
Return
Jump 1039
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s327
LoadVar $s327
1-ary IsEmpty
JumpCond True 430
Cut($s327, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 423
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 404
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 404
DelVar $s327
Return
Jump 1039
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 456
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 460
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1039
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s391
LoadVar $s391
1-ary IsEmpty
JumpCond True 489
Cut($s391, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 478
DelVar $s391
Return
Jump 1039
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1039
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1039
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1039
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 566
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 572
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1039
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 599
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 600
Push False
JumpCond False 609
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 620
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1039
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 638
DelVar bg
DelVar k
Push {}
Push PC(372)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 723
Push PC(462)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 652
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 723
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 664
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 723
Push PC(492)
LoadVar bg
Apply
StoreVar hd
Push PC(574)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(623)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s568
LoadVar $s568
1-ary IsEmpty
JumpCond True 708
Cut($s568, x)
Push PC(537)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 692
DelVar $s568
DelVar hd
Push PC(623)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1039
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1039
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 754
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1039
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1039
Frame Lock ()
DelVar result
Push PC(759)
Push False
Apply
StoreVar result
Return
Jump 1039
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1039
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 790
Jump 793
ReadonlyDec
AtomicDec
Jump 783
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1039
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1039
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1039
Frame Condition ()
DelVar result
Push PC(372)
Push ()
Apply
StoreVar result
Return
Jump 1039
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(537)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 887
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 888
Push False
JumpCond False 893
DelVar c
DelVar cnt
DelVar ctx
Jump 896
ReadonlyDec
AtomicDec
Jump 868
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1039
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(372)
Push ()
Apply
2-ary !=
JumpCond False 929
LoadVar c
Push PC(574)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(519)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1039
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(372)
Push ()
Apply
Store
AtomicDec
Return
Jump 1039
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1039
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 960
Jump 963
ReadonlyDec
AtomicDec
Jump 952
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1039
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1039
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1039
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1002
Jump 1005
ReadonlyDec
AtomicDec
Jump 993
ReadonlyDec
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1039
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Push ()
Store alloc
Push ()
Store alloc.pool
Push 0
Store alloc.next
Jump 1257
Frame malloc v
DelVar result
AtomicInc(lazy)
Push ?alloc"pool"
Load alloc.next
Address
LoadVar v
DelVar v
Store
Push ?alloc"pool"
Load alloc.next
Address
StoreVar result
Load alloc.next
Push 1
2-ary +
Store alloc.next
AtomicDec
Return
Jump 1257
Frame free r
AtomicInc(lazy)
LoadVar r
DelVar r
Del
AtomicDec
Return
Jump 1257
Frame leak_check ()
ReadonlyInc
AtomicInc(lazy)
Load alloc.pool
Push ()
2-ary ==
Push "alloc_leak"
Assert2
AtomicDec
ReadonlyDec
Return
Jump 1257
Frame Queue ()
DelVar result
Push ()
Push "head"
Push None
3-ary DictAdd
Push "tail"
Push None
3-ary DictAdd
Push "lock"
Push PC(766)
Push ()
Apply
3-ary DictAdd
Push "time"
Push 0
3-ary DictAdd
StoreVar result
Return
Jump 1257
Frame _linpoint q
AtomicInc(lazy)
Push ?this
Push "qtime"
Address
LoadVar q
Push "time"
Address
Load
StoreVar [this]
LoadVar q
DelVar q
Push "time"
Address
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1257
Frame put (q, v)
Push PC(1046)
Push ()
Push "value"
LoadVar v
DelVar v
3-ary DictAdd
Push "next"
Push None
3-ary DictAdd
Apply
StoreVar node
Push PC(782)
LoadVar q
Push "lock"
Address
Apply
Pop
LoadVar q
Push "tail"
Address
Load
Push None
2-ary ==
JumpCond False 1167
LoadVar q
Push "tail"
Address
LoadVar q
Push "head"
Address
LoadVar node
DelVar node
Dup
Move 3
Move 2
Store
Store
Jump 1181
LoadVar q
Push "tail"
Address
Load
Push "next"
Address
LoadVar node
Store
LoadVar q
Push "tail"
Address
LoadVar node
DelVar node
Store
Push PC(1106)
LoadVar q
Apply
Pop
Push PC(801)
LoadVar q
DelVar q
Push "lock"
Address
Apply
Pop
Return
Jump 1257
Frame get q
DelVar result
Push PC(782)
LoadVar q
Push "lock"
Address
Apply
Pop
LoadVar q
Push "head"
Address
Load
StoreVar node
LoadVar node
Push None
2-ary ==
JumpCond False 1215
DelVar node
Push None
StoreVar result
Jump 1245
LoadVar node
Push "value"
Address
Load
StoreVar result
LoadVar q
Push "head"
Address
LoadVar node
Push "next"
Address
Load
Store
LoadVar q
Push "head"
Address
Load
Push None
2-ary ==
JumpCond False 1240
LoadVar q
Push "tail"
Address
Push None
Store
Push PC(1066)
LoadVar node
DelVar node
Apply
Pop
Push PC(1106)
LoadVar q
Apply
Pop
Push PC(801)
LoadVar q
DelVar q
Push "lock"
Address
Apply
Pop
Return
Return
DelVar result
```

Duration: 0.0014683999999999808

---
##  code/lockspec.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Jump 42
Frame Lock ()
DelVar result
Push False
StoreVar result
Return
Jump 42
Frame acquire lk
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 16
Jump 19
ReadonlyDec
AtomicDec
Jump 9
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 42
Frame release lk
ReadonlyInc
AtomicInc(lazy)
LoadVar lk
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar lk
DelVar lk
Push False
Store
AtomicDec
Return
Return
DelVar result
```

Duration: 0.0014645999999999826

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Jump 42
Frame Lock ()
DelVar result
Push False
StoreVar result
Return
Jump 42
Frame acquire lk
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 16
Jump 19
ReadonlyDec
AtomicDec
Jump 9
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 42
Frame release lk
ReadonlyInc
AtomicInc(lazy)
LoadVar lk
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar lk
DelVar lk
Push False
Store
AtomicDec
Return
Return
DelVar result
```

Duration: 0.0016456999999999722

---
##  code/ky2.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push [[1, 2], [3, 4], [5, 6], [1, 11], [12, 13], [14, 15], [16, 2]]
Store transitions
Push 0
Store x
Load x
Push 11
2-ary <
JumpCond False 18
Push ?transitions
Load x
Address
Push { 0, 1 }
Choose
Address
Load
Store x
Jump 5
Return
DelVar result
```

Duration: 0.0015360999999999847

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push [[1, 2], [3, 4], [5, 6], [1, 11], [12, 13], [14, 15], [16, 2]]
Store transitions
Push 0
Store x
Load x
Push 11
2-ary <
JumpCond False 18
Push ?transitions
Load x
Address
Push { 0, 1 }
Choose
Address
Load
Store x
Jump 5
Return
DelVar result
```

Duration: 0.001309799999999972

---
##  code/cslock.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store synch
Push ()
Store list
Jump 369
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 369
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 369
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 369
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 369
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 369
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 369
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 369
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 369
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 369
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 369
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 369
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 369
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Push ()
Store bag
Jump 1039
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1039
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s311
LoadVar $s311
1-ary IsEmpty
JumpCond True 393
Cut($s311, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 384
DelVar $s311
StoreVar result
Return
Jump 1039
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s327
LoadVar $s327
1-ary IsEmpty
JumpCond True 430
Cut($s327, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 423
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 404
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 404
DelVar $s327
Return
Jump 1039
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 456
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 460
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1039
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s391
LoadVar $s391
1-ary IsEmpty
JumpCond True 489
Cut($s391, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 478
DelVar $s391
Return
Jump 1039
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1039
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1039
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1039
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 566
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 572
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1039
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 599
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 600
Push False
JumpCond False 609
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 620
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1039
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 638
DelVar bg
DelVar k
Push {}
Push PC(372)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 723
Push PC(462)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 652
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 723
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 664
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 723
Push PC(492)
LoadVar bg
Apply
StoreVar hd
Push PC(574)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(623)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s568
LoadVar $s568
1-ary IsEmpty
JumpCond True 708
Cut($s568, x)
Push PC(537)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 692
DelVar $s568
DelVar hd
Push PC(623)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1039
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1039
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 754
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1039
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1039
Frame Lock ()
DelVar result
Push PC(759)
Push False
Apply
StoreVar result
Return
Jump 1039
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1039
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 790
Jump 793
ReadonlyDec
AtomicDec
Jump 783
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1039
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1039
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1039
Frame Condition ()
DelVar result
Push PC(372)
Push ()
Apply
StoreVar result
Return
Jump 1039
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(537)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 887
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 888
Push False
JumpCond False 893
DelVar c
DelVar cnt
DelVar ctx
Jump 896
ReadonlyDec
AtomicDec
Jump 868
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1039
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(372)
Push ()
Apply
2-ary !=
JumpCond False 929
LoadVar c
Push PC(574)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(519)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1039
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(372)
Push ()
Apply
Store
AtomicDec
Return
Jump 1039
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1039
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 960
Jump 963
ReadonlyDec
AtomicDec
Jump 952
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1039
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1039
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1039
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1002
Jump 1005
ReadonlyDec
AtomicDec
Jump 993
ReadonlyDec
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1039
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Push PC(766)
Push ()
Apply
Store lock
Push 0
Store count
Invariant 1062
Push 0
Load count
Dup
StoreVar __cmp__895
2-ary <=
Dup
JumpCond False 1058
Pop
LoadVar __cmp__895
DelVar __cmp__895
Push 1
2-ary <=
DelVar __cmp__895
DelVar __cmp__895
DelVar __cmp__895
Continue
Return
Jump 1094
Frame thread ()
Push PC(782)
Push ?lock
Apply
Pop
AtomicInc(lazy)
Load count
Push 1
2-ary +
Store count
AtomicDec
ReadonlyInc
AtomicInc(lazy)
Load count
Push 1
2-ary ==
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
Load count
Push 1
2-ary -
Store count
AtomicDec
Push PC(801)
Push ?lock
Apply
Pop
Return
Push { 1, 2, 3, 4, 5 }
StoreVar $s939
LoadVar $s939
1-ary IsEmpty
JumpCond True 1106
Cut($s939, i)
DelVar i
Push PC(1064)
Push ()
Push ()
Spawn
Jump 1096
DelVar $s939
Return
DelVar result
```

Duration: 0.0018076000000000203

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store synch
Push ()
Store list
Jump 369
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 369
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 369
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 369
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 369
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 369
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 369
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 369
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 369
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 369
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 369
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 369
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 369
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Push ()
Store bag
Jump 1039
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1039
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s311
LoadVar $s311
1-ary IsEmpty
JumpCond True 393
Cut($s311, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 384
DelVar $s311
StoreVar result
Return
Jump 1039
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s327
LoadVar $s327
1-ary IsEmpty
JumpCond True 430
Cut($s327, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 423
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 404
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 404
DelVar $s327
Return
Jump 1039
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 456
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 460
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1039
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s391
LoadVar $s391
1-ary IsEmpty
JumpCond True 489
Cut($s391, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 478
DelVar $s391
Return
Jump 1039
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1039
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1039
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1039
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 566
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 572
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1039
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 599
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 600
Push False
JumpCond False 609
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 620
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1039
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 638
DelVar bg
DelVar k
Push {}
Push PC(372)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 723
Push PC(462)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 652
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 723
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 664
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 723
Push PC(492)
LoadVar bg
Apply
StoreVar hd
Push PC(574)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(623)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s568
LoadVar $s568
1-ary IsEmpty
JumpCond True 708
Cut($s568, x)
Push PC(537)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 692
DelVar $s568
DelVar hd
Push PC(623)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1039
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1039
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 754
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1039
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1039
Frame Lock ()
DelVar result
Push PC(759)
Push False
Apply
StoreVar result
Return
Jump 1039
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1039
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 790
Jump 793
ReadonlyDec
AtomicDec
Jump 783
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1039
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1039
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1039
Frame Condition ()
DelVar result
Push PC(372)
Push ()
Apply
StoreVar result
Return
Jump 1039
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(537)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 887
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 888
Push False
JumpCond False 893
DelVar c
DelVar cnt
DelVar ctx
Jump 896
ReadonlyDec
AtomicDec
Jump 868
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1039
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(372)
Push ()
Apply
2-ary !=
JumpCond False 929
LoadVar c
Push PC(574)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(519)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1039
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(372)
Push ()
Apply
Store
AtomicDec
Return
Jump 1039
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1039
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 960
Jump 963
ReadonlyDec
AtomicDec
Jump 952
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1039
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1039
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1039
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1002
Jump 1005
ReadonlyDec
AtomicDec
Jump 993
ReadonlyDec
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1039
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Push PC(766)
Push ()
Apply
Store lock
Push 0
Store count
Invariant 1062
Push 0
Load count
Dup
StoreVar __cmp__895
2-ary <=
Dup
JumpCond False 1058
Pop
LoadVar __cmp__895
DelVar __cmp__895
Push 1
2-ary <=
DelVar __cmp__895
DelVar __cmp__895
DelVar __cmp__895
Continue
Return
Jump 1094
Frame thread ()
Push PC(782)
Push ?lock
Apply
Pop
AtomicInc(lazy)
Load count
Push 1
2-ary +
Store count
AtomicDec
ReadonlyInc
AtomicInc(lazy)
Load count
Push 1
2-ary ==
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
Load count
Push 1
2-ary -
Store count
AtomicDec
Push PC(801)
Push ?lock
Apply
Pop
Return
Push { 1, 2, 3, 4, 5 }
StoreVar $s939
LoadVar $s939
1-ary IsEmpty
JumpCond True 1106
Cut($s939, i)
DelVar i
Push PC(1064)
Push ()
Push ()
Spawn
Jump 1096
DelVar $s939
Return
DelVar result
```

Duration: 0.0022707000000000144

---
##  code/abp.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ?s_chan
Sequential
Push ?r_chan
Sequential
Push ()
Dup
Store r_chan
Store s_chan
Push 0
Dup
Store r_seq
Store s_seq
Jump 150
Frame net_send (pchan, m, reliable)
LoadVar pchan
DelVar pchan
LoadVar reliable
DelVar reliable
JumpCond True 23
Push { False, True }
Choose
Jump 24
Push True
JumpCond False 28
LoadVar m
DelVar m
Jump 30
DelVar m
Push ()
Store
Return
Jump 150
Frame net_recv pchan
DelVar result
LoadVar pchan
DelVar pchan
Load
StoreVar result
Return
Jump 150
Frame app_send payload
Push 1
Load s_seq
2-ary -
Store s_seq
Push ()
Push "seq"
Load s_seq
3-ary DictAdd
Push "payload"
LoadVar payload
DelVar payload
3-ary DictAdd
StoreVar m
Push True
StoreVar blocked
LoadVar blocked
DelVar blocked
JumpCond False 92
Push PC(14)
Push ()
Push 0
Push ?s_chan
3-ary DictAdd
Push 1
LoadVar m
3-ary DictAdd
Push 2
Push False
3-ary DictAdd
Apply
Pop
Push PC(33)
Push ?r_chan
Apply
StoreVar response
LoadVar response
Push ()
2-ary ==
JumpCond True 88
LoadVar response
DelVar response
Push "ack"
Apply
Load s_seq
2-ary !=
Jump 90
DelVar response
Push True
StoreVar blocked
Jump 57
DelVar m
Return
Jump 150
Frame app_recv reliable
Push 1
Load r_seq
2-ary -
Store r_seq
Push True
StoreVar blocked
LoadVar blocked
JumpCond False 147
Push PC(33)
Push ?s_chan
Apply
StoreVar m
LoadVar m
Push ()
2-ary !=
JumpCond False 145
Push PC(14)
Push ()
Push 0
Push ?r_chan
3-ary DictAdd
Push 1
Push ()
Push "ack"
LoadVar m
Push "seq"
Apply
3-ary DictAdd
3-ary DictAdd
Push 2
LoadVar reliable
3-ary DictAdd
Apply
Pop
LoadVar m
Push "seq"
Apply
Load r_seq
2-ary ==
JumpCond False 145
DelVar blocked
DelVar result
LoadVar m
DelVar m
Push "payload"
Apply
StoreVar result
Push False
StoreVar blocked
DelVar m
Jump 102
DelVar blocked
DelVar reliable
Return
Return
DelVar result
```

Duration: 0.0017612000000000183

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ?s_chan
Sequential
Push ?r_chan
Sequential
Push ()
Dup
Store r_chan
Store s_chan
Push 0
Dup
Store r_seq
Store s_seq
Jump 150
Frame net_send (pchan, m, reliable)
LoadVar pchan
DelVar pchan
LoadVar reliable
DelVar reliable
JumpCond True 23
Push { False, True }
Choose
Jump 24
Push True
JumpCond False 28
LoadVar m
DelVar m
Jump 30
DelVar m
Push ()
Store
Return
Jump 150
Frame net_recv pchan
DelVar result
LoadVar pchan
DelVar pchan
Load
StoreVar result
Return
Jump 150
Frame app_send payload
Push 1
Load s_seq
2-ary -
Store s_seq
Push ()
Push "seq"
Load s_seq
3-ary DictAdd
Push "payload"
LoadVar payload
DelVar payload
3-ary DictAdd
StoreVar m
Push True
StoreVar blocked
LoadVar blocked
DelVar blocked
JumpCond False 92
Push PC(14)
Push ()
Push 0
Push ?s_chan
3-ary DictAdd
Push 1
LoadVar m
3-ary DictAdd
Push 2
Push False
3-ary DictAdd
Apply
Pop
Push PC(33)
Push ?r_chan
Apply
StoreVar response
LoadVar response
Push ()
2-ary ==
JumpCond True 88
LoadVar response
DelVar response
Push "ack"
Apply
Load s_seq
2-ary !=
Jump 90
DelVar response
Push True
StoreVar blocked
Jump 57
DelVar m
Return
Jump 150
Frame app_recv reliable
Push 1
Load r_seq
2-ary -
Store r_seq
Push True
StoreVar blocked
LoadVar blocked
JumpCond False 147
Push PC(33)
Push ?s_chan
Apply
StoreVar m
LoadVar m
Push ()
2-ary !=
JumpCond False 145
Push PC(14)
Push ()
Push 0
Push ?r_chan
3-ary DictAdd
Push 1
Push ()
Push "ack"
LoadVar m
Push "seq"
Apply
3-ary DictAdd
3-ary DictAdd
Push 2
LoadVar reliable
3-ary DictAdd
Apply
Pop
LoadVar m
Push "seq"
Apply
Load r_seq
2-ary ==
JumpCond False 145
DelVar blocked
DelVar result
LoadVar m
DelVar m
Push "payload"
Apply
StoreVar result
Push False
StoreVar blocked
DelVar m
Jump 102
DelVar blocked
DelVar reliable
Return
Return
DelVar result
```

Duration: 0.0014879999999999893

---
##  code/hello9.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push False
Store x
Jump 27
Frame f ()
Push "hello"
Print
AtomicInc(lazy)
Push True
Store x
AtomicDec
Return
Jump 27
Frame g ()
AtomicInc(lazy)
ReadonlyInc
Load x
JumpCond False 19
Jump 22
ReadonlyDec
AtomicDec
Jump 14
ReadonlyDec
Push "world"
Print
AtomicDec
Return
Push PC(4)
Push ()
Push ()
Spawn
Push PC(13)
Push ()
Push ()
Spawn
Return
DelVar result
```

Duration: 0.001688999999999996

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push False
Store x
Jump 27
Frame f ()
Push "hello"
Print
AtomicInc(lazy)
Push True
Store x
AtomicDec
Return
Jump 27
Frame g ()
AtomicInc(lazy)
ReadonlyInc
Load x
JumpCond False 19
Jump 22
ReadonlyDec
AtomicDec
Jump 14
ReadonlyDec
Push "world"
Print
AtomicDec
Return
Push PC(4)
Push ()
Push ()
Spawn
Push PC(13)
Push ()
Push ()
Spawn
Return
DelVar result
```

Duration: 0.0014056000000000068

---
##  code/hello2.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Jump 14
Frame handler ()
Push "interrupt"
Print
Return
Jump 14
Frame thread ()
Push ()
Push PC(2)
Trap
Push "hello world"
Print
Return
Push PC(7)
Push ()
Push ()
Spawn
Return
DelVar result
```

Duration: 0.0013403000000000165

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Jump 14
Frame handler ()
Push "interrupt"
Print
Return
Jump 14
Frame thread ()
Push ()
Push PC(2)
Trap
Push "hello world"
Print
Return
Push PC(7)
Push ()
Push ()
Spawn
Return
DelVar result
```

Duration: 0.0011340000000000239

---
##  code/actortest.hny

### Summary

Duration is good: ✅

Output is good: ❌

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Cannot operate on constant ('nrequests', 'code/actor.hny', 26, 9) ErrorToken(line=26, message="Cannot operate on constant ('nrequests', 'code/actor.hny', 26, 9)", column=19, lexeme='-=', filename='code/actor.hny', is_eof_error=False)
```

Duration: 0.0017199999999999993

### Current Output

```
Phase 1: compile Harmony program to bytecode
Line 26:19 at code/actor.hny, Cannot operate on constant ('nrequests', 'code/actor.hny', 26, 9)
```

Duration: 0.001507399999999992

---
##  code/hello4.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push { False, True }
Choose
JumpCond False 7
Push "hello world"
Print
Jump 1
Return
DelVar result
```

Duration: 0.0016151999999999833

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push { False, True }
Choose
JumpCond False 7
Push "hello world"
Print
Jump 1
Return
DelVar result
```

Duration: 0.0017204999999999582

---
##  code/actor.hny

### Summary

Duration is good: ✅

Output is good: ❌

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Cannot operate on constant ('nrequests', 'code/actor.hny', 26, 9) ErrorToken(line=26, message="Cannot operate on constant ('nrequests', 'code/actor.hny', 26, 9)", column=19, lexeme='-=', filename='code/actor.hny', is_eof_error=False)
```

Duration: 0.0012749999999999706

### Current Output

```
Phase 1: compile Harmony program to bytecode
Line 26:19 at code/actor.hny, Cannot operate on constant ('nrequests', 'code/actor.hny', 26, 9)
```

Duration: 0.001342600000000027

---
##  code/chain.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push {}
Store network
Jump 247
Frame send m
AtomicInc(lazy)
Load network
Push {}
LoadVar m
DelVar m
2-ary SetAdd
2-ary |
Store network
AtomicDec
Return
Jump 247
Frame receive predecessor
DelVar result
Push {}
Load network
StoreVar $s17
DelVar payload
LoadVar $s17
1-ary IsEmpty
JumpCond True 35
Cut($s17, (id, payload))
LoadVar id
DelVar id
LoadVar predecessor
2-ary ==
JumpCond False 21
LoadVar payload
DelVar payload
2-ary SetAdd
Jump 21
DelVar $s17
DelVar predecessor
StoreVar result
Return
Jump 247
Frame replica (self, immortal)
Push ()
Push 0
Push ()
3-ary DictAdd
Push 1
Push 0
LoadVar self
Push 1
2-ary -
2-ary ..
3-ary DictAdd
StoreVar (hist, predecessors)
Push {}
LoadVar immortal
2-ary SetAdd
Push True
2-ary SetAdd
Choose
JumpCond False 65
LoadVar hist
1-ary len
Push 3
2-ary <
Jump 66
Push False
JumpCond False 208
LoadVar predecessors
Push {}
2-ary ==
JumpCond False 118
AtomicInc(lazy)
ReadonlyInc
Push PC(16)
Push "client"
Apply
Dup
Push {}
2-ary ==
JumpCond False 84
Pop
ReadonlyDec
AtomicDec
Jump 71
Choose
StoreVar update
LoadVar update
LoadVar hist
2-ary in
1-ary not
JumpCond False 92
Jump 96
DelVar update
ReadonlyDec
AtomicDec
Jump 71
ReadonlyDec
LoadVar hist
DelVar hist
Push ()
Push 0
LoadVar update
DelVar update
3-ary DictAdd
2-ary +
StoreVar hist
Push PC(4)
Push ()
Push 0
LoadVar self
3-ary DictAdd
Push 1
LoadVar hist
3-ary DictAdd
Apply
Pop
AtomicDec
Jump 53
AtomicInc(lazy)
ReadonlyInc
Push PC(16)
LoadVar predecessors
1-ary max
Apply
Dup
Push {}
2-ary ==
JumpCond False 132
Pop
ReadonlyDec
AtomicDec
Jump 118
Choose
StoreVar payload
Jump 138
ReadonlyDec
AtomicDec
Jump 118
ReadonlyDec
LoadVar payload
Push "crash"
2-ary ==
JumpCond False 153
DelVar payload
LoadVar predecessors
Push {}
LoadVar predecessors
DelVar predecessors
1-ary max
2-ary SetAdd
2-ary -
StoreVar predecessors
Jump 205
LoadVar payload
1-ary len
LoadVar hist
1-ary len
2-ary >
JumpCond False 189
Push 0
StoreVar $n147
Push ()
Push 0
LoadVar hist
1-ary len
Push 1
2-ary -
2-ary ..
StoreVar $s150
LoadVar $s150
1-ary IsEmpty
JumpCond True 185
Cut($s150, i)
LoadVar $n147
LoadVar hist
LoadVar i
Apply
LoadVar payload
LoadVar i
DelVar i
Apply
2-ary ==
3-ary DictAdd
IncVar $n147
Jump 169
DelVar $n147
DelVar $s150
1-ary all
Jump 190
Push False
JumpCond False 205
DelVar hist
LoadVar payload
DelVar payload
StoreVar hist
Push PC(4)
Push ()
Push 0
LoadVar self
3-ary DictAdd
Push 1
LoadVar hist
3-ary DictAdd
Apply
Pop
DelVar payload
AtomicDec
Jump 53
DelVar immortal
DelVar predecessors
LoadVar hist
1-ary len
Push 3
2-ary ==
JumpCond False 220
DelVar self
LoadVar hist
DelVar hist
Print
Jump 232
DelVar hist
Push PC(4)
Push ()
Push 0
LoadVar self
DelVar self
3-ary DictAdd
Push 1
Push "crash"
3-ary DictAdd
Apply
Pop
Return
Jump 247
Frame client self
Push PC(4)
Push ()
Push 0
Push "client"
3-ary DictAdd
Push 1
LoadVar self
DelVar self
3-ary DictAdd
Apply
Pop
Return
Push { 0, 1, 2 }
Choose
StoreVar survivor
Push { 0, 1, 2 }
StoreVar $s225
LoadVar $s225
1-ary IsEmpty
JumpCond True 270
Cut($s225, i)
Push PC(40)
Push ()
Push 0
LoadVar i
3-ary DictAdd
Push 1
LoadVar i
DelVar i
LoadVar survivor
2-ary ==
3-ary DictAdd
Push ()
Spawn
Jump 252
DelVar $s225
DelVar survivor
Push { 1, 2, 3 }
StoreVar $s244
LoadVar $s244
1-ary IsEmpty
JumpCond True 284
Cut($s244, i)
Push PC(234)
LoadVar i
DelVar i
Push ()
Spawn
Jump 274
DelVar $s244
Return
DelVar result
```

Duration: 0.0013767000000000085

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push {}
Store network
Jump 247
Frame send m
AtomicInc(lazy)
Load network
Push {}
LoadVar m
DelVar m
2-ary SetAdd
2-ary |
Store network
AtomicDec
Return
Jump 247
Frame receive predecessor
DelVar result
Push {}
Load network
StoreVar $s17
DelVar payload
LoadVar $s17
1-ary IsEmpty
JumpCond True 35
Cut($s17, (id, payload))
LoadVar id
DelVar id
LoadVar predecessor
2-ary ==
JumpCond False 21
LoadVar payload
DelVar payload
2-ary SetAdd
Jump 21
DelVar $s17
DelVar predecessor
StoreVar result
Return
Jump 247
Frame replica (self, immortal)
Push ()
Push 0
Push ()
3-ary DictAdd
Push 1
Push 0
LoadVar self
Push 1
2-ary -
2-ary ..
3-ary DictAdd
StoreVar (hist, predecessors)
Push {}
LoadVar immortal
2-ary SetAdd
Push True
2-ary SetAdd
Choose
JumpCond False 65
LoadVar hist
1-ary len
Push 3
2-ary <
Jump 66
Push False
JumpCond False 208
LoadVar predecessors
Push {}
2-ary ==
JumpCond False 118
AtomicInc(lazy)
ReadonlyInc
Push PC(16)
Push "client"
Apply
Dup
Push {}
2-ary ==
JumpCond False 84
Pop
ReadonlyDec
AtomicDec
Jump 71
Choose
StoreVar update
LoadVar update
LoadVar hist
2-ary in
1-ary not
JumpCond False 92
Jump 96
DelVar update
ReadonlyDec
AtomicDec
Jump 71
ReadonlyDec
LoadVar hist
DelVar hist
Push ()
Push 0
LoadVar update
DelVar update
3-ary DictAdd
2-ary +
StoreVar hist
Push PC(4)
Push ()
Push 0
LoadVar self
3-ary DictAdd
Push 1
LoadVar hist
3-ary DictAdd
Apply
Pop
AtomicDec
Jump 53
AtomicInc(lazy)
ReadonlyInc
Push PC(16)
LoadVar predecessors
1-ary max
Apply
Dup
Push {}
2-ary ==
JumpCond False 132
Pop
ReadonlyDec
AtomicDec
Jump 118
Choose
StoreVar payload
Jump 138
ReadonlyDec
AtomicDec
Jump 118
ReadonlyDec
LoadVar payload
Push "crash"
2-ary ==
JumpCond False 153
DelVar payload
LoadVar predecessors
Push {}
LoadVar predecessors
DelVar predecessors
1-ary max
2-ary SetAdd
2-ary -
StoreVar predecessors
Jump 205
LoadVar payload
1-ary len
LoadVar hist
1-ary len
2-ary >
JumpCond False 189
Push 0
StoreVar $n147
Push ()
Push 0
LoadVar hist
1-ary len
Push 1
2-ary -
2-ary ..
StoreVar $s150
LoadVar $s150
1-ary IsEmpty
JumpCond True 185
Cut($s150, i)
LoadVar $n147
LoadVar hist
LoadVar i
Apply
LoadVar payload
LoadVar i
DelVar i
Apply
2-ary ==
3-ary DictAdd
IncVar $n147
Jump 169
DelVar $n147
DelVar $s150
1-ary all
Jump 190
Push False
JumpCond False 205
DelVar hist
LoadVar payload
DelVar payload
StoreVar hist
Push PC(4)
Push ()
Push 0
LoadVar self
3-ary DictAdd
Push 1
LoadVar hist
3-ary DictAdd
Apply
Pop
DelVar payload
AtomicDec
Jump 53
DelVar immortal
DelVar predecessors
LoadVar hist
1-ary len
Push 3
2-ary ==
JumpCond False 220
DelVar self
LoadVar hist
DelVar hist
Print
Jump 232
DelVar hist
Push PC(4)
Push ()
Push 0
LoadVar self
DelVar self
3-ary DictAdd
Push 1
Push "crash"
3-ary DictAdd
Apply
Pop
Return
Jump 247
Frame client self
Push PC(4)
Push ()
Push 0
Push "client"
3-ary DictAdd
Push 1
LoadVar self
DelVar self
3-ary DictAdd
Apply
Pop
Return
Push { 0, 1, 2 }
Choose
StoreVar survivor
Push { 0, 1, 2 }
StoreVar $s225
LoadVar $s225
1-ary IsEmpty
JumpCond True 270
Cut($s225, i)
Push PC(40)
Push ()
Push 0
LoadVar i
3-ary DictAdd
Push 1
LoadVar i
DelVar i
LoadVar survivor
2-ary ==
3-ary DictAdd
Push ()
Spawn
Jump 252
DelVar $s225
DelVar survivor
Push { 1, 2, 3 }
StoreVar $s244
LoadVar $s244
1-ary IsEmpty
JumpCond True 284
Cut($s244, i)
Push PC(234)
LoadVar i
DelVar i
Push ()
Spawn
Jump 274
DelVar $s244
Return
DelVar result
```

Duration: 0.0012930999999999915

---
##  code/boundedbuffer.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store list
Jump 457
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n5
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s8
LoadVar $s8
1-ary IsEmpty
JumpCond True 29
Cut($s8, x)
LoadVar $n5
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n5
Jump 17
DelVar $n5
DelVar $s8
DelVar s
StoreVar result
Return
Jump 457
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 457
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 457
Frame tail s
DelVar result
Push PC(4)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 457
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s65
LoadVar $s65
1-ary IsEmpty
JumpCond True 94
Cut($s65, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 83
DelVar $s65
Return
Jump 457
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s80
LoadVar $s80
1-ary IsEmpty
JumpCond True 111
Cut($s80, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 103
DelVar $s80
StoreVar result
Return
Jump 457
Frame list a
DelVar result
Push 0
StoreVar $n93
Push ()
LoadVar a
DelVar a
StoreVar $s96
LoadVar $s96
1-ary IsEmpty
JumpCond True 133
Cut($s96, v)
LoadVar $n93
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n93
Jump 123
DelVar $n93
DelVar $s96
StoreVar result
Return
Jump 457
Frame values d
DelVar result
Push 0
StoreVar $n111
Push ()
LoadVar d
1-ary keys
StoreVar $s114
LoadVar $s114
1-ary IsEmpty
JumpCond True 158
Cut($s114, k)
LoadVar $n111
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n111
Jump 146
DelVar $n111
DelVar $s114
DelVar d
StoreVar result
Return
Jump 457
Frame items d
DelVar result
Push 0
StoreVar $n132
Push ()
LoadVar d
1-ary keys
StoreVar $s135
LoadVar $s135
1-ary IsEmpty
JumpCond True 190
Cut($s135, k)
LoadVar $n132
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n132
Jump 172
DelVar $n132
DelVar $s135
DelVar d
StoreVar result
Return
Jump 457
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s163
LoadVar $s163
1-ary IsEmpty
JumpCond True 232
Cut($s163, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 205
DelVar $s163
DelVar d
DelVar index
Return
Jump 457
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 247
DelVar a
Push ()
StoreVar result
Jump 322
Push ()
Push 0
Push PC(48)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(57)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n212
Push ()
LoadVar rest
StoreVar $s215
DelVar v
LoadVar $s215
1-ary IsEmpty
JumpCond True 280
Cut($s215, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 265
LoadVar $n212
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n212
Jump 265
DelVar $n212
DelVar $s215
StoreVar lower
Push 0
StoreVar $n231
Push ()
LoadVar rest
DelVar rest
StoreVar $s234
DelVar v
LoadVar $s234
1-ary IsEmpty
JumpCond True 304
Cut($s234, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 289
LoadVar $n231
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n231
Jump 289
DelVar $n231
DelVar $s234
StoreVar higher
Push PC(237)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(237)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 457
Frame sorted d
DelVar result
Push PC(237)
Push PC(115)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 457
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n277
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s280
LoadVar $s280
1-ary IsEmpty
JumpCond True 361
Cut($s280, i)
LoadVar $n277
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n277
Jump 347
DelVar $n277
DelVar $s280
DelVar d
DelVar n
StoreVar result
Return
Jump 457
Frame BoundedBuffer size
DelVar result
Push ()
Push "buffer"
Push ()
3-ary DictAdd
Push "size"
LoadVar size
DelVar size
3-ary DictAdd
StoreVar result
Return
Jump 457
Frame put (bb, v)
AtomicInc(lazy)
ReadonlyInc
LoadVar bb
Push "buffer"
Address
Load
1-ary len
LoadVar bb
Push "size"
Address
Load
2-ary <
JumpCond False 396
Jump 399
ReadonlyDec
AtomicDec
Jump 382
ReadonlyDec
LoadVar bb
Push "buffer"
Address
Push PC(35)
Push ()
Push 0
LoadVar bb
DelVar bb
Push "buffer"
Address
Load
3-ary DictAdd
Push 1
LoadVar v
DelVar v
3-ary DictAdd
Apply
Store
AtomicDec
Return
Jump 457
Frame get bb
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar bb
Push "buffer"
Address
Load
Push ()
2-ary !=
JumpCond False 433
Jump 436
ReadonlyDec
AtomicDec
Jump 422
ReadonlyDec
Push PC(48)
LoadVar bb
Push "buffer"
Address
Load
Apply
StoreVar result
LoadVar bb
Push "buffer"
Address
Push PC(57)
LoadVar bb
DelVar bb
Push "buffer"
Address
Load
Apply
Store
AtomicDec
Return
Return
DelVar result
```

Duration: 0.0014798999999999785

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store list
Jump 457
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n5
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s8
LoadVar $s8
1-ary IsEmpty
JumpCond True 29
Cut($s8, x)
LoadVar $n5
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n5
Jump 17
DelVar $n5
DelVar $s8
DelVar s
StoreVar result
Return
Jump 457
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 457
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 457
Frame tail s
DelVar result
Push PC(4)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 457
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s65
LoadVar $s65
1-ary IsEmpty
JumpCond True 94
Cut($s65, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 83
DelVar $s65
Return
Jump 457
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s80
LoadVar $s80
1-ary IsEmpty
JumpCond True 111
Cut($s80, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 103
DelVar $s80
StoreVar result
Return
Jump 457
Frame list a
DelVar result
Push 0
StoreVar $n93
Push ()
LoadVar a
DelVar a
StoreVar $s96
LoadVar $s96
1-ary IsEmpty
JumpCond True 133
Cut($s96, v)
LoadVar $n93
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n93
Jump 123
DelVar $n93
DelVar $s96
StoreVar result
Return
Jump 457
Frame values d
DelVar result
Push 0
StoreVar $n111
Push ()
LoadVar d
1-ary keys
StoreVar $s114
LoadVar $s114
1-ary IsEmpty
JumpCond True 158
Cut($s114, k)
LoadVar $n111
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n111
Jump 146
DelVar $n111
DelVar $s114
DelVar d
StoreVar result
Return
Jump 457
Frame items d
DelVar result
Push 0
StoreVar $n132
Push ()
LoadVar d
1-ary keys
StoreVar $s135
LoadVar $s135
1-ary IsEmpty
JumpCond True 190
Cut($s135, k)
LoadVar $n132
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n132
Jump 172
DelVar $n132
DelVar $s135
DelVar d
StoreVar result
Return
Jump 457
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s163
LoadVar $s163
1-ary IsEmpty
JumpCond True 232
Cut($s163, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 205
DelVar $s163
DelVar d
DelVar index
Return
Jump 457
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 247
DelVar a
Push ()
StoreVar result
Jump 322
Push ()
Push 0
Push PC(48)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(57)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n212
Push ()
LoadVar rest
StoreVar $s215
DelVar v
LoadVar $s215
1-ary IsEmpty
JumpCond True 280
Cut($s215, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 265
LoadVar $n212
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n212
Jump 265
DelVar $n212
DelVar $s215
StoreVar lower
Push 0
StoreVar $n231
Push ()
LoadVar rest
DelVar rest
StoreVar $s234
DelVar v
LoadVar $s234
1-ary IsEmpty
JumpCond True 304
Cut($s234, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 289
LoadVar $n231
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n231
Jump 289
DelVar $n231
DelVar $s234
StoreVar higher
Push PC(237)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(237)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 457
Frame sorted d
DelVar result
Push PC(237)
Push PC(115)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 457
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n277
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s280
LoadVar $s280
1-ary IsEmpty
JumpCond True 361
Cut($s280, i)
LoadVar $n277
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n277
Jump 347
DelVar $n277
DelVar $s280
DelVar d
DelVar n
StoreVar result
Return
Jump 457
Frame BoundedBuffer size
DelVar result
Push ()
Push "buffer"
Push ()
3-ary DictAdd
Push "size"
LoadVar size
DelVar size
3-ary DictAdd
StoreVar result
Return
Jump 457
Frame put (bb, v)
AtomicInc(lazy)
ReadonlyInc
LoadVar bb
Push "buffer"
Address
Load
1-ary len
LoadVar bb
Push "size"
Address
Load
2-ary <
JumpCond False 396
Jump 399
ReadonlyDec
AtomicDec
Jump 382
ReadonlyDec
LoadVar bb
Push "buffer"
Address
Push PC(35)
Push ()
Push 0
LoadVar bb
DelVar bb
Push "buffer"
Address
Load
3-ary DictAdd
Push 1
LoadVar v
DelVar v
3-ary DictAdd
Apply
Store
AtomicDec
Return
Jump 457
Frame get bb
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar bb
Push "buffer"
Address
Load
Push ()
2-ary !=
JumpCond False 433
Jump 436
ReadonlyDec
AtomicDec
Jump 422
ReadonlyDec
Push PC(48)
LoadVar bb
Push "buffer"
Address
Load
Apply
StoreVar result
LoadVar bb
Push "buffer"
Address
Push PC(57)
LoadVar bb
DelVar bb
Push "buffer"
Address
Load
Apply
Store
AtomicDec
Return
Return
DelVar result
```

Duration: 0.001343099999999986

---
##  code/taslock.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Jump 38
Frame test_and_set s
DelVar result
AtomicInc(lazy)
LoadVar s
Load
StoreVar result
LoadVar s
DelVar s
Push True
Store
AtomicDec
Return
Jump 38
Frame Lock ()
DelVar result
Push False
StoreVar result
Return
Jump 38
Frame acquire lk
Push PC(2)
LoadVar lk
Apply
JumpCond False 27
Jump 22
DelVar lk
Return
Jump 38
Frame release lk
AtomicInc(lazy)
LoadVar lk
DelVar lk
Push False
Store
AtomicDec
Return
Return
DelVar result
```

Duration: 0.001571099999999992

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Jump 38
Frame test_and_set s
DelVar result
AtomicInc(lazy)
LoadVar s
Load
StoreVar result
LoadVar s
DelVar s
Push True
Store
AtomicDec
Return
Jump 38
Frame Lock ()
DelVar result
Push False
StoreVar result
Return
Jump 38
Frame acquire lk
Push PC(2)
LoadVar lk
Apply
JumpCond False 27
Jump 22
DelVar lk
Return
Jump 38
Frame release lk
AtomicInc(lazy)
LoadVar lk
DelVar lk
Push False
Store
AtomicDec
Return
Return
DelVar result
```

Duration: 0.0013546999999999865

---
##  code/RW.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Jump 88
Frame RWlock ()
DelVar result
Push { "nreaders":0, "nwriters":0 }
StoreVar result
Return
Jump 88
Frame read_acquire rw
AtomicInc(lazy)
ReadonlyInc
LoadVar rw
Push "nwriters"
Address
Load
Push 0
2-ary ==
JumpCond False 19
Jump 22
ReadonlyDec
AtomicDec
Jump 9
ReadonlyDec
LoadVar rw
DelVar rw
Push "nreaders"
Address
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 88
Frame read_release rw
AtomicInc(lazy)
LoadVar rw
DelVar rw
Push "nreaders"
Address
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 88
Frame write_acquire rw
AtomicInc(lazy)
ReadonlyInc
LoadVar rw
Push "nreaders"
Address
Load
LoadVar rw
Push "nwriters"
Address
Load
2-ary +
Push 0
2-ary ==
JumpCond False 65
Jump 68
ReadonlyDec
AtomicDec
Jump 50
ReadonlyDec
LoadVar rw
DelVar rw
Push "nwriters"
Address
Push 1
Store
AtomicDec
Return
Jump 88
Frame write_release rw
AtomicInc(lazy)
LoadVar rw
DelVar rw
Push "nwriters"
Address
Push 0
Store
AtomicDec
Return
Return
DelVar result
```

Duration: 0.0013129000000000057

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Jump 88
Frame RWlock ()
DelVar result
Push { "nreaders":0, "nwriters":0 }
StoreVar result
Return
Jump 88
Frame read_acquire rw
AtomicInc(lazy)
ReadonlyInc
LoadVar rw
Push "nwriters"
Address
Load
Push 0
2-ary ==
JumpCond False 19
Jump 22
ReadonlyDec
AtomicDec
Jump 9
ReadonlyDec
LoadVar rw
DelVar rw
Push "nreaders"
Address
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 88
Frame read_release rw
AtomicInc(lazy)
LoadVar rw
DelVar rw
Push "nreaders"
Address
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 88
Frame write_acquire rw
AtomicInc(lazy)
ReadonlyInc
LoadVar rw
Push "nreaders"
Address
Load
LoadVar rw
Push "nwriters"
Address
Load
2-ary +
Push 0
2-ary ==
JumpCond False 65
Jump 68
ReadonlyDec
AtomicDec
Jump 50
ReadonlyDec
LoadVar rw
DelVar rw
Push "nwriters"
Address
Push 1
Store
AtomicDec
Return
Jump 88
Frame write_release rw
AtomicInc(lazy)
LoadVar rw
DelVar rw
Push "nwriters"
Address
Push 0
Store
AtomicDec
Return
Return
DelVar result
```

Duration: 0.0018743999999999983

---
##  code/DinersCV2.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store synch
Push ()
Store list
Jump 369
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 369
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 369
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 369
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 369
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 369
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 369
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 369
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 369
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 369
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 369
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 369
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 369
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Push ()
Store bag
Jump 1039
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1039
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s311
LoadVar $s311
1-ary IsEmpty
JumpCond True 393
Cut($s311, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 384
DelVar $s311
StoreVar result
Return
Jump 1039
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s327
LoadVar $s327
1-ary IsEmpty
JumpCond True 430
Cut($s327, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 423
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 404
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 404
DelVar $s327
Return
Jump 1039
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 456
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 460
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1039
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s391
LoadVar $s391
1-ary IsEmpty
JumpCond True 489
Cut($s391, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 478
DelVar $s391
Return
Jump 1039
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1039
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1039
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1039
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 566
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 572
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1039
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 599
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 600
Push False
JumpCond False 609
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 620
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1039
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 638
DelVar bg
DelVar k
Push {}
Push PC(372)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 723
Push PC(462)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 652
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 723
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 664
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 723
Push PC(492)
LoadVar bg
Apply
StoreVar hd
Push PC(574)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(623)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s568
LoadVar $s568
1-ary IsEmpty
JumpCond True 708
Cut($s568, x)
Push PC(537)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 692
DelVar $s568
DelVar hd
Push PC(623)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1039
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1039
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 754
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1039
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1039
Frame Lock ()
DelVar result
Push PC(759)
Push False
Apply
StoreVar result
Return
Jump 1039
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1039
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 790
Jump 793
ReadonlyDec
AtomicDec
Jump 783
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1039
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1039
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1039
Frame Condition ()
DelVar result
Push PC(372)
Push ()
Apply
StoreVar result
Return
Jump 1039
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(537)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 887
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 888
Push False
JumpCond False 893
DelVar c
DelVar cnt
DelVar ctx
Jump 896
ReadonlyDec
AtomicDec
Jump 868
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1039
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(372)
Push ()
Apply
2-ary !=
JumpCond False 929
LoadVar c
Push PC(574)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(519)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1039
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(372)
Push ()
Apply
Store
AtomicDec
Return
Jump 1039
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1039
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 960
Jump 963
ReadonlyDec
AtomicDec
Jump 952
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1039
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1039
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1039
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1002
Jump 1005
ReadonlyDec
AtomicDec
Jump 993
ReadonlyDec
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1039
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Push PC(766)
Push ()
Apply
Store mutex
Push [False, False, False, False, False]
Store forks
Push ()
Push 0
Push PC(825)
Push ?mutex
Apply
3-ary DictAdd
Push 5
2-ary *
Store conds
Jump 1161
Frame diner which
Push ()
Push 0
LoadVar which
3-ary DictAdd
Push 1
LoadVar which
Push 1
2-ary +
Push 5
2-ary %
3-ary DictAdd
StoreVar (left, right)
Push { False, True }
Choose
JumpCond False 1157
Push PC(782)
Push ?mutex
Apply
Pop
Push ?forks
LoadVar left
Address
Load
JumpCond True 1085
Push ?forks
LoadVar right
Address
Load
Jump 1086
Push True
JumpCond False 1100
Push PC(833)
Push ()
Push 0
Push ?conds
LoadVar which
Address
3-ary DictAdd
Push 1
Push ?mutex
3-ary DictAdd
Apply
Pop
Jump 1075
Push ?forks
LoadVar left
Address
Push ?forks
LoadVar right
Address
Push True
Dup
Move 3
Move 2
Store
Store
Push PC(801)
Push ?mutex
Apply
Pop
Push PC(782)
Push ?mutex
Apply
Pop
Push ?forks
LoadVar left
Address
Push ?forks
LoadVar right
Address
Push False
Dup
Move 3
Move 2
Store
Store
Push PC(904)
Push ?conds
LoadVar which
Push 1
2-ary -
Push 5
2-ary %
Address
Apply
Pop
Push PC(904)
Push ?conds
LoadVar which
Push 1
2-ary +
Push 5
2-ary %
Address
Apply
Pop
Push PC(801)
Push ?mutex
Apply
Pop
Jump 1068
DelVar left
DelVar right
DelVar which
Return
Push { 0, 1, 2, 3, 4 }
StoreVar $s1006
LoadVar $s1006
1-ary IsEmpty
JumpCond True 1173
Cut($s1006, i)
Push PC(1055)
LoadVar i
DelVar i
Push ()
Spawn
Jump 1163
DelVar $s1006
Return
DelVar result
```

Duration: 0.0016456999999999722

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store synch
Push ()
Store list
Jump 369
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 369
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 369
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 369
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 369
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 369
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 369
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 369
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 369
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 369
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 369
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 369
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 369
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Push ()
Store bag
Jump 1039
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1039
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s311
LoadVar $s311
1-ary IsEmpty
JumpCond True 393
Cut($s311, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 384
DelVar $s311
StoreVar result
Return
Jump 1039
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s327
LoadVar $s327
1-ary IsEmpty
JumpCond True 430
Cut($s327, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 423
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 404
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 404
DelVar $s327
Return
Jump 1039
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 456
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 460
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1039
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s391
LoadVar $s391
1-ary IsEmpty
JumpCond True 489
Cut($s391, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 478
DelVar $s391
Return
Jump 1039
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1039
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1039
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1039
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 566
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 572
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1039
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 599
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 600
Push False
JumpCond False 609
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 620
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1039
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 638
DelVar bg
DelVar k
Push {}
Push PC(372)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 723
Push PC(462)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 652
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 723
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 664
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 723
Push PC(492)
LoadVar bg
Apply
StoreVar hd
Push PC(574)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(623)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s568
LoadVar $s568
1-ary IsEmpty
JumpCond True 708
Cut($s568, x)
Push PC(537)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 692
DelVar $s568
DelVar hd
Push PC(623)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1039
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1039
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 754
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1039
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1039
Frame Lock ()
DelVar result
Push PC(759)
Push False
Apply
StoreVar result
Return
Jump 1039
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1039
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 790
Jump 793
ReadonlyDec
AtomicDec
Jump 783
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1039
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1039
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1039
Frame Condition ()
DelVar result
Push PC(372)
Push ()
Apply
StoreVar result
Return
Jump 1039
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(537)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 887
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 888
Push False
JumpCond False 893
DelVar c
DelVar cnt
DelVar ctx
Jump 896
ReadonlyDec
AtomicDec
Jump 868
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1039
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(372)
Push ()
Apply
2-ary !=
JumpCond False 929
LoadVar c
Push PC(574)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(519)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1039
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(372)
Push ()
Apply
Store
AtomicDec
Return
Jump 1039
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1039
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 960
Jump 963
ReadonlyDec
AtomicDec
Jump 952
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1039
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1039
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1039
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1002
Jump 1005
ReadonlyDec
AtomicDec
Jump 993
ReadonlyDec
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1039
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Push PC(766)
Push ()
Apply
Store mutex
Push [False, False, False, False, False]
Store forks
Push ()
Push 0
Push PC(825)
Push ?mutex
Apply
3-ary DictAdd
Push 5
2-ary *
Store conds
Jump 1161
Frame diner which
Push ()
Push 0
LoadVar which
3-ary DictAdd
Push 1
LoadVar which
Push 1
2-ary +
Push 5
2-ary %
3-ary DictAdd
StoreVar (left, right)
Push { False, True }
Choose
JumpCond False 1157
Push PC(782)
Push ?mutex
Apply
Pop
Push ?forks
LoadVar left
Address
Load
JumpCond True 1085
Push ?forks
LoadVar right
Address
Load
Jump 1086
Push True
JumpCond False 1100
Push PC(833)
Push ()
Push 0
Push ?conds
LoadVar which
Address
3-ary DictAdd
Push 1
Push ?mutex
3-ary DictAdd
Apply
Pop
Jump 1075
Push ?forks
LoadVar left
Address
Push ?forks
LoadVar right
Address
Push True
Dup
Move 3
Move 2
Store
Store
Push PC(801)
Push ?mutex
Apply
Pop
Push PC(782)
Push ?mutex
Apply
Pop
Push ?forks
LoadVar left
Address
Push ?forks
LoadVar right
Address
Push False
Dup
Move 3
Move 2
Store
Store
Push PC(904)
Push ?conds
LoadVar which
Push 1
2-ary -
Push 5
2-ary %
Address
Apply
Pop
Push PC(904)
Push ?conds
LoadVar which
Push 1
2-ary +
Push 5
2-ary %
Address
Apply
Pop
Push PC(801)
Push ?mutex
Apply
Pop
Jump 1068
DelVar left
DelVar right
DelVar which
Return
Push { 0, 1, 2, 3, 4 }
StoreVar $s1006
LoadVar $s1006
1-ary IsEmpty
JumpCond True 1173
Cut($s1006, i)
Push PC(1055)
LoadVar i
DelVar i
Push ()
Spawn
Jump 1163
DelVar $s1006
Return
DelVar result
```

Duration: 0.0015627999999999753

---
##  code/2pc2.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store list
Jump 735
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n5
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s8
LoadVar $s8
1-ary IsEmpty
JumpCond True 29
Cut($s8, x)
LoadVar $n5
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n5
Jump 17
DelVar $n5
DelVar $s8
DelVar s
StoreVar result
Return
Jump 735
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 735
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 735
Frame tail s
DelVar result
Push PC(4)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 735
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s65
LoadVar $s65
1-ary IsEmpty
JumpCond True 94
Cut($s65, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 83
DelVar $s65
Return
Jump 735
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s80
LoadVar $s80
1-ary IsEmpty
JumpCond True 111
Cut($s80, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 103
DelVar $s80
StoreVar result
Return
Jump 735
Frame list a
DelVar result
Push 0
StoreVar $n93
Push ()
LoadVar a
DelVar a
StoreVar $s96
LoadVar $s96
1-ary IsEmpty
JumpCond True 133
Cut($s96, v)
LoadVar $n93
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n93
Jump 123
DelVar $n93
DelVar $s96
StoreVar result
Return
Jump 735
Frame values d
DelVar result
Push 0
StoreVar $n111
Push ()
LoadVar d
1-ary keys
StoreVar $s114
LoadVar $s114
1-ary IsEmpty
JumpCond True 158
Cut($s114, k)
LoadVar $n111
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n111
Jump 146
DelVar $n111
DelVar $s114
DelVar d
StoreVar result
Return
Jump 735
Frame items d
DelVar result
Push 0
StoreVar $n132
Push ()
LoadVar d
1-ary keys
StoreVar $s135
LoadVar $s135
1-ary IsEmpty
JumpCond True 190
Cut($s135, k)
LoadVar $n132
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n132
Jump 172
DelVar $n132
DelVar $s135
DelVar d
StoreVar result
Return
Jump 735
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s163
LoadVar $s163
1-ary IsEmpty
JumpCond True 232
Cut($s163, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 205
DelVar $s163
DelVar d
DelVar index
Return
Jump 735
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 247
DelVar a
Push ()
StoreVar result
Jump 322
Push ()
Push 0
Push PC(48)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(57)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n212
Push ()
LoadVar rest
StoreVar $s215
DelVar v
LoadVar $s215
1-ary IsEmpty
JumpCond True 280
Cut($s215, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 265
LoadVar $n212
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n212
Jump 265
DelVar $n212
DelVar $s215
StoreVar lower
Push 0
StoreVar $n231
Push ()
LoadVar rest
DelVar rest
StoreVar $s234
DelVar v
LoadVar $s234
1-ary IsEmpty
JumpCond True 304
Cut($s234, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 289
LoadVar $n231
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n231
Jump 289
DelVar $n231
DelVar $s234
StoreVar higher
Push PC(237)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(237)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 735
Frame sorted d
DelVar result
Push PC(237)
Push PC(115)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 735
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n277
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s280
LoadVar $s280
1-ary IsEmpty
JumpCond True 361
Cut($s280, i)
LoadVar $n277
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n277
Jump 347
DelVar $n277
DelVar $s280
DelVar d
DelVar n
StoreVar result
Return
Jump 735
Frame transfer (self, b1, b2, amt)
Push ?send
Push ()
Push "dst"
LoadVar b1
3-ary DictAdd
Push "src"
LoadVar self
3-ary DictAdd
Push "request"
Push "withdraw"
3-ary DictAdd
Push "amount"
LoadVar amt
3-ary DictAdd
Address
Load
Pop
Push ?send
Push ()
Push "dst"
LoadVar b2
3-ary DictAdd
Push "src"
LoadVar self
3-ary DictAdd
Push "request"
Push "deposit"
3-ary DictAdd
Push "amount"
LoadVar amt
DelVar amt
3-ary DictAdd
Address
Load
Pop
AtomicInc(lazy)
ReadonlyInc
Push {}
Load network
StoreVar $s338
DelVar m
LoadVar $s338
1-ary IsEmpty
JumpCond True 424
Cut($s338, m)
LoadVar m
Push "dst"
Apply
LoadVar self
2-ary ==
JumpCond False 409
LoadVar m
DelVar m
2-ary SetAdd
Jump 409
DelVar $s338
StoreVar msgs
Push {}
LoadVar msgs
StoreVar $s355
LoadVar $s355
1-ary IsEmpty
JumpCond True 439
Cut($s355, m)
LoadVar m
DelVar m
Push "src"
Apply
2-ary SetAdd
Jump 429
DelVar $s355
Push {}
LoadVar b1
2-ary SetAdd
LoadVar b2
2-ary SetAdd
2-ary ==
JumpCond False 450
DelVar b1
DelVar b2
Jump 454
DelVar msgs
ReadonlyDec
AtomicDec
Jump 404
ReadonlyDec
Push 0
StoreVar $n378
Push ()
LoadVar msgs
StoreVar $s381
LoadVar $s381
1-ary IsEmpty
JumpCond True 474
Cut($s381, m)
LoadVar $n378
LoadVar m
DelVar m
Push "response"
Apply
Push "yes"
2-ary ==
3-ary DictAdd
IncVar $n378
Jump 460
DelVar $n378
DelVar $s381
1-ary all
JumpCond False 513
LoadVar msgs
DelVar msgs
StoreVar $s398
DelVar m
LoadVar $s398
1-ary IsEmpty
JumpCond True 510
Cut($s398, m)
LoadVar m
Push "response"
Apply
Push "yes"
2-ary ==
JumpCond False 481
Push ?send
Push ()
Push "dst"
LoadVar m
DelVar m
Push "src"
Apply
3-ary DictAdd
Push "src"
LoadVar self
3-ary DictAdd
Push "request"
Push "commit"
3-ary DictAdd
Address
Load
Pop
Jump 481
DelVar $s398
DelVar self
Jump 545
LoadVar msgs
DelVar msgs
StoreVar $s428
DelVar m
LoadVar $s428
1-ary IsEmpty
JumpCond True 545
Cut($s428, m)
LoadVar m
Push "response"
Apply
Push "yes"
2-ary ==
JumpCond False 516
Push ?send
Push ()
Push "dst"
LoadVar m
DelVar m
Push "src"
Apply
3-ary DictAdd
Push "src"
LoadVar self
3-ary DictAdd
Push "request"
Push "abort"
3-ary DictAdd
Address
Load
Pop
Jump 516
DelVar $s428
DelVar self
AtomicDec
Return
Jump 735
Frame check (self, total)
Push {}
Push 1
Load NBANKS
2-ary ..
StoreVar $s462
LoadVar $s462
1-ary IsEmpty
JumpCond True 570
Cut($s462, i)
Push ()
Push 0
Push "bank"
3-ary DictAdd
Push 1
LoadVar i
DelVar i
3-ary DictAdd
2-ary SetAdd
Jump 556
DelVar $s462
StoreVar allbanks
LoadVar allbanks
StoreVar $s480
LoadVar $s480
1-ary IsEmpty
JumpCond True 597
Cut($s480, bank)
Push ?send
Push ()
Push "dst"
LoadVar bank
DelVar bank
3-ary DictAdd
Push "src"
LoadVar self
3-ary DictAdd
Push "request"
Push "withdraw"
3-ary DictAdd
Push "amount"
Push 0
3-ary DictAdd
Address
Load
Pop
Jump 574
DelVar $s480
AtomicInc(lazy)
ReadonlyInc
Push {}
Load network
StoreVar $s507
DelVar m
LoadVar $s507
1-ary IsEmpty
JumpCond True 618
Cut($s507, m)
LoadVar m
Push "dst"
Apply
LoadVar self
2-ary ==
JumpCond False 603
LoadVar m
DelVar m
2-ary SetAdd
Jump 603
DelVar $s507
StoreVar msgs
Push {}
LoadVar msgs
StoreVar $s524
LoadVar $s524
1-ary IsEmpty
JumpCond True 633
Cut($s524, m)
LoadVar m
DelVar m
Push "src"
Apply
2-ary SetAdd
Jump 623
DelVar $s524
LoadVar allbanks
2-ary ==
JumpCond False 639
DelVar allbanks
Jump 643
DelVar msgs
ReadonlyDec
AtomicDec
Jump 597
ReadonlyDec
ReadonlyInc
AtomicInc(lazy)
Push 0
StoreVar $n545
Push ()
LoadVar msgs
StoreVar $s548
LoadVar $s548
1-ary IsEmpty
JumpCond True 665
Cut($s548, m)
LoadVar $n545
LoadVar m
DelVar m
Push "response"
Apply
Push "yes"
2-ary ==
3-ary DictAdd
IncVar $n545
Jump 651
DelVar $n545
DelVar $s548
1-ary all
JumpCond False 694
Push PC(76)
Push 0
StoreVar $n566
Push ()
LoadVar msgs
StoreVar $s569
LoadVar $s569
1-ary IsEmpty
JumpCond True 687
Cut($s569, m)
LoadVar $n566
LoadVar m
DelVar m
Push "funds"
Apply
3-ary DictAdd
IncVar $n566
Jump 675
DelVar $n566
DelVar $s569
Apply
LoadVar total
DelVar total
2-ary ==
Jump 696
DelVar total
Push True
Assert
AtomicDec
ReadonlyDec
LoadVar msgs
DelVar msgs
StoreVar $s590
DelVar m
LoadVar $s590
1-ary IsEmpty
JumpCond True 731
Cut($s590, m)
LoadVar m
Push "response"
Apply
Push "yes"
2-ary ==
JumpCond False 702
Push ?send
Push ()
Push "dst"
LoadVar m
DelVar m
Push "src"
Apply
3-ary DictAdd
Push "src"
LoadVar self
3-ary DictAdd
Push "request"
Push "abort"
3-ary DictAdd
Address
Load
Pop
Jump 702
DelVar $s590
DelVar self
AtomicDec
Return
Push ()
Push 1
Load NBANKS
2-ary ..
StoreVar $s622
LoadVar $s622
1-ary IsEmpty
JumpCond True 752
Cut($s622, i)
LoadVar i
DelVar i
Push 0
Load MAX_BALANCE
2-ary ..
Choose
3-ary DictAdd
Jump 740
DelVar $s622
StoreVar balances
Push 1
Load NBANKS
2-ary ..
StoreVar $s638
LoadVar $s638
1-ary IsEmpty
JumpCond True 782
Cut($s638, i)
Load bank
Push ()
Push 0
Push ()
Push 0
Push "bank"
3-ary DictAdd
Push 1
LoadVar i
3-ary DictAdd
3-ary DictAdd
Push 1
LoadVar balances
LoadVar i
DelVar i
Apply
3-ary DictAdd
Push ()
Spawn
Jump 758
DelVar $s638
Push 1
Load NCOORDS
2-ary ..
StoreVar $s665
LoadVar $s665
1-ary IsEmpty
JumpCond True 890
Cut($s665, i)
Push { "check", "transfer" }
Choose
Push "transfer"
2-ary ==
JumpCond False 870
Push {}
Push 1
Load NBANKS
2-ary ..
StoreVar $s679
LoadVar $s679
1-ary IsEmpty
JumpCond True 815
Cut($s679, j)
Push ()
Push 0
Push "bank"
3-ary DictAdd
Push 1
LoadVar j
DelVar j
3-ary DictAdd
2-ary SetAdd
Jump 801
DelVar $s679
Choose
StoreVar b1
Push {}
Push 1
Load NBANKS
2-ary ..
StoreVar $s699
LoadVar $s699
1-ary IsEmpty
JumpCond True 837
Cut($s699, j)
Push ()
Push 0
Push "bank"
3-ary DictAdd
Push 1
LoadVar j
DelVar j
3-ary DictAdd
2-ary SetAdd
Jump 823
DelVar $s699
Push {}
LoadVar b1
2-ary SetAdd
2-ary -
Choose
StoreVar b2
Push PC(368)
Push ()
Push 0
Push ()
Push 0
Push "coord"
3-ary DictAdd
Push 1
LoadVar i
DelVar i
3-ary DictAdd
3-ary DictAdd
Push 1
LoadVar b1
DelVar b1
3-ary DictAdd
Push 2
LoadVar b2
DelVar b2
3-ary DictAdd
Push 3
Push 1
3-ary DictAdd
Push ()
Spawn
Jump 787
Push PC(550)
Push ()
Push 0
Push ()
Push 0
Push "coord"
3-ary DictAdd
Push 1
LoadVar i
DelVar i
3-ary DictAdd
3-ary DictAdd
Push 1
Push PC(76)
LoadVar balances
Apply
3-ary DictAdd
Push ()
Spawn
Jump 787
DelVar $s665
DelVar balances
Return
DelVar result
```

Duration: 0.0015229999999999966

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store list
Jump 735
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n5
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s8
LoadVar $s8
1-ary IsEmpty
JumpCond True 29
Cut($s8, x)
LoadVar $n5
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n5
Jump 17
DelVar $n5
DelVar $s8
DelVar s
StoreVar result
Return
Jump 735
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 735
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 735
Frame tail s
DelVar result
Push PC(4)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 735
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s65
LoadVar $s65
1-ary IsEmpty
JumpCond True 94
Cut($s65, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 83
DelVar $s65
Return
Jump 735
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s80
LoadVar $s80
1-ary IsEmpty
JumpCond True 111
Cut($s80, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 103
DelVar $s80
StoreVar result
Return
Jump 735
Frame list a
DelVar result
Push 0
StoreVar $n93
Push ()
LoadVar a
DelVar a
StoreVar $s96
LoadVar $s96
1-ary IsEmpty
JumpCond True 133
Cut($s96, v)
LoadVar $n93
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n93
Jump 123
DelVar $n93
DelVar $s96
StoreVar result
Return
Jump 735
Frame values d
DelVar result
Push 0
StoreVar $n111
Push ()
LoadVar d
1-ary keys
StoreVar $s114
LoadVar $s114
1-ary IsEmpty
JumpCond True 158
Cut($s114, k)
LoadVar $n111
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n111
Jump 146
DelVar $n111
DelVar $s114
DelVar d
StoreVar result
Return
Jump 735
Frame items d
DelVar result
Push 0
StoreVar $n132
Push ()
LoadVar d
1-ary keys
StoreVar $s135
LoadVar $s135
1-ary IsEmpty
JumpCond True 190
Cut($s135, k)
LoadVar $n132
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n132
Jump 172
DelVar $n132
DelVar $s135
DelVar d
StoreVar result
Return
Jump 735
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s163
LoadVar $s163
1-ary IsEmpty
JumpCond True 232
Cut($s163, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 205
DelVar $s163
DelVar d
DelVar index
Return
Jump 735
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 247
DelVar a
Push ()
StoreVar result
Jump 322
Push ()
Push 0
Push PC(48)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(57)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n212
Push ()
LoadVar rest
StoreVar $s215
DelVar v
LoadVar $s215
1-ary IsEmpty
JumpCond True 280
Cut($s215, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 265
LoadVar $n212
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n212
Jump 265
DelVar $n212
DelVar $s215
StoreVar lower
Push 0
StoreVar $n231
Push ()
LoadVar rest
DelVar rest
StoreVar $s234
DelVar v
LoadVar $s234
1-ary IsEmpty
JumpCond True 304
Cut($s234, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 289
LoadVar $n231
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n231
Jump 289
DelVar $n231
DelVar $s234
StoreVar higher
Push PC(237)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(237)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 735
Frame sorted d
DelVar result
Push PC(237)
Push PC(115)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 735
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n277
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s280
LoadVar $s280
1-ary IsEmpty
JumpCond True 361
Cut($s280, i)
LoadVar $n277
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n277
Jump 347
DelVar $n277
DelVar $s280
DelVar d
DelVar n
StoreVar result
Return
Jump 735
Frame transfer (self, b1, b2, amt)
Push ?send
Push ()
Push "dst"
LoadVar b1
3-ary DictAdd
Push "src"
LoadVar self
3-ary DictAdd
Push "request"
Push "withdraw"
3-ary DictAdd
Push "amount"
LoadVar amt
3-ary DictAdd
Address
Load
Pop
Push ?send
Push ()
Push "dst"
LoadVar b2
3-ary DictAdd
Push "src"
LoadVar self
3-ary DictAdd
Push "request"
Push "deposit"
3-ary DictAdd
Push "amount"
LoadVar amt
DelVar amt
3-ary DictAdd
Address
Load
Pop
AtomicInc(lazy)
ReadonlyInc
Push {}
Load network
StoreVar $s338
DelVar m
LoadVar $s338
1-ary IsEmpty
JumpCond True 424
Cut($s338, m)
LoadVar m
Push "dst"
Apply
LoadVar self
2-ary ==
JumpCond False 409
LoadVar m
DelVar m
2-ary SetAdd
Jump 409
DelVar $s338
StoreVar msgs
Push {}
LoadVar msgs
StoreVar $s355
LoadVar $s355
1-ary IsEmpty
JumpCond True 439
Cut($s355, m)
LoadVar m
DelVar m
Push "src"
Apply
2-ary SetAdd
Jump 429
DelVar $s355
Push {}
LoadVar b1
2-ary SetAdd
LoadVar b2
2-ary SetAdd
2-ary ==
JumpCond False 450
DelVar b1
DelVar b2
Jump 454
DelVar msgs
ReadonlyDec
AtomicDec
Jump 404
ReadonlyDec
Push 0
StoreVar $n378
Push ()
LoadVar msgs
StoreVar $s381
LoadVar $s381
1-ary IsEmpty
JumpCond True 474
Cut($s381, m)
LoadVar $n378
LoadVar m
DelVar m
Push "response"
Apply
Push "yes"
2-ary ==
3-ary DictAdd
IncVar $n378
Jump 460
DelVar $n378
DelVar $s381
1-ary all
JumpCond False 513
LoadVar msgs
DelVar msgs
StoreVar $s398
DelVar m
LoadVar $s398
1-ary IsEmpty
JumpCond True 510
Cut($s398, m)
LoadVar m
Push "response"
Apply
Push "yes"
2-ary ==
JumpCond False 481
Push ?send
Push ()
Push "dst"
LoadVar m
DelVar m
Push "src"
Apply
3-ary DictAdd
Push "src"
LoadVar self
3-ary DictAdd
Push "request"
Push "commit"
3-ary DictAdd
Address
Load
Pop
Jump 481
DelVar $s398
DelVar self
Jump 545
LoadVar msgs
DelVar msgs
StoreVar $s428
DelVar m
LoadVar $s428
1-ary IsEmpty
JumpCond True 545
Cut($s428, m)
LoadVar m
Push "response"
Apply
Push "yes"
2-ary ==
JumpCond False 516
Push ?send
Push ()
Push "dst"
LoadVar m
DelVar m
Push "src"
Apply
3-ary DictAdd
Push "src"
LoadVar self
3-ary DictAdd
Push "request"
Push "abort"
3-ary DictAdd
Address
Load
Pop
Jump 516
DelVar $s428
DelVar self
AtomicDec
Return
Jump 735
Frame check (self, total)
Push {}
Push 1
Load NBANKS
2-ary ..
StoreVar $s462
LoadVar $s462
1-ary IsEmpty
JumpCond True 570
Cut($s462, i)
Push ()
Push 0
Push "bank"
3-ary DictAdd
Push 1
LoadVar i
DelVar i
3-ary DictAdd
2-ary SetAdd
Jump 556
DelVar $s462
StoreVar allbanks
LoadVar allbanks
StoreVar $s480
LoadVar $s480
1-ary IsEmpty
JumpCond True 597
Cut($s480, bank)
Push ?send
Push ()
Push "dst"
LoadVar bank
DelVar bank
3-ary DictAdd
Push "src"
LoadVar self
3-ary DictAdd
Push "request"
Push "withdraw"
3-ary DictAdd
Push "amount"
Push 0
3-ary DictAdd
Address
Load
Pop
Jump 574
DelVar $s480
AtomicInc(lazy)
ReadonlyInc
Push {}
Load network
StoreVar $s507
DelVar m
LoadVar $s507
1-ary IsEmpty
JumpCond True 618
Cut($s507, m)
LoadVar m
Push "dst"
Apply
LoadVar self
2-ary ==
JumpCond False 603
LoadVar m
DelVar m
2-ary SetAdd
Jump 603
DelVar $s507
StoreVar msgs
Push {}
LoadVar msgs
StoreVar $s524
LoadVar $s524
1-ary IsEmpty
JumpCond True 633
Cut($s524, m)
LoadVar m
DelVar m
Push "src"
Apply
2-ary SetAdd
Jump 623
DelVar $s524
LoadVar allbanks
2-ary ==
JumpCond False 639
DelVar allbanks
Jump 643
DelVar msgs
ReadonlyDec
AtomicDec
Jump 597
ReadonlyDec
ReadonlyInc
AtomicInc(lazy)
Push 0
StoreVar $n545
Push ()
LoadVar msgs
StoreVar $s548
LoadVar $s548
1-ary IsEmpty
JumpCond True 665
Cut($s548, m)
LoadVar $n545
LoadVar m
DelVar m
Push "response"
Apply
Push "yes"
2-ary ==
3-ary DictAdd
IncVar $n545
Jump 651
DelVar $n545
DelVar $s548
1-ary all
JumpCond False 694
Push PC(76)
Push 0
StoreVar $n566
Push ()
LoadVar msgs
StoreVar $s569
LoadVar $s569
1-ary IsEmpty
JumpCond True 687
Cut($s569, m)
LoadVar $n566
LoadVar m
DelVar m
Push "funds"
Apply
3-ary DictAdd
IncVar $n566
Jump 675
DelVar $n566
DelVar $s569
Apply
LoadVar total
DelVar total
2-ary ==
Jump 696
DelVar total
Push True
Assert
AtomicDec
ReadonlyDec
LoadVar msgs
DelVar msgs
StoreVar $s590
DelVar m
LoadVar $s590
1-ary IsEmpty
JumpCond True 731
Cut($s590, m)
LoadVar m
Push "response"
Apply
Push "yes"
2-ary ==
JumpCond False 702
Push ?send
Push ()
Push "dst"
LoadVar m
DelVar m
Push "src"
Apply
3-ary DictAdd
Push "src"
LoadVar self
3-ary DictAdd
Push "request"
Push "abort"
3-ary DictAdd
Address
Load
Pop
Jump 702
DelVar $s590
DelVar self
AtomicDec
Return
Push ()
Push 1
Load NBANKS
2-ary ..
StoreVar $s622
LoadVar $s622
1-ary IsEmpty
JumpCond True 752
Cut($s622, i)
LoadVar i
DelVar i
Push 0
Load MAX_BALANCE
2-ary ..
Choose
3-ary DictAdd
Jump 740
DelVar $s622
StoreVar balances
Push 1
Load NBANKS
2-ary ..
StoreVar $s638
LoadVar $s638
1-ary IsEmpty
JumpCond True 782
Cut($s638, i)
Load bank
Push ()
Push 0
Push ()
Push 0
Push "bank"
3-ary DictAdd
Push 1
LoadVar i
3-ary DictAdd
3-ary DictAdd
Push 1
LoadVar balances
LoadVar i
DelVar i
Apply
3-ary DictAdd
Push ()
Spawn
Jump 758
DelVar $s638
Push 1
Load NCOORDS
2-ary ..
StoreVar $s665
LoadVar $s665
1-ary IsEmpty
JumpCond True 890
Cut($s665, i)
Push { "check", "transfer" }
Choose
Push "transfer"
2-ary ==
JumpCond False 870
Push {}
Push 1
Load NBANKS
2-ary ..
StoreVar $s679
LoadVar $s679
1-ary IsEmpty
JumpCond True 815
Cut($s679, j)
Push ()
Push 0
Push "bank"
3-ary DictAdd
Push 1
LoadVar j
DelVar j
3-ary DictAdd
2-ary SetAdd
Jump 801
DelVar $s679
Choose
StoreVar b1
Push {}
Push 1
Load NBANKS
2-ary ..
StoreVar $s699
LoadVar $s699
1-ary IsEmpty
JumpCond True 837
Cut($s699, j)
Push ()
Push 0
Push "bank"
3-ary DictAdd
Push 1
LoadVar j
DelVar j
3-ary DictAdd
2-ary SetAdd
Jump 823
DelVar $s699
Push {}
LoadVar b1
2-ary SetAdd
2-ary -
Choose
StoreVar b2
Push PC(368)
Push ()
Push 0
Push ()
Push 0
Push "coord"
3-ary DictAdd
Push 1
LoadVar i
DelVar i
3-ary DictAdd
3-ary DictAdd
Push 1
LoadVar b1
DelVar b1
3-ary DictAdd
Push 2
LoadVar b2
DelVar b2
3-ary DictAdd
Push 3
Push 1
3-ary DictAdd
Push ()
Spawn
Jump 787
Push PC(550)
Push ()
Push 0
Push ()
Push 0
Push "coord"
3-ary DictAdd
Push 1
LoadVar i
DelVar i
3-ary DictAdd
3-ary DictAdd
Push 1
Push PC(76)
LoadVar balances
Apply
3-ary DictAdd
Push ()
Spawn
Jump 787
DelVar $s665
DelVar balances
Return
DelVar result
```

Duration: 0.0017312999999999912

---
##  code/rsmspec.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store network
Jump 97
Frame send m
AtomicInc(lazy)
Load network
Push ()
Push 0
LoadVar m
DelVar m
3-ary DictAdd
2-ary +
Store network
AtomicDec
Return
Jump 97
Frame replica immortal
Push ()
StoreVar hist
Push {}
LoadVar immortal
2-ary SetAdd
Push True
2-ary SetAdd
Choose
JumpCond False 32
LoadVar hist
1-ary len
Push 3
2-ary <
Jump 33
Push False
JumpCond False 61
AtomicInc(lazy)
ReadonlyInc
Load network
1-ary len
LoadVar hist
1-ary len
2-ary >
JumpCond False 43
Jump 46
ReadonlyDec
AtomicDec
Jump 34
ReadonlyDec
LoadVar hist
Push ()
Push 0
Push ?network
LoadVar hist
DelVar hist
1-ary len
Address
Load
3-ary DictAdd
2-ary +
StoreVar hist
AtomicDec
Jump 20
DelVar immortal
LoadVar hist
1-ary len
Push 3
2-ary ==
JumpCond False 87
ReadonlyInc
AtomicInc(lazy)
LoadVar hist
Load network
2-ary ==
Assert
AtomicDec
ReadonlyDec
ReadonlyInc
AtomicInc(lazy)
Push { 1, 2, 3 }
Choose
LoadVar hist
2-ary in
Assert
AtomicDec
ReadonlyDec
LoadVar hist
DelVar hist
Print
DelVar hist
Return
Jump 97
Frame client self
Push PC(4)
LoadVar self
DelVar self
Apply
Pop
Return
Push { 0, 1, 2 }
Choose
StoreVar survivor
Push { 0, 1, 2 }
StoreVar $s94
LoadVar $s94
1-ary IsEmpty
JumpCond True 114
Cut($s94, i)
Push PC(17)
LoadVar i
DelVar i
LoadVar survivor
2-ary ==
Push ()
Spawn
Jump 102
DelVar $s94
DelVar survivor
Push { 1, 2, 3 }
StoreVar $s107
LoadVar $s107
1-ary IsEmpty
JumpCond True 128
Cut($s107, i)
Push PC(90)
LoadVar i
DelVar i
Push ()
Spawn
Jump 118
DelVar $s107
Return
DelVar result
```

Duration: 0.0017027999999999488

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store network
Jump 97
Frame send m
AtomicInc(lazy)
Load network
Push ()
Push 0
LoadVar m
DelVar m
3-ary DictAdd
2-ary +
Store network
AtomicDec
Return
Jump 97
Frame replica immortal
Push ()
StoreVar hist
Push {}
LoadVar immortal
2-ary SetAdd
Push True
2-ary SetAdd
Choose
JumpCond False 32
LoadVar hist
1-ary len
Push 3
2-ary <
Jump 33
Push False
JumpCond False 61
AtomicInc(lazy)
ReadonlyInc
Load network
1-ary len
LoadVar hist
1-ary len
2-ary >
JumpCond False 43
Jump 46
ReadonlyDec
AtomicDec
Jump 34
ReadonlyDec
LoadVar hist
Push ()
Push 0
Push ?network
LoadVar hist
DelVar hist
1-ary len
Address
Load
3-ary DictAdd
2-ary +
StoreVar hist
AtomicDec
Jump 20
DelVar immortal
LoadVar hist
1-ary len
Push 3
2-ary ==
JumpCond False 87
ReadonlyInc
AtomicInc(lazy)
LoadVar hist
Load network
2-ary ==
Assert
AtomicDec
ReadonlyDec
ReadonlyInc
AtomicInc(lazy)
Push { 1, 2, 3 }
Choose
LoadVar hist
2-ary in
Assert
AtomicDec
ReadonlyDec
LoadVar hist
DelVar hist
Print
DelVar hist
Return
Jump 97
Frame client self
Push PC(4)
LoadVar self
DelVar self
Apply
Pop
Return
Push { 0, 1, 2 }
Choose
StoreVar survivor
Push { 0, 1, 2 }
StoreVar $s94
LoadVar $s94
1-ary IsEmpty
JumpCond True 114
Cut($s94, i)
Push PC(17)
LoadVar i
DelVar i
LoadVar survivor
2-ary ==
Push ()
Spawn
Jump 102
DelVar $s94
DelVar survivor
Push { 1, 2, 3 }
StoreVar $s107
LoadVar $s107
1-ary IsEmpty
JumpCond True 128
Cut($s107, i)
Push PC(90)
LoadVar i
DelVar i
Push ()
Spawn
Jump 118
DelVar $s107
Return
DelVar result
```

Duration: 0.0014099000000000195

---
##  code/paxos1.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store bag
Jump 356
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 356
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s11
LoadVar $s11
1-ary IsEmpty
JumpCond True 25
Cut($s11, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 16
DelVar $s11
StoreVar result
Return
Jump 356
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s27
LoadVar $s27
1-ary IsEmpty
JumpCond True 62
Cut($s27, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 55
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 36
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 36
DelVar $s27
Return
Jump 356
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 88
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 92
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 356
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s91
LoadVar $s91
1-ary IsEmpty
JumpCond True 121
Cut($s91, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 110
DelVar $s91
Return
Jump 356
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 356
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 356
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 356
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 198
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 204
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 356
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 231
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 232
Push False
JumpCond False 241
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 252
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 356
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 270
DelVar bg
DelVar k
Push {}
Push PC(4)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 355
Push PC(94)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 284
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 355
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 296
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 355
Push PC(124)
LoadVar bg
Apply
StoreVar hd
Push PC(206)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(255)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s268
LoadVar $s268
1-ary IsEmpty
JumpCond True 340
Cut($s268, x)
Push PC(169)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 324
DelVar $s268
DelVar hd
Push PC(255)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Push PC(4)
Push ()
Apply
Store network
Push 0
StoreVar $n311
Push ()
Push { 0, 1 }
StoreVar $s314
LoadVar $s314
1-ary IsEmpty
JumpCond True 376
Cut($s314, i)
DelVar i
LoadVar $n311
Push { 0, 1 }
Choose
3-ary DictAdd
IncVar $n311
Jump 365
DelVar $n311
DelVar $s314
Store proposals
Jump 454
Frame send m
AtomicInc(lazy)
Push PC(169)
Push ()
Push 0
Load network
3-ary DictAdd
Push 1
LoadVar m
DelVar m
3-ary DictAdd
Apply
Store network
AtomicDec
Return
Jump 454
Frame receive (ballot, phase)
DelVar result
Push ()
Load network
StoreVar $s345
DelVar c
DelVar e
LoadVar $s345
1-ary IsEmpty
JumpCond True 438
Cut($s345, (b, p, t, e), c)
Push ()
Push 0
LoadVar b
DelVar b
3-ary DictAdd
Push 1
LoadVar p
DelVar p
3-ary DictAdd
Push 2
LoadVar t
DelVar t
3-ary DictAdd
Push ()
Push 0
LoadVar ballot
3-ary DictAdd
Push 1
LoadVar phase
3-ary DictAdd
Push 2
Push "B"
3-ary DictAdd
2-ary ==
JumpCond False 401
LoadVar e
DelVar e
LoadVar c
DelVar c
3-ary DictAdd
Jump 401
DelVar $s345
DelVar ballot
DelVar phase
StoreVar msgs
Push PC(255)
Push ()
Push 0
LoadVar msgs
DelVar msgs
3-ary DictAdd
Push 1
Push 2
3-ary DictAdd
Apply
StoreVar result
Return
Load proposals
Print
Push { 0, 1 }
StoreVar $s391
LoadVar $s391
1-ary IsEmpty
JumpCond True 479
Cut($s391, i)
Load leader
Push ()
Push 0
LoadVar i
Push 1
2-ary +
3-ary DictAdd
Push 1
Push ?proposals
LoadVar i
DelVar i
Address
Load
3-ary DictAdd
Push ()
Spawn
Jump 458
DelVar $s391
Push { 1, 2, 3 }
StoreVar $s413
LoadVar $s413
1-ary IsEmpty
JumpCond True 492
Cut($s413, i)
DelVar i
Load acceptor
Push ()
Push ()
Spawn
Jump 482
DelVar $s413
Return
DelVar result
```

Duration: 0.0014252000000000153

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store bag
Jump 356
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 356
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s11
LoadVar $s11
1-ary IsEmpty
JumpCond True 25
Cut($s11, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 16
DelVar $s11
StoreVar result
Return
Jump 356
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s27
LoadVar $s27
1-ary IsEmpty
JumpCond True 62
Cut($s27, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 55
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 36
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 36
DelVar $s27
Return
Jump 356
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 88
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 92
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 356
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s91
LoadVar $s91
1-ary IsEmpty
JumpCond True 121
Cut($s91, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 110
DelVar $s91
Return
Jump 356
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 356
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 356
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 356
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 198
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 204
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 356
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 231
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 232
Push False
JumpCond False 241
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 252
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 356
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 270
DelVar bg
DelVar k
Push {}
Push PC(4)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 355
Push PC(94)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 284
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 355
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 296
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 355
Push PC(124)
LoadVar bg
Apply
StoreVar hd
Push PC(206)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(255)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s268
LoadVar $s268
1-ary IsEmpty
JumpCond True 340
Cut($s268, x)
Push PC(169)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 324
DelVar $s268
DelVar hd
Push PC(255)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Push PC(4)
Push ()
Apply
Store network
Push 0
StoreVar $n311
Push ()
Push { 0, 1 }
StoreVar $s314
LoadVar $s314
1-ary IsEmpty
JumpCond True 376
Cut($s314, i)
DelVar i
LoadVar $n311
Push { 0, 1 }
Choose
3-ary DictAdd
IncVar $n311
Jump 365
DelVar $n311
DelVar $s314
Store proposals
Jump 454
Frame send m
AtomicInc(lazy)
Push PC(169)
Push ()
Push 0
Load network
3-ary DictAdd
Push 1
LoadVar m
DelVar m
3-ary DictAdd
Apply
Store network
AtomicDec
Return
Jump 454
Frame receive (ballot, phase)
DelVar result
Push ()
Load network
StoreVar $s345
DelVar c
DelVar e
LoadVar $s345
1-ary IsEmpty
JumpCond True 438
Cut($s345, (b, p, t, e), c)
Push ()
Push 0
LoadVar b
DelVar b
3-ary DictAdd
Push 1
LoadVar p
DelVar p
3-ary DictAdd
Push 2
LoadVar t
DelVar t
3-ary DictAdd
Push ()
Push 0
LoadVar ballot
3-ary DictAdd
Push 1
LoadVar phase
3-ary DictAdd
Push 2
Push "B"
3-ary DictAdd
2-ary ==
JumpCond False 401
LoadVar e
DelVar e
LoadVar c
DelVar c
3-ary DictAdd
Jump 401
DelVar $s345
DelVar ballot
DelVar phase
StoreVar msgs
Push PC(255)
Push ()
Push 0
LoadVar msgs
DelVar msgs
3-ary DictAdd
Push 1
Push 2
3-ary DictAdd
Apply
StoreVar result
Return
Load proposals
Print
Push { 0, 1 }
StoreVar $s391
LoadVar $s391
1-ary IsEmpty
JumpCond True 479
Cut($s391, i)
Load leader
Push ()
Push 0
LoadVar i
Push 1
2-ary +
3-ary DictAdd
Push 1
Push ?proposals
LoadVar i
DelVar i
Address
Load
3-ary DictAdd
Push ()
Spawn
Jump 458
DelVar $s391
Push { 1, 2, 3 }
StoreVar $s413
LoadVar $s413
1-ary IsEmpty
JumpCond True 492
Cut($s413, i)
DelVar i
Load acceptor
Push ()
Push ()
Spawn
Jump 482
DelVar $s413
Return
DelVar result
```

Duration: 0.0011161000000000088

---
##  code/queuespec.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store list
Jump 415
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n5
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s8
LoadVar $s8
1-ary IsEmpty
JumpCond True 29
Cut($s8, x)
LoadVar $n5
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n5
Jump 17
DelVar $n5
DelVar $s8
DelVar s
StoreVar result
Return
Jump 415
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 415
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 415
Frame tail s
DelVar result
Push PC(4)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 415
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s65
LoadVar $s65
1-ary IsEmpty
JumpCond True 94
Cut($s65, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 83
DelVar $s65
Return
Jump 415
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s80
LoadVar $s80
1-ary IsEmpty
JumpCond True 111
Cut($s80, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 103
DelVar $s80
StoreVar result
Return
Jump 415
Frame list a
DelVar result
Push 0
StoreVar $n93
Push ()
LoadVar a
DelVar a
StoreVar $s96
LoadVar $s96
1-ary IsEmpty
JumpCond True 133
Cut($s96, v)
LoadVar $n93
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n93
Jump 123
DelVar $n93
DelVar $s96
StoreVar result
Return
Jump 415
Frame values d
DelVar result
Push 0
StoreVar $n111
Push ()
LoadVar d
1-ary keys
StoreVar $s114
LoadVar $s114
1-ary IsEmpty
JumpCond True 158
Cut($s114, k)
LoadVar $n111
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n111
Jump 146
DelVar $n111
DelVar $s114
DelVar d
StoreVar result
Return
Jump 415
Frame items d
DelVar result
Push 0
StoreVar $n132
Push ()
LoadVar d
1-ary keys
StoreVar $s135
LoadVar $s135
1-ary IsEmpty
JumpCond True 190
Cut($s135, k)
LoadVar $n132
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n132
Jump 172
DelVar $n132
DelVar $s135
DelVar d
StoreVar result
Return
Jump 415
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s163
LoadVar $s163
1-ary IsEmpty
JumpCond True 232
Cut($s163, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 205
DelVar $s163
DelVar d
DelVar index
Return
Jump 415
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 247
DelVar a
Push ()
StoreVar result
Jump 322
Push ()
Push 0
Push PC(48)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(57)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n212
Push ()
LoadVar rest
StoreVar $s215
DelVar v
LoadVar $s215
1-ary IsEmpty
JumpCond True 280
Cut($s215, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 265
LoadVar $n212
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n212
Jump 265
DelVar $n212
DelVar $s215
StoreVar lower
Push 0
StoreVar $n231
Push ()
LoadVar rest
DelVar rest
StoreVar $s234
DelVar v
LoadVar $s234
1-ary IsEmpty
JumpCond True 304
Cut($s234, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 289
LoadVar $n231
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n231
Jump 289
DelVar $n231
DelVar $s234
StoreVar higher
Push PC(237)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(237)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 415
Frame sorted d
DelVar result
Push PC(237)
Push PC(115)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 415
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n277
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s280
LoadVar $s280
1-ary IsEmpty
JumpCond True 361
Cut($s280, i)
LoadVar $n277
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n277
Jump 347
DelVar $n277
DelVar $s280
DelVar d
DelVar n
StoreVar result
Return
Jump 415
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 415
Frame put (q, v)
LoadVar q
Push PC(35)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar v
DelVar v
3-ary DictAdd
Apply
Store
Return
Jump 415
Frame get q
DelVar result
LoadVar q
Load
Push ()
2-ary ==
JumpCond False 402
DelVar q
Push None
StoreVar result
Jump 414
Push PC(48)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(57)
LoadVar q
DelVar q
Load
Apply
Store
Return
Return
DelVar result
```

Duration: 0.0015460999999999947

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store list
Jump 415
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n5
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s8
LoadVar $s8
1-ary IsEmpty
JumpCond True 29
Cut($s8, x)
LoadVar $n5
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n5
Jump 17
DelVar $n5
DelVar $s8
DelVar s
StoreVar result
Return
Jump 415
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 415
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 415
Frame tail s
DelVar result
Push PC(4)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 415
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s65
LoadVar $s65
1-ary IsEmpty
JumpCond True 94
Cut($s65, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 83
DelVar $s65
Return
Jump 415
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s80
LoadVar $s80
1-ary IsEmpty
JumpCond True 111
Cut($s80, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 103
DelVar $s80
StoreVar result
Return
Jump 415
Frame list a
DelVar result
Push 0
StoreVar $n93
Push ()
LoadVar a
DelVar a
StoreVar $s96
LoadVar $s96
1-ary IsEmpty
JumpCond True 133
Cut($s96, v)
LoadVar $n93
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n93
Jump 123
DelVar $n93
DelVar $s96
StoreVar result
Return
Jump 415
Frame values d
DelVar result
Push 0
StoreVar $n111
Push ()
LoadVar d
1-ary keys
StoreVar $s114
LoadVar $s114
1-ary IsEmpty
JumpCond True 158
Cut($s114, k)
LoadVar $n111
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n111
Jump 146
DelVar $n111
DelVar $s114
DelVar d
StoreVar result
Return
Jump 415
Frame items d
DelVar result
Push 0
StoreVar $n132
Push ()
LoadVar d
1-ary keys
StoreVar $s135
LoadVar $s135
1-ary IsEmpty
JumpCond True 190
Cut($s135, k)
LoadVar $n132
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n132
Jump 172
DelVar $n132
DelVar $s135
DelVar d
StoreVar result
Return
Jump 415
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s163
LoadVar $s163
1-ary IsEmpty
JumpCond True 232
Cut($s163, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 205
DelVar $s163
DelVar d
DelVar index
Return
Jump 415
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 247
DelVar a
Push ()
StoreVar result
Jump 322
Push ()
Push 0
Push PC(48)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(57)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n212
Push ()
LoadVar rest
StoreVar $s215
DelVar v
LoadVar $s215
1-ary IsEmpty
JumpCond True 280
Cut($s215, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 265
LoadVar $n212
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n212
Jump 265
DelVar $n212
DelVar $s215
StoreVar lower
Push 0
StoreVar $n231
Push ()
LoadVar rest
DelVar rest
StoreVar $s234
DelVar v
LoadVar $s234
1-ary IsEmpty
JumpCond True 304
Cut($s234, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 289
LoadVar $n231
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n231
Jump 289
DelVar $n231
DelVar $s234
StoreVar higher
Push PC(237)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(237)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 415
Frame sorted d
DelVar result
Push PC(237)
Push PC(115)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 415
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n277
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s280
LoadVar $s280
1-ary IsEmpty
JumpCond True 361
Cut($s280, i)
LoadVar $n277
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n277
Jump 347
DelVar $n277
DelVar $s280
DelVar d
DelVar n
StoreVar result
Return
Jump 415
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 415
Frame put (q, v)
LoadVar q
Push PC(35)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar v
DelVar v
3-ary DictAdd
Apply
Store
Return
Jump 415
Frame get q
DelVar result
LoadVar q
Load
Push ()
2-ary ==
JumpCond False 402
DelVar q
Push None
StoreVar result
Jump 414
Push PC(48)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(57)
LoadVar q
DelVar q
Load
Apply
Store
Return
Return
DelVar result
```

Duration: 0.0013191000000000175

---
##  code/RWbtest.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store RW
Jump 90
Frame RWlock ()
DelVar result
Push { "nreaders":0, "nwriters":0 }
StoreVar result
Return
Jump 90
Frame read_acquire rw
AtomicInc(lazy)
ReadonlyInc
LoadVar rw
Push "nwriters"
Address
Load
Push 0
2-ary ==
JumpCond False 21
Jump 24
ReadonlyDec
AtomicDec
Jump 11
ReadonlyDec
LoadVar rw
DelVar rw
Push "nreaders"
Address
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 90
Frame read_release rw
AtomicInc(lazy)
LoadVar rw
DelVar rw
Push "nreaders"
Address
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 90
Frame write_acquire rw
AtomicInc(lazy)
ReadonlyInc
LoadVar rw
Push "nreaders"
Address
Load
LoadVar rw
Push "nwriters"
Address
Load
2-ary +
Push 0
2-ary ==
JumpCond False 67
Jump 70
ReadonlyDec
AtomicDec
Jump 52
ReadonlyDec
LoadVar rw
DelVar rw
Push "nwriters"
Address
Push 1
Store
AtomicDec
Return
Jump 90
Frame write_release rw
AtomicInc(lazy)
LoadVar rw
DelVar rw
Push "nwriters"
Address
Push 0
Store
AtomicDec
Return
Push PC(4)
Push ()
Apply
Store rw
Jump 224
Frame thread self
Push { False, True }
Choose
JumpCond False 222
Push { "read", "write" }
Choose
Push "read"
2-ary ==
JumpCond False 163
Push ()
Push 0
LoadVar self
3-ary DictAdd
Push 1
Push "enter ra"
3-ary DictAdd
Print
Push PC(10)
Push ?rw
Apply
Pop
Push ()
Push 0
LoadVar self
3-ary DictAdd
Push 1
Push "exit ra"
3-ary DictAdd
Print
AtomicInc(eager)
ReadonlyInc
AtomicInc(lazy)
Push PC(124)
1-ary countLabel
Push 1
2-ary >=
JumpCond False 137
Push PC(183)
1-ary countLabel
Push 0
2-ary ==
Jump 138
Push False
Assert
AtomicDec
ReadonlyDec
AtomicDec
Push ()
Push 0
LoadVar self
3-ary DictAdd
Push 1
Push "enter rr"
3-ary DictAdd
Print
Push PC(37)
Push ?rw
Apply
Pop
Push ()
Push 0
LoadVar self
3-ary DictAdd
Push 1
Push "exit rr"
3-ary DictAdd
Print
Jump 96
Push ()
Push 0
LoadVar self
3-ary DictAdd
Push 1
Push "enter wa"
3-ary DictAdd
Print
Push PC(51)
Push ?rw
Apply
Pop
Push ()
Push 0
LoadVar self
3-ary DictAdd
Push 1
Push "exit wa"
3-ary DictAdd
Print
AtomicInc(eager)
ReadonlyInc
AtomicInc(lazy)
Push PC(124)
1-ary countLabel
Push 0
2-ary ==
JumpCond False 196
Push PC(183)
1-ary countLabel
Push 1
2-ary ==
Jump 197
Push False
Assert
AtomicDec
ReadonlyDec
AtomicDec
Push ()
Push 0
LoadVar self
3-ary DictAdd
Push 1
Push "enter wr"
3-ary DictAdd
Print
Push PC(80)
Push ?rw
Apply
Pop
Push ()
Push 0
LoadVar self
3-ary DictAdd
Push 1
Push "enter wr"
3-ary DictAdd
Print
Jump 96
DelVar self
Return
Push { 1, 2, 3 }
StoreVar $s218
LoadVar $s218
1-ary IsEmpty
JumpCond True 236
Cut($s218, i)
Push PC(95)
LoadVar i
DelVar i
Push ()
Spawn
Jump 226
DelVar $s218
Return
DelVar result
```

Duration: 0.0016201000000000132

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store RW
Jump 90
Frame RWlock ()
DelVar result
Push { "nreaders":0, "nwriters":0 }
StoreVar result
Return
Jump 90
Frame read_acquire rw
AtomicInc(lazy)
ReadonlyInc
LoadVar rw
Push "nwriters"
Address
Load
Push 0
2-ary ==
JumpCond False 21
Jump 24
ReadonlyDec
AtomicDec
Jump 11
ReadonlyDec
LoadVar rw
DelVar rw
Push "nreaders"
Address
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 90
Frame read_release rw
AtomicInc(lazy)
LoadVar rw
DelVar rw
Push "nreaders"
Address
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 90
Frame write_acquire rw
AtomicInc(lazy)
ReadonlyInc
LoadVar rw
Push "nreaders"
Address
Load
LoadVar rw
Push "nwriters"
Address
Load
2-ary +
Push 0
2-ary ==
JumpCond False 67
Jump 70
ReadonlyDec
AtomicDec
Jump 52
ReadonlyDec
LoadVar rw
DelVar rw
Push "nwriters"
Address
Push 1
Store
AtomicDec
Return
Jump 90
Frame write_release rw
AtomicInc(lazy)
LoadVar rw
DelVar rw
Push "nwriters"
Address
Push 0
Store
AtomicDec
Return
Push PC(4)
Push ()
Apply
Store rw
Jump 224
Frame thread self
Push { False, True }
Choose
JumpCond False 222
Push { "read", "write" }
Choose
Push "read"
2-ary ==
JumpCond False 163
Push ()
Push 0
LoadVar self
3-ary DictAdd
Push 1
Push "enter ra"
3-ary DictAdd
Print
Push PC(10)
Push ?rw
Apply
Pop
Push ()
Push 0
LoadVar self
3-ary DictAdd
Push 1
Push "exit ra"
3-ary DictAdd
Print
AtomicInc(eager)
ReadonlyInc
AtomicInc(lazy)
Push PC(124)
1-ary countLabel
Push 1
2-ary >=
JumpCond False 137
Push PC(183)
1-ary countLabel
Push 0
2-ary ==
Jump 138
Push False
Assert
AtomicDec
ReadonlyDec
AtomicDec
Push ()
Push 0
LoadVar self
3-ary DictAdd
Push 1
Push "enter rr"
3-ary DictAdd
Print
Push PC(37)
Push ?rw
Apply
Pop
Push ()
Push 0
LoadVar self
3-ary DictAdd
Push 1
Push "exit rr"
3-ary DictAdd
Print
Jump 96
Push ()
Push 0
LoadVar self
3-ary DictAdd
Push 1
Push "enter wa"
3-ary DictAdd
Print
Push PC(51)
Push ?rw
Apply
Pop
Push ()
Push 0
LoadVar self
3-ary DictAdd
Push 1
Push "exit wa"
3-ary DictAdd
Print
AtomicInc(eager)
ReadonlyInc
AtomicInc(lazy)
Push PC(124)
1-ary countLabel
Push 0
2-ary ==
JumpCond False 196
Push PC(183)
1-ary countLabel
Push 1
2-ary ==
Jump 197
Push False
Assert
AtomicDec
ReadonlyDec
AtomicDec
Push ()
Push 0
LoadVar self
3-ary DictAdd
Push 1
Push "enter wr"
3-ary DictAdd
Print
Push PC(80)
Push ?rw
Apply
Pop
Push ()
Push 0
LoadVar self
3-ary DictAdd
Push 1
Push "enter wr"
3-ary DictAdd
Print
Jump 96
DelVar self
Return
Push { 1, 2, 3 }
StoreVar $s218
LoadVar $s218
1-ary IsEmpty
JumpCond True 236
Cut($s218, i)
Push PC(95)
LoadVar i
DelVar i
Push ()
Spawn
Jump 226
DelVar $s218
Return
DelVar result
```

Duration: 0.0012801000000000062

---
##  code/RWhoare.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store synch
Push ()
Store list
Jump 369
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 369
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 369
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 369
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 369
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 369
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 369
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 369
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 369
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 369
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 369
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 369
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 369
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Push ()
Store bag
Jump 1141
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1141
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s311
LoadVar $s311
1-ary IsEmpty
JumpCond True 393
Cut($s311, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 384
DelVar $s311
StoreVar result
Return
Jump 1141
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s327
LoadVar $s327
1-ary IsEmpty
JumpCond True 430
Cut($s327, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 423
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 404
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 404
DelVar $s327
Return
Jump 1141
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 456
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 460
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1141
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s391
LoadVar $s391
1-ary IsEmpty
JumpCond True 489
Cut($s391, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 478
DelVar $s391
Return
Jump 1141
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1141
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1141
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1141
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 566
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 572
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1141
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 599
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 600
Push False
JumpCond False 609
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 620
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1141
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 638
DelVar bg
DelVar k
Push {}
Push PC(372)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 723
Push PC(462)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 652
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 723
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 664
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 723
Push PC(492)
LoadVar bg
Apply
StoreVar hd
Push PC(574)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(623)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s568
LoadVar $s568
1-ary IsEmpty
JumpCond True 708
Cut($s568, x)
Push PC(537)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 692
DelVar $s568
DelVar hd
Push PC(623)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1141
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1141
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 754
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1141
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1141
Frame Lock ()
DelVar result
Push PC(759)
Push False
Apply
StoreVar result
Return
Jump 1141
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1141
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 790
Jump 793
ReadonlyDec
AtomicDec
Jump 783
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1141
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1141
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1141
Frame Condition ()
DelVar result
Push PC(372)
Push ()
Apply
StoreVar result
Return
Jump 1141
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(537)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 887
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 888
Push False
JumpCond False 893
DelVar c
DelVar cnt
DelVar ctx
Jump 896
ReadonlyDec
AtomicDec
Jump 868
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1141
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(372)
Push ()
Apply
2-ary !=
JumpCond False 929
LoadVar c
Push PC(574)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(519)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1141
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(372)
Push ()
Apply
Store
AtomicDec
Return
Jump 1141
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1141
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 960
Jump 963
ReadonlyDec
AtomicDec
Jump 952
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1141
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1141
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1141
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1002
Jump 1005
ReadonlyDec
AtomicDec
Jump 993
ReadonlyDec
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1141
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Jump 1141
Frame mon_enter ()
Push PC(951)
Push ?mutex
Apply
Pop
Return
Jump 1141
Frame mon_exit ()
Push PC(974)
Push ?mutex
Apply
Pop
Return
Jump 1141
Frame H_Condition mon
DelVar result
Push ()
Push "lock"
LoadVar mon
DelVar mon
3-ary DictAdd
Push "sema"
Push PC(944)
Push 0
Apply
3-ary DictAdd
Push "count"
Push 0
3-ary DictAdd
StoreVar result
Return
Jump 1141
Frame H_wait cond
LoadVar cond
Push "count"
Address
Dup
Load
Push 1
2-ary +
Store
Push PC(974)
LoadVar cond
Push "lock"
Address
Load
Apply
Pop
Push PC(951)
LoadVar cond
Push "sema"
Address
Apply
Pop
LoadVar cond
DelVar cond
Push "count"
Address
Dup
Load
Push 1
2-ary -
Store
Return
Jump 1141
Frame H_has_waiters cond
DelVar result
LoadVar cond
DelVar cond
Push "count"
Address
Load
Push 0
2-ary >
StoreVar result
Return
Jump 1141
Frame H_signal cond
LoadVar cond
Push "count"
Address
Load
Push 0
2-ary >
JumpCond False 1139
Push PC(974)
LoadVar cond
Push "sema"
Address
Apply
Pop
Push PC(951)
LoadVar cond
DelVar cond
Push "lock"
Address
Load
Apply
Pop
DelVar cond
Return
Push PC(944)
Push 1
Apply
Store mutex
Push PC(1054)
Push ?mutex
Apply
Store OKtoread
Push PC(1054)
Push ?mutex
Apply
Store OKtowrite
Push ?r_entered
Push ?w_entered
Push [0, 0]
Split 2
Move 3
Move 2
Store
Store
Jump 1264
Frame acquire_rlock ()
Push PC(1040)
Push ()
Apply
Pop
Load w_entered
Push 0
2-ary >
JumpCond False 1175
Push PC(1072)
Push ?OKtoread
Apply
Pop
Load r_entered
Push 1
2-ary +
Store r_entered
Push PC(1117)
Push ?OKtoread
Apply
Pop
Push PC(1047)
Push ()
Apply
Pop
Return
Jump 1264
Frame release_rlock ()
Push PC(1040)
Push ()
Apply
Pop
Load r_entered
Push 1
2-ary -
Store r_entered
Load r_entered
Push 0
2-ary ==
JumpCond False 1206
Push PC(1117)
Push ?OKtowrite
Apply
Pop
Push PC(1047)
Push ()
Apply
Pop
Return
Jump 1264
Frame acquire_wlock ()
Push PC(1040)
Push ()
Apply
Pop
Load r_entered
Load w_entered
2-ary +
Push 0
2-ary >
JumpCond False 1227
Push PC(1072)
Push ?OKtowrite
Apply
Pop
Load w_entered
Push 1
2-ary +
Store w_entered
Push PC(1047)
Push ()
Apply
Pop
Return
Jump 1264
Frame release_wlock ()
Push PC(1040)
Push ()
Apply
Pop
Load w_entered
Push 1
2-ary -
Store w_entered
Push PC(1105)
Push ?OKtoread
Apply
JumpCond False 1255
Push PC(1117)
Push ?OKtoread
Apply
Pop
Jump 1259
Push PC(1117)
Push ?OKtowrite
Apply
Pop
Push PC(1047)
Push ()
Apply
Pop
Return
Return
DelVar result
```

Duration: 0.0015228999999999937

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store synch
Push ()
Store list
Jump 369
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 369
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 369
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 369
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 369
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 369
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 369
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 369
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 369
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 369
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 369
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 369
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 369
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Push ()
Store bag
Jump 1141
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1141
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s311
LoadVar $s311
1-ary IsEmpty
JumpCond True 393
Cut($s311, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 384
DelVar $s311
StoreVar result
Return
Jump 1141
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s327
LoadVar $s327
1-ary IsEmpty
JumpCond True 430
Cut($s327, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 423
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 404
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 404
DelVar $s327
Return
Jump 1141
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 456
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 460
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1141
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s391
LoadVar $s391
1-ary IsEmpty
JumpCond True 489
Cut($s391, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 478
DelVar $s391
Return
Jump 1141
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1141
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1141
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1141
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 566
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 572
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1141
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 599
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 600
Push False
JumpCond False 609
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 620
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1141
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 638
DelVar bg
DelVar k
Push {}
Push PC(372)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 723
Push PC(462)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 652
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 723
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 664
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 723
Push PC(492)
LoadVar bg
Apply
StoreVar hd
Push PC(574)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(623)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s568
LoadVar $s568
1-ary IsEmpty
JumpCond True 708
Cut($s568, x)
Push PC(537)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 692
DelVar $s568
DelVar hd
Push PC(623)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1141
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1141
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 754
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1141
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1141
Frame Lock ()
DelVar result
Push PC(759)
Push False
Apply
StoreVar result
Return
Jump 1141
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1141
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 790
Jump 793
ReadonlyDec
AtomicDec
Jump 783
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1141
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1141
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1141
Frame Condition ()
DelVar result
Push PC(372)
Push ()
Apply
StoreVar result
Return
Jump 1141
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(537)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 887
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 888
Push False
JumpCond False 893
DelVar c
DelVar cnt
DelVar ctx
Jump 896
ReadonlyDec
AtomicDec
Jump 868
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1141
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(372)
Push ()
Apply
2-ary !=
JumpCond False 929
LoadVar c
Push PC(574)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(519)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1141
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(372)
Push ()
Apply
Store
AtomicDec
Return
Jump 1141
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1141
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 960
Jump 963
ReadonlyDec
AtomicDec
Jump 952
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1141
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1141
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1141
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1002
Jump 1005
ReadonlyDec
AtomicDec
Jump 993
ReadonlyDec
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1141
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Jump 1141
Frame mon_enter ()
Push PC(951)
Push ?mutex
Apply
Pop
Return
Jump 1141
Frame mon_exit ()
Push PC(974)
Push ?mutex
Apply
Pop
Return
Jump 1141
Frame H_Condition mon
DelVar result
Push ()
Push "lock"
LoadVar mon
DelVar mon
3-ary DictAdd
Push "sema"
Push PC(944)
Push 0
Apply
3-ary DictAdd
Push "count"
Push 0
3-ary DictAdd
StoreVar result
Return
Jump 1141
Frame H_wait cond
LoadVar cond
Push "count"
Address
Dup
Load
Push 1
2-ary +
Store
Push PC(974)
LoadVar cond
Push "lock"
Address
Load
Apply
Pop
Push PC(951)
LoadVar cond
Push "sema"
Address
Apply
Pop
LoadVar cond
DelVar cond
Push "count"
Address
Dup
Load
Push 1
2-ary -
Store
Return
Jump 1141
Frame H_has_waiters cond
DelVar result
LoadVar cond
DelVar cond
Push "count"
Address
Load
Push 0
2-ary >
StoreVar result
Return
Jump 1141
Frame H_signal cond
LoadVar cond
Push "count"
Address
Load
Push 0
2-ary >
JumpCond False 1139
Push PC(974)
LoadVar cond
Push "sema"
Address
Apply
Pop
Push PC(951)
LoadVar cond
DelVar cond
Push "lock"
Address
Load
Apply
Pop
DelVar cond
Return
Push PC(944)
Push 1
Apply
Store mutex
Push PC(1054)
Push ?mutex
Apply
Store OKtoread
Push PC(1054)
Push ?mutex
Apply
Store OKtowrite
Push ?r_entered
Push ?w_entered
Push [0, 0]
Split 2
Move 3
Move 2
Store
Store
Jump 1264
Frame acquire_rlock ()
Push PC(1040)
Push ()
Apply
Pop
Load w_entered
Push 0
2-ary >
JumpCond False 1175
Push PC(1072)
Push ?OKtoread
Apply
Pop
Load r_entered
Push 1
2-ary +
Store r_entered
Push PC(1117)
Push ?OKtoread
Apply
Pop
Push PC(1047)
Push ()
Apply
Pop
Return
Jump 1264
Frame release_rlock ()
Push PC(1040)
Push ()
Apply
Pop
Load r_entered
Push 1
2-ary -
Store r_entered
Load r_entered
Push 0
2-ary ==
JumpCond False 1206
Push PC(1117)
Push ?OKtowrite
Apply
Pop
Push PC(1047)
Push ()
Apply
Pop
Return
Jump 1264
Frame acquire_wlock ()
Push PC(1040)
Push ()
Apply
Pop
Load r_entered
Load w_entered
2-ary +
Push 0
2-ary >
JumpCond False 1227
Push PC(1072)
Push ?OKtowrite
Apply
Pop
Load w_entered
Push 1
2-ary +
Store w_entered
Push PC(1047)
Push ()
Apply
Pop
Return
Jump 1264
Frame release_wlock ()
Push PC(1040)
Push ()
Apply
Pop
Load w_entered
Push 1
2-ary -
Store w_entered
Push PC(1105)
Push ?OKtoread
Apply
JumpCond False 1255
Push PC(1117)
Push ?OKtoread
Apply
Pop
Jump 1259
Push PC(1117)
Push ?OKtowrite
Apply
Pop
Push PC(1047)
Push ()
Apply
Pop
Return
Return
DelVar result
```

Duration: 0.0017217999999999956

---
##  code/RWbusy.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store synch
Push ()
Store list
Jump 369
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 369
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 369
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 369
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 369
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 369
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 369
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 369
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 369
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 369
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 369
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 369
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 369
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Push ()
Store bag
Jump 1191
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1191
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s311
LoadVar $s311
1-ary IsEmpty
JumpCond True 393
Cut($s311, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 384
DelVar $s311
StoreVar result
Return
Jump 1191
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s327
LoadVar $s327
1-ary IsEmpty
JumpCond True 430
Cut($s327, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 423
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 404
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 404
DelVar $s327
Return
Jump 1191
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 456
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 460
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1191
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s391
LoadVar $s391
1-ary IsEmpty
JumpCond True 489
Cut($s391, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 478
DelVar $s391
Return
Jump 1191
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1191
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1191
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1191
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 566
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 572
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1191
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 599
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 600
Push False
JumpCond False 609
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 620
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1191
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 638
DelVar bg
DelVar k
Push {}
Push PC(372)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 723
Push PC(462)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 652
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 723
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 664
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 723
Push PC(492)
LoadVar bg
Apply
StoreVar hd
Push PC(574)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(623)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s568
LoadVar $s568
1-ary IsEmpty
JumpCond True 708
Cut($s568, x)
Push PC(537)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 692
DelVar $s568
DelVar hd
Push PC(623)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1191
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1191
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 754
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1191
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1191
Frame Lock ()
DelVar result
Push PC(759)
Push False
Apply
StoreVar result
Return
Jump 1191
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1191
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 790
Jump 793
ReadonlyDec
AtomicDec
Jump 783
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1191
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1191
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1191
Frame Condition ()
DelVar result
Push PC(372)
Push ()
Apply
StoreVar result
Return
Jump 1191
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(537)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 887
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 888
Push False
JumpCond False 893
DelVar c
DelVar cnt
DelVar ctx
Jump 896
ReadonlyDec
AtomicDec
Jump 868
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1191
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(372)
Push ()
Apply
2-ary !=
JumpCond False 929
LoadVar c
Push PC(574)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(519)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1191
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(372)
Push ()
Apply
Store
AtomicDec
Return
Jump 1191
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1191
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 960
Jump 963
ReadonlyDec
AtomicDec
Jump 952
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1191
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1191
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1191
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1002
Jump 1005
ReadonlyDec
AtomicDec
Jump 993
ReadonlyDec
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1191
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Jump 1191
Frame RWlock ()
DelVar result
Push ()
Push "lock"
Push PC(766)
Push ()
Apply
3-ary DictAdd
Push "nreaders"
Push 0
3-ary DictAdd
Push "nwriters"
Push 0
3-ary DictAdd
StoreVar result
Return
Jump 1191
Frame read_acquire rw
Push PC(782)
LoadVar rw
Push "lock"
Address
Apply
Pop
LoadVar rw
Push "nwriters"
Address
Load
Push 0
2-ary >
JumpCond False 1084
Push PC(801)
LoadVar rw
Push "lock"
Address
Apply
Pop
Push PC(782)
LoadVar rw
Push "lock"
Address
Apply
Pop
Jump 1064
LoadVar rw
Push "nreaders"
Address
Dup
Load
Push 1
2-ary +
Store
Push PC(801)
LoadVar rw
DelVar rw
Push "lock"
Address
Apply
Pop
Return
Jump 1191
Frame read_release rw
Push PC(782)
LoadVar rw
Push "lock"
Address
Apply
Pop
LoadVar rw
Push "nreaders"
Address
Dup
Load
Push 1
2-ary -
Store
Push PC(801)
LoadVar rw
DelVar rw
Push "lock"
Address
Apply
Pop
Return
Jump 1191
Frame write_acquire rw
Push PC(782)
LoadVar rw
Push "lock"
Address
Apply
Pop
LoadVar rw
Push "nreaders"
Address
Load
LoadVar rw
Push "nwriters"
Address
Load
2-ary +
Push 0
2-ary >
JumpCond False 1157
Push PC(801)
LoadVar rw
Push "lock"
Address
Apply
Pop
Push PC(782)
LoadVar rw
Push "lock"
Address
Apply
Pop
Jump 1132
LoadVar rw
Push "nwriters"
Address
Push 1
Store
Push PC(801)
LoadVar rw
DelVar rw
Push "lock"
Address
Apply
Pop
Return
Jump 1191
Frame write_release rw
Push PC(782)
LoadVar rw
Push "lock"
Address
Apply
Pop
LoadVar rw
Push "nwriters"
Address
Push 0
Store
Push PC(801)
LoadVar rw
DelVar rw
Push "lock"
Address
Apply
Pop
Return
Return
DelVar result
```

Duration: 0.0014143999999999823

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store synch
Push ()
Store list
Jump 369
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 369
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 369
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 369
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 369
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 369
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 369
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 369
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 369
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 369
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 369
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 369
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 369
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Push ()
Store bag
Jump 1191
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1191
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s311
LoadVar $s311
1-ary IsEmpty
JumpCond True 393
Cut($s311, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 384
DelVar $s311
StoreVar result
Return
Jump 1191
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s327
LoadVar $s327
1-ary IsEmpty
JumpCond True 430
Cut($s327, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 423
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 404
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 404
DelVar $s327
Return
Jump 1191
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 456
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 460
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1191
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s391
LoadVar $s391
1-ary IsEmpty
JumpCond True 489
Cut($s391, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 478
DelVar $s391
Return
Jump 1191
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1191
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1191
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1191
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 566
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 572
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1191
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 599
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 600
Push False
JumpCond False 609
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 620
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1191
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 638
DelVar bg
DelVar k
Push {}
Push PC(372)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 723
Push PC(462)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 652
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 723
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 664
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 723
Push PC(492)
LoadVar bg
Apply
StoreVar hd
Push PC(574)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(623)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s568
LoadVar $s568
1-ary IsEmpty
JumpCond True 708
Cut($s568, x)
Push PC(537)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 692
DelVar $s568
DelVar hd
Push PC(623)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1191
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1191
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 754
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1191
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1191
Frame Lock ()
DelVar result
Push PC(759)
Push False
Apply
StoreVar result
Return
Jump 1191
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1191
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 790
Jump 793
ReadonlyDec
AtomicDec
Jump 783
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1191
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1191
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1191
Frame Condition ()
DelVar result
Push PC(372)
Push ()
Apply
StoreVar result
Return
Jump 1191
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(537)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 887
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 888
Push False
JumpCond False 893
DelVar c
DelVar cnt
DelVar ctx
Jump 896
ReadonlyDec
AtomicDec
Jump 868
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1191
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(372)
Push ()
Apply
2-ary !=
JumpCond False 929
LoadVar c
Push PC(574)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(519)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1191
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(372)
Push ()
Apply
Store
AtomicDec
Return
Jump 1191
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1191
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 960
Jump 963
ReadonlyDec
AtomicDec
Jump 952
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1191
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1191
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1191
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1002
Jump 1005
ReadonlyDec
AtomicDec
Jump 993
ReadonlyDec
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1191
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Jump 1191
Frame RWlock ()
DelVar result
Push ()
Push "lock"
Push PC(766)
Push ()
Apply
3-ary DictAdd
Push "nreaders"
Push 0
3-ary DictAdd
Push "nwriters"
Push 0
3-ary DictAdd
StoreVar result
Return
Jump 1191
Frame read_acquire rw
Push PC(782)
LoadVar rw
Push "lock"
Address
Apply
Pop
LoadVar rw
Push "nwriters"
Address
Load
Push 0
2-ary >
JumpCond False 1084
Push PC(801)
LoadVar rw
Push "lock"
Address
Apply
Pop
Push PC(782)
LoadVar rw
Push "lock"
Address
Apply
Pop
Jump 1064
LoadVar rw
Push "nreaders"
Address
Dup
Load
Push 1
2-ary +
Store
Push PC(801)
LoadVar rw
DelVar rw
Push "lock"
Address
Apply
Pop
Return
Jump 1191
Frame read_release rw
Push PC(782)
LoadVar rw
Push "lock"
Address
Apply
Pop
LoadVar rw
Push "nreaders"
Address
Dup
Load
Push 1
2-ary -
Store
Push PC(801)
LoadVar rw
DelVar rw
Push "lock"
Address
Apply
Pop
Return
Jump 1191
Frame write_acquire rw
Push PC(782)
LoadVar rw
Push "lock"
Address
Apply
Pop
LoadVar rw
Push "nreaders"
Address
Load
LoadVar rw
Push "nwriters"
Address
Load
2-ary +
Push 0
2-ary >
JumpCond False 1157
Push PC(801)
LoadVar rw
Push "lock"
Address
Apply
Pop
Push PC(782)
LoadVar rw
Push "lock"
Address
Apply
Pop
Jump 1132
LoadVar rw
Push "nwriters"
Address
Push 1
Store
Push PC(801)
LoadVar rw
DelVar rw
Push "lock"
Address
Apply
Pop
Return
Jump 1191
Frame write_release rw
Push PC(782)
LoadVar rw
Push "lock"
Address
Apply
Pop
LoadVar rw
Push "nwriters"
Address
Push 0
Store
Push PC(801)
LoadVar rw
DelVar rw
Push "lock"
Address
Apply
Pop
Return
Return
DelVar result
```

Duration: 0.0015412000000000203

---
##  code/setobjtest.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store setobj
Push ()
Store alloc
Push ()
Store alloc.pool
Push 0
Store alloc.next
Jump 100
Frame malloc v
DelVar result
AtomicInc(lazy)
Push ?alloc"pool"
Load alloc.next
Address
LoadVar v
DelVar v
Store
Push ?alloc"pool"
Load alloc.next
Address
StoreVar result
Load alloc.next
Push 1
2-ary +
Store alloc.next
AtomicDec
Return
Jump 100
Frame free r
AtomicInc(lazy)
LoadVar r
DelVar r
Del
AtomicDec
Return
Jump 100
Frame leak_check ()
ReadonlyInc
AtomicInc(lazy)
Load alloc.pool
Push ()
2-ary ==
Push "alloc_leak"
Assert2
AtomicDec
ReadonlyDec
Return
Jump 100
Frame SetObject ()
DelVar result
Push PC(10)
Push {}
Apply
StoreVar result
Return
Jump 100
Frame insert (s, v)
AtomicInc(lazy)
LoadVar s
DelVar s
Dup
Load
Push {}
LoadVar v
DelVar v
2-ary SetAdd
2-ary |
Store
AtomicDec
Return
Jump 100
Frame remove (s, v)
AtomicInc(lazy)
LoadVar s
DelVar s
Dup
Load
Push {}
LoadVar v
DelVar v
2-ary SetAdd
2-ary -
Store
AtomicDec
Return
Jump 100
Frame contains (s, v)
DelVar result
AtomicInc(lazy)
LoadVar v
DelVar v
LoadVar s
DelVar s
Load
2-ary in
StoreVar result
AtomicDec
Return
Push PC(50)
Push ()
Apply
Store myset
Jump 158
Frame thread1 ()
Push PC(58)
Push ()
Push 0
Load myset
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Apply
Pop
Push PC(88)
Push ()
Push 0
Load myset
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Apply
StoreVar x
ReadonlyInc
AtomicInc(lazy)
LoadVar x
DelVar x
Assert
AtomicDec
ReadonlyDec
Return
Jump 158
Frame thread2 v
Push PC(58)
Push ()
Push 0
Load myset
3-ary DictAdd
Push 1
LoadVar v
3-ary DictAdd
Apply
Pop
Push PC(73)
Push ()
Push 0
Load myset
3-ary DictAdd
Push 1
LoadVar v
DelVar v
3-ary DictAdd
Apply
Pop
Return
Push PC(105)
Push ()
Push ()
Spawn
Push PC(135)
Push 0
Push ()
Spawn
Push PC(135)
Push 2
Push ()
Spawn
Return
DelVar result
```

Duration: 0.0013555000000000095

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store setobj
Push ()
Store alloc
Push ()
Store alloc.pool
Push 0
Store alloc.next
Jump 100
Frame malloc v
DelVar result
AtomicInc(lazy)
Push ?alloc"pool"
Load alloc.next
Address
LoadVar v
DelVar v
Store
Push ?alloc"pool"
Load alloc.next
Address
StoreVar result
Load alloc.next
Push 1
2-ary +
Store alloc.next
AtomicDec
Return
Jump 100
Frame free r
AtomicInc(lazy)
LoadVar r
DelVar r
Del
AtomicDec
Return
Jump 100
Frame leak_check ()
ReadonlyInc
AtomicInc(lazy)
Load alloc.pool
Push ()
2-ary ==
Push "alloc_leak"
Assert2
AtomicDec
ReadonlyDec
Return
Jump 100
Frame SetObject ()
DelVar result
Push PC(10)
Push {}
Apply
StoreVar result
Return
Jump 100
Frame insert (s, v)
AtomicInc(lazy)
LoadVar s
DelVar s
Dup
Load
Push {}
LoadVar v
DelVar v
2-ary SetAdd
2-ary |
Store
AtomicDec
Return
Jump 100
Frame remove (s, v)
AtomicInc(lazy)
LoadVar s
DelVar s
Dup
Load
Push {}
LoadVar v
DelVar v
2-ary SetAdd
2-ary -
Store
AtomicDec
Return
Jump 100
Frame contains (s, v)
DelVar result
AtomicInc(lazy)
LoadVar v
DelVar v
LoadVar s
DelVar s
Load
2-ary in
StoreVar result
AtomicDec
Return
Push PC(50)
Push ()
Apply
Store myset
Jump 158
Frame thread1 ()
Push PC(58)
Push ()
Push 0
Load myset
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Apply
Pop
Push PC(88)
Push ()
Push 0
Load myset
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Apply
StoreVar x
ReadonlyInc
AtomicInc(lazy)
LoadVar x
DelVar x
Assert
AtomicDec
ReadonlyDec
Return
Jump 158
Frame thread2 v
Push PC(58)
Push ()
Push 0
Load myset
3-ary DictAdd
Push 1
LoadVar v
3-ary DictAdd
Apply
Pop
Push PC(73)
Push ()
Push 0
Load myset
3-ary DictAdd
Push 1
LoadVar v
DelVar v
3-ary DictAdd
Apply
Pop
Return
Push PC(105)
Push ()
Push ()
Spawn
Push PC(135)
Push 0
Push ()
Spawn
Push PC(135)
Push 2
Push ()
Spawn
Return
DelVar result
```

Duration: 0.0013133999999999646

---
##  code/qtestpar.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store queue
Push ()
Store list
Jump 421
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 421
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 421
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 421
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 421
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 421
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 421
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 421
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 421
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 421
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 421
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 421
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 421
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Jump 421
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 421
Frame put (q, v)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar v
DelVar v
3-ary DictAdd
Apply
Store
AtomicDec
Return
Jump 421
Frame get q
DelVar result
AtomicInc(lazy)
LoadVar q
Load
Push ()
2-ary ==
JumpCond False 407
DelVar q
Push None
StoreVar result
Jump 419
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Push PC(370)
Push ()
Apply
Store q
Jump 483
Frame put_test self
Push ()
Push 0
Push "call put"
3-ary DictAdd
Push 1
LoadVar self
3-ary DictAdd
Print
Push PC(376)
Push ()
Push 0
Push ?q
3-ary DictAdd
Push 1
LoadVar self
3-ary DictAdd
Apply
Pop
Push ()
Push 0
Push "done put"
3-ary DictAdd
Push 1
LoadVar self
DelVar self
3-ary DictAdd
Print
Return
Jump 483
Frame get_test self
Push ()
Push 0
Push "call get"
3-ary DictAdd
Push 1
LoadVar self
3-ary DictAdd
Print
Push PC(395)
Push ?q
Apply
StoreVar v
Push ()
Push 0
Push "done get"
3-ary DictAdd
Push 1
LoadVar self
DelVar self
3-ary DictAdd
Push 2
LoadVar v
DelVar v
3-ary DictAdd
Print
Return
Push { 1, 2, 3 }
Choose
Store nputs
Push 1
Load nputs
2-ary ..
StoreVar $s409
LoadVar $s409
1-ary IsEmpty
JumpCond True 500
Cut($s409, i)
Push PC(426)
LoadVar i
DelVar i
Push ()
Spawn
Jump 490
DelVar $s409
Push 1
Push 4
Load nputs
2-ary -
2-ary ..
StoreVar $s422
LoadVar $s422
1-ary IsEmpty
JumpCond True 517
Cut($s422, i)
Push PC(456)
LoadVar i
DelVar i
Push ()
Spawn
Jump 507
DelVar $s422
Return
DelVar result
```

Duration: 0.0020850000000000035

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store queue
Push ()
Store list
Jump 421
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 421
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 421
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 421
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 421
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 421
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 421
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 421
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 421
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 421
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 421
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 421
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 421
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Jump 421
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 421
Frame put (q, v)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar v
DelVar v
3-ary DictAdd
Apply
Store
AtomicDec
Return
Jump 421
Frame get q
DelVar result
AtomicInc(lazy)
LoadVar q
Load
Push ()
2-ary ==
JumpCond False 407
DelVar q
Push None
StoreVar result
Jump 419
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Push PC(370)
Push ()
Apply
Store q
Jump 483
Frame put_test self
Push ()
Push 0
Push "call put"
3-ary DictAdd
Push 1
LoadVar self
3-ary DictAdd
Print
Push PC(376)
Push ()
Push 0
Push ?q
3-ary DictAdd
Push 1
LoadVar self
3-ary DictAdd
Apply
Pop
Push ()
Push 0
Push "done put"
3-ary DictAdd
Push 1
LoadVar self
DelVar self
3-ary DictAdd
Print
Return
Jump 483
Frame get_test self
Push ()
Push 0
Push "call get"
3-ary DictAdd
Push 1
LoadVar self
3-ary DictAdd
Print
Push PC(395)
Push ?q
Apply
StoreVar v
Push ()
Push 0
Push "done get"
3-ary DictAdd
Push 1
LoadVar self
DelVar self
3-ary DictAdd
Push 2
LoadVar v
DelVar v
3-ary DictAdd
Print
Return
Push { 1, 2, 3 }
Choose
Store nputs
Push 1
Load nputs
2-ary ..
StoreVar $s409
LoadVar $s409
1-ary IsEmpty
JumpCond True 500
Cut($s409, i)
Push PC(426)
LoadVar i
DelVar i
Push ()
Spawn
Jump 490
DelVar $s409
Push 1
Push 4
Load nputs
2-ary -
2-ary ..
StoreVar $s422
LoadVar $s422
1-ary IsEmpty
JumpCond True 517
Cut($s422, i)
Push PC(456)
LoadVar i
DelVar i
Push ()
Spawn
Jump 507
DelVar $s422
Return
DelVar result
```

Duration: 0.0013527999999999873

---
##  code/hanoi.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store list
Jump 367
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n5
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s8
LoadVar $s8
1-ary IsEmpty
JumpCond True 29
Cut($s8, x)
LoadVar $n5
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n5
Jump 17
DelVar $n5
DelVar $s8
DelVar s
StoreVar result
Return
Jump 367
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 367
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 367
Frame tail s
DelVar result
Push PC(4)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 367
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s65
LoadVar $s65
1-ary IsEmpty
JumpCond True 94
Cut($s65, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 83
DelVar $s65
Return
Jump 367
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s80
LoadVar $s80
1-ary IsEmpty
JumpCond True 111
Cut($s80, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 103
DelVar $s80
StoreVar result
Return
Jump 367
Frame list a
DelVar result
Push 0
StoreVar $n93
Push ()
LoadVar a
DelVar a
StoreVar $s96
LoadVar $s96
1-ary IsEmpty
JumpCond True 133
Cut($s96, v)
LoadVar $n93
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n93
Jump 123
DelVar $n93
DelVar $s96
StoreVar result
Return
Jump 367
Frame values d
DelVar result
Push 0
StoreVar $n111
Push ()
LoadVar d
1-ary keys
StoreVar $s114
LoadVar $s114
1-ary IsEmpty
JumpCond True 158
Cut($s114, k)
LoadVar $n111
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n111
Jump 146
DelVar $n111
DelVar $s114
DelVar d
StoreVar result
Return
Jump 367
Frame items d
DelVar result
Push 0
StoreVar $n132
Push ()
LoadVar d
1-ary keys
StoreVar $s135
LoadVar $s135
1-ary IsEmpty
JumpCond True 190
Cut($s135, k)
LoadVar $n132
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n132
Jump 172
DelVar $n132
DelVar $s135
DelVar d
StoreVar result
Return
Jump 367
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s163
LoadVar $s163
1-ary IsEmpty
JumpCond True 232
Cut($s163, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 205
DelVar $s163
DelVar d
DelVar index
Return
Jump 367
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 247
DelVar a
Push ()
StoreVar result
Jump 322
Push ()
Push 0
Push PC(48)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(57)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n212
Push ()
LoadVar rest
StoreVar $s215
DelVar v
LoadVar $s215
1-ary IsEmpty
JumpCond True 280
Cut($s215, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 265
LoadVar $n212
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n212
Jump 265
DelVar $n212
DelVar $s215
StoreVar lower
Push 0
StoreVar $n231
Push ()
LoadVar rest
DelVar rest
StoreVar $s234
DelVar v
LoadVar $s234
1-ary IsEmpty
JumpCond True 304
Cut($s234, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 289
LoadVar $n231
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n231
Jump 289
DelVar $n231
DelVar $s234
StoreVar higher
Push PC(237)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(237)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 367
Frame sorted d
DelVar result
Push PC(237)
Push PC(115)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 367
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n277
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s280
LoadVar $s280
1-ary IsEmpty
JumpCond True 361
Cut($s280, i)
LoadVar $n277
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n277
Jump 347
DelVar $n277
DelVar $s280
DelVar d
DelVar n
StoreVar result
Return
Push [[1, 2, 3], (), ()]
Store current
Push ?current
Push 2
Address
Load
Push [1, 2, 3]
2-ary !=
JumpCond False 477
Push {}
Push { 0, 1, 2 }
StoreVar $s309
LoadVar $s309
1-ary IsEmpty
JumpCond True 433
Cut($s309, s)
Push { 0, 1, 2 }
StoreVar $s315
DelVar d
LoadVar $s315
1-ary IsEmpty
JumpCond True 430
Cut($s315, d)
Push ?current
LoadVar s
Address
Load
Push ()
2-ary !=
JumpCond False 385
Push ?current
LoadVar d
Address
Load
Push ()
2-ary ==
JumpCond True 418
Push ?current
LoadVar s
Address
Push 0
Address
Load
Push ?current
LoadVar d
Address
Push 0
Address
Load
2-ary <
Jump 419
Push True
JumpCond False 385
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
LoadVar d
DelVar d
3-ary DictAdd
2-ary SetAdd
Jump 385
DelVar $s315
DelVar s
Jump 379
DelVar $s309
StoreVar moves
LoadVar moves
DelVar moves
Choose
StoreVar (src, dst)
LoadVar src
1-ary str
Push " -> "
LoadVar dst
1-ary str
3-ary +
Print
Push ?current
LoadVar dst
Address
Push ()
Push 0
Push PC(48)
Push ?current
LoadVar src
Address
Load
Apply
3-ary DictAdd
Push ?current
LoadVar dst
DelVar dst
Address
Load
2-ary +
Store
Push ?current
LoadVar src
Address
Push PC(57)
Push ?current
LoadVar src
DelVar src
Address
Load
Apply
Store
Jump 369
ReadonlyInc
AtomicInc(lazy)
Push False
Assert
AtomicDec
ReadonlyDec
Return
DelVar result
```

Duration: 0.0015731999999999968

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store list
Jump 367
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n5
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s8
LoadVar $s8
1-ary IsEmpty
JumpCond True 29
Cut($s8, x)
LoadVar $n5
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n5
Jump 17
DelVar $n5
DelVar $s8
DelVar s
StoreVar result
Return
Jump 367
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 367
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 367
Frame tail s
DelVar result
Push PC(4)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 367
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s65
LoadVar $s65
1-ary IsEmpty
JumpCond True 94
Cut($s65, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 83
DelVar $s65
Return
Jump 367
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s80
LoadVar $s80
1-ary IsEmpty
JumpCond True 111
Cut($s80, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 103
DelVar $s80
StoreVar result
Return
Jump 367
Frame list a
DelVar result
Push 0
StoreVar $n93
Push ()
LoadVar a
DelVar a
StoreVar $s96
LoadVar $s96
1-ary IsEmpty
JumpCond True 133
Cut($s96, v)
LoadVar $n93
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n93
Jump 123
DelVar $n93
DelVar $s96
StoreVar result
Return
Jump 367
Frame values d
DelVar result
Push 0
StoreVar $n111
Push ()
LoadVar d
1-ary keys
StoreVar $s114
LoadVar $s114
1-ary IsEmpty
JumpCond True 158
Cut($s114, k)
LoadVar $n111
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n111
Jump 146
DelVar $n111
DelVar $s114
DelVar d
StoreVar result
Return
Jump 367
Frame items d
DelVar result
Push 0
StoreVar $n132
Push ()
LoadVar d
1-ary keys
StoreVar $s135
LoadVar $s135
1-ary IsEmpty
JumpCond True 190
Cut($s135, k)
LoadVar $n132
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n132
Jump 172
DelVar $n132
DelVar $s135
DelVar d
StoreVar result
Return
Jump 367
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s163
LoadVar $s163
1-ary IsEmpty
JumpCond True 232
Cut($s163, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 205
DelVar $s163
DelVar d
DelVar index
Return
Jump 367
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 247
DelVar a
Push ()
StoreVar result
Jump 322
Push ()
Push 0
Push PC(48)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(57)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n212
Push ()
LoadVar rest
StoreVar $s215
DelVar v
LoadVar $s215
1-ary IsEmpty
JumpCond True 280
Cut($s215, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 265
LoadVar $n212
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n212
Jump 265
DelVar $n212
DelVar $s215
StoreVar lower
Push 0
StoreVar $n231
Push ()
LoadVar rest
DelVar rest
StoreVar $s234
DelVar v
LoadVar $s234
1-ary IsEmpty
JumpCond True 304
Cut($s234, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 289
LoadVar $n231
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n231
Jump 289
DelVar $n231
DelVar $s234
StoreVar higher
Push PC(237)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(237)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 367
Frame sorted d
DelVar result
Push PC(237)
Push PC(115)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 367
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n277
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s280
LoadVar $s280
1-ary IsEmpty
JumpCond True 361
Cut($s280, i)
LoadVar $n277
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n277
Jump 347
DelVar $n277
DelVar $s280
DelVar d
DelVar n
StoreVar result
Return
Push [[1, 2, 3], (), ()]
Store current
Push ?current
Push 2
Address
Load
Push [1, 2, 3]
2-ary !=
JumpCond False 477
Push {}
Push { 0, 1, 2 }
StoreVar $s309
LoadVar $s309
1-ary IsEmpty
JumpCond True 433
Cut($s309, s)
Push { 0, 1, 2 }
StoreVar $s315
DelVar d
LoadVar $s315
1-ary IsEmpty
JumpCond True 430
Cut($s315, d)
Push ?current
LoadVar s
Address
Load
Push ()
2-ary !=
JumpCond False 385
Push ?current
LoadVar d
Address
Load
Push ()
2-ary ==
JumpCond True 418
Push ?current
LoadVar s
Address
Push 0
Address
Load
Push ?current
LoadVar d
Address
Push 0
Address
Load
2-ary <
Jump 419
Push True
JumpCond False 385
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
LoadVar d
DelVar d
3-ary DictAdd
2-ary SetAdd
Jump 385
DelVar $s315
DelVar s
Jump 379
DelVar $s309
StoreVar moves
LoadVar moves
DelVar moves
Choose
StoreVar (src, dst)
LoadVar src
1-ary str
Push " -> "
LoadVar dst
1-ary str
3-ary +
Print
Push ?current
LoadVar dst
Address
Push ()
Push 0
Push PC(48)
Push ?current
LoadVar src
Address
Load
Apply
3-ary DictAdd
Push ?current
LoadVar dst
DelVar dst
Address
Load
2-ary +
Store
Push ?current
LoadVar src
Address
Push PC(57)
Push ?current
LoadVar src
DelVar src
Address
Load
Apply
Store
Jump 369
ReadonlyInc
AtomicInc(lazy)
Push False
Assert
AtomicDec
ReadonlyDec
Return
DelVar result
```

Duration: 0.0012781000000000042

---
##  code/leader.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push {}
Store network
Push 0
Store leader
Jump 154
Frame send m
AtomicInc(lazy)
Load network
Push {}
LoadVar m
DelVar m
2-ary SetAdd
2-ary |
Store network
AtomicDec
Return
Jump 154
Frame receive self
DelVar result
Push {}
Load network
StoreVar $s19
DelVar found
DelVar id
LoadVar $s19
1-ary IsEmpty
JumpCond True 45
Cut($s19, (dst, id, found))
LoadVar dst
DelVar dst
LoadVar self
2-ary ==
JumpCond False 23
Push ()
Push 0
LoadVar id
DelVar id
3-ary DictAdd
Push 1
LoadVar found
DelVar found
3-ary DictAdd
2-ary SetAdd
Jump 23
DelVar $s19
DelVar self
StoreVar result
Return
Jump 154
Frame processor (self, succ)
Push PC(6)
Push ()
Push 0
LoadVar succ
3-ary DictAdd
Push 1
LoadVar self
3-ary DictAdd
Push 2
Push False
3-ary DictAdd
Apply
Pop
Push True
StoreVar working
LoadVar working
JumpCond False 150
AtomicInc(lazy)
ReadonlyInc
Push PC(18)
LoadVar self
Apply
Dup
Push {}
2-ary ==
JumpCond False 81
Pop
ReadonlyDec
AtomicDec
Jump 68
Choose
StoreVar (id, found)
Jump 87
ReadonlyDec
AtomicDec
Jump 68
ReadonlyDec
LoadVar id
LoadVar self
2-ary ==
JumpCond False 115
ReadonlyInc
AtomicInc(lazy)
LoadVar self
Load leader
2-ary ==
Assert
AtomicDec
ReadonlyDec
Push PC(6)
Push ()
Push 0
LoadVar succ
3-ary DictAdd
Push 1
LoadVar id
DelVar id
3-ary DictAdd
Push 2
Push True
3-ary DictAdd
Apply
Pop
Jump 141
LoadVar id
LoadVar self
2-ary >
JumpCond False 141
ReadonlyInc
AtomicInc(lazy)
LoadVar self
Load leader
2-ary !=
Assert
AtomicDec
ReadonlyDec
Push PC(6)
Push ()
Push 0
LoadVar succ
3-ary DictAdd
Push 1
LoadVar id
DelVar id
3-ary DictAdd
Push 2
LoadVar found
3-ary DictAdd
Apply
Pop
DelVar id
LoadVar found
DelVar found
JumpCond False 148
DelVar working
Push False
StoreVar working
AtomicDec
Jump 66
DelVar self
DelVar succ
DelVar working
Return
Push ()
Push 0
Push { 1, 2, 3, 4, 5 }
3-ary DictAdd
Push 1
Push { 1, 2, 3, 4, 5 }
Choose
3-ary DictAdd
Push 2
Push ()
3-ary DictAdd
StoreVar (ids, nprocs, procs)
Push 0
LoadVar nprocs
Push 1
2-ary -
2-ary ..
StoreVar $s149
LoadVar $s149
1-ary IsEmpty
JumpCond True 204
Cut($s149, i)
DelVar i
LoadVar ids
Choose
StoreVar next
LoadVar ids
DelVar ids
Push {}
LoadVar next
2-ary SetAdd
2-ary -
StoreVar ids
LoadVar procs
DelVar procs
Push ()
Push 0
LoadVar next
3-ary DictAdd
2-ary +
StoreVar procs
LoadVar next
Load leader
2-ary >
JumpCond False 202
LoadVar next
DelVar next
Store leader
DelVar next
Jump 172
DelVar $s149
DelVar ids
Push 0
LoadVar nprocs
Push 1
2-ary -
2-ary ..
StoreVar $s182
LoadVar $s182
1-ary IsEmpty
JumpCond True 236
Cut($s182, i)
Push PC(50)
Push ()
Push 0
LoadVar procs
LoadVar i
Apply
3-ary DictAdd
Push 1
LoadVar procs
LoadVar i
DelVar i
Push 1
2-ary +
LoadVar nprocs
2-ary %
Apply
3-ary DictAdd
Push ()
Spawn
Jump 212
DelVar $s182
DelVar nprocs
DelVar procs
Return
DelVar result
```

Duration: 0.001407799999999959

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push {}
Store network
Push 0
Store leader
Jump 154
Frame send m
AtomicInc(lazy)
Load network
Push {}
LoadVar m
DelVar m
2-ary SetAdd
2-ary |
Store network
AtomicDec
Return
Jump 154
Frame receive self
DelVar result
Push {}
Load network
StoreVar $s19
DelVar found
DelVar id
LoadVar $s19
1-ary IsEmpty
JumpCond True 45
Cut($s19, (dst, id, found))
LoadVar dst
DelVar dst
LoadVar self
2-ary ==
JumpCond False 23
Push ()
Push 0
LoadVar id
DelVar id
3-ary DictAdd
Push 1
LoadVar found
DelVar found
3-ary DictAdd
2-ary SetAdd
Jump 23
DelVar $s19
DelVar self
StoreVar result
Return
Jump 154
Frame processor (self, succ)
Push PC(6)
Push ()
Push 0
LoadVar succ
3-ary DictAdd
Push 1
LoadVar self
3-ary DictAdd
Push 2
Push False
3-ary DictAdd
Apply
Pop
Push True
StoreVar working
LoadVar working
JumpCond False 150
AtomicInc(lazy)
ReadonlyInc
Push PC(18)
LoadVar self
Apply
Dup
Push {}
2-ary ==
JumpCond False 81
Pop
ReadonlyDec
AtomicDec
Jump 68
Choose
StoreVar (id, found)
Jump 87
ReadonlyDec
AtomicDec
Jump 68
ReadonlyDec
LoadVar id
LoadVar self
2-ary ==
JumpCond False 115
ReadonlyInc
AtomicInc(lazy)
LoadVar self
Load leader
2-ary ==
Assert
AtomicDec
ReadonlyDec
Push PC(6)
Push ()
Push 0
LoadVar succ
3-ary DictAdd
Push 1
LoadVar id
DelVar id
3-ary DictAdd
Push 2
Push True
3-ary DictAdd
Apply
Pop
Jump 141
LoadVar id
LoadVar self
2-ary >
JumpCond False 141
ReadonlyInc
AtomicInc(lazy)
LoadVar self
Load leader
2-ary !=
Assert
AtomicDec
ReadonlyDec
Push PC(6)
Push ()
Push 0
LoadVar succ
3-ary DictAdd
Push 1
LoadVar id
DelVar id
3-ary DictAdd
Push 2
LoadVar found
3-ary DictAdd
Apply
Pop
DelVar id
LoadVar found
DelVar found
JumpCond False 148
DelVar working
Push False
StoreVar working
AtomicDec
Jump 66
DelVar self
DelVar succ
DelVar working
Return
Push ()
Push 0
Push { 1, 2, 3, 4, 5 }
3-ary DictAdd
Push 1
Push { 1, 2, 3, 4, 5 }
Choose
3-ary DictAdd
Push 2
Push ()
3-ary DictAdd
StoreVar (ids, nprocs, procs)
Push 0
LoadVar nprocs
Push 1
2-ary -
2-ary ..
StoreVar $s149
LoadVar $s149
1-ary IsEmpty
JumpCond True 204
Cut($s149, i)
DelVar i
LoadVar ids
Choose
StoreVar next
LoadVar ids
DelVar ids
Push {}
LoadVar next
2-ary SetAdd
2-ary -
StoreVar ids
LoadVar procs
DelVar procs
Push ()
Push 0
LoadVar next
3-ary DictAdd
2-ary +
StoreVar procs
LoadVar next
Load leader
2-ary >
JumpCond False 202
LoadVar next
DelVar next
Store leader
DelVar next
Jump 172
DelVar $s149
DelVar ids
Push 0
LoadVar nprocs
Push 1
2-ary -
2-ary ..
StoreVar $s182
LoadVar $s182
1-ary IsEmpty
JumpCond True 236
Cut($s182, i)
Push PC(50)
Push ()
Push 0
LoadVar procs
LoadVar i
Apply
3-ary DictAdd
Push 1
LoadVar procs
LoadVar i
DelVar i
Push 1
2-ary +
LoadVar nprocs
2-ary %
Apply
3-ary DictAdd
Push ()
Spawn
Jump 212
DelVar $s182
DelVar nprocs
DelVar procs
Return
DelVar result
```

Duration: 0.0015212000000000003

---
##  code/hoare.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store synch
Push ()
Store list
Jump 369
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 369
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 369
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 369
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 369
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 369
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 369
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 369
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 369
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 369
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 369
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 369
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 369
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Push ()
Store bag
Jump 1132
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1132
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s311
LoadVar $s311
1-ary IsEmpty
JumpCond True 393
Cut($s311, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 384
DelVar $s311
StoreVar result
Return
Jump 1132
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s327
LoadVar $s327
1-ary IsEmpty
JumpCond True 430
Cut($s327, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 423
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 404
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 404
DelVar $s327
Return
Jump 1132
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 456
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 460
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1132
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s391
LoadVar $s391
1-ary IsEmpty
JumpCond True 489
Cut($s391, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 478
DelVar $s391
Return
Jump 1132
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1132
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1132
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1132
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 566
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 572
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1132
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 599
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 600
Push False
JumpCond False 609
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 620
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1132
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 638
DelVar bg
DelVar k
Push {}
Push PC(372)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 723
Push PC(462)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 652
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 723
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 664
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 723
Push PC(492)
LoadVar bg
Apply
StoreVar hd
Push PC(574)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(623)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s568
LoadVar $s568
1-ary IsEmpty
JumpCond True 708
Cut($s568, x)
Push PC(537)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 692
DelVar $s568
DelVar hd
Push PC(623)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1132
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1132
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 754
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1132
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1132
Frame Lock ()
DelVar result
Push PC(759)
Push False
Apply
StoreVar result
Return
Jump 1132
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1132
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 790
Jump 793
ReadonlyDec
AtomicDec
Jump 783
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1132
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1132
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1132
Frame Condition ()
DelVar result
Push PC(372)
Push ()
Apply
StoreVar result
Return
Jump 1132
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(537)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 887
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 888
Push False
JumpCond False 893
DelVar c
DelVar cnt
DelVar ctx
Jump 896
ReadonlyDec
AtomicDec
Jump 868
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1132
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(372)
Push ()
Apply
2-ary !=
JumpCond False 929
LoadVar c
Push PC(574)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(519)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1132
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(372)
Push ()
Apply
Store
AtomicDec
Return
Jump 1132
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1132
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 960
Jump 963
ReadonlyDec
AtomicDec
Jump 952
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1132
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1132
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1132
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1002
Jump 1005
ReadonlyDec
AtomicDec
Jump 993
ReadonlyDec
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1132
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Jump 1132
Frame Monitor ()
DelVar result
Push PC(766)
Push ()
Apply
StoreVar result
Return
Jump 1132
Frame enter mon
Push PC(782)
LoadVar mon
DelVar mon
Apply
Pop
Return
Jump 1132
Frame exit mon
Push PC(801)
LoadVar mon
DelVar mon
Apply
Pop
Return
Jump 1132
Frame Condition ()
DelVar result
Push ()
Push "sema"
Push PC(759)
Push True
Apply
3-ary DictAdd
Push "count"
Push 0
3-ary DictAdd
StoreVar result
Return
Jump 1132
Frame wait (cond, mon)
LoadVar cond
Push "count"
Address
Dup
Load
Push 1
2-ary +
Store
Push PC(1056)
LoadVar mon
DelVar mon
Apply
Pop
Push PC(782)
LoadVar cond
Push "sema"
Address
Apply
Pop
LoadVar cond
DelVar cond
Push "count"
Address
Dup
Load
Push 1
2-ary -
Store
Return
Jump 1132
Frame signal (cond, mon)
LoadVar cond
Push "count"
Address
Load
Push 0
2-ary >
JumpCond False 1129
Push PC(801)
LoadVar cond
DelVar cond
Push "sema"
Address
Apply
Pop
Push PC(1048)
LoadVar mon
DelVar mon
Apply
Pop
DelVar cond
DelVar mon
Return
Return
DelVar result
```

Duration: 0.00156909999999999

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store synch
Push ()
Store list
Jump 369
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 369
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 369
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 369
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 369
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 369
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 369
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 369
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 369
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 369
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 369
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 369
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 369
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Push ()
Store bag
Jump 1132
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1132
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s311
LoadVar $s311
1-ary IsEmpty
JumpCond True 393
Cut($s311, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 384
DelVar $s311
StoreVar result
Return
Jump 1132
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s327
LoadVar $s327
1-ary IsEmpty
JumpCond True 430
Cut($s327, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 423
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 404
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 404
DelVar $s327
Return
Jump 1132
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 456
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 460
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1132
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s391
LoadVar $s391
1-ary IsEmpty
JumpCond True 489
Cut($s391, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 478
DelVar $s391
Return
Jump 1132
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1132
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1132
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1132
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 566
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 572
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1132
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 599
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 600
Push False
JumpCond False 609
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 620
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1132
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 638
DelVar bg
DelVar k
Push {}
Push PC(372)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 723
Push PC(462)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 652
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 723
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 664
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 723
Push PC(492)
LoadVar bg
Apply
StoreVar hd
Push PC(574)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(623)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s568
LoadVar $s568
1-ary IsEmpty
JumpCond True 708
Cut($s568, x)
Push PC(537)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 692
DelVar $s568
DelVar hd
Push PC(623)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1132
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1132
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 754
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1132
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1132
Frame Lock ()
DelVar result
Push PC(759)
Push False
Apply
StoreVar result
Return
Jump 1132
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1132
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 790
Jump 793
ReadonlyDec
AtomicDec
Jump 783
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1132
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1132
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1132
Frame Condition ()
DelVar result
Push PC(372)
Push ()
Apply
StoreVar result
Return
Jump 1132
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(537)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 887
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 888
Push False
JumpCond False 893
DelVar c
DelVar cnt
DelVar ctx
Jump 896
ReadonlyDec
AtomicDec
Jump 868
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1132
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(372)
Push ()
Apply
2-ary !=
JumpCond False 929
LoadVar c
Push PC(574)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(519)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1132
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(372)
Push ()
Apply
Store
AtomicDec
Return
Jump 1132
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1132
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 960
Jump 963
ReadonlyDec
AtomicDec
Jump 952
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1132
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1132
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1132
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1002
Jump 1005
ReadonlyDec
AtomicDec
Jump 993
ReadonlyDec
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1132
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Jump 1132
Frame Monitor ()
DelVar result
Push PC(766)
Push ()
Apply
StoreVar result
Return
Jump 1132
Frame enter mon
Push PC(782)
LoadVar mon
DelVar mon
Apply
Pop
Return
Jump 1132
Frame exit mon
Push PC(801)
LoadVar mon
DelVar mon
Apply
Pop
Return
Jump 1132
Frame Condition ()
DelVar result
Push ()
Push "sema"
Push PC(759)
Push True
Apply
3-ary DictAdd
Push "count"
Push 0
3-ary DictAdd
StoreVar result
Return
Jump 1132
Frame wait (cond, mon)
LoadVar cond
Push "count"
Address
Dup
Load
Push 1
2-ary +
Store
Push PC(1056)
LoadVar mon
DelVar mon
Apply
Pop
Push PC(782)
LoadVar cond
Push "sema"
Address
Apply
Pop
LoadVar cond
DelVar cond
Push "count"
Address
Dup
Load
Push 1
2-ary -
Store
Return
Jump 1132
Frame signal (cond, mon)
LoadVar cond
Push "count"
Address
Load
Push 0
2-ary >
JumpCond False 1129
Push PC(801)
LoadVar cond
DelVar cond
Push "sema"
Address
Apply
Pop
Push PC(1048)
LoadVar mon
DelVar mon
Apply
Pop
DelVar cond
DelVar mon
Return
Return
DelVar result
```

Duration: 0.0015412000000000203

---
##  code/RWfair.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store synch
Push ()
Store list
Jump 369
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 369
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 369
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 369
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 369
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 369
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 369
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 369
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 369
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 369
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 369
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 369
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 369
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Push ()
Store bag
Jump 1357
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1357
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s311
LoadVar $s311
1-ary IsEmpty
JumpCond True 393
Cut($s311, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 384
DelVar $s311
StoreVar result
Return
Jump 1357
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s327
LoadVar $s327
1-ary IsEmpty
JumpCond True 430
Cut($s327, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 423
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 404
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 404
DelVar $s327
Return
Jump 1357
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 456
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 460
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1357
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s391
LoadVar $s391
1-ary IsEmpty
JumpCond True 489
Cut($s391, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 478
DelVar $s391
Return
Jump 1357
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1357
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1357
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1357
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 566
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 572
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1357
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 599
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 600
Push False
JumpCond False 609
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 620
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1357
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 638
DelVar bg
DelVar k
Push {}
Push PC(372)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 723
Push PC(462)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 652
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 723
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 664
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 723
Push PC(492)
LoadVar bg
Apply
StoreVar hd
Push PC(574)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(623)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s568
LoadVar $s568
1-ary IsEmpty
JumpCond True 708
Cut($s568, x)
Push PC(537)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 692
DelVar $s568
DelVar hd
Push PC(623)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1357
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1357
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 754
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1357
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1357
Frame Lock ()
DelVar result
Push PC(759)
Push False
Apply
StoreVar result
Return
Jump 1357
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1357
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 790
Jump 793
ReadonlyDec
AtomicDec
Jump 783
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1357
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1357
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1357
Frame Condition ()
DelVar result
Push PC(372)
Push ()
Apply
StoreVar result
Return
Jump 1357
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(537)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 887
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 888
Push False
JumpCond False 893
DelVar c
DelVar cnt
DelVar ctx
Jump 896
ReadonlyDec
AtomicDec
Jump 868
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1357
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(372)
Push ()
Apply
2-ary !=
JumpCond False 929
LoadVar c
Push PC(574)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(519)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1357
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(372)
Push ()
Apply
Store
AtomicDec
Return
Jump 1357
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1357
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 960
Jump 963
ReadonlyDec
AtomicDec
Jump 952
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1357
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1357
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1357
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1002
Jump 1005
ReadonlyDec
AtomicDec
Jump 993
ReadonlyDec
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1357
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Jump 1357
Frame RWlock ()
DelVar result
Push ()
Push "nreaders"
Push 0
3-ary DictAdd
Push "nwriters"
Push 0
3-ary DictAdd
Push "mutex"
Push PC(759)
Push False
Apply
3-ary DictAdd
Push "r_gate"
Push ()
Push "sema"
Push PC(759)
Push True
Apply
3-ary DictAdd
Push "count"
Push 0
3-ary DictAdd
3-ary DictAdd
Push "w_gate"
Push ()
Push "sema"
Push PC(759)
Push True
Apply
3-ary DictAdd
Push "count"
Push 0
3-ary DictAdd
3-ary DictAdd
StoreVar result
Return
Jump 1357
Frame read_acquire rw
Push PC(782)
LoadVar rw
Push "mutex"
Address
Apply
Pop
LoadVar rw
Push "nwriters"
Address
Load
Push 0
2-ary >
JumpCond True 1102
LoadVar rw
Push "w_gate"
Address
Push "count"
Address
Load
Push 0
2-ary >
Jump 1103
Push True
JumpCond False 1138
LoadVar rw
Push "r_gate"
Address
Push "count"
Address
Dup
Load
Push 1
2-ary +
Store
Push PC(801)
LoadVar rw
Push "mutex"
Address
Apply
Pop
Push PC(782)
LoadVar rw
Push "r_gate"
Address
Push "sema"
Address
Apply
Pop
LoadVar rw
Push "r_gate"
Address
Push "count"
Address
Dup
Load
Push 1
2-ary -
Store
LoadVar rw
Push "nreaders"
Address
Dup
Load
Push 1
2-ary +
Store
LoadVar rw
Push "r_gate"
Address
Push "count"
Address
Load
Push 0
2-ary >
JumpCond False 1165
Push PC(801)
LoadVar rw
DelVar rw
Push "r_gate"
Address
Push "sema"
Address
Apply
Pop
Jump 1172
Push PC(801)
LoadVar rw
DelVar rw
Push "mutex"
Address
Apply
Pop
Return
Jump 1357
Frame read_release rw
Push PC(782)
LoadVar rw
Push "mutex"
Address
Apply
Pop
LoadVar rw
Push "nreaders"
Address
Dup
Load
Push 1
2-ary -
Store
LoadVar rw
Push "w_gate"
Address
Push "count"
Address
Load
Push 0
2-ary >
JumpCond False 1205
LoadVar rw
Push "nreaders"
Address
Load
Push 0
2-ary ==
Jump 1206
Push False
JumpCond False 1217
Push PC(801)
LoadVar rw
DelVar rw
Push "w_gate"
Address
Push "sema"
Address
Apply
Pop
Jump 1224
Push PC(801)
LoadVar rw
DelVar rw
Push "mutex"
Address
Apply
Pop
Return
Jump 1357
Frame write_acquire rw
Push PC(782)
LoadVar rw
Push "mutex"
Address
Apply
Pop
LoadVar rw
Push "nreaders"
Address
Load
LoadVar rw
Push "nwriters"
Address
Load
2-ary +
Push 0
2-ary >
JumpCond False 1279
LoadVar rw
Push "w_gate"
Address
Push "count"
Address
Dup
Load
Push 1
2-ary +
Store
Push PC(801)
LoadVar rw
Push "mutex"
Address
Apply
Pop
Push PC(782)
LoadVar rw
Push "w_gate"
Address
Push "sema"
Address
Apply
Pop
LoadVar rw
Push "w_gate"
Address
Push "count"
Address
Dup
Load
Push 1
2-ary -
Store
LoadVar rw
Push "nwriters"
Address
Dup
Load
Push 1
2-ary +
Store
Push PC(801)
LoadVar rw
DelVar rw
Push "mutex"
Address
Apply
Pop
Return
Jump 1357
Frame write_release rw
Push PC(782)
LoadVar rw
Push "mutex"
Address
Apply
Pop
LoadVar rw
Push "nwriters"
Address
Dup
Load
Push 1
2-ary -
Store
LoadVar rw
Push "r_gate"
Address
Push "count"
Address
Load
Push 0
2-ary >
JumpCond False 1330
Push PC(801)
LoadVar rw
DelVar rw
Push "r_gate"
Address
Push "sema"
Address
Apply
Pop
Jump 1356
LoadVar rw
Push "w_gate"
Address
Push "count"
Address
Load
Push 0
2-ary >
JumpCond False 1349
Push PC(801)
LoadVar rw
DelVar rw
Push "w_gate"
Address
Push "sema"
Address
Apply
Pop
Jump 1356
Push PC(801)
LoadVar rw
DelVar rw
Push "mutex"
Address
Apply
Pop
Return
Return
DelVar result
```

Duration: 0.0018716000000000288

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store synch
Push ()
Store list
Jump 369
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 369
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 369
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 369
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 369
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 369
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 369
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 369
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 369
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 369
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 369
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 369
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 369
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Push ()
Store bag
Jump 1357
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1357
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s311
LoadVar $s311
1-ary IsEmpty
JumpCond True 393
Cut($s311, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 384
DelVar $s311
StoreVar result
Return
Jump 1357
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s327
LoadVar $s327
1-ary IsEmpty
JumpCond True 430
Cut($s327, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 423
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 404
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 404
DelVar $s327
Return
Jump 1357
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 456
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 460
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1357
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s391
LoadVar $s391
1-ary IsEmpty
JumpCond True 489
Cut($s391, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 478
DelVar $s391
Return
Jump 1357
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1357
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1357
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1357
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 566
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 572
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1357
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 599
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 600
Push False
JumpCond False 609
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 620
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1357
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 638
DelVar bg
DelVar k
Push {}
Push PC(372)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 723
Push PC(462)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 652
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 723
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 664
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 723
Push PC(492)
LoadVar bg
Apply
StoreVar hd
Push PC(574)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(623)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s568
LoadVar $s568
1-ary IsEmpty
JumpCond True 708
Cut($s568, x)
Push PC(537)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 692
DelVar $s568
DelVar hd
Push PC(623)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1357
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1357
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 754
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1357
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1357
Frame Lock ()
DelVar result
Push PC(759)
Push False
Apply
StoreVar result
Return
Jump 1357
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1357
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 790
Jump 793
ReadonlyDec
AtomicDec
Jump 783
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1357
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1357
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1357
Frame Condition ()
DelVar result
Push PC(372)
Push ()
Apply
StoreVar result
Return
Jump 1357
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(537)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 887
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 888
Push False
JumpCond False 893
DelVar c
DelVar cnt
DelVar ctx
Jump 896
ReadonlyDec
AtomicDec
Jump 868
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1357
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(372)
Push ()
Apply
2-ary !=
JumpCond False 929
LoadVar c
Push PC(574)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(519)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1357
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(372)
Push ()
Apply
Store
AtomicDec
Return
Jump 1357
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1357
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 960
Jump 963
ReadonlyDec
AtomicDec
Jump 952
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1357
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1357
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1357
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1002
Jump 1005
ReadonlyDec
AtomicDec
Jump 993
ReadonlyDec
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1357
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Jump 1357
Frame RWlock ()
DelVar result
Push ()
Push "nreaders"
Push 0
3-ary DictAdd
Push "nwriters"
Push 0
3-ary DictAdd
Push "mutex"
Push PC(759)
Push False
Apply
3-ary DictAdd
Push "r_gate"
Push ()
Push "sema"
Push PC(759)
Push True
Apply
3-ary DictAdd
Push "count"
Push 0
3-ary DictAdd
3-ary DictAdd
Push "w_gate"
Push ()
Push "sema"
Push PC(759)
Push True
Apply
3-ary DictAdd
Push "count"
Push 0
3-ary DictAdd
3-ary DictAdd
StoreVar result
Return
Jump 1357
Frame read_acquire rw
Push PC(782)
LoadVar rw
Push "mutex"
Address
Apply
Pop
LoadVar rw
Push "nwriters"
Address
Load
Push 0
2-ary >
JumpCond True 1102
LoadVar rw
Push "w_gate"
Address
Push "count"
Address
Load
Push 0
2-ary >
Jump 1103
Push True
JumpCond False 1138
LoadVar rw
Push "r_gate"
Address
Push "count"
Address
Dup
Load
Push 1
2-ary +
Store
Push PC(801)
LoadVar rw
Push "mutex"
Address
Apply
Pop
Push PC(782)
LoadVar rw
Push "r_gate"
Address
Push "sema"
Address
Apply
Pop
LoadVar rw
Push "r_gate"
Address
Push "count"
Address
Dup
Load
Push 1
2-ary -
Store
LoadVar rw
Push "nreaders"
Address
Dup
Load
Push 1
2-ary +
Store
LoadVar rw
Push "r_gate"
Address
Push "count"
Address
Load
Push 0
2-ary >
JumpCond False 1165
Push PC(801)
LoadVar rw
DelVar rw
Push "r_gate"
Address
Push "sema"
Address
Apply
Pop
Jump 1172
Push PC(801)
LoadVar rw
DelVar rw
Push "mutex"
Address
Apply
Pop
Return
Jump 1357
Frame read_release rw
Push PC(782)
LoadVar rw
Push "mutex"
Address
Apply
Pop
LoadVar rw
Push "nreaders"
Address
Dup
Load
Push 1
2-ary -
Store
LoadVar rw
Push "w_gate"
Address
Push "count"
Address
Load
Push 0
2-ary >
JumpCond False 1205
LoadVar rw
Push "nreaders"
Address
Load
Push 0
2-ary ==
Jump 1206
Push False
JumpCond False 1217
Push PC(801)
LoadVar rw
DelVar rw
Push "w_gate"
Address
Push "sema"
Address
Apply
Pop
Jump 1224
Push PC(801)
LoadVar rw
DelVar rw
Push "mutex"
Address
Apply
Pop
Return
Jump 1357
Frame write_acquire rw
Push PC(782)
LoadVar rw
Push "mutex"
Address
Apply
Pop
LoadVar rw
Push "nreaders"
Address
Load
LoadVar rw
Push "nwriters"
Address
Load
2-ary +
Push 0
2-ary >
JumpCond False 1279
LoadVar rw
Push "w_gate"
Address
Push "count"
Address
Dup
Load
Push 1
2-ary +
Store
Push PC(801)
LoadVar rw
Push "mutex"
Address
Apply
Pop
Push PC(782)
LoadVar rw
Push "w_gate"
Address
Push "sema"
Address
Apply
Pop
LoadVar rw
Push "w_gate"
Address
Push "count"
Address
Dup
Load
Push 1
2-ary -
Store
LoadVar rw
Push "nwriters"
Address
Dup
Load
Push 1
2-ary +
Store
Push PC(801)
LoadVar rw
DelVar rw
Push "mutex"
Address
Apply
Pop
Return
Jump 1357
Frame write_release rw
Push PC(782)
LoadVar rw
Push "mutex"
Address
Apply
Pop
LoadVar rw
Push "nwriters"
Address
Dup
Load
Push 1
2-ary -
Store
LoadVar rw
Push "r_gate"
Address
Push "count"
Address
Load
Push 0
2-ary >
JumpCond False 1330
Push PC(801)
LoadVar rw
DelVar rw
Push "r_gate"
Address
Push "sema"
Address
Apply
Pop
Jump 1356
LoadVar rw
Push "w_gate"
Address
Push "count"
Address
Load
Push 0
2-ary >
JumpCond False 1349
Push PC(801)
LoadVar rw
DelVar rw
Push "w_gate"
Address
Push "sema"
Address
Apply
Pop
Jump 1356
Push PC(801)
LoadVar rw
DelVar rw
Push "mutex"
Address
Apply
Pop
Return
Return
DelVar result
```

Duration: 0.0015561000000000047

---
##  code/register.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push None
Store register
Jump 24
Frame init ()
Return
Jump 24
Frame read uid
DelVar result
DelVar uid
AtomicInc(lazy)
Load register
StoreVar result
AtomicDec
Return
Jump 24
Frame write (uid, v)
DelVar uid
AtomicInc(lazy)
LoadVar v
DelVar v
Store register
AtomicDec
Return
Return
DelVar result
```

Duration: 0.0016269000000000422

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push None
Store register
Jump 24
Frame init ()
Return
Jump 24
Frame read uid
DelVar result
DelVar uid
AtomicInc(lazy)
Load register
StoreVar result
AtomicDec
Return
Jump 24
Frame write (uid, v)
DelVar uid
AtomicInc(lazy)
LoadVar v
DelVar v
Store register
AtomicDec
Return
Return
DelVar result
```

Duration: 0.0018974999999999964

---
##  code/paxos.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store bag
Jump 356
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 356
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s11
LoadVar $s11
1-ary IsEmpty
JumpCond True 25
Cut($s11, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 16
DelVar $s11
StoreVar result
Return
Jump 356
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s27
LoadVar $s27
1-ary IsEmpty
JumpCond True 62
Cut($s27, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 55
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 36
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 36
DelVar $s27
Return
Jump 356
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 88
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 92
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 356
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s91
LoadVar $s91
1-ary IsEmpty
JumpCond True 121
Cut($s91, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 110
DelVar $s91
Return
Jump 356
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 356
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 356
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 356
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 198
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 204
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 356
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 231
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 232
Push False
JumpCond False 241
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 252
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 356
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 270
DelVar bg
DelVar k
Push {}
Push PC(4)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 355
Push PC(94)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 284
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 355
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 296
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 355
Push PC(124)
LoadVar bg
Apply
StoreVar hd
Push PC(206)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(255)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s268
LoadVar $s268
1-ary IsEmpty
JumpCond True 340
Cut($s268, x)
Push PC(169)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 324
DelVar $s268
DelVar hd
Push PC(255)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Push PC(4)
Push ()
Apply
Store network
Push 0
StoreVar $n311
Push ()
Push { 0, 1 }
StoreVar $s314
LoadVar $s314
1-ary IsEmpty
JumpCond True 376
Cut($s314, i)
DelVar i
LoadVar $n311
Push { 0, 1 }
Choose
3-ary DictAdd
IncVar $n311
Jump 365
DelVar $n311
DelVar $s314
Store proposals
Jump 776
Frame send m
AtomicInc(lazy)
Push PC(169)
Push ()
Push 0
Load network
3-ary DictAdd
Push 1
LoadVar m
DelVar m
3-ary DictAdd
Apply
Store network
AtomicDec
Return
Jump 776
Frame receive (ballot, phase)
DelVar result
Push ()
Load network
StoreVar $s345
DelVar c
DelVar e
LoadVar $s345
1-ary IsEmpty
JumpCond True 438
Cut($s345, (b, p, t, e), c)
Push ()
Push 0
LoadVar b
DelVar b
3-ary DictAdd
Push 1
LoadVar p
DelVar p
3-ary DictAdd
Push 2
LoadVar t
DelVar t
3-ary DictAdd
Push ()
Push 0
LoadVar ballot
3-ary DictAdd
Push 1
LoadVar phase
3-ary DictAdd
Push 2
Push "B"
3-ary DictAdd
2-ary ==
JumpCond False 401
LoadVar e
DelVar e
LoadVar c
DelVar c
3-ary DictAdd
Jump 401
DelVar $s345
DelVar ballot
DelVar phase
StoreVar msgs
Push PC(255)
Push ()
Push 0
LoadVar msgs
DelVar msgs
3-ary DictAdd
Push 1
Push 2
3-ary DictAdd
Apply
StoreVar result
Return
Jump 776
Frame leader (self, proposal)
Push ()
Push 0
LoadVar self
DelVar self
3-ary DictAdd
Push 1
LoadVar proposal
DelVar proposal
3-ary DictAdd
StoreVar (ballot, estimate)
Push PC(380)
Push ()
Push 0
LoadVar ballot
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
Push "A"
3-ary DictAdd
Push 3
Push None
3-ary DictAdd
Apply
Pop
LoadVar ballot
Push 2
2-ary <=
JumpCond False 645
AtomicInc(lazy)
ReadonlyInc
Push PC(396)
Push ()
Push 0
LoadVar ballot
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Apply
Dup
Push {}
2-ary ==
JumpCond False 505
Pop
ReadonlyDec
AtomicDec
Jump 486
Choose
StoreVar quorum
Jump 511
ReadonlyDec
AtomicDec
Jump 486
ReadonlyDec
Push {}
LoadVar quorum
DelVar quorum
StoreVar $s446
DelVar e
LoadVar $s446
1-ary IsEmpty
JumpCond True 530
Cut($s446, e, _)
DelVar _
LoadVar e
Push None
2-ary !=
JumpCond False 516
LoadVar e
DelVar e
2-ary SetAdd
Jump 516
DelVar $s446
StoreVar accepted
LoadVar accepted
Push {}
2-ary !=
JumpCond False 545
Push ?estimate
LoadVar accepted
DelVar accepted
1-ary max
Split 2
Move 3
Move 2
StoreVar [estimate]
Pop
DelVar accepted
Push PC(380)
Push ()
Push 0
LoadVar ballot
3-ary DictAdd
Push 1
Push 2
3-ary DictAdd
Push 2
Push "A"
3-ary DictAdd
Push 3
LoadVar estimate
3-ary DictAdd
Apply
Pop
AtomicDec
AtomicInc(lazy)
ReadonlyInc
Push PC(396)
Push ()
Push 0
LoadVar ballot
3-ary DictAdd
Push 1
Push 2
3-ary DictAdd
Apply
Dup
Push {}
2-ary ==
JumpCond False 582
Pop
ReadonlyDec
AtomicDec
Jump 563
Choose
StoreVar quorum
Jump 588
ReadonlyDec
AtomicDec
Jump 563
ReadonlyDec
Push PC(65)
Push ()
Push 0
LoadVar quorum
DelVar quorum
3-ary DictAdd
Push 1
Push ()
Push 0
LoadVar ballot
3-ary DictAdd
Push 1
LoadVar estimate
3-ary DictAdd
3-ary DictAdd
Apply
Push 2
2-ary ==
JumpCond False 618
ReadonlyInc
AtomicInc(lazy)
LoadVar estimate
Load proposals
2-ary in
Assert
AtomicDec
ReadonlyDec
LoadVar estimate
Print
LoadVar ballot
DelVar ballot
Push 2
2-ary +
StoreVar ballot
LoadVar ballot
Push 2
2-ary <=
JumpCond False 643
Push PC(380)
Push ()
Push 0
LoadVar ballot
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
Push "A"
3-ary DictAdd
Push 3
Push None
3-ary DictAdd
Apply
Pop
AtomicDec
Jump 482
DelVar ballot
DelVar estimate
Return
Jump 776
Frame acceptor ()
Push [0, None, {}]
StoreVar (ballot, last_accepted, received)
Push True
JumpCond False 772
AtomicInc(lazy)
ReadonlyInc
Push {}
Load network
StoreVar $s579
DelVar b
DelVar e
DelVar p
LoadVar $s579
1-ary IsEmpty
JumpCond True 701
Cut($s579, (b, p, t, e), _)
DelVar _
Push ()
Push 0
LoadVar b
3-ary DictAdd
Push 1
LoadVar p
3-ary DictAdd
LoadVar received
2-ary in
1-ary not
JumpCond False 683
LoadVar t
DelVar t
Push "A"
2-ary ==
Jump 685
DelVar t
Push False
JumpCond False 659
Push ()
Push 0
LoadVar b
DelVar b
3-ary DictAdd
Push 1
LoadVar p
DelVar p
3-ary DictAdd
Push 2
LoadVar e
DelVar e
3-ary DictAdd
2-ary SetAdd
Jump 659
DelVar $s579
Dup
Push {}
2-ary ==
JumpCond False 710
Pop
ReadonlyDec
AtomicDec
Jump 654
Choose
StoreVar (b, p, e)
Jump 716
ReadonlyDec
AtomicDec
Jump 654
ReadonlyDec
LoadVar received
DelVar received
Push {}
Push ()
Push 0
LoadVar b
3-ary DictAdd
Push 1
LoadVar p
3-ary DictAdd
2-ary SetAdd
2-ary |
StoreVar received
LoadVar b
LoadVar ballot
2-ary >=
JumpCond False 751
DelVar ballot
LoadVar b
StoreVar ballot
LoadVar p
Push 2
2-ary ==
JumpCond False 751
DelVar last_accepted
Push ()
Push 0
LoadVar ballot
3-ary DictAdd
Push 1
LoadVar e
DelVar e
3-ary DictAdd
StoreVar last_accepted
DelVar e
Push PC(380)
Push ()
Push 0
LoadVar b
DelVar b
3-ary DictAdd
Push 1
LoadVar p
DelVar p
3-ary DictAdd
Push 2
Push "B"
3-ary DictAdd
Push 3
LoadVar last_accepted
3-ary DictAdd
Apply
Pop
AtomicDec
Jump 652
DelVar ballot
DelVar last_accepted
DelVar received
Return
Load proposals
Print
Push { 0, 1 }
StoreVar $s680
LoadVar $s680
1-ary IsEmpty
JumpCond True 801
Cut($s680, i)
Push PC(455)
Push ()
Push 0
LoadVar i
Push 1
2-ary +
3-ary DictAdd
Push 1
Push ?proposals
LoadVar i
DelVar i
Address
Load
3-ary DictAdd
Push ()
Spawn
Jump 780
DelVar $s680
Push { 1, 2, 3 }
StoreVar $s702
LoadVar $s702
1-ary IsEmpty
JumpCond True 814
Cut($s702, i)
DelVar i
Push PC(649)
Push ()
Push ()
Spawn
Jump 804
DelVar $s702
Return
DelVar result
```

Duration: 0.0014603999999999728

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store bag
Jump 356
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 356
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s11
LoadVar $s11
1-ary IsEmpty
JumpCond True 25
Cut($s11, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 16
DelVar $s11
StoreVar result
Return
Jump 356
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s27
LoadVar $s27
1-ary IsEmpty
JumpCond True 62
Cut($s27, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 55
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 36
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 36
DelVar $s27
Return
Jump 356
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 88
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 92
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 356
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s91
LoadVar $s91
1-ary IsEmpty
JumpCond True 121
Cut($s91, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 110
DelVar $s91
Return
Jump 356
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 356
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 356
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 356
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 198
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 204
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 356
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 231
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 232
Push False
JumpCond False 241
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 252
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 356
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 270
DelVar bg
DelVar k
Push {}
Push PC(4)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 355
Push PC(94)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 284
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 355
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 296
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 355
Push PC(124)
LoadVar bg
Apply
StoreVar hd
Push PC(206)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(255)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s268
LoadVar $s268
1-ary IsEmpty
JumpCond True 340
Cut($s268, x)
Push PC(169)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 324
DelVar $s268
DelVar hd
Push PC(255)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Push PC(4)
Push ()
Apply
Store network
Push 0
StoreVar $n311
Push ()
Push { 0, 1 }
StoreVar $s314
LoadVar $s314
1-ary IsEmpty
JumpCond True 376
Cut($s314, i)
DelVar i
LoadVar $n311
Push { 0, 1 }
Choose
3-ary DictAdd
IncVar $n311
Jump 365
DelVar $n311
DelVar $s314
Store proposals
Jump 776
Frame send m
AtomicInc(lazy)
Push PC(169)
Push ()
Push 0
Load network
3-ary DictAdd
Push 1
LoadVar m
DelVar m
3-ary DictAdd
Apply
Store network
AtomicDec
Return
Jump 776
Frame receive (ballot, phase)
DelVar result
Push ()
Load network
StoreVar $s345
DelVar c
DelVar e
LoadVar $s345
1-ary IsEmpty
JumpCond True 438
Cut($s345, (b, p, t, e), c)
Push ()
Push 0
LoadVar b
DelVar b
3-ary DictAdd
Push 1
LoadVar p
DelVar p
3-ary DictAdd
Push 2
LoadVar t
DelVar t
3-ary DictAdd
Push ()
Push 0
LoadVar ballot
3-ary DictAdd
Push 1
LoadVar phase
3-ary DictAdd
Push 2
Push "B"
3-ary DictAdd
2-ary ==
JumpCond False 401
LoadVar e
DelVar e
LoadVar c
DelVar c
3-ary DictAdd
Jump 401
DelVar $s345
DelVar ballot
DelVar phase
StoreVar msgs
Push PC(255)
Push ()
Push 0
LoadVar msgs
DelVar msgs
3-ary DictAdd
Push 1
Push 2
3-ary DictAdd
Apply
StoreVar result
Return
Jump 776
Frame leader (self, proposal)
Push ()
Push 0
LoadVar self
DelVar self
3-ary DictAdd
Push 1
LoadVar proposal
DelVar proposal
3-ary DictAdd
StoreVar (ballot, estimate)
Push PC(380)
Push ()
Push 0
LoadVar ballot
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
Push "A"
3-ary DictAdd
Push 3
Push None
3-ary DictAdd
Apply
Pop
LoadVar ballot
Push 2
2-ary <=
JumpCond False 645
AtomicInc(lazy)
ReadonlyInc
Push PC(396)
Push ()
Push 0
LoadVar ballot
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Apply
Dup
Push {}
2-ary ==
JumpCond False 505
Pop
ReadonlyDec
AtomicDec
Jump 486
Choose
StoreVar quorum
Jump 511
ReadonlyDec
AtomicDec
Jump 486
ReadonlyDec
Push {}
LoadVar quorum
DelVar quorum
StoreVar $s446
DelVar e
LoadVar $s446
1-ary IsEmpty
JumpCond True 530
Cut($s446, e, _)
DelVar _
LoadVar e
Push None
2-ary !=
JumpCond False 516
LoadVar e
DelVar e
2-ary SetAdd
Jump 516
DelVar $s446
StoreVar accepted
LoadVar accepted
Push {}
2-ary !=
JumpCond False 545
Push ?estimate
LoadVar accepted
DelVar accepted
1-ary max
Split 2
Move 3
Move 2
StoreVar [estimate]
Pop
DelVar accepted
Push PC(380)
Push ()
Push 0
LoadVar ballot
3-ary DictAdd
Push 1
Push 2
3-ary DictAdd
Push 2
Push "A"
3-ary DictAdd
Push 3
LoadVar estimate
3-ary DictAdd
Apply
Pop
AtomicDec
AtomicInc(lazy)
ReadonlyInc
Push PC(396)
Push ()
Push 0
LoadVar ballot
3-ary DictAdd
Push 1
Push 2
3-ary DictAdd
Apply
Dup
Push {}
2-ary ==
JumpCond False 582
Pop
ReadonlyDec
AtomicDec
Jump 563
Choose
StoreVar quorum
Jump 588
ReadonlyDec
AtomicDec
Jump 563
ReadonlyDec
Push PC(65)
Push ()
Push 0
LoadVar quorum
DelVar quorum
3-ary DictAdd
Push 1
Push ()
Push 0
LoadVar ballot
3-ary DictAdd
Push 1
LoadVar estimate
3-ary DictAdd
3-ary DictAdd
Apply
Push 2
2-ary ==
JumpCond False 618
ReadonlyInc
AtomicInc(lazy)
LoadVar estimate
Load proposals
2-ary in
Assert
AtomicDec
ReadonlyDec
LoadVar estimate
Print
LoadVar ballot
DelVar ballot
Push 2
2-ary +
StoreVar ballot
LoadVar ballot
Push 2
2-ary <=
JumpCond False 643
Push PC(380)
Push ()
Push 0
LoadVar ballot
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
Push "A"
3-ary DictAdd
Push 3
Push None
3-ary DictAdd
Apply
Pop
AtomicDec
Jump 482
DelVar ballot
DelVar estimate
Return
Jump 776
Frame acceptor ()
Push [0, None, {}]
StoreVar (ballot, last_accepted, received)
Push True
JumpCond False 772
AtomicInc(lazy)
ReadonlyInc
Push {}
Load network
StoreVar $s579
DelVar b
DelVar e
DelVar p
LoadVar $s579
1-ary IsEmpty
JumpCond True 701
Cut($s579, (b, p, t, e), _)
DelVar _
Push ()
Push 0
LoadVar b
3-ary DictAdd
Push 1
LoadVar p
3-ary DictAdd
LoadVar received
2-ary in
1-ary not
JumpCond False 683
LoadVar t
DelVar t
Push "A"
2-ary ==
Jump 685
DelVar t
Push False
JumpCond False 659
Push ()
Push 0
LoadVar b
DelVar b
3-ary DictAdd
Push 1
LoadVar p
DelVar p
3-ary DictAdd
Push 2
LoadVar e
DelVar e
3-ary DictAdd
2-ary SetAdd
Jump 659
DelVar $s579
Dup
Push {}
2-ary ==
JumpCond False 710
Pop
ReadonlyDec
AtomicDec
Jump 654
Choose
StoreVar (b, p, e)
Jump 716
ReadonlyDec
AtomicDec
Jump 654
ReadonlyDec
LoadVar received
DelVar received
Push {}
Push ()
Push 0
LoadVar b
3-ary DictAdd
Push 1
LoadVar p
3-ary DictAdd
2-ary SetAdd
2-ary |
StoreVar received
LoadVar b
LoadVar ballot
2-ary >=
JumpCond False 751
DelVar ballot
LoadVar b
StoreVar ballot
LoadVar p
Push 2
2-ary ==
JumpCond False 751
DelVar last_accepted
Push ()
Push 0
LoadVar ballot
3-ary DictAdd
Push 1
LoadVar e
DelVar e
3-ary DictAdd
StoreVar last_accepted
DelVar e
Push PC(380)
Push ()
Push 0
LoadVar b
DelVar b
3-ary DictAdd
Push 1
LoadVar p
DelVar p
3-ary DictAdd
Push 2
Push "B"
3-ary DictAdd
Push 3
LoadVar last_accepted
3-ary DictAdd
Apply
Pop
AtomicDec
Jump 652
DelVar ballot
DelVar last_accepted
DelVar received
Return
Load proposals
Print
Push { 0, 1 }
StoreVar $s680
LoadVar $s680
1-ary IsEmpty
JumpCond True 801
Cut($s680, i)
Push PC(455)
Push ()
Push 0
LoadVar i
Push 1
2-ary +
3-ary DictAdd
Push 1
Push ?proposals
LoadVar i
DelVar i
Address
Load
3-ary DictAdd
Push ()
Spawn
Jump 780
DelVar $s680
Push { 1, 2, 3 }
StoreVar $s702
LoadVar $s702
1-ary IsEmpty
JumpCond True 814
Cut($s702, i)
DelVar i
Push PC(649)
Push ()
Push ()
Spawn
Jump 804
DelVar $s702
Return
DelVar result
```

Duration: 0.0014779999999999793

---
##  code/mesa.hny

### Summary

Duration is good: ✅

Output is good: ❌

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Parse error in var statement. Got ('0', 'code/mesa.hny', 5, 13), but expected '=' ErrorToken(line=5, message="Parse error in var statement. Got ('0', 'code/mesa.hny', 5, 13), but expected '='", column=13, lexeme='0', filename='code/mesa.hny', is_eof_error=False)
```

Duration: 0.0016437000000000257

### Current Output

```
Phase 1: compile Harmony program to bytecode
Line 5:12 at code/mesa.hny, missing '=' at '0'
```

Duration: 0.0012523999999999869

---
##  code/RWqtest.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store RWqueue
Push ()
Store synch
Push ()
Store list
Jump 371
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n9
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s12
LoadVar $s12
1-ary IsEmpty
JumpCond True 33
Cut($s12, x)
LoadVar $n9
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n9
Jump 21
DelVar $n9
DelVar $s12
DelVar s
StoreVar result
Return
Jump 371
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 371
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 371
Frame tail s
DelVar result
Push PC(8)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 371
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s69
LoadVar $s69
1-ary IsEmpty
JumpCond True 98
Cut($s69, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 87
DelVar $s69
Return
Jump 371
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s84
LoadVar $s84
1-ary IsEmpty
JumpCond True 115
Cut($s84, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 107
DelVar $s84
StoreVar result
Return
Jump 371
Frame list a
DelVar result
Push 0
StoreVar $n97
Push ()
LoadVar a
DelVar a
StoreVar $s100
LoadVar $s100
1-ary IsEmpty
JumpCond True 137
Cut($s100, v)
LoadVar $n97
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n97
Jump 127
DelVar $n97
DelVar $s100
StoreVar result
Return
Jump 371
Frame values d
DelVar result
Push 0
StoreVar $n115
Push ()
LoadVar d
1-ary keys
StoreVar $s118
LoadVar $s118
1-ary IsEmpty
JumpCond True 162
Cut($s118, k)
LoadVar $n115
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n115
Jump 150
DelVar $n115
DelVar $s118
DelVar d
StoreVar result
Return
Jump 371
Frame items d
DelVar result
Push 0
StoreVar $n136
Push ()
LoadVar d
1-ary keys
StoreVar $s139
LoadVar $s139
1-ary IsEmpty
JumpCond True 194
Cut($s139, k)
LoadVar $n136
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n136
Jump 176
DelVar $n136
DelVar $s139
DelVar d
StoreVar result
Return
Jump 371
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s167
LoadVar $s167
1-ary IsEmpty
JumpCond True 236
Cut($s167, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 209
DelVar $s167
DelVar d
DelVar index
Return
Jump 371
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 251
DelVar a
Push ()
StoreVar result
Jump 326
Push ()
Push 0
Push PC(52)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(61)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n216
Push ()
LoadVar rest
StoreVar $s219
DelVar v
LoadVar $s219
1-ary IsEmpty
JumpCond True 284
Cut($s219, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 269
LoadVar $n216
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n216
Jump 269
DelVar $n216
DelVar $s219
StoreVar lower
Push 0
StoreVar $n235
Push ()
LoadVar rest
DelVar rest
StoreVar $s238
DelVar v
LoadVar $s238
1-ary IsEmpty
JumpCond True 308
Cut($s238, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 293
LoadVar $n235
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n235
Jump 293
DelVar $n235
DelVar $s238
StoreVar higher
Push PC(241)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(241)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 371
Frame sorted d
DelVar result
Push PC(241)
Push PC(119)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 371
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n281
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s284
LoadVar $s284
1-ary IsEmpty
JumpCond True 365
Cut($s284, i)
LoadVar $n281
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n281
Jump 351
DelVar $n281
DelVar $s284
DelVar d
DelVar n
StoreVar result
Return
Push ()
Store bag
Jump 1253
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1253
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s313
LoadVar $s313
1-ary IsEmpty
JumpCond True 395
Cut($s313, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 386
DelVar $s313
StoreVar result
Return
Jump 1253
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s329
LoadVar $s329
1-ary IsEmpty
JumpCond True 432
Cut($s329, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 425
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 406
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 406
DelVar $s329
Return
Jump 1253
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 458
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 462
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1253
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s393
LoadVar $s393
1-ary IsEmpty
JumpCond True 491
Cut($s393, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 480
DelVar $s393
Return
Jump 1253
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1253
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1253
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1253
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 568
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 574
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1253
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 601
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 602
Push False
JumpCond False 611
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 622
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1253
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 640
DelVar bg
DelVar k
Push {}
Push PC(374)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 725
Push PC(464)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 654
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 725
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 666
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 725
Push PC(494)
LoadVar bg
Apply
StoreVar hd
Push PC(576)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(625)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s570
LoadVar $s570
1-ary IsEmpty
JumpCond True 710
Cut($s570, x)
Push PC(539)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 694
DelVar $s570
DelVar hd
Push PC(625)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1253
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1253
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 756
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1253
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1253
Frame Lock ()
DelVar result
Push PC(761)
Push False
Apply
StoreVar result
Return
Jump 1253
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1253
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 792
Jump 795
ReadonlyDec
AtomicDec
Jump 785
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1253
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1253
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1253
Frame Condition ()
DelVar result
Push PC(374)
Push ()
Apply
StoreVar result
Return
Jump 1253
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(435)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(539)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 889
Push PC(435)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 890
Push False
JumpCond False 895
DelVar c
DelVar cnt
DelVar ctx
Jump 898
ReadonlyDec
AtomicDec
Jump 870
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1253
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(374)
Push ()
Apply
2-ary !=
JumpCond False 931
LoadVar c
Push PC(576)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(521)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1253
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(374)
Push ()
Apply
Store
AtomicDec
Return
Jump 1253
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1253
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 962
Jump 965
ReadonlyDec
AtomicDec
Jump 954
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1253
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1253
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1253
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1004
Jump 1007
ReadonlyDec
AtomicDec
Jump 995
ReadonlyDec
Push PC(52)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(61)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1253
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(39)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Jump 1253
Frame V_one ()
Load RWqueue.queue
Push ()
2-ary ==
JumpCond False 1053
Push ?RWqueue"V"
Push ?RWqueue"mutex"
Address
Load
Pop
Jump 1108
Push ?RWqueue"head"
Load RWqueue.queue
Address
Load
StoreVar h
LoadVar h
Push 0
Apply
Push "read"
2-ary ==
JumpCond False 1068
Load RWqueue.w_entered
Push 0
2-ary ==
Jump 1069
Push False
JumpCond False 1079
Push ?RWqueue"V"
LoadVar h
DelVar h
Push 1
Apply
Address
Load
Pop
Jump 1108
LoadVar h
Push 0
Apply
Push "write"
2-ary ==
JumpCond False 1091
Load RWqueue.r_entered
Load RWqueue.w_entered
2-ary +
Push 0
2-ary ==
Jump 1092
Push False
JumpCond False 1102
Push ?RWqueue"V"
LoadVar h
DelVar h
Push 1
Apply
Address
Load
Pop
Jump 1108
DelVar h
Push ?RWqueue"V"
Push ?RWqueue"mutex"
Address
Load
Pop
Return
Jump 1253
Frame acquire_rlock psema
Push ?RWqueue"P"
Push ?RWqueue"mutex"
Address
Load
Pop
Load RWqueue.w_entered
Push 0
2-ary >
JumpCond True 1124
Load RWqueue.queue
Push ()
2-ary !=
Jump 1125
Push True
JumpCond False 1159
Push ?RWqueue"append"
Push ()
Push 0
Load RWqueue.queue
3-ary DictAdd
Push 1
Push ()
Push 0
Push "read"
3-ary DictAdd
Push 1
LoadVar psema
3-ary DictAdd
3-ary DictAdd
Address
Load
Store RWqueue.queue
Push ?RWqueue"V"
Push ?RWqueue"mutex"
Address
Load
Pop
Push ?RWqueue"P"
LoadVar psema
DelVar psema
Address
Load
Pop
Push ?RWqueue"tail"
Load RWqueue.queue
Address
Load
Store RWqueue.queue
DelVar psema
Load RWqueue.r_entered
Push 1
2-ary +
Store RWqueue.r_entered
Push PC(1042)
Push ()
Apply
Pop
Return
Jump 1253
Frame release_rlock ()
Push ?RWqueue"P"
Push ?RWqueue"mutex"
Address
Load
Pop
Load RWqueue.r_entered
Push 1
2-ary -
Store RWqueue.r_entered
Push PC(1042)
Push ()
Apply
Pop
Return
Jump 1253
Frame acquire_wlock psema
Push ?RWqueue"P"
Push ?RWqueue"mutex"
Address
Load
Pop
Load RWqueue.r_entered
Load RWqueue.w_entered
2-ary +
Push 0
2-ary >
JumpCond False 1231
Push ?RWqueue"append"
Push ()
Push 0
Load RWqueue.queue
3-ary DictAdd
Push 1
Push ()
Push 0
Push "write"
3-ary DictAdd
Push 1
LoadVar psema
3-ary DictAdd
3-ary DictAdd
Address
Load
Store RWqueue.queue
Push ?RWqueue"V"
Push ?RWqueue"mutex"
Address
Load
Pop
Push ?RWqueue"P"
LoadVar psema
DelVar psema
Address
Load
Pop
Push ?RWqueue"tail"
Load RWqueue.queue
Address
Load
Store RWqueue.queue
DelVar psema
Push 1
Store RWqueue.w_entered
Push PC(1042)
Push ()
Apply
Pop
Return
Jump 1253
Frame release_wlock ()
Push ?RWqueue"P"
Push ?RWqueue"mutex"
Address
Load
Pop
Push 0
Store RWqueue.w_entered
Push PC(1042)
Push ()
Apply
Pop
Return
Push ?RWqueue"Semaphore"
Push 1
Address
Load
Store RWqueue.mutex
Push ?RWqueue"r_entered"
Push ?RWqueue"w_entered"
Push [0, 0]
Split 2
Move 3
Move 2
Store
Store
Push ()
Store RWqueue.queue
Jump 1335
Frame process self
Push { False, True }
Choose
JumpCond False 1333
Push { "read", "write" }
Choose
Push "read"
2-ary ==
JumpCond False 1302
Push ?acquire_rlock
Push ?semas
LoadVar self
Address
Address
Load
Pop
AtomicInc(eager)
ReadonlyInc
AtomicInc(lazy)
Push PC(1309)
1-ary countLabel
Push 0
2-ary ==
Assert
AtomicDec
ReadonlyDec
AtomicDec
Push ?release_rlock
Push ()
Address
Load
Pop
Jump 1270
Push ?acquire_wlock
Push ?semas
LoadVar self
Address
Address
Load
Pop
AtomicInc(eager)
ReadonlyInc
AtomicInc(lazy)
Push PC(1309)
1-ary countLabel
Push 1
2-ary ==
JumpCond False 1322
Push PC(1285)
1-ary countLabel
Push 0
2-ary ==
Jump 1323
Push False
Assert
AtomicDec
ReadonlyDec
AtomicDec
Push ?release_wlock
Push ()
Address
Load
Pop
Jump 1270
DelVar self
Return
Push 0
StoreVar $n1175
Push ()
Push { 0, 1, 2 }
StoreVar $s1178
LoadVar $s1178
1-ary IsEmpty
JumpCond True 1353
Cut($s1178, i)
DelVar i
LoadVar $n1175
Push ?Semaphore
Push 0
Address
Load
3-ary DictAdd
IncVar $n1175
Jump 1340
DelVar $n1175
DelVar $s1178
Store semas
Push { 0, 1, 2 }
StoreVar $s1193
LoadVar $s1193
1-ary IsEmpty
JumpCond True 1368
Cut($s1193, i)
Push PC(1269)
LoadVar i
DelVar i
Push ()
Spawn
Jump 1358
DelVar $s1193
Return
DelVar result
```

Duration: 0.001647500000000024

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store RWqueue
Push ()
Store synch
Push ()
Store list
Jump 371
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n9
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s12
LoadVar $s12
1-ary IsEmpty
JumpCond True 33
Cut($s12, x)
LoadVar $n9
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n9
Jump 21
DelVar $n9
DelVar $s12
DelVar s
StoreVar result
Return
Jump 371
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 371
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 371
Frame tail s
DelVar result
Push PC(8)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 371
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s69
LoadVar $s69
1-ary IsEmpty
JumpCond True 98
Cut($s69, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 87
DelVar $s69
Return
Jump 371
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s84
LoadVar $s84
1-ary IsEmpty
JumpCond True 115
Cut($s84, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 107
DelVar $s84
StoreVar result
Return
Jump 371
Frame list a
DelVar result
Push 0
StoreVar $n97
Push ()
LoadVar a
DelVar a
StoreVar $s100
LoadVar $s100
1-ary IsEmpty
JumpCond True 137
Cut($s100, v)
LoadVar $n97
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n97
Jump 127
DelVar $n97
DelVar $s100
StoreVar result
Return
Jump 371
Frame values d
DelVar result
Push 0
StoreVar $n115
Push ()
LoadVar d
1-ary keys
StoreVar $s118
LoadVar $s118
1-ary IsEmpty
JumpCond True 162
Cut($s118, k)
LoadVar $n115
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n115
Jump 150
DelVar $n115
DelVar $s118
DelVar d
StoreVar result
Return
Jump 371
Frame items d
DelVar result
Push 0
StoreVar $n136
Push ()
LoadVar d
1-ary keys
StoreVar $s139
LoadVar $s139
1-ary IsEmpty
JumpCond True 194
Cut($s139, k)
LoadVar $n136
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n136
Jump 176
DelVar $n136
DelVar $s139
DelVar d
StoreVar result
Return
Jump 371
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s167
LoadVar $s167
1-ary IsEmpty
JumpCond True 236
Cut($s167, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 209
DelVar $s167
DelVar d
DelVar index
Return
Jump 371
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 251
DelVar a
Push ()
StoreVar result
Jump 326
Push ()
Push 0
Push PC(52)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(61)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n216
Push ()
LoadVar rest
StoreVar $s219
DelVar v
LoadVar $s219
1-ary IsEmpty
JumpCond True 284
Cut($s219, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 269
LoadVar $n216
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n216
Jump 269
DelVar $n216
DelVar $s219
StoreVar lower
Push 0
StoreVar $n235
Push ()
LoadVar rest
DelVar rest
StoreVar $s238
DelVar v
LoadVar $s238
1-ary IsEmpty
JumpCond True 308
Cut($s238, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 293
LoadVar $n235
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n235
Jump 293
DelVar $n235
DelVar $s238
StoreVar higher
Push PC(241)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(241)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 371
Frame sorted d
DelVar result
Push PC(241)
Push PC(119)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 371
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n281
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s284
LoadVar $s284
1-ary IsEmpty
JumpCond True 365
Cut($s284, i)
LoadVar $n281
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n281
Jump 351
DelVar $n281
DelVar $s284
DelVar d
DelVar n
StoreVar result
Return
Push ()
Store bag
Jump 1253
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1253
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s313
LoadVar $s313
1-ary IsEmpty
JumpCond True 395
Cut($s313, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 386
DelVar $s313
StoreVar result
Return
Jump 1253
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s329
LoadVar $s329
1-ary IsEmpty
JumpCond True 432
Cut($s329, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 425
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 406
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 406
DelVar $s329
Return
Jump 1253
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 458
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 462
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1253
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s393
LoadVar $s393
1-ary IsEmpty
JumpCond True 491
Cut($s393, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 480
DelVar $s393
Return
Jump 1253
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1253
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1253
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1253
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 568
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 574
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1253
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 601
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 602
Push False
JumpCond False 611
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 622
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1253
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 640
DelVar bg
DelVar k
Push {}
Push PC(374)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 725
Push PC(464)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 654
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 725
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 666
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 725
Push PC(494)
LoadVar bg
Apply
StoreVar hd
Push PC(576)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(625)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s570
LoadVar $s570
1-ary IsEmpty
JumpCond True 710
Cut($s570, x)
Push PC(539)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 694
DelVar $s570
DelVar hd
Push PC(625)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1253
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1253
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 756
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1253
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1253
Frame Lock ()
DelVar result
Push PC(761)
Push False
Apply
StoreVar result
Return
Jump 1253
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1253
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 792
Jump 795
ReadonlyDec
AtomicDec
Jump 785
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1253
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1253
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1253
Frame Condition ()
DelVar result
Push PC(374)
Push ()
Apply
StoreVar result
Return
Jump 1253
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(435)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(539)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 889
Push PC(435)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 890
Push False
JumpCond False 895
DelVar c
DelVar cnt
DelVar ctx
Jump 898
ReadonlyDec
AtomicDec
Jump 870
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1253
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(374)
Push ()
Apply
2-ary !=
JumpCond False 931
LoadVar c
Push PC(576)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(521)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1253
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(374)
Push ()
Apply
Store
AtomicDec
Return
Jump 1253
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1253
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 962
Jump 965
ReadonlyDec
AtomicDec
Jump 954
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1253
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1253
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1253
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1004
Jump 1007
ReadonlyDec
AtomicDec
Jump 995
ReadonlyDec
Push PC(52)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(61)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1253
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(39)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Jump 1253
Frame V_one ()
Load RWqueue.queue
Push ()
2-ary ==
JumpCond False 1053
Push ?RWqueue"V"
Push ?RWqueue"mutex"
Address
Load
Pop
Jump 1108
Push ?RWqueue"head"
Load RWqueue.queue
Address
Load
StoreVar h
LoadVar h
Push 0
Apply
Push "read"
2-ary ==
JumpCond False 1068
Load RWqueue.w_entered
Push 0
2-ary ==
Jump 1069
Push False
JumpCond False 1079
Push ?RWqueue"V"
LoadVar h
DelVar h
Push 1
Apply
Address
Load
Pop
Jump 1108
LoadVar h
Push 0
Apply
Push "write"
2-ary ==
JumpCond False 1091
Load RWqueue.r_entered
Load RWqueue.w_entered
2-ary +
Push 0
2-ary ==
Jump 1092
Push False
JumpCond False 1102
Push ?RWqueue"V"
LoadVar h
DelVar h
Push 1
Apply
Address
Load
Pop
Jump 1108
DelVar h
Push ?RWqueue"V"
Push ?RWqueue"mutex"
Address
Load
Pop
Return
Jump 1253
Frame acquire_rlock psema
Push ?RWqueue"P"
Push ?RWqueue"mutex"
Address
Load
Pop
Load RWqueue.w_entered
Push 0
2-ary >
JumpCond True 1124
Load RWqueue.queue
Push ()
2-ary !=
Jump 1125
Push True
JumpCond False 1159
Push ?RWqueue"append"
Push ()
Push 0
Load RWqueue.queue
3-ary DictAdd
Push 1
Push ()
Push 0
Push "read"
3-ary DictAdd
Push 1
LoadVar psema
3-ary DictAdd
3-ary DictAdd
Address
Load
Store RWqueue.queue
Push ?RWqueue"V"
Push ?RWqueue"mutex"
Address
Load
Pop
Push ?RWqueue"P"
LoadVar psema
DelVar psema
Address
Load
Pop
Push ?RWqueue"tail"
Load RWqueue.queue
Address
Load
Store RWqueue.queue
DelVar psema
Load RWqueue.r_entered
Push 1
2-ary +
Store RWqueue.r_entered
Push PC(1042)
Push ()
Apply
Pop
Return
Jump 1253
Frame release_rlock ()
Push ?RWqueue"P"
Push ?RWqueue"mutex"
Address
Load
Pop
Load RWqueue.r_entered
Push 1
2-ary -
Store RWqueue.r_entered
Push PC(1042)
Push ()
Apply
Pop
Return
Jump 1253
Frame acquire_wlock psema
Push ?RWqueue"P"
Push ?RWqueue"mutex"
Address
Load
Pop
Load RWqueue.r_entered
Load RWqueue.w_entered
2-ary +
Push 0
2-ary >
JumpCond False 1231
Push ?RWqueue"append"
Push ()
Push 0
Load RWqueue.queue
3-ary DictAdd
Push 1
Push ()
Push 0
Push "write"
3-ary DictAdd
Push 1
LoadVar psema
3-ary DictAdd
3-ary DictAdd
Address
Load
Store RWqueue.queue
Push ?RWqueue"V"
Push ?RWqueue"mutex"
Address
Load
Pop
Push ?RWqueue"P"
LoadVar psema
DelVar psema
Address
Load
Pop
Push ?RWqueue"tail"
Load RWqueue.queue
Address
Load
Store RWqueue.queue
DelVar psema
Push 1
Store RWqueue.w_entered
Push PC(1042)
Push ()
Apply
Pop
Return
Jump 1253
Frame release_wlock ()
Push ?RWqueue"P"
Push ?RWqueue"mutex"
Address
Load
Pop
Push 0
Store RWqueue.w_entered
Push PC(1042)
Push ()
Apply
Pop
Return
Push ?RWqueue"Semaphore"
Push 1
Address
Load
Store RWqueue.mutex
Push ?RWqueue"r_entered"
Push ?RWqueue"w_entered"
Push [0, 0]
Split 2
Move 3
Move 2
Store
Store
Push ()
Store RWqueue.queue
Jump 1335
Frame process self
Push { False, True }
Choose
JumpCond False 1333
Push { "read", "write" }
Choose
Push "read"
2-ary ==
JumpCond False 1302
Push ?acquire_rlock
Push ?semas
LoadVar self
Address
Address
Load
Pop
AtomicInc(eager)
ReadonlyInc
AtomicInc(lazy)
Push PC(1309)
1-ary countLabel
Push 0
2-ary ==
Assert
AtomicDec
ReadonlyDec
AtomicDec
Push ?release_rlock
Push ()
Address
Load
Pop
Jump 1270
Push ?acquire_wlock
Push ?semas
LoadVar self
Address
Address
Load
Pop
AtomicInc(eager)
ReadonlyInc
AtomicInc(lazy)
Push PC(1309)
1-ary countLabel
Push 1
2-ary ==
JumpCond False 1322
Push PC(1285)
1-ary countLabel
Push 0
2-ary ==
Jump 1323
Push False
Assert
AtomicDec
ReadonlyDec
AtomicDec
Push ?release_wlock
Push ()
Address
Load
Pop
Jump 1270
DelVar self
Return
Push 0
StoreVar $n1175
Push ()
Push { 0, 1, 2 }
StoreVar $s1178
LoadVar $s1178
1-ary IsEmpty
JumpCond True 1353
Cut($s1178, i)
DelVar i
LoadVar $n1175
Push ?Semaphore
Push 0
Address
Load
3-ary DictAdd
IncVar $n1175
Jump 1340
DelVar $n1175
DelVar $s1178
Store semas
Push { 0, 1, 2 }
StoreVar $s1193
LoadVar $s1193
1-ary IsEmpty
JumpCond True 1368
Cut($s1193, i)
Push PC(1269)
LoadVar i
DelVar i
Push ()
Spawn
Jump 1358
DelVar $s1193
Return
DelVar result
```

Duration: 0.0014456000000000468

---
##  code/BBsema.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store synch
Push ()
Store list
Jump 369
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 369
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 369
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 369
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 369
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 369
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 369
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 369
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 369
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 369
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 369
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 369
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 369
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Push ()
Store bag
Jump 1109
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1109
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s311
LoadVar $s311
1-ary IsEmpty
JumpCond True 393
Cut($s311, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 384
DelVar $s311
StoreVar result
Return
Jump 1109
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s327
LoadVar $s327
1-ary IsEmpty
JumpCond True 430
Cut($s327, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 423
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 404
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 404
DelVar $s327
Return
Jump 1109
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 456
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 460
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1109
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s391
LoadVar $s391
1-ary IsEmpty
JumpCond True 489
Cut($s391, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 478
DelVar $s391
Return
Jump 1109
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1109
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1109
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1109
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 566
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 572
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1109
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 599
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 600
Push False
JumpCond False 609
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 620
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1109
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 638
DelVar bg
DelVar k
Push {}
Push PC(372)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 723
Push PC(462)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 652
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 723
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 664
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 723
Push PC(492)
LoadVar bg
Apply
StoreVar hd
Push PC(574)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(623)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s568
LoadVar $s568
1-ary IsEmpty
JumpCond True 708
Cut($s568, x)
Push PC(537)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 692
DelVar $s568
DelVar hd
Push PC(623)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1109
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1109
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 754
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1109
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1109
Frame Lock ()
DelVar result
Push PC(759)
Push False
Apply
StoreVar result
Return
Jump 1109
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1109
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 790
Jump 793
ReadonlyDec
AtomicDec
Jump 783
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1109
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1109
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1109
Frame Condition ()
DelVar result
Push PC(372)
Push ()
Apply
StoreVar result
Return
Jump 1109
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(537)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 887
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 888
Push False
JumpCond False 893
DelVar c
DelVar cnt
DelVar ctx
Jump 896
ReadonlyDec
AtomicDec
Jump 868
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1109
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(372)
Push ()
Apply
2-ary !=
JumpCond False 929
LoadVar c
Push PC(574)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(519)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1109
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(372)
Push ()
Apply
Store
AtomicDec
Return
Jump 1109
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1109
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 960
Jump 963
ReadonlyDec
AtomicDec
Jump 952
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1109
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1109
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1109
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1002
Jump 1005
ReadonlyDec
AtomicDec
Jump 993
ReadonlyDec
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1109
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Jump 1109
Frame produce item
Push ?P
Push ?n_empty
Address
Load
Pop
Push ?P
Push ?l_in
Address
Load
Pop
Push ?buf
Load b_in
Address
LoadVar item
DelVar item
Store
Load b_in
Push 2
2-ary %
Push 1
2-ary +
Store b_in
Push ?V
Push ?l_in
Address
Load
Pop
Push ?V
Push ?n_full
Address
Load
Pop
Return
Jump 1109
Frame consume ()
DelVar result
Push ?P
Push ?n_full
Address
Load
Pop
Push ?P
Push ?l_out
Address
Load
Pop
Push ?buf
Load b_out
Address
Load
StoreVar result
Load b_out
Push 2
2-ary %
Push 1
2-ary +
Store b_out
Push ?V
Push ?l_out
Address
Load
Pop
Push ?V
Push ?n_empty
Address
Load
Pop
Return
Push ()
Push { 1, 2 }
StoreVar $s956
LoadVar $s956
1-ary IsEmpty
JumpCond True 1121
Cut($s956, x)
LoadVar x
DelVar x
Push ()
3-ary DictAdd
Jump 1112
DelVar $s956
Store buf
Push 1
Store b_in
Push 1
Store b_out
Push ?Semaphore
Push 1
Address
Load
Store l_in
Push ?Semaphore
Push 1
Address
Load
Store l_out
Push ?Semaphore
Push 0
Address
Load
Store n_full
Push ?Semaphore
Push 2
Address
Load
Store n_empty
Return
DelVar result
```

Duration: 0.0018206000000000055

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store synch
Push ()
Store list
Jump 369
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 369
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 369
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 369
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 369
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 369
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 369
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 369
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 369
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 369
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 369
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 369
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 369
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Push ()
Store bag
Jump 1109
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1109
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s311
LoadVar $s311
1-ary IsEmpty
JumpCond True 393
Cut($s311, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 384
DelVar $s311
StoreVar result
Return
Jump 1109
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s327
LoadVar $s327
1-ary IsEmpty
JumpCond True 430
Cut($s327, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 423
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 404
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 404
DelVar $s327
Return
Jump 1109
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 456
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 460
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1109
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s391
LoadVar $s391
1-ary IsEmpty
JumpCond True 489
Cut($s391, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 478
DelVar $s391
Return
Jump 1109
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1109
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1109
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1109
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 566
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 572
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1109
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 599
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 600
Push False
JumpCond False 609
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 620
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1109
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 638
DelVar bg
DelVar k
Push {}
Push PC(372)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 723
Push PC(462)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 652
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 723
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 664
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 723
Push PC(492)
LoadVar bg
Apply
StoreVar hd
Push PC(574)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(623)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s568
LoadVar $s568
1-ary IsEmpty
JumpCond True 708
Cut($s568, x)
Push PC(537)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 692
DelVar $s568
DelVar hd
Push PC(623)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1109
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1109
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 754
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1109
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1109
Frame Lock ()
DelVar result
Push PC(759)
Push False
Apply
StoreVar result
Return
Jump 1109
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1109
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 790
Jump 793
ReadonlyDec
AtomicDec
Jump 783
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1109
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1109
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1109
Frame Condition ()
DelVar result
Push PC(372)
Push ()
Apply
StoreVar result
Return
Jump 1109
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(537)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 887
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 888
Push False
JumpCond False 893
DelVar c
DelVar cnt
DelVar ctx
Jump 896
ReadonlyDec
AtomicDec
Jump 868
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1109
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(372)
Push ()
Apply
2-ary !=
JumpCond False 929
LoadVar c
Push PC(574)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(519)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1109
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(372)
Push ()
Apply
Store
AtomicDec
Return
Jump 1109
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1109
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 960
Jump 963
ReadonlyDec
AtomicDec
Jump 952
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1109
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1109
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1109
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1002
Jump 1005
ReadonlyDec
AtomicDec
Jump 993
ReadonlyDec
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1109
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Jump 1109
Frame produce item
Push ?P
Push ?n_empty
Address
Load
Pop
Push ?P
Push ?l_in
Address
Load
Pop
Push ?buf
Load b_in
Address
LoadVar item
DelVar item
Store
Load b_in
Push 2
2-ary %
Push 1
2-ary +
Store b_in
Push ?V
Push ?l_in
Address
Load
Pop
Push ?V
Push ?n_full
Address
Load
Pop
Return
Jump 1109
Frame consume ()
DelVar result
Push ?P
Push ?n_full
Address
Load
Pop
Push ?P
Push ?l_out
Address
Load
Pop
Push ?buf
Load b_out
Address
Load
StoreVar result
Load b_out
Push 2
2-ary %
Push 1
2-ary +
Store b_out
Push ?V
Push ?l_out
Address
Load
Pop
Push ?V
Push ?n_empty
Address
Load
Pop
Return
Push ()
Push { 1, 2 }
StoreVar $s956
LoadVar $s956
1-ary IsEmpty
JumpCond True 1121
Cut($s956, x)
LoadVar x
DelVar x
Push ()
3-ary DictAdd
Jump 1112
DelVar $s956
Store buf
Push 1
Store b_in
Push 1
Store b_out
Push ?Semaphore
Push 1
Address
Load
Store l_in
Push ?Semaphore
Push 1
Address
Load
Store l_out
Push ?Semaphore
Push 0
Address
Load
Store n_full
Push ?Semaphore
Push 2
Address
Load
Store n_empty
Return
DelVar result
```

Duration: 0.0015635999999999983

---
##  code/queue.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store list
Jump 419
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n5
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s8
LoadVar $s8
1-ary IsEmpty
JumpCond True 29
Cut($s8, x)
LoadVar $n5
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n5
Jump 17
DelVar $n5
DelVar $s8
DelVar s
StoreVar result
Return
Jump 419
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 419
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 419
Frame tail s
DelVar result
Push PC(4)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 419
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s65
LoadVar $s65
1-ary IsEmpty
JumpCond True 94
Cut($s65, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 83
DelVar $s65
Return
Jump 419
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s80
LoadVar $s80
1-ary IsEmpty
JumpCond True 111
Cut($s80, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 103
DelVar $s80
StoreVar result
Return
Jump 419
Frame list a
DelVar result
Push 0
StoreVar $n93
Push ()
LoadVar a
DelVar a
StoreVar $s96
LoadVar $s96
1-ary IsEmpty
JumpCond True 133
Cut($s96, v)
LoadVar $n93
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n93
Jump 123
DelVar $n93
DelVar $s96
StoreVar result
Return
Jump 419
Frame values d
DelVar result
Push 0
StoreVar $n111
Push ()
LoadVar d
1-ary keys
StoreVar $s114
LoadVar $s114
1-ary IsEmpty
JumpCond True 158
Cut($s114, k)
LoadVar $n111
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n111
Jump 146
DelVar $n111
DelVar $s114
DelVar d
StoreVar result
Return
Jump 419
Frame items d
DelVar result
Push 0
StoreVar $n132
Push ()
LoadVar d
1-ary keys
StoreVar $s135
LoadVar $s135
1-ary IsEmpty
JumpCond True 190
Cut($s135, k)
LoadVar $n132
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n132
Jump 172
DelVar $n132
DelVar $s135
DelVar d
StoreVar result
Return
Jump 419
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s163
LoadVar $s163
1-ary IsEmpty
JumpCond True 232
Cut($s163, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 205
DelVar $s163
DelVar d
DelVar index
Return
Jump 419
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 247
DelVar a
Push ()
StoreVar result
Jump 322
Push ()
Push 0
Push PC(48)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(57)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n212
Push ()
LoadVar rest
StoreVar $s215
DelVar v
LoadVar $s215
1-ary IsEmpty
JumpCond True 280
Cut($s215, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 265
LoadVar $n212
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n212
Jump 265
DelVar $n212
DelVar $s215
StoreVar lower
Push 0
StoreVar $n231
Push ()
LoadVar rest
DelVar rest
StoreVar $s234
DelVar v
LoadVar $s234
1-ary IsEmpty
JumpCond True 304
Cut($s234, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 289
LoadVar $n231
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n231
Jump 289
DelVar $n231
DelVar $s234
StoreVar higher
Push PC(237)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(237)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 419
Frame sorted d
DelVar result
Push PC(237)
Push PC(115)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 419
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n277
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s280
LoadVar $s280
1-ary IsEmpty
JumpCond True 361
Cut($s280, i)
LoadVar $n277
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n277
Jump 347
DelVar $n277
DelVar $s280
DelVar d
DelVar n
StoreVar result
Return
Jump 419
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 419
Frame put (q, v)
AtomicInc(lazy)
LoadVar q
Push PC(35)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar v
DelVar v
3-ary DictAdd
Apply
Store
AtomicDec
Return
Jump 419
Frame get q
DelVar result
AtomicInc(lazy)
LoadVar q
Load
Push ()
2-ary ==
JumpCond False 405
DelVar q
Push None
StoreVar result
Jump 417
Push PC(48)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(57)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Return
DelVar result
```

Duration: 0.0016753999999999936

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store list
Jump 419
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n5
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s8
LoadVar $s8
1-ary IsEmpty
JumpCond True 29
Cut($s8, x)
LoadVar $n5
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n5
Jump 17
DelVar $n5
DelVar $s8
DelVar s
StoreVar result
Return
Jump 419
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 419
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 419
Frame tail s
DelVar result
Push PC(4)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 419
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s65
LoadVar $s65
1-ary IsEmpty
JumpCond True 94
Cut($s65, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 83
DelVar $s65
Return
Jump 419
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s80
LoadVar $s80
1-ary IsEmpty
JumpCond True 111
Cut($s80, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 103
DelVar $s80
StoreVar result
Return
Jump 419
Frame list a
DelVar result
Push 0
StoreVar $n93
Push ()
LoadVar a
DelVar a
StoreVar $s96
LoadVar $s96
1-ary IsEmpty
JumpCond True 133
Cut($s96, v)
LoadVar $n93
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n93
Jump 123
DelVar $n93
DelVar $s96
StoreVar result
Return
Jump 419
Frame values d
DelVar result
Push 0
StoreVar $n111
Push ()
LoadVar d
1-ary keys
StoreVar $s114
LoadVar $s114
1-ary IsEmpty
JumpCond True 158
Cut($s114, k)
LoadVar $n111
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n111
Jump 146
DelVar $n111
DelVar $s114
DelVar d
StoreVar result
Return
Jump 419
Frame items d
DelVar result
Push 0
StoreVar $n132
Push ()
LoadVar d
1-ary keys
StoreVar $s135
LoadVar $s135
1-ary IsEmpty
JumpCond True 190
Cut($s135, k)
LoadVar $n132
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n132
Jump 172
DelVar $n132
DelVar $s135
DelVar d
StoreVar result
Return
Jump 419
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s163
LoadVar $s163
1-ary IsEmpty
JumpCond True 232
Cut($s163, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 205
DelVar $s163
DelVar d
DelVar index
Return
Jump 419
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 247
DelVar a
Push ()
StoreVar result
Jump 322
Push ()
Push 0
Push PC(48)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(57)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n212
Push ()
LoadVar rest
StoreVar $s215
DelVar v
LoadVar $s215
1-ary IsEmpty
JumpCond True 280
Cut($s215, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 265
LoadVar $n212
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n212
Jump 265
DelVar $n212
DelVar $s215
StoreVar lower
Push 0
StoreVar $n231
Push ()
LoadVar rest
DelVar rest
StoreVar $s234
DelVar v
LoadVar $s234
1-ary IsEmpty
JumpCond True 304
Cut($s234, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 289
LoadVar $n231
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n231
Jump 289
DelVar $n231
DelVar $s234
StoreVar higher
Push PC(237)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(237)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 419
Frame sorted d
DelVar result
Push PC(237)
Push PC(115)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 419
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n277
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s280
LoadVar $s280
1-ary IsEmpty
JumpCond True 361
Cut($s280, i)
LoadVar $n277
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n277
Jump 347
DelVar $n277
DelVar $s280
DelVar d
DelVar n
StoreVar result
Return
Jump 419
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 419
Frame put (q, v)
AtomicInc(lazy)
LoadVar q
Push PC(35)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar v
DelVar v
3-ary DictAdd
Apply
Store
AtomicDec
Return
Jump 419
Frame get q
DelVar result
AtomicInc(lazy)
LoadVar q
Load
Push ()
2-ary ==
JumpCond False 405
DelVar q
Push None
StoreVar result
Jump 417
Push PC(48)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(57)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Return
DelVar result
```

Duration: 0.0012546999999999975

---
##  code/barrier.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store synch
Push ()
Store list
Jump 369
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 369
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 369
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 369
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 369
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 369
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 369
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 369
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 369
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 369
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 369
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 369
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 369
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Push ()
Store bag
Jump 1151
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1151
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s311
LoadVar $s311
1-ary IsEmpty
JumpCond True 393
Cut($s311, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 384
DelVar $s311
StoreVar result
Return
Jump 1151
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s327
LoadVar $s327
1-ary IsEmpty
JumpCond True 430
Cut($s327, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 423
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 404
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 404
DelVar $s327
Return
Jump 1151
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 456
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 460
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1151
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s391
LoadVar $s391
1-ary IsEmpty
JumpCond True 489
Cut($s391, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 478
DelVar $s391
Return
Jump 1151
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1151
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1151
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1151
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 566
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 572
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1151
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 599
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 600
Push False
JumpCond False 609
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 620
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1151
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 638
DelVar bg
DelVar k
Push {}
Push PC(372)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 723
Push PC(462)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 652
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 723
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 664
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 723
Push PC(492)
LoadVar bg
Apply
StoreVar hd
Push PC(574)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(623)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s568
LoadVar $s568
1-ary IsEmpty
JumpCond True 708
Cut($s568, x)
Push PC(537)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 692
DelVar $s568
DelVar hd
Push PC(623)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1151
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1151
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 754
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1151
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1151
Frame Lock ()
DelVar result
Push PC(759)
Push False
Apply
StoreVar result
Return
Jump 1151
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1151
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 790
Jump 793
ReadonlyDec
AtomicDec
Jump 783
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1151
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1151
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1151
Frame Condition ()
DelVar result
Push PC(372)
Push ()
Apply
StoreVar result
Return
Jump 1151
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(537)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 887
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 888
Push False
JumpCond False 893
DelVar c
DelVar cnt
DelVar ctx
Jump 896
ReadonlyDec
AtomicDec
Jump 868
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1151
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(372)
Push ()
Apply
2-ary !=
JumpCond False 929
LoadVar c
Push PC(574)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(519)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1151
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(372)
Push ()
Apply
Store
AtomicDec
Return
Jump 1151
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1151
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 960
Jump 963
ReadonlyDec
AtomicDec
Jump 952
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1151
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1151
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1151
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1002
Jump 1005
ReadonlyDec
AtomicDec
Jump 993
ReadonlyDec
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1151
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Jump 1151
Frame Barrier required
DelVar result
Push ()
Push "mutex"
Push PC(766)
Push ()
Apply
3-ary DictAdd
Push "cond"
Push PC(825)
Push ()
Apply
3-ary DictAdd
Push "required"
LoadVar required
3-ary DictAdd
Push "left"
LoadVar required
DelVar required
3-ary DictAdd
Push "cycle"
Push 0
3-ary DictAdd
StoreVar result
Return
Jump 1151
Frame bwait b
Push PC(782)
LoadVar b
Push "mutex"
Address
Apply
Pop
LoadVar b
Push "left"
Address
Dup
Load
Push 1
2-ary -
Store
LoadVar b
Push "left"
Address
Load
Push 0
2-ary ==
JumpCond False 1115
LoadVar b
Push "cycle"
Address
LoadVar b
Push "cycle"
Address
Load
Push 1
2-ary +
Push 2
2-ary %
Store
LoadVar b
Push "left"
Address
LoadVar b
Push "required"
Address
Load
Store
Push PC(933)
LoadVar b
Push "cond"
Address
Apply
Pop
Jump 1142
LoadVar b
Push "cycle"
Address
Load
StoreVar cycle
LoadVar b
Push "cycle"
Address
Load
LoadVar cycle
2-ary ==
JumpCond False 1142
Push PC(833)
Push ()
Push 0
LoadVar b
Push "cond"
Address
3-ary DictAdd
Push 1
LoadVar b
Push "mutex"
Address
3-ary DictAdd
Apply
Pop
Jump 1120
DelVar cycle
Push PC(801)
LoadVar b
DelVar b
Push "mutex"
Address
Apply
Pop
Return
Return
DelVar result
```

Duration: 0.0015481999999999996

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store synch
Push ()
Store list
Jump 369
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 369
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 369
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 369
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 369
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 369
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 369
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 369
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 369
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 369
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 369
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 369
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 369
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Push ()
Store bag
Jump 1151
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1151
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s311
LoadVar $s311
1-ary IsEmpty
JumpCond True 393
Cut($s311, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 384
DelVar $s311
StoreVar result
Return
Jump 1151
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s327
LoadVar $s327
1-ary IsEmpty
JumpCond True 430
Cut($s327, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 423
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 404
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 404
DelVar $s327
Return
Jump 1151
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 456
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 460
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1151
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s391
LoadVar $s391
1-ary IsEmpty
JumpCond True 489
Cut($s391, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 478
DelVar $s391
Return
Jump 1151
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1151
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1151
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1151
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 566
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 572
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1151
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 599
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 600
Push False
JumpCond False 609
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 620
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1151
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 638
DelVar bg
DelVar k
Push {}
Push PC(372)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 723
Push PC(462)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 652
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 723
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 664
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 723
Push PC(492)
LoadVar bg
Apply
StoreVar hd
Push PC(574)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(623)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s568
LoadVar $s568
1-ary IsEmpty
JumpCond True 708
Cut($s568, x)
Push PC(537)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 692
DelVar $s568
DelVar hd
Push PC(623)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1151
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1151
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 754
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1151
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1151
Frame Lock ()
DelVar result
Push PC(759)
Push False
Apply
StoreVar result
Return
Jump 1151
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1151
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 790
Jump 793
ReadonlyDec
AtomicDec
Jump 783
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1151
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1151
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1151
Frame Condition ()
DelVar result
Push PC(372)
Push ()
Apply
StoreVar result
Return
Jump 1151
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(537)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 887
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 888
Push False
JumpCond False 893
DelVar c
DelVar cnt
DelVar ctx
Jump 896
ReadonlyDec
AtomicDec
Jump 868
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1151
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(372)
Push ()
Apply
2-ary !=
JumpCond False 929
LoadVar c
Push PC(574)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(519)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1151
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(372)
Push ()
Apply
Store
AtomicDec
Return
Jump 1151
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1151
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 960
Jump 963
ReadonlyDec
AtomicDec
Jump 952
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1151
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1151
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1151
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1002
Jump 1005
ReadonlyDec
AtomicDec
Jump 993
ReadonlyDec
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1151
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Jump 1151
Frame Barrier required
DelVar result
Push ()
Push "mutex"
Push PC(766)
Push ()
Apply
3-ary DictAdd
Push "cond"
Push PC(825)
Push ()
Apply
3-ary DictAdd
Push "required"
LoadVar required
3-ary DictAdd
Push "left"
LoadVar required
DelVar required
3-ary DictAdd
Push "cycle"
Push 0
3-ary DictAdd
StoreVar result
Return
Jump 1151
Frame bwait b
Push PC(782)
LoadVar b
Push "mutex"
Address
Apply
Pop
LoadVar b
Push "left"
Address
Dup
Load
Push 1
2-ary -
Store
LoadVar b
Push "left"
Address
Load
Push 0
2-ary ==
JumpCond False 1115
LoadVar b
Push "cycle"
Address
LoadVar b
Push "cycle"
Address
Load
Push 1
2-ary +
Push 2
2-ary %
Store
LoadVar b
Push "left"
Address
LoadVar b
Push "required"
Address
Load
Store
Push PC(933)
LoadVar b
Push "cond"
Address
Apply
Pop
Jump 1142
LoadVar b
Push "cycle"
Address
Load
StoreVar cycle
LoadVar b
Push "cycle"
Address
Load
LoadVar cycle
2-ary ==
JumpCond False 1142
Push PC(833)
Push ()
Push 0
LoadVar b
Push "cond"
Address
3-ary DictAdd
Push 1
LoadVar b
Push "mutex"
Address
3-ary DictAdd
Apply
Pop
Jump 1120
DelVar cycle
Push PC(801)
LoadVar b
DelVar b
Push "mutex"
Address
Apply
Pop
Return
Return
DelVar result
```

Duration: 0.0013721000000000427

---
##  code/ticket.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Jump 72
Frame fetch_and_increment p
DelVar result
AtomicInc(lazy)
LoadVar p
Load
StoreVar result
LoadVar p
LoadVar p
DelVar p
Load
Push 1
2-ary +
Push 8
2-ary %
Store
AtomicDec
Return
Jump 72
Frame Lock ()
DelVar result
Push { "counter":0, "dispenser":0 }
StoreVar result
Return
Jump 72
Frame acquire lk
Push PC(2)
LoadVar lk
Push "dispenser"
Address
Apply
StoreVar my_ticket
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Push "counter"
Address
Load
LoadVar my_ticket
2-ary ==
JumpCond False 45
DelVar lk
DelVar my_ticket
Jump 48
ReadonlyDec
AtomicDec
Jump 33
ReadonlyDec
AtomicDec
Return
Jump 72
Frame release lk
LoadVar lk
Push "counter"
Address
Load
Push 1
2-ary +
Push 8
2-ary %
StoreVar next
AtomicInc(lazy)
LoadVar lk
DelVar lk
Push "counter"
Address
LoadVar next
DelVar next
Store
AtomicDec
Return
Return
DelVar result
```

Duration: 0.0013920000000000043

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Jump 72
Frame fetch_and_increment p
DelVar result
AtomicInc(lazy)
LoadVar p
Load
StoreVar result
LoadVar p
LoadVar p
DelVar p
Load
Push 1
2-ary +
Push 8
2-ary %
Store
AtomicDec
Return
Jump 72
Frame Lock ()
DelVar result
Push { "counter":0, "dispenser":0 }
StoreVar result
Return
Jump 72
Frame acquire lk
Push PC(2)
LoadVar lk
Push "dispenser"
Address
Apply
StoreVar my_ticket
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Push "counter"
Address
Load
LoadVar my_ticket
2-ary ==
JumpCond False 45
DelVar lk
DelVar my_ticket
Jump 48
ReadonlyDec
AtomicDec
Jump 33
ReadonlyDec
AtomicDec
Return
Jump 72
Frame release lk
LoadVar lk
Push "counter"
Address
Load
Push 1
2-ary +
Push 8
2-ary %
StoreVar next
AtomicInc(lazy)
LoadVar lk
DelVar lk
Push "counter"
Address
LoadVar next
DelVar next
Store
AtomicDec
Return
Return
DelVar result
```

Duration: 0.001251900000000028

---
##  code/atomicinc.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Jump 13
Frame atomic_inc ptr
AtomicInc(lazy)
LoadVar ptr
DelVar ptr
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Push 0
Store count
Push PC(2)
Push ?count
Apply
Pop
Return
DelVar result
```

Duration: 0.001562299999999961

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Jump 13
Frame atomic_inc ptr
AtomicInc(lazy)
LoadVar ptr
DelVar ptr
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Push 0
Store count
Push PC(2)
Push ?count
Apply
Pop
Return
DelVar result
```

Duration: 0.001341800000000004

---
##  code/nbqueue.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store alloc
Push ()
Store alloc.pool
Push 0
Store alloc.next
Jump 47
Frame malloc v
DelVar result
AtomicInc(lazy)
Push ?alloc"pool"
Load alloc.next
Address
LoadVar v
DelVar v
Store
Push ?alloc"pool"
Load alloc.next
Address
StoreVar result
Load alloc.next
Push 1
2-ary +
Store alloc.next
AtomicDec
Return
Jump 47
Frame free r
AtomicInc(lazy)
LoadVar r
DelVar r
Del
AtomicDec
Return
Jump 47
Frame leak_check ()
ReadonlyInc
AtomicInc(lazy)
Load alloc.pool
Push ()
2-ary ==
Push "alloc_leak"
Assert2
AtomicDec
ReadonlyDec
Return
Push ()
Store synch
Push ()
Store list
Jump 415
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n50
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s53
LoadVar $s53
1-ary IsEmpty
JumpCond True 77
Cut($s53, x)
LoadVar $n50
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n50
Jump 65
DelVar $n50
DelVar $s53
DelVar s
StoreVar result
Return
Jump 415
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 415
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 415
Frame tail s
DelVar result
Push PC(52)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 415
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s110
LoadVar $s110
1-ary IsEmpty
JumpCond True 142
Cut($s110, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 131
DelVar $s110
Return
Jump 415
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s125
LoadVar $s125
1-ary IsEmpty
JumpCond True 159
Cut($s125, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 151
DelVar $s125
StoreVar result
Return
Jump 415
Frame list a
DelVar result
Push 0
StoreVar $n138
Push ()
LoadVar a
DelVar a
StoreVar $s141
LoadVar $s141
1-ary IsEmpty
JumpCond True 181
Cut($s141, v)
LoadVar $n138
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n138
Jump 171
DelVar $n138
DelVar $s141
StoreVar result
Return
Jump 415
Frame values d
DelVar result
Push 0
StoreVar $n156
Push ()
LoadVar d
1-ary keys
StoreVar $s159
LoadVar $s159
1-ary IsEmpty
JumpCond True 206
Cut($s159, k)
LoadVar $n156
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n156
Jump 194
DelVar $n156
DelVar $s159
DelVar d
StoreVar result
Return
Jump 415
Frame items d
DelVar result
Push 0
StoreVar $n177
Push ()
LoadVar d
1-ary keys
StoreVar $s180
LoadVar $s180
1-ary IsEmpty
JumpCond True 238
Cut($s180, k)
LoadVar $n177
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n177
Jump 220
DelVar $n177
DelVar $s180
DelVar d
StoreVar result
Return
Jump 415
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s208
LoadVar $s208
1-ary IsEmpty
JumpCond True 280
Cut($s208, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 253
DelVar $s208
DelVar d
DelVar index
Return
Jump 415
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 295
DelVar a
Push ()
StoreVar result
Jump 370
Push ()
Push 0
Push PC(96)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(105)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n257
Push ()
LoadVar rest
StoreVar $s260
DelVar v
LoadVar $s260
1-ary IsEmpty
JumpCond True 328
Cut($s260, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 313
LoadVar $n257
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n257
Jump 313
DelVar $n257
DelVar $s260
StoreVar lower
Push 0
StoreVar $n276
Push ()
LoadVar rest
DelVar rest
StoreVar $s279
DelVar v
LoadVar $s279
1-ary IsEmpty
JumpCond True 352
Cut($s279, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 337
LoadVar $n276
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n276
Jump 337
DelVar $n276
DelVar $s279
StoreVar higher
Push PC(285)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(285)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 415
Frame sorted d
DelVar result
Push PC(285)
Push PC(163)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 415
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n322
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s325
LoadVar $s325
1-ary IsEmpty
JumpCond True 409
Cut($s325, i)
LoadVar $n322
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n322
Jump 395
DelVar $n322
DelVar $s325
DelVar d
DelVar n
StoreVar result
Return
Push ()
Store bag
Jump 1381
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1381
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s354
LoadVar $s354
1-ary IsEmpty
JumpCond True 439
Cut($s354, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 430
DelVar $s354
StoreVar result
Return
Jump 1381
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s370
LoadVar $s370
1-ary IsEmpty
JumpCond True 476
Cut($s370, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 469
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 450
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 450
DelVar $s370
Return
Jump 1381
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 502
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 506
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1381
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s434
LoadVar $s434
1-ary IsEmpty
JumpCond True 535
Cut($s434, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 524
DelVar $s434
Return
Jump 1381
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1381
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1381
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1381
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 612
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 618
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1381
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 645
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 646
Push False
JumpCond False 655
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 666
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1381
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 684
DelVar bg
DelVar k
Push {}
Push PC(418)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 769
Push PC(508)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 698
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 769
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 710
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 769
Push PC(538)
LoadVar bg
Apply
StoreVar hd
Push PC(620)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(669)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s611
LoadVar $s611
1-ary IsEmpty
JumpCond True 754
Cut($s611, x)
Push PC(583)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 738
DelVar $s611
DelVar hd
Push PC(669)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1381
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1381
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 800
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1381
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1381
Frame Lock ()
DelVar result
Push PC(805)
Push False
Apply
StoreVar result
Return
Jump 1381
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1381
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 836
Jump 839
ReadonlyDec
AtomicDec
Jump 829
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1381
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1381
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1381
Frame Condition ()
DelVar result
Push PC(418)
Push ()
Apply
StoreVar result
Return
Jump 1381
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(479)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(583)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 933
Push PC(479)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 934
Push False
JumpCond False 939
DelVar c
DelVar cnt
DelVar ctx
Jump 942
ReadonlyDec
AtomicDec
Jump 914
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1381
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(418)
Push ()
Apply
2-ary !=
JumpCond False 975
LoadVar c
Push PC(620)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(565)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1381
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(418)
Push ()
Apply
Store
AtomicDec
Return
Jump 1381
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1381
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 1006
Jump 1009
ReadonlyDec
AtomicDec
Jump 998
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1381
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1381
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1381
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1048
Jump 1051
ReadonlyDec
AtomicDec
Jump 1039
ReadonlyDec
Push PC(96)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(105)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1381
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(83)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Jump 1381
Frame Queue ()
DelVar result
Push PC(8)
Push { "next":{ "cnt":0, "ptr":None } }
Apply
StoreVar node
Push ()
Push "head"
Push ()
Push "ptr"
LoadVar node
3-ary DictAdd
Push "cnt"
Push 0
3-ary DictAdd
3-ary DictAdd
Push "tail"
Push ()
Push "ptr"
LoadVar node
DelVar node
3-ary DictAdd
Push "cnt"
Push 0
3-ary DictAdd
3-ary DictAdd
StoreVar result
Return
Jump 1381
Frame put (q, v)
Push PC(8)
Push ()
Push "value"
LoadVar v
DelVar v
3-ary DictAdd
Push "next"
Push { "cnt":0, "ptr":None }
3-ary DictAdd
Apply
StoreVar node
Push [None, False]
StoreVar (tail, done)
LoadVar done
JumpCond True 1217
DelVar tail
LoadVar q
Push "tail"
Address
Load
StoreVar tail
LoadVar tail
Push "ptr"
Apply
Push "next"
Address
Load
StoreVar next
LoadVar tail
LoadVar q
Push "tail"
Address
Load
2-ary ==
JumpCond False 1215
LoadVar next
Push "ptr"
Apply
Push None
2-ary ==
JumpCond False 1187
DelVar done
Push PC(784)
Push ()
Push 0
LoadVar tail
Push "ptr"
Apply
Push "next"
Address
3-ary DictAdd
Push 1
LoadVar next
3-ary DictAdd
Push 2
Push ()
Push "ptr"
LoadVar node
3-ary DictAdd
Push "cnt"
LoadVar next
DelVar next
Push "cnt"
Apply
Push 1
2-ary +
3-ary DictAdd
3-ary DictAdd
Apply
StoreVar done
Jump 1215
Push PC(784)
Push ()
Push 0
LoadVar q
Push "tail"
Address
3-ary DictAdd
Push 1
LoadVar tail
3-ary DictAdd
Push 2
Push ()
Push "ptr"
LoadVar next
DelVar next
Push "ptr"
Apply
3-ary DictAdd
Push "cnt"
LoadVar tail
Push "cnt"
Apply
Push 1
2-ary +
3-ary DictAdd
3-ary DictAdd
Apply
Pop
DelVar next
Jump 1129
DelVar done
Push PC(784)
Push ()
Push 0
LoadVar q
DelVar q
Push "tail"
Address
3-ary DictAdd
Push 1
LoadVar tail
3-ary DictAdd
Push 2
Push ()
Push "ptr"
LoadVar node
DelVar node
3-ary DictAdd
Push "cnt"
LoadVar tail
DelVar tail
Push "cnt"
Apply
Push 1
2-ary +
3-ary DictAdd
3-ary DictAdd
Apply
Pop
Return
Jump 1381
Frame get q
Push False
StoreVar done
LoadVar done
JumpCond True 1378
Push ()
Push 0
LoadVar q
Push "head"
Address
Load
3-ary DictAdd
Push 1
LoadVar q
Push "tail"
Address
Load
3-ary DictAdd
StoreVar (head, tail)
LoadVar head
Push "ptr"
Apply
Push "next"
Address
Load
StoreVar next
LoadVar head
LoadVar q
Push "head"
Address
Load
2-ary ==
JumpCond False 1374
LoadVar head
Push "ptr"
Apply
LoadVar tail
Push "ptr"
Apply
2-ary ==
JumpCond False 1335
DelVar head
LoadVar next
Push "ptr"
Apply
Push None
2-ary ==
JumpCond False 1305
DelVar done
DelVar next
DelVar result
DelVar tail
Push None
StoreVar result
Push True
StoreVar done
Jump 1374
Push PC(784)
Push ()
Push 0
LoadVar q
Push "tail"
Address
3-ary DictAdd
Push 1
LoadVar tail
3-ary DictAdd
Push 2
Push ()
Push "ptr"
LoadVar next
DelVar next
Push "ptr"
Apply
3-ary DictAdd
Push "cnt"
LoadVar tail
DelVar tail
Push "cnt"
Apply
Push 1
2-ary +
3-ary DictAdd
3-ary DictAdd
Apply
Pop
Jump 1374
DelVar done
DelVar result
DelVar tail
LoadVar next
Push "ptr"
Apply
Push "value"
Address
Load
StoreVar result
Push PC(784)
Push ()
Push 0
LoadVar q
Push "head"
Address
3-ary DictAdd
Push 1
LoadVar head
3-ary DictAdd
Push 2
Push ()
Push "ptr"
LoadVar next
DelVar next
Push "ptr"
Apply
3-ary DictAdd
Push "cnt"
LoadVar head
DelVar head
Push "cnt"
Apply
Push 1
2-ary +
3-ary DictAdd
3-ary DictAdd
Apply
StoreVar done
DelVar head
DelVar next
DelVar tail
Jump 1251
DelVar done
DelVar q
Return
Return
DelVar result
```

Duration: 0.001490199999999997

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store alloc
Push ()
Store alloc.pool
Push 0
Store alloc.next
Jump 47
Frame malloc v
DelVar result
AtomicInc(lazy)
Push ?alloc"pool"
Load alloc.next
Address
LoadVar v
DelVar v
Store
Push ?alloc"pool"
Load alloc.next
Address
StoreVar result
Load alloc.next
Push 1
2-ary +
Store alloc.next
AtomicDec
Return
Jump 47
Frame free r
AtomicInc(lazy)
LoadVar r
DelVar r
Del
AtomicDec
Return
Jump 47
Frame leak_check ()
ReadonlyInc
AtomicInc(lazy)
Load alloc.pool
Push ()
2-ary ==
Push "alloc_leak"
Assert2
AtomicDec
ReadonlyDec
Return
Push ()
Store synch
Push ()
Store list
Jump 415
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n50
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s53
LoadVar $s53
1-ary IsEmpty
JumpCond True 77
Cut($s53, x)
LoadVar $n50
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n50
Jump 65
DelVar $n50
DelVar $s53
DelVar s
StoreVar result
Return
Jump 415
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 415
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 415
Frame tail s
DelVar result
Push PC(52)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 415
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s110
LoadVar $s110
1-ary IsEmpty
JumpCond True 142
Cut($s110, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 131
DelVar $s110
Return
Jump 415
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s125
LoadVar $s125
1-ary IsEmpty
JumpCond True 159
Cut($s125, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 151
DelVar $s125
StoreVar result
Return
Jump 415
Frame list a
DelVar result
Push 0
StoreVar $n138
Push ()
LoadVar a
DelVar a
StoreVar $s141
LoadVar $s141
1-ary IsEmpty
JumpCond True 181
Cut($s141, v)
LoadVar $n138
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n138
Jump 171
DelVar $n138
DelVar $s141
StoreVar result
Return
Jump 415
Frame values d
DelVar result
Push 0
StoreVar $n156
Push ()
LoadVar d
1-ary keys
StoreVar $s159
LoadVar $s159
1-ary IsEmpty
JumpCond True 206
Cut($s159, k)
LoadVar $n156
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n156
Jump 194
DelVar $n156
DelVar $s159
DelVar d
StoreVar result
Return
Jump 415
Frame items d
DelVar result
Push 0
StoreVar $n177
Push ()
LoadVar d
1-ary keys
StoreVar $s180
LoadVar $s180
1-ary IsEmpty
JumpCond True 238
Cut($s180, k)
LoadVar $n177
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n177
Jump 220
DelVar $n177
DelVar $s180
DelVar d
StoreVar result
Return
Jump 415
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s208
LoadVar $s208
1-ary IsEmpty
JumpCond True 280
Cut($s208, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 253
DelVar $s208
DelVar d
DelVar index
Return
Jump 415
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 295
DelVar a
Push ()
StoreVar result
Jump 370
Push ()
Push 0
Push PC(96)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(105)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n257
Push ()
LoadVar rest
StoreVar $s260
DelVar v
LoadVar $s260
1-ary IsEmpty
JumpCond True 328
Cut($s260, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 313
LoadVar $n257
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n257
Jump 313
DelVar $n257
DelVar $s260
StoreVar lower
Push 0
StoreVar $n276
Push ()
LoadVar rest
DelVar rest
StoreVar $s279
DelVar v
LoadVar $s279
1-ary IsEmpty
JumpCond True 352
Cut($s279, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 337
LoadVar $n276
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n276
Jump 337
DelVar $n276
DelVar $s279
StoreVar higher
Push PC(285)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(285)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 415
Frame sorted d
DelVar result
Push PC(285)
Push PC(163)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 415
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n322
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s325
LoadVar $s325
1-ary IsEmpty
JumpCond True 409
Cut($s325, i)
LoadVar $n322
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n322
Jump 395
DelVar $n322
DelVar $s325
DelVar d
DelVar n
StoreVar result
Return
Push ()
Store bag
Jump 1381
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1381
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s354
LoadVar $s354
1-ary IsEmpty
JumpCond True 439
Cut($s354, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 430
DelVar $s354
StoreVar result
Return
Jump 1381
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s370
LoadVar $s370
1-ary IsEmpty
JumpCond True 476
Cut($s370, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 469
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 450
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 450
DelVar $s370
Return
Jump 1381
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 502
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 506
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1381
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s434
LoadVar $s434
1-ary IsEmpty
JumpCond True 535
Cut($s434, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 524
DelVar $s434
Return
Jump 1381
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1381
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1381
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1381
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 612
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 618
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1381
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 645
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 646
Push False
JumpCond False 655
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 666
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1381
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 684
DelVar bg
DelVar k
Push {}
Push PC(418)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 769
Push PC(508)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 698
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 769
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 710
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 769
Push PC(538)
LoadVar bg
Apply
StoreVar hd
Push PC(620)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(669)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s611
LoadVar $s611
1-ary IsEmpty
JumpCond True 754
Cut($s611, x)
Push PC(583)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 738
DelVar $s611
DelVar hd
Push PC(669)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1381
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1381
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 800
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1381
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1381
Frame Lock ()
DelVar result
Push PC(805)
Push False
Apply
StoreVar result
Return
Jump 1381
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1381
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 836
Jump 839
ReadonlyDec
AtomicDec
Jump 829
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1381
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1381
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1381
Frame Condition ()
DelVar result
Push PC(418)
Push ()
Apply
StoreVar result
Return
Jump 1381
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(479)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(583)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 933
Push PC(479)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 934
Push False
JumpCond False 939
DelVar c
DelVar cnt
DelVar ctx
Jump 942
ReadonlyDec
AtomicDec
Jump 914
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1381
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(418)
Push ()
Apply
2-ary !=
JumpCond False 975
LoadVar c
Push PC(620)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(565)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1381
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(418)
Push ()
Apply
Store
AtomicDec
Return
Jump 1381
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1381
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 1006
Jump 1009
ReadonlyDec
AtomicDec
Jump 998
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1381
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1381
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1381
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1048
Jump 1051
ReadonlyDec
AtomicDec
Jump 1039
ReadonlyDec
Push PC(96)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(105)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1381
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(83)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Jump 1381
Frame Queue ()
DelVar result
Push PC(8)
Push { "next":{ "cnt":0, "ptr":None } }
Apply
StoreVar node
Push ()
Push "head"
Push ()
Push "ptr"
LoadVar node
3-ary DictAdd
Push "cnt"
Push 0
3-ary DictAdd
3-ary DictAdd
Push "tail"
Push ()
Push "ptr"
LoadVar node
DelVar node
3-ary DictAdd
Push "cnt"
Push 0
3-ary DictAdd
3-ary DictAdd
StoreVar result
Return
Jump 1381
Frame put (q, v)
Push PC(8)
Push ()
Push "value"
LoadVar v
DelVar v
3-ary DictAdd
Push "next"
Push { "cnt":0, "ptr":None }
3-ary DictAdd
Apply
StoreVar node
Push [None, False]
StoreVar (tail, done)
LoadVar done
JumpCond True 1217
DelVar tail
LoadVar q
Push "tail"
Address
Load
StoreVar tail
LoadVar tail
Push "ptr"
Apply
Push "next"
Address
Load
StoreVar next
LoadVar tail
LoadVar q
Push "tail"
Address
Load
2-ary ==
JumpCond False 1215
LoadVar next
Push "ptr"
Apply
Push None
2-ary ==
JumpCond False 1187
DelVar done
Push PC(784)
Push ()
Push 0
LoadVar tail
Push "ptr"
Apply
Push "next"
Address
3-ary DictAdd
Push 1
LoadVar next
3-ary DictAdd
Push 2
Push ()
Push "ptr"
LoadVar node
3-ary DictAdd
Push "cnt"
LoadVar next
DelVar next
Push "cnt"
Apply
Push 1
2-ary +
3-ary DictAdd
3-ary DictAdd
Apply
StoreVar done
Jump 1215
Push PC(784)
Push ()
Push 0
LoadVar q
Push "tail"
Address
3-ary DictAdd
Push 1
LoadVar tail
3-ary DictAdd
Push 2
Push ()
Push "ptr"
LoadVar next
DelVar next
Push "ptr"
Apply
3-ary DictAdd
Push "cnt"
LoadVar tail
Push "cnt"
Apply
Push 1
2-ary +
3-ary DictAdd
3-ary DictAdd
Apply
Pop
DelVar next
Jump 1129
DelVar done
Push PC(784)
Push ()
Push 0
LoadVar q
DelVar q
Push "tail"
Address
3-ary DictAdd
Push 1
LoadVar tail
3-ary DictAdd
Push 2
Push ()
Push "ptr"
LoadVar node
DelVar node
3-ary DictAdd
Push "cnt"
LoadVar tail
DelVar tail
Push "cnt"
Apply
Push 1
2-ary +
3-ary DictAdd
3-ary DictAdd
Apply
Pop
Return
Jump 1381
Frame get q
Push False
StoreVar done
LoadVar done
JumpCond True 1378
Push ()
Push 0
LoadVar q
Push "head"
Address
Load
3-ary DictAdd
Push 1
LoadVar q
Push "tail"
Address
Load
3-ary DictAdd
StoreVar (head, tail)
LoadVar head
Push "ptr"
Apply
Push "next"
Address
Load
StoreVar next
LoadVar head
LoadVar q
Push "head"
Address
Load
2-ary ==
JumpCond False 1374
LoadVar head
Push "ptr"
Apply
LoadVar tail
Push "ptr"
Apply
2-ary ==
JumpCond False 1335
DelVar head
LoadVar next
Push "ptr"
Apply
Push None
2-ary ==
JumpCond False 1305
DelVar done
DelVar next
DelVar result
DelVar tail
Push None
StoreVar result
Push True
StoreVar done
Jump 1374
Push PC(784)
Push ()
Push 0
LoadVar q
Push "tail"
Address
3-ary DictAdd
Push 1
LoadVar tail
3-ary DictAdd
Push 2
Push ()
Push "ptr"
LoadVar next
DelVar next
Push "ptr"
Apply
3-ary DictAdd
Push "cnt"
LoadVar tail
DelVar tail
Push "cnt"
Apply
Push 1
2-ary +
3-ary DictAdd
3-ary DictAdd
Apply
Pop
Jump 1374
DelVar done
DelVar result
DelVar tail
LoadVar next
Push "ptr"
Apply
Push "value"
Address
Load
StoreVar result
Push PC(784)
Push ()
Push 0
LoadVar q
Push "head"
Address
3-ary DictAdd
Push 1
LoadVar head
3-ary DictAdd
Push 2
Push ()
Push "ptr"
LoadVar next
DelVar next
Push "ptr"
Apply
3-ary DictAdd
Push "cnt"
LoadVar head
DelVar head
Push "cnt"
Apply
Push 1
2-ary +
3-ary DictAdd
3-ary DictAdd
Apply
StoreVar done
DelVar head
DelVar next
DelVar tail
Jump 1251
DelVar done
DelVar q
Return
Return
DelVar result
```

Duration: 0.0014448999999999712

---
##  code/stack2.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store list
Jump 419
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n5
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s8
LoadVar $s8
1-ary IsEmpty
JumpCond True 29
Cut($s8, x)
LoadVar $n5
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n5
Jump 17
DelVar $n5
DelVar $s8
DelVar s
StoreVar result
Return
Jump 419
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 419
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 419
Frame tail s
DelVar result
Push PC(4)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 419
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s65
LoadVar $s65
1-ary IsEmpty
JumpCond True 94
Cut($s65, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 83
DelVar $s65
Return
Jump 419
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s80
LoadVar $s80
1-ary IsEmpty
JumpCond True 111
Cut($s80, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 103
DelVar $s80
StoreVar result
Return
Jump 419
Frame list a
DelVar result
Push 0
StoreVar $n93
Push ()
LoadVar a
DelVar a
StoreVar $s96
LoadVar $s96
1-ary IsEmpty
JumpCond True 133
Cut($s96, v)
LoadVar $n93
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n93
Jump 123
DelVar $n93
DelVar $s96
StoreVar result
Return
Jump 419
Frame values d
DelVar result
Push 0
StoreVar $n111
Push ()
LoadVar d
1-ary keys
StoreVar $s114
LoadVar $s114
1-ary IsEmpty
JumpCond True 158
Cut($s114, k)
LoadVar $n111
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n111
Jump 146
DelVar $n111
DelVar $s114
DelVar d
StoreVar result
Return
Jump 419
Frame items d
DelVar result
Push 0
StoreVar $n132
Push ()
LoadVar d
1-ary keys
StoreVar $s135
LoadVar $s135
1-ary IsEmpty
JumpCond True 190
Cut($s135, k)
LoadVar $n132
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n132
Jump 172
DelVar $n132
DelVar $s135
DelVar d
StoreVar result
Return
Jump 419
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s163
LoadVar $s163
1-ary IsEmpty
JumpCond True 232
Cut($s163, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 205
DelVar $s163
DelVar d
DelVar index
Return
Jump 419
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 247
DelVar a
Push ()
StoreVar result
Jump 322
Push ()
Push 0
Push PC(48)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(57)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n212
Push ()
LoadVar rest
StoreVar $s215
DelVar v
LoadVar $s215
1-ary IsEmpty
JumpCond True 280
Cut($s215, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 265
LoadVar $n212
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n212
Jump 265
DelVar $n212
DelVar $s215
StoreVar lower
Push 0
StoreVar $n231
Push ()
LoadVar rest
DelVar rest
StoreVar $s234
DelVar v
LoadVar $s234
1-ary IsEmpty
JumpCond True 304
Cut($s234, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 289
LoadVar $n231
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n231
Jump 289
DelVar $n231
DelVar $s234
StoreVar higher
Push PC(237)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(237)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 419
Frame sorted d
DelVar result
Push PC(237)
Push PC(115)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 419
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n277
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s280
LoadVar $s280
1-ary IsEmpty
JumpCond True 361
Cut($s280, i)
LoadVar $n277
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n277
Jump 347
DelVar $n277
DelVar $s280
DelVar d
DelVar n
StoreVar result
Return
Jump 419
Frame Stack ()
DelVar result
Push ()
StoreVar result
Return
Jump 419
Frame push (st, v)
LoadVar st
DelVar st
Dup
Load
Push ()
Push 0
LoadVar v
DelVar v
3-ary DictAdd
2-ary +
Store
Return
Jump 419
Frame pop st
DelVar result
LoadVar st
Load
1-ary len
Push 1
2-ary -
StoreVar n
LoadVar st
LoadVar n
Address
Load
StoreVar result
LoadVar st
Push PC(4)
Push ()
Push 0
LoadVar st
DelVar st
Load
3-ary DictAdd
Push 1
Push 0
3-ary DictAdd
Push 2
LoadVar n
DelVar n
3-ary DictAdd
Apply
Store
Return
Return
DelVar result
```

Duration: 0.0014643999999999768

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store list
Jump 419
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n5
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s8
LoadVar $s8
1-ary IsEmpty
JumpCond True 29
Cut($s8, x)
LoadVar $n5
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n5
Jump 17
DelVar $n5
DelVar $s8
DelVar s
StoreVar result
Return
Jump 419
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 419
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 419
Frame tail s
DelVar result
Push PC(4)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 419
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s65
LoadVar $s65
1-ary IsEmpty
JumpCond True 94
Cut($s65, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 83
DelVar $s65
Return
Jump 419
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s80
LoadVar $s80
1-ary IsEmpty
JumpCond True 111
Cut($s80, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 103
DelVar $s80
StoreVar result
Return
Jump 419
Frame list a
DelVar result
Push 0
StoreVar $n93
Push ()
LoadVar a
DelVar a
StoreVar $s96
LoadVar $s96
1-ary IsEmpty
JumpCond True 133
Cut($s96, v)
LoadVar $n93
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n93
Jump 123
DelVar $n93
DelVar $s96
StoreVar result
Return
Jump 419
Frame values d
DelVar result
Push 0
StoreVar $n111
Push ()
LoadVar d
1-ary keys
StoreVar $s114
LoadVar $s114
1-ary IsEmpty
JumpCond True 158
Cut($s114, k)
LoadVar $n111
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n111
Jump 146
DelVar $n111
DelVar $s114
DelVar d
StoreVar result
Return
Jump 419
Frame items d
DelVar result
Push 0
StoreVar $n132
Push ()
LoadVar d
1-ary keys
StoreVar $s135
LoadVar $s135
1-ary IsEmpty
JumpCond True 190
Cut($s135, k)
LoadVar $n132
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n132
Jump 172
DelVar $n132
DelVar $s135
DelVar d
StoreVar result
Return
Jump 419
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s163
LoadVar $s163
1-ary IsEmpty
JumpCond True 232
Cut($s163, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 205
DelVar $s163
DelVar d
DelVar index
Return
Jump 419
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 247
DelVar a
Push ()
StoreVar result
Jump 322
Push ()
Push 0
Push PC(48)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(57)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n212
Push ()
LoadVar rest
StoreVar $s215
DelVar v
LoadVar $s215
1-ary IsEmpty
JumpCond True 280
Cut($s215, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 265
LoadVar $n212
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n212
Jump 265
DelVar $n212
DelVar $s215
StoreVar lower
Push 0
StoreVar $n231
Push ()
LoadVar rest
DelVar rest
StoreVar $s234
DelVar v
LoadVar $s234
1-ary IsEmpty
JumpCond True 304
Cut($s234, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 289
LoadVar $n231
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n231
Jump 289
DelVar $n231
DelVar $s234
StoreVar higher
Push PC(237)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(237)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 419
Frame sorted d
DelVar result
Push PC(237)
Push PC(115)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 419
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n277
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s280
LoadVar $s280
1-ary IsEmpty
JumpCond True 361
Cut($s280, i)
LoadVar $n277
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n277
Jump 347
DelVar $n277
DelVar $s280
DelVar d
DelVar n
StoreVar result
Return
Jump 419
Frame Stack ()
DelVar result
Push ()
StoreVar result
Return
Jump 419
Frame push (st, v)
LoadVar st
DelVar st
Dup
Load
Push ()
Push 0
LoadVar v
DelVar v
3-ary DictAdd
2-ary +
Store
Return
Jump 419
Frame pop st
DelVar result
LoadVar st
Load
1-ary len
Push 1
2-ary -
StoreVar n
LoadVar st
LoadVar n
Address
Load
StoreVar result
LoadVar st
Push PC(4)
Push ()
Push 0
LoadVar st
DelVar st
Load
3-ary DictAdd
Push 1
Push 0
3-ary DictAdd
Push 2
LoadVar n
DelVar n
3-ary DictAdd
Apply
Store
Return
Return
DelVar result
```

Duration: 0.001326700000000014

---
##  code/gpu.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 }
Store availGPUs
Jump 26
Frame gpuAlloc ()
DelVar result
Load availGPUs
Choose
StoreVar result
Load availGPUs
Push {}
LoadVar result
2-ary SetAdd
2-ary -
Store availGPUs
Return
Jump 26
Frame gpuRelease gpu
Load availGPUs
Push {}
LoadVar gpu
DelVar gpu
2-ary SetAdd
2-ary |
Store availGPUs
Return
Return
DelVar result
```

Duration: 0.0014872000000000218

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 }
Store availGPUs
Jump 26
Frame gpuAlloc ()
DelVar result
Load availGPUs
Choose
StoreVar result
Load availGPUs
Push {}
LoadVar result
2-ary SetAdd
2-ary -
Store availGPUs
Return
Jump 26
Frame gpuRelease gpu
Load availGPUs
Push {}
LoadVar gpu
DelVar gpu
2-ary SetAdd
2-ary |
Store availGPUs
Return
Return
DelVar result
```

Duration: 0.0015901000000000387

---
##  code/triangle.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Jump 24
Frame triangle n
DelVar result
Push 0
StoreVar result
Push 1
LoadVar n
DelVar n
2-ary ..
StoreVar $s5
LoadVar $s5
1-ary IsEmpty
JumpCond True 22
Cut($s5, i)
LoadVar result
DelVar result
LoadVar i
DelVar i
2-ary +
StoreVar result
Jump 11
DelVar $s5
Return
Push { 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 }
Choose
Store x
ReadonlyInc
AtomicInc(lazy)
Push PC(2)
Load x
Apply
Load x
Load x
Push 1
2-ary +
2-ary *
Push 2
2-ary /
2-ary ==
Assert
AtomicDec
ReadonlyDec
Return
DelVar result
```

Duration: 0.0014413999999999816

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Jump 24
Frame triangle n
DelVar result
Push 0
StoreVar result
Push 1
LoadVar n
DelVar n
2-ary ..
StoreVar $s5
LoadVar $s5
1-ary IsEmpty
JumpCond True 22
Cut($s5, i)
LoadVar result
DelVar result
LoadVar i
DelVar i
2-ary +
StoreVar result
Jump 11
DelVar $s5
Return
Push { 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 }
Choose
Store x
ReadonlyInc
AtomicInc(lazy)
Push PC(2)
Load x
Apply
Load x
Load x
Push 1
2-ary +
2-ary *
Push 2
2-ary /
2-ary ==
Assert
AtomicDec
ReadonlyDec
Return
DelVar result
```

Duration: 0.0016155000000000475

---
##  code/barrier1.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store synch
Push ()
Store list
Jump 369
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 369
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 369
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 369
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 369
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 369
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 369
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 369
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 369
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 369
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 369
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 369
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 369
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Push ()
Store bag
Jump 1039
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1039
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s311
LoadVar $s311
1-ary IsEmpty
JumpCond True 393
Cut($s311, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 384
DelVar $s311
StoreVar result
Return
Jump 1039
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s327
LoadVar $s327
1-ary IsEmpty
JumpCond True 430
Cut($s327, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 423
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 404
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 404
DelVar $s327
Return
Jump 1039
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 456
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 460
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1039
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s391
LoadVar $s391
1-ary IsEmpty
JumpCond True 489
Cut($s391, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 478
DelVar $s391
Return
Jump 1039
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1039
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1039
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1039
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 566
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 572
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1039
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 599
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 600
Push False
JumpCond False 609
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 620
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1039
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 638
DelVar bg
DelVar k
Push {}
Push PC(372)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 723
Push PC(462)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 652
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 723
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 664
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 723
Push PC(492)
LoadVar bg
Apply
StoreVar hd
Push PC(574)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(623)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s568
LoadVar $s568
1-ary IsEmpty
JumpCond True 708
Cut($s568, x)
Push PC(537)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 692
DelVar $s568
DelVar hd
Push PC(623)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1039
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1039
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 754
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1039
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1039
Frame Lock ()
DelVar result
Push PC(759)
Push False
Apply
StoreVar result
Return
Jump 1039
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1039
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 790
Jump 793
ReadonlyDec
AtomicDec
Jump 783
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1039
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1039
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1039
Frame Condition ()
DelVar result
Push PC(372)
Push ()
Apply
StoreVar result
Return
Jump 1039
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(537)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 887
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 888
Push False
JumpCond False 893
DelVar c
DelVar cnt
DelVar ctx
Jump 896
ReadonlyDec
AtomicDec
Jump 868
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1039
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(372)
Push ()
Apply
2-ary !=
JumpCond False 929
LoadVar c
Push PC(574)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(519)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1039
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(372)
Push ()
Apply
Store
AtomicDec
Return
Jump 1039
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1039
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 960
Jump 963
ReadonlyDec
AtomicDec
Jump 952
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1039
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1039
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1039
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1002
Jump 1005
ReadonlyDec
AtomicDec
Jump 993
ReadonlyDec
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1039
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Push ()
Push 0
Push PC(986)
Push ()
Apply
3-ary DictAdd
Push 3
2-ary *
Store queues
Jump 1097
Frame barrier_enter self
Push { 0, 1, 2 }
StoreVar $s898
DelVar i
LoadVar $s898
1-ary IsEmpty
JumpCond True 1075
Cut($s898, i)
LoadVar i
LoadVar self
2-ary !=
JumpCond False 1052
Push PC(1021)
Push ()
Push 0
Push ?queues
LoadVar i
Address
3-ary DictAdd
Push 1
LoadVar i
DelVar i
3-ary DictAdd
Apply
Pop
Jump 1052
DelVar $s898
Push { 1, 2 }
StoreVar $s921
LoadVar $s921
1-ary IsEmpty
JumpCond True 1090
Cut($s921, i)
DelVar i
Push PC(992)
Push ?queues
LoadVar self
Address
Apply
Pop
Jump 1078
DelVar $s921
DelVar self
Return
Jump 1097
Frame barrier_exit self
DelVar self
Return
Push ?round
Sequential
Push ?done
Sequential
Push [None, None, None]
Store round
Push [False, False, False]
Store done
Jump 1154
Frame check ()
DelVar result
Push True
StoreVar result
Push None
StoreVar x
Push { 0, 1, 2 }
StoreVar $s952
LoadVar $s952
1-ary IsEmpty
JumpCond True 1151
Cut($s952, i)
LoadVar result
JumpCond False 1127
Push ?round
LoadVar i
Address
Load
Push None
2-ary !=
Jump 1128
Push False
JumpCond False 1149
LoadVar x
Push None
2-ary !=
JumpCond False 1142
DelVar result
Push ?round
LoadVar i
Address
Load
LoadVar x
DelVar x
2-ary ==
StoreVar result
DelVar x
Push ?round
LoadVar i
DelVar i
Address
Load
StoreVar x
DelVar i
Jump 1114
DelVar $s952
DelVar x
Return
Push [None, None, None]
Store round
Push [False, False, False]
Store done
Jump 1210
Frame process self
Push { 0, 1, 2 }
StoreVar $s993
LoadVar $s993
1-ary IsEmpty
JumpCond True 1194
Cut($s993, r)
Push PC(1049)
LoadVar self
Apply
Pop
Push ?round
LoadVar self
Address
LoadVar r
DelVar r
Store
ReadonlyInc
AtomicInc(lazy)
Push PC(1106)
Push ()
Apply
Assert
AtomicDec
ReadonlyDec
Push ?round
LoadVar self
Address
Push None
Store
Push PC(1094)
LoadVar self
Apply
Pop
Jump 1162
DelVar $s993
Push ?done
LoadVar self
DelVar self
Address
Push True
Store
Return
Jump 1210
Frame main ()
Load done
1-ary all
JumpCond False 1204
Jump 1209
Jump 1204
Return
Push { 0, 1, 2 }
StoreVar $s1040
LoadVar $s1040
1-ary IsEmpty
JumpCond True 1222
Cut($s1040, i)
Push PC(1159)
LoadVar i
DelVar i
Push ()
Spawn
Jump 1212
DelVar $s1040
Push PC(1203)
Push ()
Push ()
Spawn
Return
DelVar result
```

Duration: 0.001743799999999962

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store synch
Push ()
Store list
Jump 369
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 369
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 369
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 369
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 369
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 369
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 369
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 369
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 369
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 369
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 369
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 369
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 369
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Push ()
Store bag
Jump 1039
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1039
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s311
LoadVar $s311
1-ary IsEmpty
JumpCond True 393
Cut($s311, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 384
DelVar $s311
StoreVar result
Return
Jump 1039
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s327
LoadVar $s327
1-ary IsEmpty
JumpCond True 430
Cut($s327, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 423
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 404
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 404
DelVar $s327
Return
Jump 1039
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 456
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 460
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1039
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s391
LoadVar $s391
1-ary IsEmpty
JumpCond True 489
Cut($s391, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 478
DelVar $s391
Return
Jump 1039
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1039
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1039
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1039
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 566
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 572
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1039
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 599
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 600
Push False
JumpCond False 609
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 620
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1039
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 638
DelVar bg
DelVar k
Push {}
Push PC(372)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 723
Push PC(462)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 652
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 723
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 664
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 723
Push PC(492)
LoadVar bg
Apply
StoreVar hd
Push PC(574)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(623)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s568
LoadVar $s568
1-ary IsEmpty
JumpCond True 708
Cut($s568, x)
Push PC(537)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 692
DelVar $s568
DelVar hd
Push PC(623)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1039
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1039
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 754
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1039
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1039
Frame Lock ()
DelVar result
Push PC(759)
Push False
Apply
StoreVar result
Return
Jump 1039
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1039
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 790
Jump 793
ReadonlyDec
AtomicDec
Jump 783
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1039
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1039
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1039
Frame Condition ()
DelVar result
Push PC(372)
Push ()
Apply
StoreVar result
Return
Jump 1039
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(537)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 887
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 888
Push False
JumpCond False 893
DelVar c
DelVar cnt
DelVar ctx
Jump 896
ReadonlyDec
AtomicDec
Jump 868
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1039
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(372)
Push ()
Apply
2-ary !=
JumpCond False 929
LoadVar c
Push PC(574)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(519)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1039
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(372)
Push ()
Apply
Store
AtomicDec
Return
Jump 1039
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1039
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 960
Jump 963
ReadonlyDec
AtomicDec
Jump 952
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1039
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1039
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1039
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1002
Jump 1005
ReadonlyDec
AtomicDec
Jump 993
ReadonlyDec
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1039
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Push ()
Push 0
Push PC(986)
Push ()
Apply
3-ary DictAdd
Push 3
2-ary *
Store queues
Jump 1097
Frame barrier_enter self
Push { 0, 1, 2 }
StoreVar $s898
DelVar i
LoadVar $s898
1-ary IsEmpty
JumpCond True 1075
Cut($s898, i)
LoadVar i
LoadVar self
2-ary !=
JumpCond False 1052
Push PC(1021)
Push ()
Push 0
Push ?queues
LoadVar i
Address
3-ary DictAdd
Push 1
LoadVar i
DelVar i
3-ary DictAdd
Apply
Pop
Jump 1052
DelVar $s898
Push { 1, 2 }
StoreVar $s921
LoadVar $s921
1-ary IsEmpty
JumpCond True 1090
Cut($s921, i)
DelVar i
Push PC(992)
Push ?queues
LoadVar self
Address
Apply
Pop
Jump 1078
DelVar $s921
DelVar self
Return
Jump 1097
Frame barrier_exit self
DelVar self
Return
Push ?round
Sequential
Push ?done
Sequential
Push [None, None, None]
Store round
Push [False, False, False]
Store done
Jump 1154
Frame check ()
DelVar result
Push True
StoreVar result
Push None
StoreVar x
Push { 0, 1, 2 }
StoreVar $s952
LoadVar $s952
1-ary IsEmpty
JumpCond True 1151
Cut($s952, i)
LoadVar result
JumpCond False 1127
Push ?round
LoadVar i
Address
Load
Push None
2-ary !=
Jump 1128
Push False
JumpCond False 1149
LoadVar x
Push None
2-ary !=
JumpCond False 1142
DelVar result
Push ?round
LoadVar i
Address
Load
LoadVar x
DelVar x
2-ary ==
StoreVar result
DelVar x
Push ?round
LoadVar i
DelVar i
Address
Load
StoreVar x
DelVar i
Jump 1114
DelVar $s952
DelVar x
Return
Push [None, None, None]
Store round
Push [False, False, False]
Store done
Jump 1210
Frame process self
Push { 0, 1, 2 }
StoreVar $s993
LoadVar $s993
1-ary IsEmpty
JumpCond True 1194
Cut($s993, r)
Push PC(1049)
LoadVar self
Apply
Pop
Push ?round
LoadVar self
Address
LoadVar r
DelVar r
Store
ReadonlyInc
AtomicInc(lazy)
Push PC(1106)
Push ()
Apply
Assert
AtomicDec
ReadonlyDec
Push ?round
LoadVar self
Address
Push None
Store
Push PC(1094)
LoadVar self
Apply
Pop
Jump 1162
DelVar $s993
Push ?done
LoadVar self
DelVar self
Address
Push True
Store
Return
Jump 1210
Frame main ()
Load done
1-ary all
JumpCond False 1204
Jump 1209
Jump 1204
Return
Push { 0, 1, 2 }
StoreVar $s1040
LoadVar $s1040
1-ary IsEmpty
JumpCond True 1222
Cut($s1040, i)
Push PC(1159)
LoadVar i
DelVar i
Push ()
Spawn
Jump 1212
DelVar $s1040
Push PC(1203)
Push ()
Push ()
Spawn
Return
DelVar result
```

Duration: 0.001586199999999982

---
##  code/bosco2.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store bag
Jump 356
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 356
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s11
LoadVar $s11
1-ary IsEmpty
JumpCond True 25
Cut($s11, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 16
DelVar $s11
StoreVar result
Return
Jump 356
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s27
LoadVar $s27
1-ary IsEmpty
JumpCond True 62
Cut($s27, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 55
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 36
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 36
DelVar $s27
Return
Jump 356
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 88
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 92
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 356
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s91
LoadVar $s91
1-ary IsEmpty
JumpCond True 121
Cut($s91, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 110
DelVar $s91
Return
Jump 356
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 356
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 356
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 356
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 198
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 204
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 356
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 231
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 232
Push False
JumpCond False 241
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 252
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 356
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 270
DelVar bg
DelVar k
Push {}
Push PC(4)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 355
Push PC(94)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 284
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 355
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 296
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 355
Push PC(124)
LoadVar bg
Apply
StoreVar hd
Push PC(206)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(255)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s268
LoadVar $s268
1-ary IsEmpty
JumpCond True 340
Cut($s268, x)
Push PC(169)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 324
DelVar $s268
DelVar hd
Push PC(255)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Push { 0, 1, 2 }
Choose
StoreVar n_zeroes
Push [0]
LoadVar n_zeroes
2-ary *
Push [1]
Push 4
LoadVar n_zeroes
DelVar n_zeroes
2-ary -
2-ary *
2-ary +
Store proposals
Push PC(4)
Push ()
Apply
Store network
Jump 586
Frame broadcast msg
AtomicInc(lazy)
Push PC(169)
Push ()
Push 0
Load network
3-ary DictAdd
Push 1
LoadVar msg
DelVar msg
3-ary DictAdd
Apply
Store network
AtomicDec
Return
Jump 586
Frame receive round
DelVar result
Push ()
Load network
StoreVar $s342
DelVar c
DelVar e
LoadVar $s342
1-ary IsEmpty
JumpCond True 413
Cut($s342, (r, e), c)
LoadVar r
DelVar r
LoadVar round
2-ary ==
JumpCond False 396
LoadVar e
DelVar e
LoadVar c
DelVar c
3-ary DictAdd
Jump 396
DelVar $s342
DelVar round
StoreVar msgs
Push PC(94)
LoadVar msgs
Apply
Push 4
2-ary <
JumpCond False 425
DelVar msgs
Push {}
Jump 429
Push {}
LoadVar msgs
DelVar msgs
2-ary SetAdd
StoreVar result
Return
Jump 586
Frame processor proposal
Push ()
Push 0
LoadVar proposal
DelVar proposal
3-ary DictAdd
Push 1
Push False
3-ary DictAdd
StoreVar (estimate, decided)
Push PC(375)
Push ()
Push 0
Push 0
3-ary DictAdd
Push 1
LoadVar estimate
DelVar estimate
3-ary DictAdd
Apply
Pop
Push { 0, 1, 2 }
StoreVar $s390
LoadVar $s390
1-ary IsEmpty
JumpCond True 583
Cut($s390, round)
AtomicInc(lazy)
ReadonlyInc
Push PC(391)
LoadVar round
Apply
Dup
Push {}
2-ary ==
JumpCond False 472
Pop
ReadonlyDec
AtomicDec
Jump 459
Choose
StoreVar msgs
Jump 478
ReadonlyDec
AtomicDec
Jump 459
ReadonlyDec
Push PC(255)
Push ()
Push 0
LoadVar msgs
DelVar msgs
3-ary DictAdd
Push 1
Push 3
3-ary DictAdd
Apply
StoreVar choices
LoadVar choices
DelVar choices
Choose
StoreVar quorum
Push 0
StoreVar $n429
Push ()
Push { 0, 1 }
StoreVar $s432
LoadVar $s432
1-ary IsEmpty
JumpCond True 517
Cut($s432, i)
LoadVar $n429
Push PC(65)
Push ()
Push 0
LoadVar quorum
3-ary DictAdd
Push 1
LoadVar i
DelVar i
3-ary DictAdd
Apply
3-ary DictAdd
IncVar $n429
Jump 499
DelVar $n429
DelVar $s432
DelVar quorum
StoreVar count
ReadonlyInc
AtomicInc(lazy)
LoadVar count
Push 0
Apply
LoadVar count
Push 1
Apply
2-ary !=
Assert
AtomicDec
ReadonlyDec
LoadVar count
Push 0
Apply
LoadVar count
Push 1
Apply
2-ary >
JumpCond False 543
Push 0
Jump 544
Push 1
StoreVar estimate
LoadVar count
DelVar count
LoadVar estimate
Apply
Push 3
2-ary ==
JumpCond False 567
LoadVar decided
JumpCond True 559
DelVar decided
LoadVar estimate
Print
Push True
StoreVar decided
ReadonlyInc
AtomicInc(lazy)
LoadVar estimate
Load proposals
2-ary in
Assert
AtomicDec
ReadonlyDec
Push PC(375)
Push ()
Push 0
LoadVar round
DelVar round
Push 1
2-ary +
3-ary DictAdd
Push 1
LoadVar estimate
DelVar estimate
3-ary DictAdd
Apply
Pop
AtomicDec
Jump 455
DelVar $s390
DelVar decided
Return
Load proposals
Print
Push { 0, 1, 2, 3 }
StoreVar $s513
LoadVar $s513
1-ary IsEmpty
JumpCond True 603
Cut($s513, i)
Push PC(432)
Push ?proposals
LoadVar i
DelVar i
Address
Load
Push ()
Spawn
Jump 590
DelVar $s513
Return
DelVar result
```

Duration: 0.0015685999999999756

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store bag
Jump 356
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 356
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s11
LoadVar $s11
1-ary IsEmpty
JumpCond True 25
Cut($s11, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 16
DelVar $s11
StoreVar result
Return
Jump 356
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s27
LoadVar $s27
1-ary IsEmpty
JumpCond True 62
Cut($s27, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 55
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 36
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 36
DelVar $s27
Return
Jump 356
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 88
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 92
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 356
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s91
LoadVar $s91
1-ary IsEmpty
JumpCond True 121
Cut($s91, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 110
DelVar $s91
Return
Jump 356
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 356
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 356
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 356
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 198
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 204
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 356
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 231
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 232
Push False
JumpCond False 241
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 252
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 356
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 270
DelVar bg
DelVar k
Push {}
Push PC(4)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 355
Push PC(94)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 284
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 355
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 296
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 355
Push PC(124)
LoadVar bg
Apply
StoreVar hd
Push PC(206)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(255)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s268
LoadVar $s268
1-ary IsEmpty
JumpCond True 340
Cut($s268, x)
Push PC(169)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 324
DelVar $s268
DelVar hd
Push PC(255)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Push { 0, 1, 2 }
Choose
StoreVar n_zeroes
Push [0]
LoadVar n_zeroes
2-ary *
Push [1]
Push 4
LoadVar n_zeroes
DelVar n_zeroes
2-ary -
2-ary *
2-ary +
Store proposals
Push PC(4)
Push ()
Apply
Store network
Jump 586
Frame broadcast msg
AtomicInc(lazy)
Push PC(169)
Push ()
Push 0
Load network
3-ary DictAdd
Push 1
LoadVar msg
DelVar msg
3-ary DictAdd
Apply
Store network
AtomicDec
Return
Jump 586
Frame receive round
DelVar result
Push ()
Load network
StoreVar $s342
DelVar c
DelVar e
LoadVar $s342
1-ary IsEmpty
JumpCond True 413
Cut($s342, (r, e), c)
LoadVar r
DelVar r
LoadVar round
2-ary ==
JumpCond False 396
LoadVar e
DelVar e
LoadVar c
DelVar c
3-ary DictAdd
Jump 396
DelVar $s342
DelVar round
StoreVar msgs
Push PC(94)
LoadVar msgs
Apply
Push 4
2-ary <
JumpCond False 425
DelVar msgs
Push {}
Jump 429
Push {}
LoadVar msgs
DelVar msgs
2-ary SetAdd
StoreVar result
Return
Jump 586
Frame processor proposal
Push ()
Push 0
LoadVar proposal
DelVar proposal
3-ary DictAdd
Push 1
Push False
3-ary DictAdd
StoreVar (estimate, decided)
Push PC(375)
Push ()
Push 0
Push 0
3-ary DictAdd
Push 1
LoadVar estimate
DelVar estimate
3-ary DictAdd
Apply
Pop
Push { 0, 1, 2 }
StoreVar $s390
LoadVar $s390
1-ary IsEmpty
JumpCond True 583
Cut($s390, round)
AtomicInc(lazy)
ReadonlyInc
Push PC(391)
LoadVar round
Apply
Dup
Push {}
2-ary ==
JumpCond False 472
Pop
ReadonlyDec
AtomicDec
Jump 459
Choose
StoreVar msgs
Jump 478
ReadonlyDec
AtomicDec
Jump 459
ReadonlyDec
Push PC(255)
Push ()
Push 0
LoadVar msgs
DelVar msgs
3-ary DictAdd
Push 1
Push 3
3-ary DictAdd
Apply
StoreVar choices
LoadVar choices
DelVar choices
Choose
StoreVar quorum
Push 0
StoreVar $n429
Push ()
Push { 0, 1 }
StoreVar $s432
LoadVar $s432
1-ary IsEmpty
JumpCond True 517
Cut($s432, i)
LoadVar $n429
Push PC(65)
Push ()
Push 0
LoadVar quorum
3-ary DictAdd
Push 1
LoadVar i
DelVar i
3-ary DictAdd
Apply
3-ary DictAdd
IncVar $n429
Jump 499
DelVar $n429
DelVar $s432
DelVar quorum
StoreVar count
ReadonlyInc
AtomicInc(lazy)
LoadVar count
Push 0
Apply
LoadVar count
Push 1
Apply
2-ary !=
Assert
AtomicDec
ReadonlyDec
LoadVar count
Push 0
Apply
LoadVar count
Push 1
Apply
2-ary >
JumpCond False 543
Push 0
Jump 544
Push 1
StoreVar estimate
LoadVar count
DelVar count
LoadVar estimate
Apply
Push 3
2-ary ==
JumpCond False 567
LoadVar decided
JumpCond True 559
DelVar decided
LoadVar estimate
Print
Push True
StoreVar decided
ReadonlyInc
AtomicInc(lazy)
LoadVar estimate
Load proposals
2-ary in
Assert
AtomicDec
ReadonlyDec
Push PC(375)
Push ()
Push 0
LoadVar round
DelVar round
Push 1
2-ary +
3-ary DictAdd
Push 1
LoadVar estimate
DelVar estimate
3-ary DictAdd
Apply
Pop
AtomicDec
Jump 455
DelVar $s390
DelVar decided
Return
Load proposals
Print
Push { 0, 1, 2, 3 }
StoreVar $s513
LoadVar $s513
1-ary IsEmpty
JumpCond True 603
Cut($s513, i)
Push PC(432)
Push ?proposals
LoadVar i
DelVar i
Address
Load
Push ()
Spawn
Jump 590
DelVar $s513
Return
DelVar result
```

Duration: 0.001578700000000044

---
##  code/paxos2.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Jump 334
Frame leader (self, proposal)
Push ()
Push 0
LoadVar self
DelVar self
3-ary DictAdd
Push 1
LoadVar proposal
DelVar proposal
3-ary DictAdd
StoreVar (ballot, estimate)
Push ?send
Push ()
Push 0
LoadVar ballot
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
Push "A"
3-ary DictAdd
Push 3
Push None
3-ary DictAdd
Address
Load
Pop
LoadVar ballot
Load NBALLOTS
2-ary <=
JumpCond False 202
AtomicInc(lazy)
ReadonlyInc
Push ?receive
Push ()
Push 0
LoadVar ballot
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Address
Load
Dup
Push {}
2-ary ==
JumpCond False 54
Pop
ReadonlyDec
AtomicDec
Jump 34
Choose
StoreVar quorum
Jump 60
ReadonlyDec
AtomicDec
Jump 34
ReadonlyDec
Push {}
LoadVar quorum
DelVar quorum
StoreVar $s60
DelVar e
LoadVar $s60
1-ary IsEmpty
JumpCond True 79
Cut($s60, e, _)
DelVar _
LoadVar e
Push None
2-ary !=
JumpCond False 65
LoadVar e
DelVar e
2-ary SetAdd
Jump 65
DelVar $s60
StoreVar accepted
LoadVar accepted
Push {}
2-ary !=
JumpCond False 94
Push ?estimate
LoadVar accepted
DelVar accepted
1-ary max
Split 2
Move 3
Move 2
StoreVar [estimate]
Pop
DelVar accepted
Push ?send
Push ()
Push 0
LoadVar ballot
3-ary DictAdd
Push 1
Push 2
3-ary DictAdd
Push 2
Push "A"
3-ary DictAdd
Push 3
LoadVar estimate
3-ary DictAdd
Address
Load
Pop
AtomicDec
AtomicInc(lazy)
ReadonlyInc
Push ?receive
Push ()
Push 0
LoadVar ballot
3-ary DictAdd
Push 1
Push 2
3-ary DictAdd
Address
Load
Dup
Push {}
2-ary ==
JumpCond False 133
Pop
ReadonlyDec
AtomicDec
Jump 113
Choose
StoreVar quorum
Jump 139
ReadonlyDec
AtomicDec
Jump 113
ReadonlyDec
Push ?bag
Push "multiplicity"
Address
Push ()
Push 0
LoadVar quorum
DelVar quorum
3-ary DictAdd
Push 1
Push ()
Push 0
LoadVar ballot
3-ary DictAdd
Push 1
LoadVar estimate
3-ary DictAdd
3-ary DictAdd
Address
Load
Load NACCEPTORS
Load F
2-ary -
2-ary ==
JumpCond False 174
ReadonlyInc
AtomicInc(lazy)
LoadVar estimate
Load proposals
2-ary in
Assert
AtomicDec
ReadonlyDec
LoadVar estimate
Print
LoadVar ballot
DelVar ballot
Load NLEADERS
2-ary +
StoreVar ballot
LoadVar ballot
Load NBALLOTS
2-ary <=
JumpCond False 200
Push ?send
Push ()
Push 0
LoadVar ballot
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
Push "A"
3-ary DictAdd
Push 3
Push None
3-ary DictAdd
Address
Load
Pop
AtomicDec
Jump 30
DelVar ballot
DelVar estimate
Return
Jump 334
Frame acceptor ()
Push [0, None, {}]
StoreVar (ballot, last_accepted, received)
Push True
JumpCond False 330
AtomicInc(lazy)
ReadonlyInc
Push {}
Load network
StoreVar $s201
DelVar b
DelVar e
DelVar p
LoadVar $s201
1-ary IsEmpty
JumpCond True 258
Cut($s201, (b, p, t, e), _)
DelVar _
Push ()
Push 0
LoadVar b
3-ary DictAdd
Push 1
LoadVar p
3-ary DictAdd
LoadVar received
2-ary in
1-ary not
JumpCond False 240
LoadVar t
DelVar t
Push "A"
2-ary ==
Jump 242
DelVar t
Push False
JumpCond False 216
Push ()
Push 0
LoadVar b
DelVar b
3-ary DictAdd
Push 1
LoadVar p
DelVar p
3-ary DictAdd
Push 2
LoadVar e
DelVar e
3-ary DictAdd
2-ary SetAdd
Jump 216
DelVar $s201
Dup
Push {}
2-ary ==
JumpCond False 267
Pop
ReadonlyDec
AtomicDec
Jump 211
Choose
StoreVar (b, p, e)
Jump 273
ReadonlyDec
AtomicDec
Jump 211
ReadonlyDec
LoadVar received
DelVar received
Push {}
Push ()
Push 0
LoadVar b
3-ary DictAdd
Push 1
LoadVar p
3-ary DictAdd
2-ary SetAdd
2-ary |
StoreVar received
LoadVar b
LoadVar ballot
2-ary >=
JumpCond False 308
DelVar ballot
LoadVar b
StoreVar ballot
LoadVar p
Push 2
2-ary ==
JumpCond False 308
DelVar last_accepted
Push ()
Push 0
LoadVar ballot
3-ary DictAdd
Push 1
LoadVar e
DelVar e
3-ary DictAdd
StoreVar last_accepted
DelVar e
Push ?send
Push ()
Push 0
LoadVar b
DelVar b
3-ary DictAdd
Push 1
LoadVar p
DelVar p
3-ary DictAdd
Push 2
Push "B"
3-ary DictAdd
Push 3
LoadVar last_accepted
3-ary DictAdd
Address
Load
Pop
AtomicDec
Jump 209
DelVar ballot
DelVar last_accepted
DelVar received
Return
Return
DelVar result
```

Duration: 0.0015684000000000253

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Jump 334
Frame leader (self, proposal)
Push ()
Push 0
LoadVar self
DelVar self
3-ary DictAdd
Push 1
LoadVar proposal
DelVar proposal
3-ary DictAdd
StoreVar (ballot, estimate)
Push ?send
Push ()
Push 0
LoadVar ballot
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
Push "A"
3-ary DictAdd
Push 3
Push None
3-ary DictAdd
Address
Load
Pop
LoadVar ballot
Load NBALLOTS
2-ary <=
JumpCond False 202
AtomicInc(lazy)
ReadonlyInc
Push ?receive
Push ()
Push 0
LoadVar ballot
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Address
Load
Dup
Push {}
2-ary ==
JumpCond False 54
Pop
ReadonlyDec
AtomicDec
Jump 34
Choose
StoreVar quorum
Jump 60
ReadonlyDec
AtomicDec
Jump 34
ReadonlyDec
Push {}
LoadVar quorum
DelVar quorum
StoreVar $s60
DelVar e
LoadVar $s60
1-ary IsEmpty
JumpCond True 79
Cut($s60, e, _)
DelVar _
LoadVar e
Push None
2-ary !=
JumpCond False 65
LoadVar e
DelVar e
2-ary SetAdd
Jump 65
DelVar $s60
StoreVar accepted
LoadVar accepted
Push {}
2-ary !=
JumpCond False 94
Push ?estimate
LoadVar accepted
DelVar accepted
1-ary max
Split 2
Move 3
Move 2
StoreVar [estimate]
Pop
DelVar accepted
Push ?send
Push ()
Push 0
LoadVar ballot
3-ary DictAdd
Push 1
Push 2
3-ary DictAdd
Push 2
Push "A"
3-ary DictAdd
Push 3
LoadVar estimate
3-ary DictAdd
Address
Load
Pop
AtomicDec
AtomicInc(lazy)
ReadonlyInc
Push ?receive
Push ()
Push 0
LoadVar ballot
3-ary DictAdd
Push 1
Push 2
3-ary DictAdd
Address
Load
Dup
Push {}
2-ary ==
JumpCond False 133
Pop
ReadonlyDec
AtomicDec
Jump 113
Choose
StoreVar quorum
Jump 139
ReadonlyDec
AtomicDec
Jump 113
ReadonlyDec
Push ?bag
Push "multiplicity"
Address
Push ()
Push 0
LoadVar quorum
DelVar quorum
3-ary DictAdd
Push 1
Push ()
Push 0
LoadVar ballot
3-ary DictAdd
Push 1
LoadVar estimate
3-ary DictAdd
3-ary DictAdd
Address
Load
Load NACCEPTORS
Load F
2-ary -
2-ary ==
JumpCond False 174
ReadonlyInc
AtomicInc(lazy)
LoadVar estimate
Load proposals
2-ary in
Assert
AtomicDec
ReadonlyDec
LoadVar estimate
Print
LoadVar ballot
DelVar ballot
Load NLEADERS
2-ary +
StoreVar ballot
LoadVar ballot
Load NBALLOTS
2-ary <=
JumpCond False 200
Push ?send
Push ()
Push 0
LoadVar ballot
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
Push "A"
3-ary DictAdd
Push 3
Push None
3-ary DictAdd
Address
Load
Pop
AtomicDec
Jump 30
DelVar ballot
DelVar estimate
Return
Jump 334
Frame acceptor ()
Push [0, None, {}]
StoreVar (ballot, last_accepted, received)
Push True
JumpCond False 330
AtomicInc(lazy)
ReadonlyInc
Push {}
Load network
StoreVar $s201
DelVar b
DelVar e
DelVar p
LoadVar $s201
1-ary IsEmpty
JumpCond True 258
Cut($s201, (b, p, t, e), _)
DelVar _
Push ()
Push 0
LoadVar b
3-ary DictAdd
Push 1
LoadVar p
3-ary DictAdd
LoadVar received
2-ary in
1-ary not
JumpCond False 240
LoadVar t
DelVar t
Push "A"
2-ary ==
Jump 242
DelVar t
Push False
JumpCond False 216
Push ()
Push 0
LoadVar b
DelVar b
3-ary DictAdd
Push 1
LoadVar p
DelVar p
3-ary DictAdd
Push 2
LoadVar e
DelVar e
3-ary DictAdd
2-ary SetAdd
Jump 216
DelVar $s201
Dup
Push {}
2-ary ==
JumpCond False 267
Pop
ReadonlyDec
AtomicDec
Jump 211
Choose
StoreVar (b, p, e)
Jump 273
ReadonlyDec
AtomicDec
Jump 211
ReadonlyDec
LoadVar received
DelVar received
Push {}
Push ()
Push 0
LoadVar b
3-ary DictAdd
Push 1
LoadVar p
3-ary DictAdd
2-ary SetAdd
2-ary |
StoreVar received
LoadVar b
LoadVar ballot
2-ary >=
JumpCond False 308
DelVar ballot
LoadVar b
StoreVar ballot
LoadVar p
Push 2
2-ary ==
JumpCond False 308
DelVar last_accepted
Push ()
Push 0
LoadVar ballot
3-ary DictAdd
Push 1
LoadVar e
DelVar e
3-ary DictAdd
StoreVar last_accepted
DelVar e
Push ?send
Push ()
Push 0
LoadVar b
DelVar b
3-ary DictAdd
Push 1
LoadVar p
DelVar p
3-ary DictAdd
Push 2
Push "B"
3-ary DictAdd
Push 3
LoadVar last_accepted
3-ary DictAdd
Address
Load
Pop
AtomicDec
Jump 209
DelVar ballot
DelVar last_accepted
DelVar received
Return
Return
DelVar result
```

Duration: 0.0013800000000000479

---
##  code/bqueue.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store list
Jump 421
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n5
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s8
LoadVar $s8
1-ary IsEmpty
JumpCond True 29
Cut($s8, x)
LoadVar $n5
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n5
Jump 17
DelVar $n5
DelVar $s8
DelVar s
StoreVar result
Return
Jump 421
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 421
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 421
Frame tail s
DelVar result
Push PC(4)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 421
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s65
LoadVar $s65
1-ary IsEmpty
JumpCond True 94
Cut($s65, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 83
DelVar $s65
Return
Jump 421
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s80
LoadVar $s80
1-ary IsEmpty
JumpCond True 111
Cut($s80, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 103
DelVar $s80
StoreVar result
Return
Jump 421
Frame list a
DelVar result
Push 0
StoreVar $n93
Push ()
LoadVar a
DelVar a
StoreVar $s96
LoadVar $s96
1-ary IsEmpty
JumpCond True 133
Cut($s96, v)
LoadVar $n93
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n93
Jump 123
DelVar $n93
DelVar $s96
StoreVar result
Return
Jump 421
Frame values d
DelVar result
Push 0
StoreVar $n111
Push ()
LoadVar d
1-ary keys
StoreVar $s114
LoadVar $s114
1-ary IsEmpty
JumpCond True 158
Cut($s114, k)
LoadVar $n111
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n111
Jump 146
DelVar $n111
DelVar $s114
DelVar d
StoreVar result
Return
Jump 421
Frame items d
DelVar result
Push 0
StoreVar $n132
Push ()
LoadVar d
1-ary keys
StoreVar $s135
LoadVar $s135
1-ary IsEmpty
JumpCond True 190
Cut($s135, k)
LoadVar $n132
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n132
Jump 172
DelVar $n132
DelVar $s135
DelVar d
StoreVar result
Return
Jump 421
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s163
LoadVar $s163
1-ary IsEmpty
JumpCond True 232
Cut($s163, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 205
DelVar $s163
DelVar d
DelVar index
Return
Jump 421
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 247
DelVar a
Push ()
StoreVar result
Jump 322
Push ()
Push 0
Push PC(48)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(57)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n212
Push ()
LoadVar rest
StoreVar $s215
DelVar v
LoadVar $s215
1-ary IsEmpty
JumpCond True 280
Cut($s215, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 265
LoadVar $n212
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n212
Jump 265
DelVar $n212
DelVar $s215
StoreVar lower
Push 0
StoreVar $n231
Push ()
LoadVar rest
DelVar rest
StoreVar $s234
DelVar v
LoadVar $s234
1-ary IsEmpty
JumpCond True 304
Cut($s234, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 289
LoadVar $n231
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n231
Jump 289
DelVar $n231
DelVar $s234
StoreVar higher
Push PC(237)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(237)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 421
Frame sorted d
DelVar result
Push PC(237)
Push PC(115)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 421
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n277
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s280
LoadVar $s280
1-ary IsEmpty
JumpCond True 361
Cut($s280, i)
LoadVar $n277
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n277
Jump 347
DelVar $n277
DelVar $s280
DelVar d
DelVar n
StoreVar result
Return
Jump 421
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 421
Frame put (q, v)
AtomicInc(lazy)
LoadVar q
Push PC(35)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar v
DelVar v
3-ary DictAdd
Apply
Store
AtomicDec
Return
Jump 421
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 403
Jump 406
ReadonlyDec
AtomicDec
Jump 394
ReadonlyDec
Push PC(48)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(57)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Return
DelVar result
```

Duration: 0.0014822000000000446

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store list
Jump 421
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n5
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s8
LoadVar $s8
1-ary IsEmpty
JumpCond True 29
Cut($s8, x)
LoadVar $n5
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n5
Jump 17
DelVar $n5
DelVar $s8
DelVar s
StoreVar result
Return
Jump 421
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 421
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 421
Frame tail s
DelVar result
Push PC(4)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 421
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s65
LoadVar $s65
1-ary IsEmpty
JumpCond True 94
Cut($s65, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 83
DelVar $s65
Return
Jump 421
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s80
LoadVar $s80
1-ary IsEmpty
JumpCond True 111
Cut($s80, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 103
DelVar $s80
StoreVar result
Return
Jump 421
Frame list a
DelVar result
Push 0
StoreVar $n93
Push ()
LoadVar a
DelVar a
StoreVar $s96
LoadVar $s96
1-ary IsEmpty
JumpCond True 133
Cut($s96, v)
LoadVar $n93
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n93
Jump 123
DelVar $n93
DelVar $s96
StoreVar result
Return
Jump 421
Frame values d
DelVar result
Push 0
StoreVar $n111
Push ()
LoadVar d
1-ary keys
StoreVar $s114
LoadVar $s114
1-ary IsEmpty
JumpCond True 158
Cut($s114, k)
LoadVar $n111
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n111
Jump 146
DelVar $n111
DelVar $s114
DelVar d
StoreVar result
Return
Jump 421
Frame items d
DelVar result
Push 0
StoreVar $n132
Push ()
LoadVar d
1-ary keys
StoreVar $s135
LoadVar $s135
1-ary IsEmpty
JumpCond True 190
Cut($s135, k)
LoadVar $n132
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n132
Jump 172
DelVar $n132
DelVar $s135
DelVar d
StoreVar result
Return
Jump 421
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s163
LoadVar $s163
1-ary IsEmpty
JumpCond True 232
Cut($s163, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 205
DelVar $s163
DelVar d
DelVar index
Return
Jump 421
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 247
DelVar a
Push ()
StoreVar result
Jump 322
Push ()
Push 0
Push PC(48)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(57)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n212
Push ()
LoadVar rest
StoreVar $s215
DelVar v
LoadVar $s215
1-ary IsEmpty
JumpCond True 280
Cut($s215, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 265
LoadVar $n212
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n212
Jump 265
DelVar $n212
DelVar $s215
StoreVar lower
Push 0
StoreVar $n231
Push ()
LoadVar rest
DelVar rest
StoreVar $s234
DelVar v
LoadVar $s234
1-ary IsEmpty
JumpCond True 304
Cut($s234, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 289
LoadVar $n231
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n231
Jump 289
DelVar $n231
DelVar $s234
StoreVar higher
Push PC(237)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(237)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 421
Frame sorted d
DelVar result
Push PC(237)
Push PC(115)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 421
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n277
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s280
LoadVar $s280
1-ary IsEmpty
JumpCond True 361
Cut($s280, i)
LoadVar $n277
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n277
Jump 347
DelVar $n277
DelVar $s280
DelVar d
DelVar n
StoreVar result
Return
Jump 421
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 421
Frame put (q, v)
AtomicInc(lazy)
LoadVar q
Push PC(35)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar v
DelVar v
3-ary DictAdd
Apply
Store
AtomicDec
Return
Jump 421
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 403
Jump 406
ReadonlyDec
AtomicDec
Jump 394
ReadonlyDec
Push PC(48)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(57)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Return
DelVar result
```

Duration: 0.0012744999999999562

---
##  code/hello6.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Jump 7
Frame p s
LoadVar s
DelVar s
Print
Return
Push PC(2)
Push "hello"
Push ()
Spawn
Push PC(2)
Push "world"
Push ()
Spawn
Return
DelVar result
```

Duration: 0.0012558999999999765

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Jump 7
Frame p s
LoadVar s
DelVar s
Print
Return
Push PC(2)
Push "hello"
Push ()
Spawn
Push PC(2)
Push "world"
Push ()
Spawn
Return
DelVar result
```

Duration: 0.0016015000000000335

---
##  code/stack1.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Jump 40
Frame Stack ()
DelVar result
Push ()
StoreVar result
Return
Jump 40
Frame push (st, v)
LoadVar st
LoadVar st
DelVar st
Load
1-ary len
Address
LoadVar v
DelVar v
Store
Return
Jump 40
Frame pop st
DelVar result
LoadVar st
Load
1-ary len
Push 1
2-ary -
StoreVar n
LoadVar st
LoadVar n
Address
Load
StoreVar result
LoadVar st
DelVar st
LoadVar n
DelVar n
Address
Del
Return
Return
DelVar result
```

Duration: 0.001502699999999968

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Jump 40
Frame Stack ()
DelVar result
Push ()
StoreVar result
Return
Jump 40
Frame push (st, v)
LoadVar st
LoadVar st
DelVar st
Load
1-ary len
Address
LoadVar v
DelVar v
Store
Return
Jump 40
Frame pop st
DelVar result
LoadVar st
Load
1-ary len
Push 1
2-ary -
StoreVar n
LoadVar st
LoadVar n
Address
Load
StoreVar result
LoadVar st
DelVar st
LoadVar n
DelVar n
Address
Del
Return
Return
DelVar result
```

Duration: 0.001221099999999975

---
##  code/hello5.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Jump 7
Frame p s
LoadVar s
DelVar s
Print
Return
Push PC(2)
Push "hello"
Apply
Pop
Push PC(2)
Push "world"
Apply
Pop
Return
DelVar result
```

Duration: 0.0021748000000000323

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Jump 7
Frame p s
LoadVar s
DelVar s
Print
Return
Push PC(2)
Push "hello"
Apply
Pop
Push PC(2)
Push "world"
Apply
Pop
Return
DelVar result
```

Duration: 0.0013760999999999912

---
##  code/abd.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store bag
Jump 356
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 356
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s11
LoadVar $s11
1-ary IsEmpty
JumpCond True 25
Cut($s11, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 16
DelVar $s11
StoreVar result
Return
Jump 356
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s27
LoadVar $s27
1-ary IsEmpty
JumpCond True 62
Cut($s27, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 55
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 36
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 36
DelVar $s27
Return
Jump 356
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 88
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 92
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 356
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s91
LoadVar $s91
1-ary IsEmpty
JumpCond True 121
Cut($s91, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 110
DelVar $s91
Return
Jump 356
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 356
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 356
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 356
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 198
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 204
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 356
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 231
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 232
Push False
JumpCond False 241
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 252
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 356
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 270
DelVar bg
DelVar k
Push {}
Push PC(4)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 355
Push PC(94)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 284
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 355
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 296
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 355
Push PC(124)
LoadVar bg
Apply
StoreVar hd
Push PC(206)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(255)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s268
LoadVar $s268
1-ary IsEmpty
JumpCond True 340
Cut($s268, x)
Push PC(169)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 324
DelVar $s268
DelVar hd
Push PC(255)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Push PC(4)
Push ()
Apply
Store network
Jump 819
Frame send m
AtomicInc(lazy)
Push PC(169)
Push ()
Push 0
Load network
3-ary DictAdd
Push 1
LoadVar m
DelVar m
3-ary DictAdd
Apply
Store network
AtomicDec
Return
Jump 819
Frame server ()
Push [[0, None], None, {}]
StoreVar (t, v, received)
Push True
JumpCond False 478
AtomicInc(lazy)
ReadonlyInc
Push {}
Load network
1-ary keys
LoadVar received
2-ary -
StoreVar $s335
DelVar m
LoadVar $s335
1-ary IsEmpty
JumpCond True 405
Cut($s335, m)
LoadVar m
Push "type"
Apply
Push { "read", "write" }
2-ary in
JumpCond False 390
LoadVar m
DelVar m
2-ary SetAdd
Jump 390
DelVar $s335
Dup
Push {}
2-ary ==
JumpCond False 414
Pop
ReadonlyDec
AtomicDec
Jump 382
Choose
StoreVar m
Jump 420
ReadonlyDec
AtomicDec
Jump 382
ReadonlyDec
LoadVar received
DelVar received
Push {}
LoadVar m
2-ary SetAdd
2-ary |
StoreVar received
LoadVar m
Push "type"
Apply
Push "write"
2-ary ==
JumpCond False 442
LoadVar m
Push "value"
Apply
Push 0
Apply
LoadVar t
2-ary >
Jump 443
Push False
JumpCond False 454
Push ?t
Push ?v
LoadVar m
Push "value"
Apply
Split 2
Move 3
Move 2
StoreVar [v]
StoreVar [t]
Push PC(361)
Push ()
Push "type"
Push "response"
3-ary DictAdd
Push "dst"
LoadVar m
DelVar m
Push "src"
Apply
3-ary DictAdd
Push "value"
Push ()
Push 0
LoadVar t
3-ary DictAdd
Push 1
LoadVar v
3-ary DictAdd
3-ary DictAdd
Apply
Pop
AtomicDec
Jump 380
DelVar received
DelVar t
DelVar v
Return
Jump 819
Frame init ()
Push { 1, 2, 3 }
StoreVar $s426
LoadVar $s426
1-ary IsEmpty
JumpCond True 496
Cut($s426, i)
DelVar i
Push PC(377)
Push ()
Push ()
Spawn
Jump 486
DelVar $s426
Return
Jump 819
Frame receive (uid, phase)
DelVar result
Push ()
Load network
StoreVar $s441
DelVar c
DelVar m
LoadVar $s441
1-ary IsEmpty
JumpCond True 536
Cut($s441, m, c)
LoadVar m
Push "type"
Apply
Push "response"
2-ary ==
JumpCond False 528
LoadVar m
Push "dst"
Apply
Push ()
Push 0
LoadVar uid
3-ary DictAdd
Push 1
LoadVar phase
3-ary DictAdd
2-ary ==
Jump 529
Push False
JumpCond False 504
LoadVar m
DelVar m
LoadVar c
DelVar c
3-ary DictAdd
Jump 504
DelVar $s441
DelVar phase
DelVar uid
StoreVar msgs
Push PC(255)
Push ()
Push 0
LoadVar msgs
DelVar msgs
3-ary DictAdd
Push 1
Push 2
3-ary DictAdd
Apply
StoreVar result
Return
Jump 819
Frame read uid
DelVar result
Push PC(361)
Push ()
Push "type"
Push "read"
3-ary DictAdd
Push "src"
Push ()
Push 0
LoadVar uid
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
3-ary DictAdd
Apply
Pop
AtomicInc(lazy)
ReadonlyInc
Push PC(499)
Push ()
Push 0
LoadVar uid
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Apply
Dup
Push {}
2-ary ==
JumpCond False 590
Pop
ReadonlyDec
AtomicDec
Jump 571
Choose
StoreVar msgs
Jump 596
ReadonlyDec
AtomicDec
Jump 571
ReadonlyDec
Push 0
StoreVar $n527
Push ()
LoadVar msgs
DelVar msgs
1-ary keys
StoreVar $s530
LoadVar $s530
1-ary IsEmpty
JumpCond True 616
Cut($s530, m)
LoadVar $n527
LoadVar m
DelVar m
Push "value"
Apply
3-ary DictAdd
IncVar $n527
Jump 604
DelVar $n527
DelVar $s530
1-ary max
StoreVar (t, v)
Push PC(361)
Push ()
Push "type"
Push "write"
3-ary DictAdd
Push "src"
Push ()
Push 0
LoadVar uid
3-ary DictAdd
Push 1
Push 2
3-ary DictAdd
3-ary DictAdd
Push "value"
Push ()
Push 0
LoadVar t
DelVar t
3-ary DictAdd
Push 1
LoadVar v
3-ary DictAdd
3-ary DictAdd
Apply
Pop
LoadVar v
DelVar v
StoreVar result
AtomicDec
AtomicInc(lazy)
ReadonlyInc
Push PC(499)
Push ()
Push 0
LoadVar uid
3-ary DictAdd
Push 1
Push 2
3-ary DictAdd
Apply
Dup
Push {}
2-ary ==
JumpCond False 669
Pop
ReadonlyDec
AtomicDec
Jump 650
DelVar uid
Choose
StoreVar msgs
DelVar msgs
Jump 677
ReadonlyDec
AtomicDec
Jump 650
ReadonlyDec
AtomicDec
Return
Jump 819
Frame write (uid, v)
Push PC(361)
Push ()
Push "type"
Push "read"
3-ary DictAdd
Push "src"
Push ()
Push 0
LoadVar uid
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
3-ary DictAdd
Apply
Pop
AtomicInc(lazy)
ReadonlyInc
Push PC(499)
Push ()
Push 0
LoadVar uid
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Apply
Dup
Push {}
2-ary ==
JumpCond False 717
Pop
ReadonlyDec
AtomicDec
Jump 698
Choose
StoreVar msgs
Jump 723
ReadonlyDec
AtomicDec
Jump 698
ReadonlyDec
Push 0
StoreVar $n646
Push ()
LoadVar msgs
DelVar msgs
1-ary keys
StoreVar $s649
LoadVar $s649
1-ary IsEmpty
JumpCond True 743
Cut($s649, m)
LoadVar $n646
LoadVar m
DelVar m
Push "value"
Apply
3-ary DictAdd
IncVar $n646
Jump 731
DelVar $n646
DelVar $s649
1-ary max
StoreVar (t, _)
DelVar _
Push ()
Push 0
LoadVar t
DelVar t
Push 0
Apply
Push 1
2-ary +
3-ary DictAdd
Push 1
LoadVar uid
3-ary DictAdd
StoreVar nt
Push PC(361)
Push ()
Push "type"
Push "write"
3-ary DictAdd
Push "src"
Push ()
Push 0
LoadVar uid
3-ary DictAdd
Push 1
Push 2
3-ary DictAdd
3-ary DictAdd
Push "value"
Push ()
Push 0
LoadVar nt
DelVar nt
3-ary DictAdd
Push 1
LoadVar v
DelVar v
3-ary DictAdd
3-ary DictAdd
Apply
Pop
AtomicDec
AtomicInc(lazy)
ReadonlyInc
Push PC(499)
Push ()
Push 0
LoadVar uid
3-ary DictAdd
Push 1
Push 2
3-ary DictAdd
Apply
Dup
Push {}
2-ary ==
JumpCond False 808
Pop
ReadonlyDec
AtomicDec
Jump 789
DelVar uid
Choose
StoreVar msgs
DelVar msgs
Jump 816
ReadonlyDec
AtomicDec
Jump 789
ReadonlyDec
AtomicDec
Return
Return
DelVar result
```

Duration: 0.0013441999999999066

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store bag
Jump 356
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 356
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s11
LoadVar $s11
1-ary IsEmpty
JumpCond True 25
Cut($s11, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 16
DelVar $s11
StoreVar result
Return
Jump 356
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s27
LoadVar $s27
1-ary IsEmpty
JumpCond True 62
Cut($s27, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 55
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 36
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 36
DelVar $s27
Return
Jump 356
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 88
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 92
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 356
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s91
LoadVar $s91
1-ary IsEmpty
JumpCond True 121
Cut($s91, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 110
DelVar $s91
Return
Jump 356
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 356
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 356
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 356
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 198
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 204
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 356
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 231
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 232
Push False
JumpCond False 241
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 252
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 356
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 270
DelVar bg
DelVar k
Push {}
Push PC(4)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 355
Push PC(94)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 284
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 355
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 296
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 355
Push PC(124)
LoadVar bg
Apply
StoreVar hd
Push PC(206)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(255)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s268
LoadVar $s268
1-ary IsEmpty
JumpCond True 340
Cut($s268, x)
Push PC(169)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 324
DelVar $s268
DelVar hd
Push PC(255)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Push PC(4)
Push ()
Apply
Store network
Jump 819
Frame send m
AtomicInc(lazy)
Push PC(169)
Push ()
Push 0
Load network
3-ary DictAdd
Push 1
LoadVar m
DelVar m
3-ary DictAdd
Apply
Store network
AtomicDec
Return
Jump 819
Frame server ()
Push [[0, None], None, {}]
StoreVar (t, v, received)
Push True
JumpCond False 478
AtomicInc(lazy)
ReadonlyInc
Push {}
Load network
1-ary keys
LoadVar received
2-ary -
StoreVar $s335
DelVar m
LoadVar $s335
1-ary IsEmpty
JumpCond True 405
Cut($s335, m)
LoadVar m
Push "type"
Apply
Push { "read", "write" }
2-ary in
JumpCond False 390
LoadVar m
DelVar m
2-ary SetAdd
Jump 390
DelVar $s335
Dup
Push {}
2-ary ==
JumpCond False 414
Pop
ReadonlyDec
AtomicDec
Jump 382
Choose
StoreVar m
Jump 420
ReadonlyDec
AtomicDec
Jump 382
ReadonlyDec
LoadVar received
DelVar received
Push {}
LoadVar m
2-ary SetAdd
2-ary |
StoreVar received
LoadVar m
Push "type"
Apply
Push "write"
2-ary ==
JumpCond False 442
LoadVar m
Push "value"
Apply
Push 0
Apply
LoadVar t
2-ary >
Jump 443
Push False
JumpCond False 454
Push ?t
Push ?v
LoadVar m
Push "value"
Apply
Split 2
Move 3
Move 2
StoreVar [v]
StoreVar [t]
Push PC(361)
Push ()
Push "type"
Push "response"
3-ary DictAdd
Push "dst"
LoadVar m
DelVar m
Push "src"
Apply
3-ary DictAdd
Push "value"
Push ()
Push 0
LoadVar t
3-ary DictAdd
Push 1
LoadVar v
3-ary DictAdd
3-ary DictAdd
Apply
Pop
AtomicDec
Jump 380
DelVar received
DelVar t
DelVar v
Return
Jump 819
Frame init ()
Push { 1, 2, 3 }
StoreVar $s426
LoadVar $s426
1-ary IsEmpty
JumpCond True 496
Cut($s426, i)
DelVar i
Push PC(377)
Push ()
Push ()
Spawn
Jump 486
DelVar $s426
Return
Jump 819
Frame receive (uid, phase)
DelVar result
Push ()
Load network
StoreVar $s441
DelVar c
DelVar m
LoadVar $s441
1-ary IsEmpty
JumpCond True 536
Cut($s441, m, c)
LoadVar m
Push "type"
Apply
Push "response"
2-ary ==
JumpCond False 528
LoadVar m
Push "dst"
Apply
Push ()
Push 0
LoadVar uid
3-ary DictAdd
Push 1
LoadVar phase
3-ary DictAdd
2-ary ==
Jump 529
Push False
JumpCond False 504
LoadVar m
DelVar m
LoadVar c
DelVar c
3-ary DictAdd
Jump 504
DelVar $s441
DelVar phase
DelVar uid
StoreVar msgs
Push PC(255)
Push ()
Push 0
LoadVar msgs
DelVar msgs
3-ary DictAdd
Push 1
Push 2
3-ary DictAdd
Apply
StoreVar result
Return
Jump 819
Frame read uid
DelVar result
Push PC(361)
Push ()
Push "type"
Push "read"
3-ary DictAdd
Push "src"
Push ()
Push 0
LoadVar uid
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
3-ary DictAdd
Apply
Pop
AtomicInc(lazy)
ReadonlyInc
Push PC(499)
Push ()
Push 0
LoadVar uid
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Apply
Dup
Push {}
2-ary ==
JumpCond False 590
Pop
ReadonlyDec
AtomicDec
Jump 571
Choose
StoreVar msgs
Jump 596
ReadonlyDec
AtomicDec
Jump 571
ReadonlyDec
Push 0
StoreVar $n527
Push ()
LoadVar msgs
DelVar msgs
1-ary keys
StoreVar $s530
LoadVar $s530
1-ary IsEmpty
JumpCond True 616
Cut($s530, m)
LoadVar $n527
LoadVar m
DelVar m
Push "value"
Apply
3-ary DictAdd
IncVar $n527
Jump 604
DelVar $n527
DelVar $s530
1-ary max
StoreVar (t, v)
Push PC(361)
Push ()
Push "type"
Push "write"
3-ary DictAdd
Push "src"
Push ()
Push 0
LoadVar uid
3-ary DictAdd
Push 1
Push 2
3-ary DictAdd
3-ary DictAdd
Push "value"
Push ()
Push 0
LoadVar t
DelVar t
3-ary DictAdd
Push 1
LoadVar v
3-ary DictAdd
3-ary DictAdd
Apply
Pop
LoadVar v
DelVar v
StoreVar result
AtomicDec
AtomicInc(lazy)
ReadonlyInc
Push PC(499)
Push ()
Push 0
LoadVar uid
3-ary DictAdd
Push 1
Push 2
3-ary DictAdd
Apply
Dup
Push {}
2-ary ==
JumpCond False 669
Pop
ReadonlyDec
AtomicDec
Jump 650
DelVar uid
Choose
StoreVar msgs
DelVar msgs
Jump 677
ReadonlyDec
AtomicDec
Jump 650
ReadonlyDec
AtomicDec
Return
Jump 819
Frame write (uid, v)
Push PC(361)
Push ()
Push "type"
Push "read"
3-ary DictAdd
Push "src"
Push ()
Push 0
LoadVar uid
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
3-ary DictAdd
Apply
Pop
AtomicInc(lazy)
ReadonlyInc
Push PC(499)
Push ()
Push 0
LoadVar uid
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Apply
Dup
Push {}
2-ary ==
JumpCond False 717
Pop
ReadonlyDec
AtomicDec
Jump 698
Choose
StoreVar msgs
Jump 723
ReadonlyDec
AtomicDec
Jump 698
ReadonlyDec
Push 0
StoreVar $n646
Push ()
LoadVar msgs
DelVar msgs
1-ary keys
StoreVar $s649
LoadVar $s649
1-ary IsEmpty
JumpCond True 743
Cut($s649, m)
LoadVar $n646
LoadVar m
DelVar m
Push "value"
Apply
3-ary DictAdd
IncVar $n646
Jump 731
DelVar $n646
DelVar $s649
1-ary max
StoreVar (t, _)
DelVar _
Push ()
Push 0
LoadVar t
DelVar t
Push 0
Apply
Push 1
2-ary +
3-ary DictAdd
Push 1
LoadVar uid
3-ary DictAdd
StoreVar nt
Push PC(361)
Push ()
Push "type"
Push "write"
3-ary DictAdd
Push "src"
Push ()
Push 0
LoadVar uid
3-ary DictAdd
Push 1
Push 2
3-ary DictAdd
3-ary DictAdd
Push "value"
Push ()
Push 0
LoadVar nt
DelVar nt
3-ary DictAdd
Push 1
LoadVar v
DelVar v
3-ary DictAdd
3-ary DictAdd
Apply
Pop
AtomicDec
AtomicInc(lazy)
ReadonlyInc
Push PC(499)
Push ()
Push 0
LoadVar uid
3-ary DictAdd
Push 1
Push 2
3-ary DictAdd
Apply
Dup
Push {}
2-ary ==
JumpCond False 808
Pop
ReadonlyDec
AtomicDec
Jump 789
DelVar uid
Choose
StoreVar msgs
DelVar msgs
Jump 816
ReadonlyDec
AtomicDec
Jump 789
ReadonlyDec
AtomicDec
Return
Return
DelVar result
```

Duration: 0.0013102000000000391

---
##  code/hello8.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Jump 11
Frame hello name
AtomicInc(lazy)
Push "hello"
Print
LoadVar name
DelVar name
Print
AtomicDec
Return
Push PC(2)
Push "Lesley"
Push ()
Spawn
Push PC(2)
Push "Robbert"
Push ()
Spawn
Return
DelVar result
```

Duration: 0.0012645000000000017

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Jump 11
Frame hello name
AtomicInc(lazy)
Push "hello"
Print
LoadVar name
DelVar name
Print
AtomicDec
Return
Push PC(2)
Push "Lesley"
Push ()
Spawn
Push PC(2)
Push "Robbert"
Push ()
Spawn
Return
DelVar result
```

Duration: 0.0013156999999999197

---
##  code/stack4.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store alloc
Push ()
Store alloc.pool
Push 0
Store alloc.next
Jump 94
Frame malloc v
DelVar result
AtomicInc(lazy)
Push ?alloc"pool"
Load alloc.next
Address
LoadVar v
DelVar v
Store
Push ?alloc"pool"
Load alloc.next
Address
StoreVar result
Load alloc.next
Push 1
2-ary +
Store alloc.next
AtomicDec
Return
Jump 94
Frame free r
AtomicInc(lazy)
LoadVar r
DelVar r
Del
AtomicDec
Return
Jump 94
Frame leak_check ()
ReadonlyInc
AtomicInc(lazy)
Load alloc.pool
Push ()
2-ary ==
Push "alloc_leak"
Assert2
AtomicDec
ReadonlyDec
Return
Jump 94
Frame Stack ()
DelVar result
Push None
StoreVar result
Return
Jump 94
Frame push (st, v)
LoadVar st
Push PC(8)
Push ()
Push "value"
LoadVar v
DelVar v
3-ary DictAdd
Push "rest"
LoadVar st
DelVar st
Load
3-ary DictAdd
Apply
Store
Return
Jump 94
Frame pop st
DelVar result
LoadVar st
Load
StoreVar node
LoadVar node
Push "value"
Address
Load
StoreVar result
LoadVar st
DelVar st
LoadVar node
Push "rest"
Address
Load
Store
Push PC(28)
LoadVar node
DelVar node
Apply
Pop
Return
Return
DelVar result
```

Duration: 0.00140589999999996

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store alloc
Push ()
Store alloc.pool
Push 0
Store alloc.next
Jump 94
Frame malloc v
DelVar result
AtomicInc(lazy)
Push ?alloc"pool"
Load alloc.next
Address
LoadVar v
DelVar v
Store
Push ?alloc"pool"
Load alloc.next
Address
StoreVar result
Load alloc.next
Push 1
2-ary +
Store alloc.next
AtomicDec
Return
Jump 94
Frame free r
AtomicInc(lazy)
LoadVar r
DelVar r
Del
AtomicDec
Return
Jump 94
Frame leak_check ()
ReadonlyInc
AtomicInc(lazy)
Load alloc.pool
Push ()
2-ary ==
Push "alloc_leak"
Assert2
AtomicDec
ReadonlyDec
Return
Jump 94
Frame Stack ()
DelVar result
Push None
StoreVar result
Return
Jump 94
Frame push (st, v)
LoadVar st
Push PC(8)
Push ()
Push "value"
LoadVar v
DelVar v
3-ary DictAdd
Push "rest"
LoadVar st
DelVar st
Load
3-ary DictAdd
Apply
Store
Return
Jump 94
Frame pop st
DelVar result
LoadVar st
Load
StoreVar node
LoadVar node
Push "value"
Address
Load
StoreVar result
LoadVar st
DelVar st
LoadVar node
Push "rest"
Address
Load
Store
Push PC(28)
LoadVar node
DelVar node
Apply
Pop
Return
Return
DelVar result
```

Duration: 0.001498200000000005

---
##  code/BBhoare.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store hoare
Push ()
Store synch
Push ()
Store list
Jump 371
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n9
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s12
LoadVar $s12
1-ary IsEmpty
JumpCond True 33
Cut($s12, x)
LoadVar $n9
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n9
Jump 21
DelVar $n9
DelVar $s12
DelVar s
StoreVar result
Return
Jump 371
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 371
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 371
Frame tail s
DelVar result
Push PC(8)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 371
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s69
LoadVar $s69
1-ary IsEmpty
JumpCond True 98
Cut($s69, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 87
DelVar $s69
Return
Jump 371
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s84
LoadVar $s84
1-ary IsEmpty
JumpCond True 115
Cut($s84, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 107
DelVar $s84
StoreVar result
Return
Jump 371
Frame list a
DelVar result
Push 0
StoreVar $n97
Push ()
LoadVar a
DelVar a
StoreVar $s100
LoadVar $s100
1-ary IsEmpty
JumpCond True 137
Cut($s100, v)
LoadVar $n97
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n97
Jump 127
DelVar $n97
DelVar $s100
StoreVar result
Return
Jump 371
Frame values d
DelVar result
Push 0
StoreVar $n115
Push ()
LoadVar d
1-ary keys
StoreVar $s118
LoadVar $s118
1-ary IsEmpty
JumpCond True 162
Cut($s118, k)
LoadVar $n115
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n115
Jump 150
DelVar $n115
DelVar $s118
DelVar d
StoreVar result
Return
Jump 371
Frame items d
DelVar result
Push 0
StoreVar $n136
Push ()
LoadVar d
1-ary keys
StoreVar $s139
LoadVar $s139
1-ary IsEmpty
JumpCond True 194
Cut($s139, k)
LoadVar $n136
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n136
Jump 176
DelVar $n136
DelVar $s139
DelVar d
StoreVar result
Return
Jump 371
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s167
LoadVar $s167
1-ary IsEmpty
JumpCond True 236
Cut($s167, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 209
DelVar $s167
DelVar d
DelVar index
Return
Jump 371
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 251
DelVar a
Push ()
StoreVar result
Jump 326
Push ()
Push 0
Push PC(52)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(61)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n216
Push ()
LoadVar rest
StoreVar $s219
DelVar v
LoadVar $s219
1-ary IsEmpty
JumpCond True 284
Cut($s219, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 269
LoadVar $n216
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n216
Jump 269
DelVar $n216
DelVar $s219
StoreVar lower
Push 0
StoreVar $n235
Push ()
LoadVar rest
DelVar rest
StoreVar $s238
DelVar v
LoadVar $s238
1-ary IsEmpty
JumpCond True 308
Cut($s238, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 293
LoadVar $n235
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n235
Jump 293
DelVar $n235
DelVar $s238
StoreVar higher
Push PC(241)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(241)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 371
Frame sorted d
DelVar result
Push PC(241)
Push PC(119)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 371
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n281
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s284
LoadVar $s284
1-ary IsEmpty
JumpCond True 365
Cut($s284, i)
LoadVar $n281
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n281
Jump 351
DelVar $n281
DelVar $s284
DelVar d
DelVar n
StoreVar result
Return
Push ()
Store bag
Jump 1358
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1358
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s313
LoadVar $s313
1-ary IsEmpty
JumpCond True 395
Cut($s313, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 386
DelVar $s313
StoreVar result
Return
Jump 1358
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s329
LoadVar $s329
1-ary IsEmpty
JumpCond True 432
Cut($s329, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 425
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 406
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 406
DelVar $s329
Return
Jump 1358
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 458
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 462
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1358
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s393
LoadVar $s393
1-ary IsEmpty
JumpCond True 491
Cut($s393, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 480
DelVar $s393
Return
Jump 1358
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1358
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1358
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1358
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 568
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 574
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1358
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 601
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 602
Push False
JumpCond False 611
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 622
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1358
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 640
DelVar bg
DelVar k
Push {}
Push PC(374)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 725
Push PC(464)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 654
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 725
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 666
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 725
Push PC(494)
LoadVar bg
Apply
StoreVar hd
Push PC(576)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(625)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s570
LoadVar $s570
1-ary IsEmpty
JumpCond True 710
Cut($s570, x)
Push PC(539)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 694
DelVar $s570
DelVar hd
Push PC(625)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1358
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1358
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 756
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1358
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1358
Frame Lock ()
DelVar result
Push PC(761)
Push False
Apply
StoreVar result
Return
Jump 1358
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1358
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 792
Jump 795
ReadonlyDec
AtomicDec
Jump 785
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1358
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1358
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1358
Frame Condition ()
DelVar result
Push PC(374)
Push ()
Apply
StoreVar result
Return
Jump 1358
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(435)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(539)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 889
Push PC(435)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 890
Push False
JumpCond False 895
DelVar c
DelVar cnt
DelVar ctx
Jump 898
ReadonlyDec
AtomicDec
Jump 870
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1358
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(374)
Push ()
Apply
2-ary !=
JumpCond False 931
LoadVar c
Push PC(576)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(521)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1358
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(374)
Push ()
Apply
Store
AtomicDec
Return
Jump 1358
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1358
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 962
Jump 965
ReadonlyDec
AtomicDec
Jump 954
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1358
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1358
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1358
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1004
Jump 1007
ReadonlyDec
AtomicDec
Jump 995
ReadonlyDec
Push PC(52)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(61)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1358
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(39)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Jump 1358
Frame Monitor ()
DelVar result
Push PC(768)
Push ()
Apply
StoreVar result
Return
Jump 1358
Frame enter mon
Push PC(784)
LoadVar mon
DelVar mon
Apply
Pop
Return
Jump 1358
Frame exit mon
Push PC(803)
LoadVar mon
DelVar mon
Apply
Pop
Return
Jump 1358
Frame Condition ()
DelVar result
Push ()
Push "sema"
Push PC(761)
Push True
Apply
3-ary DictAdd
Push "count"
Push 0
3-ary DictAdd
StoreVar result
Return
Jump 1358
Frame wait (cond, mon)
LoadVar cond
Push "count"
Address
Dup
Load
Push 1
2-ary +
Store
Push PC(1058)
LoadVar mon
DelVar mon
Apply
Pop
Push PC(784)
LoadVar cond
Push "sema"
Address
Apply
Pop
LoadVar cond
DelVar cond
Push "count"
Address
Dup
Load
Push 1
2-ary -
Store
Return
Jump 1358
Frame signal (cond, mon)
LoadVar cond
Push "count"
Address
Load
Push 0
2-ary >
JumpCond False 1131
Push PC(803)
LoadVar cond
DelVar cond
Push "sema"
Address
Apply
Pop
Push PC(1050)
LoadVar mon
DelVar mon
Apply
Pop
DelVar cond
DelVar mon
Return
Jump 1358
Frame BoundedBuffer size
DelVar result
Push ()
Push "mon"
Push PC(1042)
Push ()
Apply
3-ary DictAdd
Push "prod"
Push PC(1066)
Push ()
Apply
3-ary DictAdd
Push "cons"
Push PC(1066)
Push ()
Apply
3-ary DictAdd
Push "buf"
Push ()
Push 1
LoadVar size
2-ary ..
StoreVar $s992
LoadVar $s992
1-ary IsEmpty
JumpCond True 1168
Cut($s992, x)
LoadVar x
DelVar x
Push ()
3-ary DictAdd
Jump 1159
DelVar $s992
3-ary DictAdd
Push "head"
Push 1
3-ary DictAdd
Push "tail"
Push 1
3-ary DictAdd
Push "count"
Push 0
3-ary DictAdd
Push "size"
LoadVar size
DelVar size
3-ary DictAdd
StoreVar result
Return
Jump 1358
Frame put (bb, item)
Push PC(1050)
LoadVar bb
Push "mon"
Address
Apply
Pop
LoadVar bb
Push "count"
Address
Load
LoadVar bb
Push "size"
Address
Load
2-ary ==
JumpCond False 1217
Push PC(1080)
Push ()
Push 0
LoadVar bb
Push "prod"
Address
3-ary DictAdd
Push 1
LoadVar bb
Push "mon"
Address
3-ary DictAdd
Apply
Pop
LoadVar bb
Push "buf"
Address
LoadVar bb
Push "tail"
Address
Load
Address
LoadVar item
DelVar item
Store
LoadVar bb
Push "tail"
Address
LoadVar bb
Push "tail"
Address
Load
LoadVar bb
Push "size"
Address
Load
2-ary %
Push 1
2-ary +
Store
LoadVar bb
Push "count"
Address
Dup
Load
Push 1
2-ary +
Store
Push PC(1111)
Push ()
Push 0
LoadVar bb
Push "cons"
Address
3-ary DictAdd
Push 1
LoadVar bb
Push "mon"
Address
3-ary DictAdd
Apply
Pop
Push PC(1058)
LoadVar bb
DelVar bb
Push "mon"
Address
Apply
Pop
Return
Jump 1358
Frame get bb
DelVar result
Push PC(1050)
LoadVar bb
Push "mon"
Address
Apply
Pop
LoadVar bb
Push "count"
Address
Load
Push 0
2-ary ==
JumpCond False 1303
Push PC(1080)
Push ()
Push 0
LoadVar bb
Push "cons"
Address
3-ary DictAdd
Push 1
LoadVar bb
Push "mon"
Address
3-ary DictAdd
Apply
Pop
LoadVar bb
Push "buf"
Address
LoadVar bb
Push "head"
Address
Load
Address
Load
StoreVar result
LoadVar bb
Push "head"
Address
LoadVar bb
Push "head"
Address
Load
LoadVar bb
Push "size"
Address
Load
2-ary %
Push 1
2-ary +
Store
LoadVar bb
Push "count"
Address
Dup
Load
Push 1
2-ary -
Store
Push PC(1111)
Push ()
Push 0
LoadVar bb
Push "prod"
Address
3-ary DictAdd
Push 1
LoadVar bb
Push "mon"
Address
3-ary DictAdd
Apply
Pop
Push PC(1058)
LoadVar bb
DelVar bb
Push "mon"
Address
Apply
Pop
Return
Return
DelVar result
```

Duration: 0.001635000000000053

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store hoare
Push ()
Store synch
Push ()
Store list
Jump 371
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n9
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s12
LoadVar $s12
1-ary IsEmpty
JumpCond True 33
Cut($s12, x)
LoadVar $n9
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n9
Jump 21
DelVar $n9
DelVar $s12
DelVar s
StoreVar result
Return
Jump 371
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 371
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 371
Frame tail s
DelVar result
Push PC(8)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 371
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s69
LoadVar $s69
1-ary IsEmpty
JumpCond True 98
Cut($s69, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 87
DelVar $s69
Return
Jump 371
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s84
LoadVar $s84
1-ary IsEmpty
JumpCond True 115
Cut($s84, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 107
DelVar $s84
StoreVar result
Return
Jump 371
Frame list a
DelVar result
Push 0
StoreVar $n97
Push ()
LoadVar a
DelVar a
StoreVar $s100
LoadVar $s100
1-ary IsEmpty
JumpCond True 137
Cut($s100, v)
LoadVar $n97
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n97
Jump 127
DelVar $n97
DelVar $s100
StoreVar result
Return
Jump 371
Frame values d
DelVar result
Push 0
StoreVar $n115
Push ()
LoadVar d
1-ary keys
StoreVar $s118
LoadVar $s118
1-ary IsEmpty
JumpCond True 162
Cut($s118, k)
LoadVar $n115
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n115
Jump 150
DelVar $n115
DelVar $s118
DelVar d
StoreVar result
Return
Jump 371
Frame items d
DelVar result
Push 0
StoreVar $n136
Push ()
LoadVar d
1-ary keys
StoreVar $s139
LoadVar $s139
1-ary IsEmpty
JumpCond True 194
Cut($s139, k)
LoadVar $n136
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n136
Jump 176
DelVar $n136
DelVar $s139
DelVar d
StoreVar result
Return
Jump 371
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s167
LoadVar $s167
1-ary IsEmpty
JumpCond True 236
Cut($s167, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 209
DelVar $s167
DelVar d
DelVar index
Return
Jump 371
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 251
DelVar a
Push ()
StoreVar result
Jump 326
Push ()
Push 0
Push PC(52)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(61)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n216
Push ()
LoadVar rest
StoreVar $s219
DelVar v
LoadVar $s219
1-ary IsEmpty
JumpCond True 284
Cut($s219, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 269
LoadVar $n216
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n216
Jump 269
DelVar $n216
DelVar $s219
StoreVar lower
Push 0
StoreVar $n235
Push ()
LoadVar rest
DelVar rest
StoreVar $s238
DelVar v
LoadVar $s238
1-ary IsEmpty
JumpCond True 308
Cut($s238, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 293
LoadVar $n235
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n235
Jump 293
DelVar $n235
DelVar $s238
StoreVar higher
Push PC(241)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(241)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 371
Frame sorted d
DelVar result
Push PC(241)
Push PC(119)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 371
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n281
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s284
LoadVar $s284
1-ary IsEmpty
JumpCond True 365
Cut($s284, i)
LoadVar $n281
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n281
Jump 351
DelVar $n281
DelVar $s284
DelVar d
DelVar n
StoreVar result
Return
Push ()
Store bag
Jump 1358
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1358
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s313
LoadVar $s313
1-ary IsEmpty
JumpCond True 395
Cut($s313, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 386
DelVar $s313
StoreVar result
Return
Jump 1358
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s329
LoadVar $s329
1-ary IsEmpty
JumpCond True 432
Cut($s329, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 425
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 406
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 406
DelVar $s329
Return
Jump 1358
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 458
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 462
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1358
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s393
LoadVar $s393
1-ary IsEmpty
JumpCond True 491
Cut($s393, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 480
DelVar $s393
Return
Jump 1358
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1358
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1358
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1358
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 568
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 574
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1358
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 601
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 602
Push False
JumpCond False 611
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 622
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1358
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 640
DelVar bg
DelVar k
Push {}
Push PC(374)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 725
Push PC(464)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 654
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 725
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 666
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 725
Push PC(494)
LoadVar bg
Apply
StoreVar hd
Push PC(576)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(625)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s570
LoadVar $s570
1-ary IsEmpty
JumpCond True 710
Cut($s570, x)
Push PC(539)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 694
DelVar $s570
DelVar hd
Push PC(625)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1358
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1358
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 756
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1358
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1358
Frame Lock ()
DelVar result
Push PC(761)
Push False
Apply
StoreVar result
Return
Jump 1358
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1358
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 792
Jump 795
ReadonlyDec
AtomicDec
Jump 785
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1358
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1358
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1358
Frame Condition ()
DelVar result
Push PC(374)
Push ()
Apply
StoreVar result
Return
Jump 1358
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(435)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(539)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 889
Push PC(435)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 890
Push False
JumpCond False 895
DelVar c
DelVar cnt
DelVar ctx
Jump 898
ReadonlyDec
AtomicDec
Jump 870
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1358
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(374)
Push ()
Apply
2-ary !=
JumpCond False 931
LoadVar c
Push PC(576)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(521)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1358
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(374)
Push ()
Apply
Store
AtomicDec
Return
Jump 1358
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1358
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 962
Jump 965
ReadonlyDec
AtomicDec
Jump 954
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1358
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1358
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1358
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1004
Jump 1007
ReadonlyDec
AtomicDec
Jump 995
ReadonlyDec
Push PC(52)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(61)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1358
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(39)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Jump 1358
Frame Monitor ()
DelVar result
Push PC(768)
Push ()
Apply
StoreVar result
Return
Jump 1358
Frame enter mon
Push PC(784)
LoadVar mon
DelVar mon
Apply
Pop
Return
Jump 1358
Frame exit mon
Push PC(803)
LoadVar mon
DelVar mon
Apply
Pop
Return
Jump 1358
Frame Condition ()
DelVar result
Push ()
Push "sema"
Push PC(761)
Push True
Apply
3-ary DictAdd
Push "count"
Push 0
3-ary DictAdd
StoreVar result
Return
Jump 1358
Frame wait (cond, mon)
LoadVar cond
Push "count"
Address
Dup
Load
Push 1
2-ary +
Store
Push PC(1058)
LoadVar mon
DelVar mon
Apply
Pop
Push PC(784)
LoadVar cond
Push "sema"
Address
Apply
Pop
LoadVar cond
DelVar cond
Push "count"
Address
Dup
Load
Push 1
2-ary -
Store
Return
Jump 1358
Frame signal (cond, mon)
LoadVar cond
Push "count"
Address
Load
Push 0
2-ary >
JumpCond False 1131
Push PC(803)
LoadVar cond
DelVar cond
Push "sema"
Address
Apply
Pop
Push PC(1050)
LoadVar mon
DelVar mon
Apply
Pop
DelVar cond
DelVar mon
Return
Jump 1358
Frame BoundedBuffer size
DelVar result
Push ()
Push "mon"
Push PC(1042)
Push ()
Apply
3-ary DictAdd
Push "prod"
Push PC(1066)
Push ()
Apply
3-ary DictAdd
Push "cons"
Push PC(1066)
Push ()
Apply
3-ary DictAdd
Push "buf"
Push ()
Push 1
LoadVar size
2-ary ..
StoreVar $s992
LoadVar $s992
1-ary IsEmpty
JumpCond True 1168
Cut($s992, x)
LoadVar x
DelVar x
Push ()
3-ary DictAdd
Jump 1159
DelVar $s992
3-ary DictAdd
Push "head"
Push 1
3-ary DictAdd
Push "tail"
Push 1
3-ary DictAdd
Push "count"
Push 0
3-ary DictAdd
Push "size"
LoadVar size
DelVar size
3-ary DictAdd
StoreVar result
Return
Jump 1358
Frame put (bb, item)
Push PC(1050)
LoadVar bb
Push "mon"
Address
Apply
Pop
LoadVar bb
Push "count"
Address
Load
LoadVar bb
Push "size"
Address
Load
2-ary ==
JumpCond False 1217
Push PC(1080)
Push ()
Push 0
LoadVar bb
Push "prod"
Address
3-ary DictAdd
Push 1
LoadVar bb
Push "mon"
Address
3-ary DictAdd
Apply
Pop
LoadVar bb
Push "buf"
Address
LoadVar bb
Push "tail"
Address
Load
Address
LoadVar item
DelVar item
Store
LoadVar bb
Push "tail"
Address
LoadVar bb
Push "tail"
Address
Load
LoadVar bb
Push "size"
Address
Load
2-ary %
Push 1
2-ary +
Store
LoadVar bb
Push "count"
Address
Dup
Load
Push 1
2-ary +
Store
Push PC(1111)
Push ()
Push 0
LoadVar bb
Push "cons"
Address
3-ary DictAdd
Push 1
LoadVar bb
Push "mon"
Address
3-ary DictAdd
Apply
Pop
Push PC(1058)
LoadVar bb
DelVar bb
Push "mon"
Address
Apply
Pop
Return
Jump 1358
Frame get bb
DelVar result
Push PC(1050)
LoadVar bb
Push "mon"
Address
Apply
Pop
LoadVar bb
Push "count"
Address
Load
Push 0
2-ary ==
JumpCond False 1303
Push PC(1080)
Push ()
Push 0
LoadVar bb
Push "cons"
Address
3-ary DictAdd
Push 1
LoadVar bb
Push "mon"
Address
3-ary DictAdd
Apply
Pop
LoadVar bb
Push "buf"
Address
LoadVar bb
Push "head"
Address
Load
Address
Load
StoreVar result
LoadVar bb
Push "head"
Address
LoadVar bb
Push "head"
Address
Load
LoadVar bb
Push "size"
Address
Load
2-ary %
Push 1
2-ary +
Store
LoadVar bb
Push "count"
Address
Dup
Load
Push 1
2-ary -
Store
Push PC(1111)
Push ()
Push 0
LoadVar bb
Push "prod"
Address
3-ary DictAdd
Push 1
LoadVar bb
Push "mon"
Address
3-ary DictAdd
Apply
Pop
Push PC(1058)
LoadVar bb
DelVar bb
Push "mon"
Address
Apply
Pop
Return
Return
DelVar result
```

Duration: 0.002042199999999994

---
##  code/RWcheat.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store synch
Push ()
Store list
Jump 369
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 369
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 369
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 369
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 369
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 369
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 369
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 369
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 369
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 369
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 369
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 369
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 369
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Push ()
Store bag
Jump 1079
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1079
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s311
LoadVar $s311
1-ary IsEmpty
JumpCond True 393
Cut($s311, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 384
DelVar $s311
StoreVar result
Return
Jump 1079
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s327
LoadVar $s327
1-ary IsEmpty
JumpCond True 430
Cut($s327, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 423
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 404
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 404
DelVar $s327
Return
Jump 1079
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 456
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 460
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1079
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s391
LoadVar $s391
1-ary IsEmpty
JumpCond True 489
Cut($s391, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 478
DelVar $s391
Return
Jump 1079
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1079
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1079
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1079
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 566
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 572
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1079
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 599
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 600
Push False
JumpCond False 609
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 620
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1079
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 638
DelVar bg
DelVar k
Push {}
Push PC(372)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 723
Push PC(462)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 652
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 723
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 664
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 723
Push PC(492)
LoadVar bg
Apply
StoreVar hd
Push PC(574)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(623)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s568
LoadVar $s568
1-ary IsEmpty
JumpCond True 708
Cut($s568, x)
Push PC(537)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 692
DelVar $s568
DelVar hd
Push PC(623)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1079
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1079
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 754
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1079
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1079
Frame Lock ()
DelVar result
Push PC(759)
Push False
Apply
StoreVar result
Return
Jump 1079
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1079
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 790
Jump 793
ReadonlyDec
AtomicDec
Jump 783
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1079
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1079
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1079
Frame Condition ()
DelVar result
Push PC(372)
Push ()
Apply
StoreVar result
Return
Jump 1079
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(537)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 887
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 888
Push False
JumpCond False 893
DelVar c
DelVar cnt
DelVar ctx
Jump 896
ReadonlyDec
AtomicDec
Jump 868
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1079
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(372)
Push ()
Apply
2-ary !=
JumpCond False 929
LoadVar c
Push PC(574)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(519)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1079
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(372)
Push ()
Apply
Store
AtomicDec
Return
Jump 1079
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1079
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 960
Jump 963
ReadonlyDec
AtomicDec
Jump 952
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1079
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1079
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1079
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1002
Jump 1005
ReadonlyDec
AtomicDec
Jump 993
ReadonlyDec
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1079
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Jump 1079
Frame RWlock ()
DelVar result
Push PC(766)
Push ()
Apply
StoreVar result
Return
Jump 1079
Frame read_acquire rw
Push PC(782)
LoadVar rw
DelVar rw
Apply
Pop
Return
Jump 1079
Frame read_release rw
Push PC(801)
LoadVar rw
DelVar rw
Apply
Pop
Return
Jump 1079
Frame write_acquire rw
Push PC(782)
LoadVar rw
DelVar rw
Apply
Pop
Return
Jump 1079
Frame write_release rw
Push PC(801)
LoadVar rw
DelVar rw
Apply
Pop
Return
Return
DelVar result
```

Duration: 0.0016635999999999873

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store synch
Push ()
Store list
Jump 369
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 369
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 369
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 369
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 369
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 369
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 369
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 369
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 369
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 369
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 369
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 369
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 369
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Push ()
Store bag
Jump 1079
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1079
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s311
LoadVar $s311
1-ary IsEmpty
JumpCond True 393
Cut($s311, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 384
DelVar $s311
StoreVar result
Return
Jump 1079
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s327
LoadVar $s327
1-ary IsEmpty
JumpCond True 430
Cut($s327, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 423
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 404
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 404
DelVar $s327
Return
Jump 1079
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 456
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 460
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1079
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s391
LoadVar $s391
1-ary IsEmpty
JumpCond True 489
Cut($s391, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 478
DelVar $s391
Return
Jump 1079
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1079
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1079
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1079
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 566
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 572
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1079
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 599
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 600
Push False
JumpCond False 609
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 620
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1079
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 638
DelVar bg
DelVar k
Push {}
Push PC(372)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 723
Push PC(462)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 652
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 723
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 664
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 723
Push PC(492)
LoadVar bg
Apply
StoreVar hd
Push PC(574)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(623)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s568
LoadVar $s568
1-ary IsEmpty
JumpCond True 708
Cut($s568, x)
Push PC(537)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 692
DelVar $s568
DelVar hd
Push PC(623)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1079
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1079
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 754
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1079
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1079
Frame Lock ()
DelVar result
Push PC(759)
Push False
Apply
StoreVar result
Return
Jump 1079
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1079
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 790
Jump 793
ReadonlyDec
AtomicDec
Jump 783
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1079
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1079
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1079
Frame Condition ()
DelVar result
Push PC(372)
Push ()
Apply
StoreVar result
Return
Jump 1079
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(537)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 887
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 888
Push False
JumpCond False 893
DelVar c
DelVar cnt
DelVar ctx
Jump 896
ReadonlyDec
AtomicDec
Jump 868
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1079
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(372)
Push ()
Apply
2-ary !=
JumpCond False 929
LoadVar c
Push PC(574)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(519)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1079
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(372)
Push ()
Apply
Store
AtomicDec
Return
Jump 1079
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1079
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 960
Jump 963
ReadonlyDec
AtomicDec
Jump 952
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1079
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1079
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1079
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1002
Jump 1005
ReadonlyDec
AtomicDec
Jump 993
ReadonlyDec
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1079
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Jump 1079
Frame RWlock ()
DelVar result
Push PC(766)
Push ()
Apply
StoreVar result
Return
Jump 1079
Frame read_acquire rw
Push PC(782)
LoadVar rw
DelVar rw
Apply
Pop
Return
Jump 1079
Frame read_release rw
Push PC(801)
LoadVar rw
DelVar rw
Apply
Pop
Return
Jump 1079
Frame write_acquire rw
Push PC(782)
LoadVar rw
DelVar rw
Apply
Pop
Return
Jump 1079
Frame write_release rw
Push PC(801)
LoadVar rw
DelVar rw
Apply
Pop
Return
Return
DelVar result
```

Duration: 0.001471800000000023

---
##  code/stacktest.hny

### Summary

Duration is good: ✅

Output is good: ❌

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Can't import module stack from ['code/stacktest.hny'] ErrorToken(line=1, message="Can't import module stack from ['code/stacktest.hny']", column=6, lexeme='stack', filename='code/stacktest.hny', is_eof_error=False)
```

Duration: 0.0019145999999999885

### Current Output

```
Phase 1: compile Harmony program to bytecode
Line 1:6 at code/stacktest.hny, Can't import module stack from ['code/stacktest.hny']
```

Duration: 0.001518200000000025

---
##  code/queueMS.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store synch
Push ()
Store list
Jump 369
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 369
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 369
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 369
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 369
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 369
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 369
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 369
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 369
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 369
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 369
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 369
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 369
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Push ()
Store bag
Jump 1039
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1039
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s311
LoadVar $s311
1-ary IsEmpty
JumpCond True 393
Cut($s311, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 384
DelVar $s311
StoreVar result
Return
Jump 1039
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s327
LoadVar $s327
1-ary IsEmpty
JumpCond True 430
Cut($s327, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 423
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 404
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 404
DelVar $s327
Return
Jump 1039
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 456
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 460
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1039
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s391
LoadVar $s391
1-ary IsEmpty
JumpCond True 489
Cut($s391, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 478
DelVar $s391
Return
Jump 1039
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1039
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1039
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1039
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 566
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 572
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1039
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 599
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 600
Push False
JumpCond False 609
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 620
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1039
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 638
DelVar bg
DelVar k
Push {}
Push PC(372)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 723
Push PC(462)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 652
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 723
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 664
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 723
Push PC(492)
LoadVar bg
Apply
StoreVar hd
Push PC(574)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(623)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s568
LoadVar $s568
1-ary IsEmpty
JumpCond True 708
Cut($s568, x)
Push PC(537)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 692
DelVar $s568
DelVar hd
Push PC(623)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1039
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1039
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 754
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1039
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1039
Frame Lock ()
DelVar result
Push PC(759)
Push False
Apply
StoreVar result
Return
Jump 1039
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1039
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 790
Jump 793
ReadonlyDec
AtomicDec
Jump 783
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1039
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1039
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1039
Frame Condition ()
DelVar result
Push PC(372)
Push ()
Apply
StoreVar result
Return
Jump 1039
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(537)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 887
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 888
Push False
JumpCond False 893
DelVar c
DelVar cnt
DelVar ctx
Jump 896
ReadonlyDec
AtomicDec
Jump 868
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1039
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(372)
Push ()
Apply
2-ary !=
JumpCond False 929
LoadVar c
Push PC(574)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(519)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1039
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(372)
Push ()
Apply
Store
AtomicDec
Return
Jump 1039
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1039
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 960
Jump 963
ReadonlyDec
AtomicDec
Jump 952
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1039
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1039
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1039
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1002
Jump 1005
ReadonlyDec
AtomicDec
Jump 993
ReadonlyDec
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1039
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Push ()
Store alloc
Push ()
Store alloc.pool
Push 0
Store alloc.next
Jump 1212
Frame malloc v
DelVar result
AtomicInc(lazy)
Push ?alloc"pool"
Load alloc.next
Address
LoadVar v
DelVar v
Store
Push ?alloc"pool"
Load alloc.next
Address
StoreVar result
Load alloc.next
Push 1
2-ary +
Store alloc.next
AtomicDec
Return
Jump 1212
Frame free r
AtomicInc(lazy)
LoadVar r
DelVar r
Del
AtomicDec
Return
Jump 1212
Frame leak_check ()
ReadonlyInc
AtomicInc(lazy)
Load alloc.pool
Push ()
2-ary ==
Push "alloc_leak"
Assert2
AtomicDec
ReadonlyDec
Return
Jump 1212
Frame Queue ()
DelVar result
Push PC(1046)
Push { "next":None, "value":() }
Apply
StoreVar dummy
Push ()
Push "head"
LoadVar dummy
3-ary DictAdd
Push "tail"
LoadVar dummy
DelVar dummy
3-ary DictAdd
Push "hdlock"
Push PC(766)
Push ()
Apply
3-ary DictAdd
Push "tllock"
Push PC(766)
Push ()
Apply
3-ary DictAdd
StoreVar result
Return
Jump 1212
Frame put (q, v)
Push PC(1046)
Push ()
Push "value"
LoadVar v
DelVar v
3-ary DictAdd
Push "next"
Push None
3-ary DictAdd
Apply
StoreVar node
Push PC(782)
LoadVar q
Push "tllock"
Address
Apply
Pop
LoadVar q
Push "tail"
Address
Load
Push "next"
Address
LoadVar node
Store
LoadVar q
Push "tail"
Address
LoadVar node
DelVar node
Store
Push PC(801)
LoadVar q
DelVar q
Push "tllock"
Address
Apply
Pop
Return
Jump 1212
Frame get q
DelVar result
Push PC(782)
LoadVar q
Push "hdlock"
Address
Apply
Pop
LoadVar q
Push "head"
Address
Load
StoreVar dummy
LoadVar dummy
Push "next"
Address
Load
StoreVar node
LoadVar node
Push None
2-ary ==
JumpCond False 1188
DelVar dummy
DelVar node
Push None
StoreVar result
Push PC(801)
LoadVar q
DelVar q
Push "hdlock"
Address
Apply
Pop
Jump 1211
LoadVar node
Push "value"
Address
Load
StoreVar result
LoadVar q
Push "head"
Address
LoadVar node
DelVar node
Store
Push PC(801)
LoadVar q
DelVar q
Push "hdlock"
Address
Apply
Pop
Push PC(1066)
LoadVar dummy
DelVar dummy
Apply
Pop
Return
Return
DelVar result
```

Duration: 0.0015545000000000142

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store synch
Push ()
Store list
Jump 369
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 369
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 369
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 369
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 369
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 369
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 369
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 369
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 369
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 369
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 369
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 369
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 369
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Push ()
Store bag
Jump 1039
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1039
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s311
LoadVar $s311
1-ary IsEmpty
JumpCond True 393
Cut($s311, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 384
DelVar $s311
StoreVar result
Return
Jump 1039
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s327
LoadVar $s327
1-ary IsEmpty
JumpCond True 430
Cut($s327, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 423
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 404
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 404
DelVar $s327
Return
Jump 1039
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 456
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 460
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1039
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s391
LoadVar $s391
1-ary IsEmpty
JumpCond True 489
Cut($s391, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 478
DelVar $s391
Return
Jump 1039
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1039
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1039
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1039
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 566
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 572
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1039
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 599
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 600
Push False
JumpCond False 609
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 620
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1039
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 638
DelVar bg
DelVar k
Push {}
Push PC(372)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 723
Push PC(462)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 652
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 723
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 664
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 723
Push PC(492)
LoadVar bg
Apply
StoreVar hd
Push PC(574)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(623)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s568
LoadVar $s568
1-ary IsEmpty
JumpCond True 708
Cut($s568, x)
Push PC(537)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 692
DelVar $s568
DelVar hd
Push PC(623)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1039
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1039
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 754
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1039
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1039
Frame Lock ()
DelVar result
Push PC(759)
Push False
Apply
StoreVar result
Return
Jump 1039
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1039
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 790
Jump 793
ReadonlyDec
AtomicDec
Jump 783
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1039
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1039
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1039
Frame Condition ()
DelVar result
Push PC(372)
Push ()
Apply
StoreVar result
Return
Jump 1039
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(537)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 887
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 888
Push False
JumpCond False 893
DelVar c
DelVar cnt
DelVar ctx
Jump 896
ReadonlyDec
AtomicDec
Jump 868
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1039
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(372)
Push ()
Apply
2-ary !=
JumpCond False 929
LoadVar c
Push PC(574)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(519)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1039
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(372)
Push ()
Apply
Store
AtomicDec
Return
Jump 1039
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1039
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 960
Jump 963
ReadonlyDec
AtomicDec
Jump 952
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1039
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1039
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1039
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1002
Jump 1005
ReadonlyDec
AtomicDec
Jump 993
ReadonlyDec
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1039
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Push ()
Store alloc
Push ()
Store alloc.pool
Push 0
Store alloc.next
Jump 1212
Frame malloc v
DelVar result
AtomicInc(lazy)
Push ?alloc"pool"
Load alloc.next
Address
LoadVar v
DelVar v
Store
Push ?alloc"pool"
Load alloc.next
Address
StoreVar result
Load alloc.next
Push 1
2-ary +
Store alloc.next
AtomicDec
Return
Jump 1212
Frame free r
AtomicInc(lazy)
LoadVar r
DelVar r
Del
AtomicDec
Return
Jump 1212
Frame leak_check ()
ReadonlyInc
AtomicInc(lazy)
Load alloc.pool
Push ()
2-ary ==
Push "alloc_leak"
Assert2
AtomicDec
ReadonlyDec
Return
Jump 1212
Frame Queue ()
DelVar result
Push PC(1046)
Push { "next":None, "value":() }
Apply
StoreVar dummy
Push ()
Push "head"
LoadVar dummy
3-ary DictAdd
Push "tail"
LoadVar dummy
DelVar dummy
3-ary DictAdd
Push "hdlock"
Push PC(766)
Push ()
Apply
3-ary DictAdd
Push "tllock"
Push PC(766)
Push ()
Apply
3-ary DictAdd
StoreVar result
Return
Jump 1212
Frame put (q, v)
Push PC(1046)
Push ()
Push "value"
LoadVar v
DelVar v
3-ary DictAdd
Push "next"
Push None
3-ary DictAdd
Apply
StoreVar node
Push PC(782)
LoadVar q
Push "tllock"
Address
Apply
Pop
LoadVar q
Push "tail"
Address
Load
Push "next"
Address
LoadVar node
Store
LoadVar q
Push "tail"
Address
LoadVar node
DelVar node
Store
Push PC(801)
LoadVar q
DelVar q
Push "tllock"
Address
Apply
Pop
Return
Jump 1212
Frame get q
DelVar result
Push PC(782)
LoadVar q
Push "hdlock"
Address
Apply
Pop
LoadVar q
Push "head"
Address
Load
StoreVar dummy
LoadVar dummy
Push "next"
Address
Load
StoreVar node
LoadVar node
Push None
2-ary ==
JumpCond False 1188
DelVar dummy
DelVar node
Push None
StoreVar result
Push PC(801)
LoadVar q
DelVar q
Push "hdlock"
Address
Apply
Pop
Jump 1211
LoadVar node
Push "value"
Address
Load
StoreVar result
LoadVar q
Push "head"
Address
LoadVar node
DelVar node
Store
Push PC(801)
LoadVar q
DelVar q
Push "hdlock"
Address
Apply
Pop
Push PC(1066)
LoadVar dummy
DelVar dummy
Apply
Pop
Return
Return
DelVar result
```

Duration: 0.002082499999999987

---
##  code/abdtest.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store register
Push None
Store register.register
Jump 84
Frame init ()
Return
Jump 84
Frame read uid
DelVar result
DelVar uid
AtomicInc(lazy)
Load register.register
StoreVar result
AtomicDec
Return
Jump 84
Frame write (uid, v)
DelVar uid
AtomicInc(lazy)
LoadVar v
DelVar v
Store register.register
AtomicDec
Return
Jump 84
Frame reader i
Push ()
Push 0
LoadVar i
3-ary DictAdd
Push 1
Push "reads"
3-ary DictAdd
Print
Push PC(9)
LoadVar i
Apply
StoreVar v
Push ()
Push 0
LoadVar i
DelVar i
3-ary DictAdd
Push 1
Push "read"
3-ary DictAdd
Push 2
LoadVar v
DelVar v
3-ary DictAdd
Print
Return
Jump 84
Frame writer i
Push ()
Push 0
LoadVar i
3-ary DictAdd
Push 1
Push "writes"
3-ary DictAdd
Print
Push PC(18)
Push ()
Push 0
LoadVar i
3-ary DictAdd
Push 1
LoadVar i
3-ary DictAdd
Apply
Pop
Push ()
Push 0
LoadVar i
DelVar i
3-ary DictAdd
Push 1
Push "wrote"
3-ary DictAdd
Print
Return
Push PC(6)
Push ()
Apply
Pop
Push { 1, 2 }
StoreVar $s81
LoadVar $s81
1-ary IsEmpty
JumpCond True 100
Cut($s81, i)
Push PC(27)
LoadVar i
DelVar i
Push ()
Spawn
Jump 90
DelVar $s81
Push { 1 }
StoreVar $s92
LoadVar $s92
1-ary IsEmpty
JumpCond True 114
Cut($s92, i)
Push PC(55)
LoadVar i
DelVar i
1-ary -
Push ()
Spawn
Jump 103
DelVar $s92
Return
DelVar result
```

Duration: 0.0020988999999999036

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store register
Push None
Store register.register
Jump 84
Frame init ()
Return
Jump 84
Frame read uid
DelVar result
DelVar uid
AtomicInc(lazy)
Load register.register
StoreVar result
AtomicDec
Return
Jump 84
Frame write (uid, v)
DelVar uid
AtomicInc(lazy)
LoadVar v
DelVar v
Store register.register
AtomicDec
Return
Jump 84
Frame reader i
Push ()
Push 0
LoadVar i
3-ary DictAdd
Push 1
Push "reads"
3-ary DictAdd
Print
Push PC(9)
LoadVar i
Apply
StoreVar v
Push ()
Push 0
LoadVar i
DelVar i
3-ary DictAdd
Push 1
Push "read"
3-ary DictAdd
Push 2
LoadVar v
DelVar v
3-ary DictAdd
Print
Return
Jump 84
Frame writer i
Push ()
Push 0
LoadVar i
3-ary DictAdd
Push 1
Push "writes"
3-ary DictAdd
Print
Push PC(18)
Push ()
Push 0
LoadVar i
3-ary DictAdd
Push 1
LoadVar i
3-ary DictAdd
Apply
Pop
Push ()
Push 0
LoadVar i
DelVar i
3-ary DictAdd
Push 1
Push "wrote"
3-ary DictAdd
Print
Return
Push PC(6)
Push ()
Apply
Pop
Push { 1, 2 }
StoreVar $s81
LoadVar $s81
1-ary IsEmpty
JumpCond True 100
Cut($s81, i)
Push PC(27)
LoadVar i
DelVar i
Push ()
Spawn
Jump 90
DelVar $s81
Push { 1 }
StoreVar $s92
LoadVar $s92
1-ary IsEmpty
JumpCond True 114
Cut($s92, i)
Push PC(55)
LoadVar i
DelVar i
1-ary -
Push ()
Spawn
Jump 103
DelVar $s92
Return
DelVar result
```

Duration: 0.0017167000000000154

---
##  code/locksusp.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store list
Jump 459
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n5
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s8
LoadVar $s8
1-ary IsEmpty
JumpCond True 29
Cut($s8, x)
LoadVar $n5
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n5
Jump 17
DelVar $n5
DelVar $s8
DelVar s
StoreVar result
Return
Jump 459
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 459
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 459
Frame tail s
DelVar result
Push PC(4)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 459
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s65
LoadVar $s65
1-ary IsEmpty
JumpCond True 94
Cut($s65, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 83
DelVar $s65
Return
Jump 459
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s80
LoadVar $s80
1-ary IsEmpty
JumpCond True 111
Cut($s80, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 103
DelVar $s80
StoreVar result
Return
Jump 459
Frame list a
DelVar result
Push 0
StoreVar $n93
Push ()
LoadVar a
DelVar a
StoreVar $s96
LoadVar $s96
1-ary IsEmpty
JumpCond True 133
Cut($s96, v)
LoadVar $n93
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n93
Jump 123
DelVar $n93
DelVar $s96
StoreVar result
Return
Jump 459
Frame values d
DelVar result
Push 0
StoreVar $n111
Push ()
LoadVar d
1-ary keys
StoreVar $s114
LoadVar $s114
1-ary IsEmpty
JumpCond True 158
Cut($s114, k)
LoadVar $n111
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n111
Jump 146
DelVar $n111
DelVar $s114
DelVar d
StoreVar result
Return
Jump 459
Frame items d
DelVar result
Push 0
StoreVar $n132
Push ()
LoadVar d
1-ary keys
StoreVar $s135
LoadVar $s135
1-ary IsEmpty
JumpCond True 190
Cut($s135, k)
LoadVar $n132
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n132
Jump 172
DelVar $n132
DelVar $s135
DelVar d
StoreVar result
Return
Jump 459
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s163
LoadVar $s163
1-ary IsEmpty
JumpCond True 232
Cut($s163, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 205
DelVar $s163
DelVar d
DelVar index
Return
Jump 459
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 247
DelVar a
Push ()
StoreVar result
Jump 322
Push ()
Push 0
Push PC(48)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(57)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n212
Push ()
LoadVar rest
StoreVar $s215
DelVar v
LoadVar $s215
1-ary IsEmpty
JumpCond True 280
Cut($s215, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 265
LoadVar $n212
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n212
Jump 265
DelVar $n212
DelVar $s215
StoreVar lower
Push 0
StoreVar $n231
Push ()
LoadVar rest
DelVar rest
StoreVar $s234
DelVar v
LoadVar $s234
1-ary IsEmpty
JumpCond True 304
Cut($s234, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 289
LoadVar $n231
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n231
Jump 289
DelVar $n231
DelVar $s234
StoreVar higher
Push PC(237)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(237)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 459
Frame sorted d
DelVar result
Push PC(237)
Push PC(115)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 459
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n277
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s280
LoadVar $s280
1-ary IsEmpty
JumpCond True 361
Cut($s280, i)
LoadVar $n277
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n277
Jump 347
DelVar $n277
DelVar $s280
DelVar d
DelVar n
StoreVar result
Return
Jump 459
Frame Lock ()
DelVar result
Push { "acquired":False, "suspended":() }
StoreVar result
Return
Jump 459
Frame acquire lk
AtomicInc(lazy)
LoadVar lk
Push "acquired"
Address
Load
JumpCond False 404
LoadVar lk
Push "suspended"
Address
LoadVar lk
Push "suspended"
Address
Load
1-ary len
Address
Stop
Continue
Pop
ReadonlyInc
AtomicInc(lazy)
LoadVar lk
DelVar lk
Push "acquired"
Address
Load
Assert
AtomicDec
ReadonlyDec
Jump 410
LoadVar lk
DelVar lk
Push "acquired"
Address
Push True
Store
AtomicDec
Return
Jump 459
Frame release lk
AtomicInc(lazy)
ReadonlyInc
AtomicInc(lazy)
LoadVar lk
Push "acquired"
Address
Load
Assert
AtomicDec
ReadonlyDec
LoadVar lk
Push "suspended"
Address
Load
Push ()
2-ary ==
JumpCond False 438
LoadVar lk
DelVar lk
Push "acquired"
Address
Push False
Store
Jump 457
Push ()
Push PC(48)
LoadVar lk
Push "suspended"
Address
Load
Apply
Go
LoadVar lk
Push "suspended"
Address
Push PC(57)
LoadVar lk
DelVar lk
Push "suspended"
Address
Load
Apply
Store
AtomicDec
Return
Return
DelVar result
```

Duration: 0.0015924999999999967

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store list
Jump 459
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n5
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s8
LoadVar $s8
1-ary IsEmpty
JumpCond True 29
Cut($s8, x)
LoadVar $n5
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n5
Jump 17
DelVar $n5
DelVar $s8
DelVar s
StoreVar result
Return
Jump 459
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 459
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 459
Frame tail s
DelVar result
Push PC(4)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 459
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s65
LoadVar $s65
1-ary IsEmpty
JumpCond True 94
Cut($s65, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 83
DelVar $s65
Return
Jump 459
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s80
LoadVar $s80
1-ary IsEmpty
JumpCond True 111
Cut($s80, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 103
DelVar $s80
StoreVar result
Return
Jump 459
Frame list a
DelVar result
Push 0
StoreVar $n93
Push ()
LoadVar a
DelVar a
StoreVar $s96
LoadVar $s96
1-ary IsEmpty
JumpCond True 133
Cut($s96, v)
LoadVar $n93
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n93
Jump 123
DelVar $n93
DelVar $s96
StoreVar result
Return
Jump 459
Frame values d
DelVar result
Push 0
StoreVar $n111
Push ()
LoadVar d
1-ary keys
StoreVar $s114
LoadVar $s114
1-ary IsEmpty
JumpCond True 158
Cut($s114, k)
LoadVar $n111
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n111
Jump 146
DelVar $n111
DelVar $s114
DelVar d
StoreVar result
Return
Jump 459
Frame items d
DelVar result
Push 0
StoreVar $n132
Push ()
LoadVar d
1-ary keys
StoreVar $s135
LoadVar $s135
1-ary IsEmpty
JumpCond True 190
Cut($s135, k)
LoadVar $n132
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n132
Jump 172
DelVar $n132
DelVar $s135
DelVar d
StoreVar result
Return
Jump 459
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s163
LoadVar $s163
1-ary IsEmpty
JumpCond True 232
Cut($s163, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 205
DelVar $s163
DelVar d
DelVar index
Return
Jump 459
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 247
DelVar a
Push ()
StoreVar result
Jump 322
Push ()
Push 0
Push PC(48)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(57)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n212
Push ()
LoadVar rest
StoreVar $s215
DelVar v
LoadVar $s215
1-ary IsEmpty
JumpCond True 280
Cut($s215, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 265
LoadVar $n212
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n212
Jump 265
DelVar $n212
DelVar $s215
StoreVar lower
Push 0
StoreVar $n231
Push ()
LoadVar rest
DelVar rest
StoreVar $s234
DelVar v
LoadVar $s234
1-ary IsEmpty
JumpCond True 304
Cut($s234, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 289
LoadVar $n231
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n231
Jump 289
DelVar $n231
DelVar $s234
StoreVar higher
Push PC(237)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(237)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 459
Frame sorted d
DelVar result
Push PC(237)
Push PC(115)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 459
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n277
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s280
LoadVar $s280
1-ary IsEmpty
JumpCond True 361
Cut($s280, i)
LoadVar $n277
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n277
Jump 347
DelVar $n277
DelVar $s280
DelVar d
DelVar n
StoreVar result
Return
Jump 459
Frame Lock ()
DelVar result
Push { "acquired":False, "suspended":() }
StoreVar result
Return
Jump 459
Frame acquire lk
AtomicInc(lazy)
LoadVar lk
Push "acquired"
Address
Load
JumpCond False 404
LoadVar lk
Push "suspended"
Address
LoadVar lk
Push "suspended"
Address
Load
1-ary len
Address
Stop
Continue
Pop
ReadonlyInc
AtomicInc(lazy)
LoadVar lk
DelVar lk
Push "acquired"
Address
Load
Assert
AtomicDec
ReadonlyDec
Jump 410
LoadVar lk
DelVar lk
Push "acquired"
Address
Push True
Store
AtomicDec
Return
Jump 459
Frame release lk
AtomicInc(lazy)
ReadonlyInc
AtomicInc(lazy)
LoadVar lk
Push "acquired"
Address
Load
Assert
AtomicDec
ReadonlyDec
LoadVar lk
Push "suspended"
Address
Load
Push ()
2-ary ==
JumpCond False 438
LoadVar lk
DelVar lk
Push "acquired"
Address
Push False
Store
Jump 457
Push ()
Push PC(48)
LoadVar lk
Push "suspended"
Address
Load
Apply
Go
LoadVar lk
Push "suspended"
Address
Push PC(57)
LoadVar lk
DelVar lk
Push "suspended"
Address
Load
Apply
Store
AtomicDec
Return
Return
DelVar result
```

Duration: 0.0013385999999999676

---
##  code/2pc1.hny

### Summary

Duration is good: ✅

Output is good: ❌

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Cannot operate on constant ('balance', 'code/2pc1.hny', 16, 21) ErrorToken(line=16, message="Cannot operate on constant ('balance', 'code/2pc1.hny', 16, 21)", column=29, lexeme='-=', filename='code/2pc1.hny', is_eof_error=False)
```

Duration: 0.001488299999999998

### Current Output

```
Phase 1: compile Harmony program to bytecode
Line 16:29 at code/2pc1.hny, Cannot operate on constant ('balance', 'code/2pc1.hny', 16, 21)
```

Duration: 0.001768300000000056

---
##  code/needhamschroeder.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push {}
Store network
Push { "Bob", "Corey", None }
Choose
Store dest
Jump 408
Frame send m
AtomicInc(lazy)
Load network
Push {}
LoadVar m
DelVar m
2-ary SetAdd
2-ary |
Store network
AtomicDec
Return
Jump 408
Frame alice ()
Load dest
Push None
2-ary !=
JumpCond False 99
Push PC(7)
Push ()
Push "dst"
Load dest
3-ary DictAdd
Push "contents"
Push { "initiator":"Alice", "nonce":"nonceA", "type":1 }
3-ary DictAdd
Apply
Pop
AtomicInc(lazy)
ReadonlyInc
Load network
Dup
Push {}
2-ary ==
JumpCond False 45
Pop
ReadonlyDec
AtomicDec
Jump 34
Choose
StoreVar m
LoadVar m
Push "dst"
Apply
Push "Alice"
2-ary ==
JumpCond False 69
LoadVar m
Push "contents"
Apply
Push "type"
Apply
Push 2
2-ary ==
JumpCond False 69
LoadVar m
Push "contents"
Apply
Push "nonce"
Apply
Push "nonceA"
2-ary ==
Jump 70
Push False
JumpCond False 72
Jump 76
DelVar m
ReadonlyDec
AtomicDec
Jump 34
ReadonlyDec
Push PC(7)
Push ()
Push "dst"
Load dest
3-ary DictAdd
Push "contents"
Push ()
Push "type"
Push 3
3-ary DictAdd
Push "nonce"
LoadVar m
DelVar m
Push "contents"
Apply
Push "nonce2"
Apply
3-ary DictAdd
3-ary DictAdd
Apply
Pop
AtomicDec
Return
Jump 408
Frame bob ()
AtomicInc(lazy)
ReadonlyInc
Load network
Dup
Push {}
2-ary ==
JumpCond False 113
Pop
ReadonlyDec
AtomicDec
Jump 102
Choose
StoreVar m
LoadVar m
Push "dst"
Apply
Push "Bob"
2-ary ==
JumpCond False 137
LoadVar m
Push "contents"
Apply
Push "type"
Apply
Push 1
2-ary ==
JumpCond False 137
LoadVar m
Push "contents"
Apply
Push "initiator"
Apply
Push "Alice"
2-ary ==
Jump 138
Push False
JumpCond False 140
Jump 144
DelVar m
ReadonlyDec
AtomicDec
Jump 102
ReadonlyDec
Push PC(7)
Push ()
Push "dst"
Push "Alice"
3-ary DictAdd
Push "contents"
Push ()
Push "type"
Push 2
3-ary DictAdd
Push "nonce"
LoadVar m
DelVar m
Push "contents"
Apply
Push "nonce"
Apply
3-ary DictAdd
Push "nonce2"
Push "nonceB"
3-ary DictAdd
3-ary DictAdd
Apply
Pop
AtomicDec
AtomicInc(lazy)
ReadonlyInc
Load network
Dup
Push {}
2-ary ==
JumpCond False 181
Pop
ReadonlyDec
AtomicDec
Jump 170
Choose
StoreVar m
LoadVar m
Push "dst"
Apply
Push "Bob"
2-ary ==
JumpCond False 206
LoadVar m
Push "contents"
Apply
Push "type"
Apply
Push 3
2-ary ==
JumpCond False 206
LoadVar m
DelVar m
Push "contents"
Apply
Push "nonce"
Apply
Push "nonceB"
2-ary ==
Jump 208
DelVar m
Push False
JumpCond False 210
Jump 213
ReadonlyDec
AtomicDec
Jump 170
ReadonlyDec
ReadonlyInc
AtomicInc(lazy)
Load dest
Push "Bob"
2-ary ==
Assert
AtomicDec
ReadonlyDec
AtomicDec
Return
Jump 408
Frame corey ()
Push [{}, { "nonceC" }, {}]
StoreVar (received, nonces, msgs)
Push True
JumpCond False 404
AtomicInc(lazy)
ReadonlyInc
Load network
LoadVar received
2-ary -
Dup
Push {}
2-ary ==
JumpCond False 243
Pop
ReadonlyDec
AtomicDec
Jump 230
Choose
StoreVar m
LoadVar m
Push "dst"
Apply
Push "Corey"
2-ary ==
JumpCond False 252
Jump 256
DelVar m
ReadonlyDec
AtomicDec
Jump 230
ReadonlyDec
LoadVar received
DelVar received
Push {}
LoadVar m
2-ary SetAdd
2-ary |
StoreVar received
LoadVar nonces
DelVar nonces
Push {}
LoadVar m
Push "contents"
Apply
Push "nonce"
Apply
2-ary SetAdd
2-ary |
StoreVar nonces
LoadVar m
Push "contents"
Apply
Push "type"
Apply
Push 2
2-ary ==
JumpCond False 295
LoadVar nonces
DelVar nonces
Push {}
LoadVar m
DelVar m
Push "contents"
Apply
Push "nonce2"
Apply
2-ary SetAdd
2-ary |
StoreVar nonces
DelVar m
Push { "Alice", "Bob" }
StoreVar $s283
LoadVar $s283
1-ary IsEmpty
JumpCond True 394
Cut($s283, dst)
LoadVar nonces
StoreVar $s289
LoadVar $s289
1-ary IsEmpty
JumpCond True 391
Cut($s289, n)
LoadVar msgs
DelVar msgs
Push {}
Push { "Alice", "Bob" }
StoreVar $s297
LoadVar $s297
1-ary IsEmpty
JumpCond True 336
Cut($s297, ini)
Push ()
Push "dst"
LoadVar dst
3-ary DictAdd
Push "contents"
Push ()
Push "type"
Push 1
3-ary DictAdd
Push "nonce"
LoadVar n
3-ary DictAdd
Push "initiator"
LoadVar ini
DelVar ini
3-ary DictAdd
3-ary DictAdd
2-ary SetAdd
Jump 313
DelVar $s297
2-ary |
StoreVar msgs
LoadVar msgs
DelVar msgs
Push {}
LoadVar nonces
StoreVar $s325
LoadVar $s325
1-ary IsEmpty
JumpCond True 367
Cut($s325, n2)
Push ()
Push "dst"
LoadVar dst
3-ary DictAdd
Push "contents"
Push ()
Push "type"
Push 2
3-ary DictAdd
Push "nonce"
LoadVar n
3-ary DictAdd
Push "nonce2"
LoadVar n2
DelVar n2
3-ary DictAdd
3-ary DictAdd
2-ary SetAdd
Jump 344
DelVar $s325
2-ary |
StoreVar msgs
LoadVar msgs
DelVar msgs
Push {}
Push ()
Push "dst"
LoadVar dst
3-ary DictAdd
Push "contents"
Push ()
Push "type"
Push 3
3-ary DictAdd
Push "nonce"
LoadVar n
DelVar n
3-ary DictAdd
3-ary DictAdd
2-ary SetAdd
2-ary |
StoreVar msgs
Jump 304
DelVar $s289
DelVar dst
Jump 298
DelVar $s283
Push PC(7)
LoadVar msgs
Load network
2-ary -
Choose
Apply
Pop
AtomicDec
Jump 228
DelVar msgs
DelVar nonces
DelVar received
Return
Push PC(19)
Push ()
Push ()
Spawn
Push PC(101)
Push ()
Push ()
Spawn
Push PC(225)
Push ()
Push ()
Spawn
Return
DelVar result
```

Duration: 0.001638999999999946

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push {}
Store network
Push { "Bob", "Corey", None }
Choose
Store dest
Jump 408
Frame send m
AtomicInc(lazy)
Load network
Push {}
LoadVar m
DelVar m
2-ary SetAdd
2-ary |
Store network
AtomicDec
Return
Jump 408
Frame alice ()
Load dest
Push None
2-ary !=
JumpCond False 99
Push PC(7)
Push ()
Push "dst"
Load dest
3-ary DictAdd
Push "contents"
Push { "initiator":"Alice", "nonce":"nonceA", "type":1 }
3-ary DictAdd
Apply
Pop
AtomicInc(lazy)
ReadonlyInc
Load network
Dup
Push {}
2-ary ==
JumpCond False 45
Pop
ReadonlyDec
AtomicDec
Jump 34
Choose
StoreVar m
LoadVar m
Push "dst"
Apply
Push "Alice"
2-ary ==
JumpCond False 69
LoadVar m
Push "contents"
Apply
Push "type"
Apply
Push 2
2-ary ==
JumpCond False 69
LoadVar m
Push "contents"
Apply
Push "nonce"
Apply
Push "nonceA"
2-ary ==
Jump 70
Push False
JumpCond False 72
Jump 76
DelVar m
ReadonlyDec
AtomicDec
Jump 34
ReadonlyDec
Push PC(7)
Push ()
Push "dst"
Load dest
3-ary DictAdd
Push "contents"
Push ()
Push "type"
Push 3
3-ary DictAdd
Push "nonce"
LoadVar m
DelVar m
Push "contents"
Apply
Push "nonce2"
Apply
3-ary DictAdd
3-ary DictAdd
Apply
Pop
AtomicDec
Return
Jump 408
Frame bob ()
AtomicInc(lazy)
ReadonlyInc
Load network
Dup
Push {}
2-ary ==
JumpCond False 113
Pop
ReadonlyDec
AtomicDec
Jump 102
Choose
StoreVar m
LoadVar m
Push "dst"
Apply
Push "Bob"
2-ary ==
JumpCond False 137
LoadVar m
Push "contents"
Apply
Push "type"
Apply
Push 1
2-ary ==
JumpCond False 137
LoadVar m
Push "contents"
Apply
Push "initiator"
Apply
Push "Alice"
2-ary ==
Jump 138
Push False
JumpCond False 140
Jump 144
DelVar m
ReadonlyDec
AtomicDec
Jump 102
ReadonlyDec
Push PC(7)
Push ()
Push "dst"
Push "Alice"
3-ary DictAdd
Push "contents"
Push ()
Push "type"
Push 2
3-ary DictAdd
Push "nonce"
LoadVar m
DelVar m
Push "contents"
Apply
Push "nonce"
Apply
3-ary DictAdd
Push "nonce2"
Push "nonceB"
3-ary DictAdd
3-ary DictAdd
Apply
Pop
AtomicDec
AtomicInc(lazy)
ReadonlyInc
Load network
Dup
Push {}
2-ary ==
JumpCond False 181
Pop
ReadonlyDec
AtomicDec
Jump 170
Choose
StoreVar m
LoadVar m
Push "dst"
Apply
Push "Bob"
2-ary ==
JumpCond False 206
LoadVar m
Push "contents"
Apply
Push "type"
Apply
Push 3
2-ary ==
JumpCond False 206
LoadVar m
DelVar m
Push "contents"
Apply
Push "nonce"
Apply
Push "nonceB"
2-ary ==
Jump 208
DelVar m
Push False
JumpCond False 210
Jump 213
ReadonlyDec
AtomicDec
Jump 170
ReadonlyDec
ReadonlyInc
AtomicInc(lazy)
Load dest
Push "Bob"
2-ary ==
Assert
AtomicDec
ReadonlyDec
AtomicDec
Return
Jump 408
Frame corey ()
Push [{}, { "nonceC" }, {}]
StoreVar (received, nonces, msgs)
Push True
JumpCond False 404
AtomicInc(lazy)
ReadonlyInc
Load network
LoadVar received
2-ary -
Dup
Push {}
2-ary ==
JumpCond False 243
Pop
ReadonlyDec
AtomicDec
Jump 230
Choose
StoreVar m
LoadVar m
Push "dst"
Apply
Push "Corey"
2-ary ==
JumpCond False 252
Jump 256
DelVar m
ReadonlyDec
AtomicDec
Jump 230
ReadonlyDec
LoadVar received
DelVar received
Push {}
LoadVar m
2-ary SetAdd
2-ary |
StoreVar received
LoadVar nonces
DelVar nonces
Push {}
LoadVar m
Push "contents"
Apply
Push "nonce"
Apply
2-ary SetAdd
2-ary |
StoreVar nonces
LoadVar m
Push "contents"
Apply
Push "type"
Apply
Push 2
2-ary ==
JumpCond False 295
LoadVar nonces
DelVar nonces
Push {}
LoadVar m
DelVar m
Push "contents"
Apply
Push "nonce2"
Apply
2-ary SetAdd
2-ary |
StoreVar nonces
DelVar m
Push { "Alice", "Bob" }
StoreVar $s283
LoadVar $s283
1-ary IsEmpty
JumpCond True 394
Cut($s283, dst)
LoadVar nonces
StoreVar $s289
LoadVar $s289
1-ary IsEmpty
JumpCond True 391
Cut($s289, n)
LoadVar msgs
DelVar msgs
Push {}
Push { "Alice", "Bob" }
StoreVar $s297
LoadVar $s297
1-ary IsEmpty
JumpCond True 336
Cut($s297, ini)
Push ()
Push "dst"
LoadVar dst
3-ary DictAdd
Push "contents"
Push ()
Push "type"
Push 1
3-ary DictAdd
Push "nonce"
LoadVar n
3-ary DictAdd
Push "initiator"
LoadVar ini
DelVar ini
3-ary DictAdd
3-ary DictAdd
2-ary SetAdd
Jump 313
DelVar $s297
2-ary |
StoreVar msgs
LoadVar msgs
DelVar msgs
Push {}
LoadVar nonces
StoreVar $s325
LoadVar $s325
1-ary IsEmpty
JumpCond True 367
Cut($s325, n2)
Push ()
Push "dst"
LoadVar dst
3-ary DictAdd
Push "contents"
Push ()
Push "type"
Push 2
3-ary DictAdd
Push "nonce"
LoadVar n
3-ary DictAdd
Push "nonce2"
LoadVar n2
DelVar n2
3-ary DictAdd
3-ary DictAdd
2-ary SetAdd
Jump 344
DelVar $s325
2-ary |
StoreVar msgs
LoadVar msgs
DelVar msgs
Push {}
Push ()
Push "dst"
LoadVar dst
3-ary DictAdd
Push "contents"
Push ()
Push "type"
Push 3
3-ary DictAdd
Push "nonce"
LoadVar n
DelVar n
3-ary DictAdd
3-ary DictAdd
2-ary SetAdd
2-ary |
StoreVar msgs
Jump 304
DelVar $s289
DelVar dst
Jump 298
DelVar $s283
Push PC(7)
LoadVar msgs
Load network
2-ary -
Choose
Apply
Pop
AtomicDec
Jump 228
DelVar msgs
DelVar nonces
DelVar received
Return
Push PC(19)
Push ()
Push ()
Spawn
Push PC(101)
Push ()
Push ()
Spawn
Push PC(225)
Push ()
Push ()
Spawn
Return
DelVar result
```

Duration: 0.0015315999999999663

---
##  code/linkedlist.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store synch
Push ()
Store list
Jump 369
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 369
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 369
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 369
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 369
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 369
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 369
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 369
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 369
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 369
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 369
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 369
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 369
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Push ()
Store bag
Jump 1039
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1039
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s311
LoadVar $s311
1-ary IsEmpty
JumpCond True 393
Cut($s311, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 384
DelVar $s311
StoreVar result
Return
Jump 1039
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s327
LoadVar $s327
1-ary IsEmpty
JumpCond True 430
Cut($s327, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 423
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 404
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 404
DelVar $s327
Return
Jump 1039
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 456
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 460
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1039
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s391
LoadVar $s391
1-ary IsEmpty
JumpCond True 489
Cut($s391, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 478
DelVar $s391
Return
Jump 1039
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1039
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1039
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1039
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 566
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 572
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1039
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 599
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 600
Push False
JumpCond False 609
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 620
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1039
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 638
DelVar bg
DelVar k
Push {}
Push PC(372)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 723
Push PC(462)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 652
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 723
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 664
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 723
Push PC(492)
LoadVar bg
Apply
StoreVar hd
Push PC(574)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(623)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s568
LoadVar $s568
1-ary IsEmpty
JumpCond True 708
Cut($s568, x)
Push PC(537)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 692
DelVar $s568
DelVar hd
Push PC(623)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1039
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1039
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 754
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1039
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1039
Frame Lock ()
DelVar result
Push PC(759)
Push False
Apply
StoreVar result
Return
Jump 1039
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1039
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 790
Jump 793
ReadonlyDec
AtomicDec
Jump 783
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1039
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1039
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1039
Frame Condition ()
DelVar result
Push PC(372)
Push ()
Apply
StoreVar result
Return
Jump 1039
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(537)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 887
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 888
Push False
JumpCond False 893
DelVar c
DelVar cnt
DelVar ctx
Jump 896
ReadonlyDec
AtomicDec
Jump 868
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1039
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(372)
Push ()
Apply
2-ary !=
JumpCond False 929
LoadVar c
Push PC(574)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(519)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1039
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(372)
Push ()
Apply
Store
AtomicDec
Return
Jump 1039
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1039
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 960
Jump 963
ReadonlyDec
AtomicDec
Jump 952
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1039
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1039
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1039
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1002
Jump 1005
ReadonlyDec
AtomicDec
Jump 993
ReadonlyDec
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1039
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Push ()
Store alloc
Push ()
Store alloc.pool
Push 0
Store alloc.next
Jump 1359
Frame malloc v
DelVar result
AtomicInc(lazy)
Push ?alloc"pool"
Load alloc.next
Address
LoadVar v
DelVar v
Store
Push ?alloc"pool"
Load alloc.next
Address
StoreVar result
Load alloc.next
Push 1
2-ary +
Store alloc.next
AtomicDec
Return
Jump 1359
Frame free r
AtomicInc(lazy)
LoadVar r
DelVar r
Del
AtomicDec
Return
Jump 1359
Frame leak_check ()
ReadonlyInc
AtomicInc(lazy)
Load alloc.pool
Push ()
2-ary ==
Push "alloc_leak"
Assert2
AtomicDec
ReadonlyDec
Return
Jump 1359
Frame _node (v, n)
DelVar result
Push PC(1046)
Push ()
Push "lock"
Push PC(766)
Push ()
Apply
3-ary DictAdd
Push "value"
Push ()
Push 0
Push 0
3-ary DictAdd
Push 1
LoadVar v
DelVar v
3-ary DictAdd
3-ary DictAdd
Push "next"
LoadVar n
DelVar n
3-ary DictAdd
Apply
StoreVar result
Return
Jump 1359
Frame _find (lst, v)
DelVar result
LoadVar lst
DelVar lst
StoreVar before
Push PC(782)
LoadVar before
Push "lock"
Address
Apply
Pop
LoadVar before
Push "next"
Address
Load
StoreVar after
Push PC(782)
LoadVar after
Push "lock"
Address
Apply
Pop
LoadVar after
Push "value"
Address
Load
Push ()
Push 0
Push 0
3-ary DictAdd
Push 1
LoadVar v
3-ary DictAdd
2-ary <
JumpCond False 1170
Push PC(801)
LoadVar before
DelVar before
Push "lock"
Address
Apply
Pop
LoadVar after
DelVar after
StoreVar before
LoadVar before
Push "next"
Address
Load
StoreVar after
Push PC(782)
LoadVar after
Push "lock"
Address
Apply
Pop
Jump 1135
DelVar v
Push ()
Push 0
LoadVar before
DelVar before
3-ary DictAdd
Push 1
LoadVar after
DelVar after
3-ary DictAdd
StoreVar result
Return
Jump 1359
Frame SetObject ()
DelVar result
Push PC(1086)
Push ()
Push 0
Push [-1, None]
3-ary DictAdd
Push 1
Push PC(1086)
Push [[1, None], None]
Apply
3-ary DictAdd
Apply
StoreVar result
Return
Jump 1359
Frame insert (lst, v)
Push PC(1113)
Push ()
Push 0
LoadVar lst
DelVar lst
3-ary DictAdd
Push 1
LoadVar v
3-ary DictAdd
Apply
StoreVar (before, after)
LoadVar after
Push "value"
Address
Load
Push ()
Push 0
Push 0
3-ary DictAdd
Push 1
LoadVar v
3-ary DictAdd
2-ary !=
JumpCond False 1238
LoadVar before
Push "next"
Address
Push PC(1086)
Push ()
Push 0
LoadVar v
DelVar v
3-ary DictAdd
Push 1
LoadVar after
3-ary DictAdd
Apply
Store
DelVar v
Push PC(801)
LoadVar after
DelVar after
Push "lock"
Address
Apply
Pop
Push PC(801)
LoadVar before
DelVar before
Push "lock"
Address
Apply
Pop
Return
Jump 1359
Frame remove (lst, v)
Push PC(1113)
Push ()
Push 0
LoadVar lst
DelVar lst
3-ary DictAdd
Push 1
LoadVar v
3-ary DictAdd
Apply
StoreVar (before, after)
LoadVar after
Push "value"
Address
Load
Push ()
Push 0
Push 0
3-ary DictAdd
Push 1
LoadVar v
DelVar v
3-ary DictAdd
2-ary ==
JumpCond False 1301
LoadVar before
Push "next"
Address
LoadVar after
Push "next"
Address
Load
Store
Push PC(801)
LoadVar after
Push "lock"
Address
Apply
Pop
Push PC(1066)
LoadVar after
DelVar after
Apply
Pop
Jump 1308
Push PC(801)
LoadVar after
DelVar after
Push "lock"
Address
Apply
Pop
Push PC(801)
LoadVar before
DelVar before
Push "lock"
Address
Apply
Pop
Return
Jump 1359
Frame contains (lst, v)
DelVar result
Push PC(1113)
Push ()
Push 0
LoadVar lst
DelVar lst
3-ary DictAdd
Push 1
LoadVar v
3-ary DictAdd
Apply
StoreVar (before, after)
LoadVar after
Push "value"
Address
Load
Push ()
Push 0
Push 0
3-ary DictAdd
Push 1
LoadVar v
DelVar v
3-ary DictAdd
2-ary ==
StoreVar result
Push PC(801)
LoadVar after
DelVar after
Push "lock"
Address
Apply
Pop
Push PC(801)
LoadVar before
DelVar before
Push "lock"
Address
Apply
Pop
Return
Return
DelVar result
```

Duration: 0.0014815999999999718

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store synch
Push ()
Store list
Jump 369
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 369
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 369
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 369
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 369
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 369
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 369
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 369
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 369
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 369
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 369
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 369
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 369
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Push ()
Store bag
Jump 1039
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1039
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s311
LoadVar $s311
1-ary IsEmpty
JumpCond True 393
Cut($s311, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 384
DelVar $s311
StoreVar result
Return
Jump 1039
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s327
LoadVar $s327
1-ary IsEmpty
JumpCond True 430
Cut($s327, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 423
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 404
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 404
DelVar $s327
Return
Jump 1039
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 456
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 460
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1039
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s391
LoadVar $s391
1-ary IsEmpty
JumpCond True 489
Cut($s391, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 478
DelVar $s391
Return
Jump 1039
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1039
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1039
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1039
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 566
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 572
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1039
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 599
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 600
Push False
JumpCond False 609
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 620
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1039
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 638
DelVar bg
DelVar k
Push {}
Push PC(372)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 723
Push PC(462)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 652
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 723
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 664
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 723
Push PC(492)
LoadVar bg
Apply
StoreVar hd
Push PC(574)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(623)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s568
LoadVar $s568
1-ary IsEmpty
JumpCond True 708
Cut($s568, x)
Push PC(537)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 692
DelVar $s568
DelVar hd
Push PC(623)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1039
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1039
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 754
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1039
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1039
Frame Lock ()
DelVar result
Push PC(759)
Push False
Apply
StoreVar result
Return
Jump 1039
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1039
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 790
Jump 793
ReadonlyDec
AtomicDec
Jump 783
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1039
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1039
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1039
Frame Condition ()
DelVar result
Push PC(372)
Push ()
Apply
StoreVar result
Return
Jump 1039
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(537)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 887
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 888
Push False
JumpCond False 893
DelVar c
DelVar cnt
DelVar ctx
Jump 896
ReadonlyDec
AtomicDec
Jump 868
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1039
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(372)
Push ()
Apply
2-ary !=
JumpCond False 929
LoadVar c
Push PC(574)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(519)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1039
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(372)
Push ()
Apply
Store
AtomicDec
Return
Jump 1039
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1039
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 960
Jump 963
ReadonlyDec
AtomicDec
Jump 952
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1039
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1039
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1039
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1002
Jump 1005
ReadonlyDec
AtomicDec
Jump 993
ReadonlyDec
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1039
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Push ()
Store alloc
Push ()
Store alloc.pool
Push 0
Store alloc.next
Jump 1359
Frame malloc v
DelVar result
AtomicInc(lazy)
Push ?alloc"pool"
Load alloc.next
Address
LoadVar v
DelVar v
Store
Push ?alloc"pool"
Load alloc.next
Address
StoreVar result
Load alloc.next
Push 1
2-ary +
Store alloc.next
AtomicDec
Return
Jump 1359
Frame free r
AtomicInc(lazy)
LoadVar r
DelVar r
Del
AtomicDec
Return
Jump 1359
Frame leak_check ()
ReadonlyInc
AtomicInc(lazy)
Load alloc.pool
Push ()
2-ary ==
Push "alloc_leak"
Assert2
AtomicDec
ReadonlyDec
Return
Jump 1359
Frame _node (v, n)
DelVar result
Push PC(1046)
Push ()
Push "lock"
Push PC(766)
Push ()
Apply
3-ary DictAdd
Push "value"
Push ()
Push 0
Push 0
3-ary DictAdd
Push 1
LoadVar v
DelVar v
3-ary DictAdd
3-ary DictAdd
Push "next"
LoadVar n
DelVar n
3-ary DictAdd
Apply
StoreVar result
Return
Jump 1359
Frame _find (lst, v)
DelVar result
LoadVar lst
DelVar lst
StoreVar before
Push PC(782)
LoadVar before
Push "lock"
Address
Apply
Pop
LoadVar before
Push "next"
Address
Load
StoreVar after
Push PC(782)
LoadVar after
Push "lock"
Address
Apply
Pop
LoadVar after
Push "value"
Address
Load
Push ()
Push 0
Push 0
3-ary DictAdd
Push 1
LoadVar v
3-ary DictAdd
2-ary <
JumpCond False 1170
Push PC(801)
LoadVar before
DelVar before
Push "lock"
Address
Apply
Pop
LoadVar after
DelVar after
StoreVar before
LoadVar before
Push "next"
Address
Load
StoreVar after
Push PC(782)
LoadVar after
Push "lock"
Address
Apply
Pop
Jump 1135
DelVar v
Push ()
Push 0
LoadVar before
DelVar before
3-ary DictAdd
Push 1
LoadVar after
DelVar after
3-ary DictAdd
StoreVar result
Return
Jump 1359
Frame SetObject ()
DelVar result
Push PC(1086)
Push ()
Push 0
Push [-1, None]
3-ary DictAdd
Push 1
Push PC(1086)
Push [[1, None], None]
Apply
3-ary DictAdd
Apply
StoreVar result
Return
Jump 1359
Frame insert (lst, v)
Push PC(1113)
Push ()
Push 0
LoadVar lst
DelVar lst
3-ary DictAdd
Push 1
LoadVar v
3-ary DictAdd
Apply
StoreVar (before, after)
LoadVar after
Push "value"
Address
Load
Push ()
Push 0
Push 0
3-ary DictAdd
Push 1
LoadVar v
3-ary DictAdd
2-ary !=
JumpCond False 1238
LoadVar before
Push "next"
Address
Push PC(1086)
Push ()
Push 0
LoadVar v
DelVar v
3-ary DictAdd
Push 1
LoadVar after
3-ary DictAdd
Apply
Store
DelVar v
Push PC(801)
LoadVar after
DelVar after
Push "lock"
Address
Apply
Pop
Push PC(801)
LoadVar before
DelVar before
Push "lock"
Address
Apply
Pop
Return
Jump 1359
Frame remove (lst, v)
Push PC(1113)
Push ()
Push 0
LoadVar lst
DelVar lst
3-ary DictAdd
Push 1
LoadVar v
3-ary DictAdd
Apply
StoreVar (before, after)
LoadVar after
Push "value"
Address
Load
Push ()
Push 0
Push 0
3-ary DictAdd
Push 1
LoadVar v
DelVar v
3-ary DictAdd
2-ary ==
JumpCond False 1301
LoadVar before
Push "next"
Address
LoadVar after
Push "next"
Address
Load
Store
Push PC(801)
LoadVar after
Push "lock"
Address
Apply
Pop
Push PC(1066)
LoadVar after
DelVar after
Apply
Pop
Jump 1308
Push PC(801)
LoadVar after
DelVar after
Push "lock"
Address
Apply
Pop
Push PC(801)
LoadVar before
DelVar before
Push "lock"
Address
Apply
Pop
Return
Jump 1359
Frame contains (lst, v)
DelVar result
Push PC(1113)
Push ()
Push 0
LoadVar lst
DelVar lst
3-ary DictAdd
Push 1
LoadVar v
3-ary DictAdd
Apply
StoreVar (before, after)
LoadVar after
Push "value"
Address
Load
Push ()
Push 0
Push 0
3-ary DictAdd
Push 1
LoadVar v
DelVar v
3-ary DictAdd
2-ary ==
StoreVar result
Push PC(801)
LoadVar after
DelVar after
Push "lock"
Address
Apply
Pop
Push PC(801)
LoadVar before
DelVar before
Push "lock"
Address
Apply
Pop
Return
Return
DelVar result
```

Duration: 0.0018856000000000428

---
##  code/barriertest2.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store barrier
Push ()
Store synch
Push ()
Store list
Jump 371
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n9
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s12
LoadVar $s12
1-ary IsEmpty
JumpCond True 33
Cut($s12, x)
LoadVar $n9
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n9
Jump 21
DelVar $n9
DelVar $s12
DelVar s
StoreVar result
Return
Jump 371
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 371
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 371
Frame tail s
DelVar result
Push PC(8)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 371
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s69
LoadVar $s69
1-ary IsEmpty
JumpCond True 98
Cut($s69, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 87
DelVar $s69
Return
Jump 371
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s84
LoadVar $s84
1-ary IsEmpty
JumpCond True 115
Cut($s84, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 107
DelVar $s84
StoreVar result
Return
Jump 371
Frame list a
DelVar result
Push 0
StoreVar $n97
Push ()
LoadVar a
DelVar a
StoreVar $s100
LoadVar $s100
1-ary IsEmpty
JumpCond True 137
Cut($s100, v)
LoadVar $n97
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n97
Jump 127
DelVar $n97
DelVar $s100
StoreVar result
Return
Jump 371
Frame values d
DelVar result
Push 0
StoreVar $n115
Push ()
LoadVar d
1-ary keys
StoreVar $s118
LoadVar $s118
1-ary IsEmpty
JumpCond True 162
Cut($s118, k)
LoadVar $n115
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n115
Jump 150
DelVar $n115
DelVar $s118
DelVar d
StoreVar result
Return
Jump 371
Frame items d
DelVar result
Push 0
StoreVar $n136
Push ()
LoadVar d
1-ary keys
StoreVar $s139
LoadVar $s139
1-ary IsEmpty
JumpCond True 194
Cut($s139, k)
LoadVar $n136
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n136
Jump 176
DelVar $n136
DelVar $s139
DelVar d
StoreVar result
Return
Jump 371
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s167
LoadVar $s167
1-ary IsEmpty
JumpCond True 236
Cut($s167, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 209
DelVar $s167
DelVar d
DelVar index
Return
Jump 371
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 251
DelVar a
Push ()
StoreVar result
Jump 326
Push ()
Push 0
Push PC(52)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(61)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n216
Push ()
LoadVar rest
StoreVar $s219
DelVar v
LoadVar $s219
1-ary IsEmpty
JumpCond True 284
Cut($s219, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 269
LoadVar $n216
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n216
Jump 269
DelVar $n216
DelVar $s219
StoreVar lower
Push 0
StoreVar $n235
Push ()
LoadVar rest
DelVar rest
StoreVar $s238
DelVar v
LoadVar $s238
1-ary IsEmpty
JumpCond True 308
Cut($s238, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 293
LoadVar $n235
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n235
Jump 293
DelVar $n235
DelVar $s238
StoreVar higher
Push PC(241)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(241)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 371
Frame sorted d
DelVar result
Push PC(241)
Push PC(119)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 371
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n281
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s284
LoadVar $s284
1-ary IsEmpty
JumpCond True 365
Cut($s284, i)
LoadVar $n281
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n281
Jump 351
DelVar $n281
DelVar $s284
DelVar d
DelVar n
StoreVar result
Return
Push ()
Store bag
Jump 1153
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1153
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s313
LoadVar $s313
1-ary IsEmpty
JumpCond True 395
Cut($s313, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 386
DelVar $s313
StoreVar result
Return
Jump 1153
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s329
LoadVar $s329
1-ary IsEmpty
JumpCond True 432
Cut($s329, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 425
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 406
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 406
DelVar $s329
Return
Jump 1153
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 458
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 462
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1153
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s393
LoadVar $s393
1-ary IsEmpty
JumpCond True 491
Cut($s393, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 480
DelVar $s393
Return
Jump 1153
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1153
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1153
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1153
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 568
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 574
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1153
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 601
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 602
Push False
JumpCond False 611
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 622
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1153
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 640
DelVar bg
DelVar k
Push {}
Push PC(374)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 725
Push PC(464)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 654
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 725
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 666
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 725
Push PC(494)
LoadVar bg
Apply
StoreVar hd
Push PC(576)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(625)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s570
LoadVar $s570
1-ary IsEmpty
JumpCond True 710
Cut($s570, x)
Push PC(539)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 694
DelVar $s570
DelVar hd
Push PC(625)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1153
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1153
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 756
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1153
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1153
Frame Lock ()
DelVar result
Push PC(761)
Push False
Apply
StoreVar result
Return
Jump 1153
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1153
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 792
Jump 795
ReadonlyDec
AtomicDec
Jump 785
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1153
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1153
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1153
Frame Condition ()
DelVar result
Push PC(374)
Push ()
Apply
StoreVar result
Return
Jump 1153
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(435)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(539)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 889
Push PC(435)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 890
Push False
JumpCond False 895
DelVar c
DelVar cnt
DelVar ctx
Jump 898
ReadonlyDec
AtomicDec
Jump 870
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1153
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(374)
Push ()
Apply
2-ary !=
JumpCond False 931
LoadVar c
Push PC(576)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(521)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1153
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(374)
Push ()
Apply
Store
AtomicDec
Return
Jump 1153
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1153
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 962
Jump 965
ReadonlyDec
AtomicDec
Jump 954
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1153
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1153
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1153
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1004
Jump 1007
ReadonlyDec
AtomicDec
Jump 995
ReadonlyDec
Push PC(52)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(61)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1153
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(39)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Jump 1153
Frame Barrier required
DelVar result
Push ()
Push "mutex"
Push PC(768)
Push ()
Apply
3-ary DictAdd
Push "cond"
Push PC(827)
Push ()
Apply
3-ary DictAdd
Push "required"
LoadVar required
3-ary DictAdd
Push "left"
LoadVar required
DelVar required
3-ary DictAdd
Push "cycle"
Push 0
3-ary DictAdd
StoreVar result
Return
Jump 1153
Frame bwait b
Push PC(784)
LoadVar b
Push "mutex"
Address
Apply
Pop
LoadVar b
Push "left"
Address
Dup
Load
Push 1
2-ary -
Store
LoadVar b
Push "left"
Address
Load
Push 0
2-ary ==
JumpCond False 1117
LoadVar b
Push "cycle"
Address
LoadVar b
Push "cycle"
Address
Load
Push 1
2-ary +
Push 2
2-ary %
Store
LoadVar b
Push "left"
Address
LoadVar b
Push "required"
Address
Load
Store
Push PC(935)
LoadVar b
Push "cond"
Address
Apply
Pop
Jump 1144
LoadVar b
Push "cycle"
Address
Load
StoreVar cycle
LoadVar b
Push "cycle"
Address
Load
LoadVar cycle
2-ary ==
JumpCond False 1144
Push PC(835)
Push ()
Push 0
LoadVar b
Push "cond"
Address
3-ary DictAdd
Push 1
LoadVar b
Push "mutex"
Address
3-ary DictAdd
Apply
Pop
Jump 1122
DelVar cycle
Push PC(803)
LoadVar b
DelVar b
Push "mutex"
Address
Apply
Pop
Return
Push [0, 0, 0]
Store round
Invariant 1164
Load round
1-ary max
Load round
1-ary min
2-ary -
Push 1
2-ary <=
Continue
Return
Push 0
Store phase
Push PC(1042)
Push 3
Apply
Store barr
Jump 1219
Frame thread self
Push { 0, 1, 2, 3 }
StoreVar $s1017
LoadVar $s1017
1-ary IsEmpty
JumpCond True 1216
Cut($s1017, r)
DelVar r
LoadVar self
Push 0
2-ary ==
JumpCond False 1188
Load phase
Push 1
2-ary +
Store phase
Push PC(1068)
Push ?barr
Apply
Pop
Push ?round
LoadVar self
Address
Dup
Load
Push 1
2-ary +
Store
ReadonlyInc
AtomicInc(lazy)
Push ?round
LoadVar self
Address
Load
Load phase
2-ary ==
Assert
AtomicDec
ReadonlyDec
Push PC(1068)
Push ?barr
Apply
Pop
Jump 1175
DelVar $s1017
DelVar self
Return
Push { 0, 1, 2 }
StoreVar $s1060
LoadVar $s1060
1-ary IsEmpty
JumpCond True 1231
Cut($s1060, i)
Push PC(1172)
LoadVar i
DelVar i
Push ()
Spawn
Jump 1221
DelVar $s1060
Return
DelVar result
```

Duration: 0.0016743000000000174

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store barrier
Push ()
Store synch
Push ()
Store list
Jump 371
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n9
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s12
LoadVar $s12
1-ary IsEmpty
JumpCond True 33
Cut($s12, x)
LoadVar $n9
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n9
Jump 21
DelVar $n9
DelVar $s12
DelVar s
StoreVar result
Return
Jump 371
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 371
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 371
Frame tail s
DelVar result
Push PC(8)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 371
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s69
LoadVar $s69
1-ary IsEmpty
JumpCond True 98
Cut($s69, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 87
DelVar $s69
Return
Jump 371
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s84
LoadVar $s84
1-ary IsEmpty
JumpCond True 115
Cut($s84, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 107
DelVar $s84
StoreVar result
Return
Jump 371
Frame list a
DelVar result
Push 0
StoreVar $n97
Push ()
LoadVar a
DelVar a
StoreVar $s100
LoadVar $s100
1-ary IsEmpty
JumpCond True 137
Cut($s100, v)
LoadVar $n97
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n97
Jump 127
DelVar $n97
DelVar $s100
StoreVar result
Return
Jump 371
Frame values d
DelVar result
Push 0
StoreVar $n115
Push ()
LoadVar d
1-ary keys
StoreVar $s118
LoadVar $s118
1-ary IsEmpty
JumpCond True 162
Cut($s118, k)
LoadVar $n115
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n115
Jump 150
DelVar $n115
DelVar $s118
DelVar d
StoreVar result
Return
Jump 371
Frame items d
DelVar result
Push 0
StoreVar $n136
Push ()
LoadVar d
1-ary keys
StoreVar $s139
LoadVar $s139
1-ary IsEmpty
JumpCond True 194
Cut($s139, k)
LoadVar $n136
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n136
Jump 176
DelVar $n136
DelVar $s139
DelVar d
StoreVar result
Return
Jump 371
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s167
LoadVar $s167
1-ary IsEmpty
JumpCond True 236
Cut($s167, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 209
DelVar $s167
DelVar d
DelVar index
Return
Jump 371
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 251
DelVar a
Push ()
StoreVar result
Jump 326
Push ()
Push 0
Push PC(52)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(61)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n216
Push ()
LoadVar rest
StoreVar $s219
DelVar v
LoadVar $s219
1-ary IsEmpty
JumpCond True 284
Cut($s219, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 269
LoadVar $n216
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n216
Jump 269
DelVar $n216
DelVar $s219
StoreVar lower
Push 0
StoreVar $n235
Push ()
LoadVar rest
DelVar rest
StoreVar $s238
DelVar v
LoadVar $s238
1-ary IsEmpty
JumpCond True 308
Cut($s238, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 293
LoadVar $n235
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n235
Jump 293
DelVar $n235
DelVar $s238
StoreVar higher
Push PC(241)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(241)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 371
Frame sorted d
DelVar result
Push PC(241)
Push PC(119)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 371
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n281
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s284
LoadVar $s284
1-ary IsEmpty
JumpCond True 365
Cut($s284, i)
LoadVar $n281
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n281
Jump 351
DelVar $n281
DelVar $s284
DelVar d
DelVar n
StoreVar result
Return
Push ()
Store bag
Jump 1153
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1153
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s313
LoadVar $s313
1-ary IsEmpty
JumpCond True 395
Cut($s313, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 386
DelVar $s313
StoreVar result
Return
Jump 1153
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s329
LoadVar $s329
1-ary IsEmpty
JumpCond True 432
Cut($s329, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 425
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 406
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 406
DelVar $s329
Return
Jump 1153
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 458
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 462
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1153
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s393
LoadVar $s393
1-ary IsEmpty
JumpCond True 491
Cut($s393, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 480
DelVar $s393
Return
Jump 1153
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1153
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1153
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1153
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 568
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 574
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1153
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 601
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 602
Push False
JumpCond False 611
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 622
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1153
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 640
DelVar bg
DelVar k
Push {}
Push PC(374)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 725
Push PC(464)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 654
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 725
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 666
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 725
Push PC(494)
LoadVar bg
Apply
StoreVar hd
Push PC(576)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(625)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s570
LoadVar $s570
1-ary IsEmpty
JumpCond True 710
Cut($s570, x)
Push PC(539)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 694
DelVar $s570
DelVar hd
Push PC(625)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1153
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1153
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 756
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1153
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1153
Frame Lock ()
DelVar result
Push PC(761)
Push False
Apply
StoreVar result
Return
Jump 1153
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1153
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 792
Jump 795
ReadonlyDec
AtomicDec
Jump 785
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1153
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1153
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1153
Frame Condition ()
DelVar result
Push PC(374)
Push ()
Apply
StoreVar result
Return
Jump 1153
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(435)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(539)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 889
Push PC(435)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 890
Push False
JumpCond False 895
DelVar c
DelVar cnt
DelVar ctx
Jump 898
ReadonlyDec
AtomicDec
Jump 870
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1153
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(374)
Push ()
Apply
2-ary !=
JumpCond False 931
LoadVar c
Push PC(576)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(521)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1153
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(374)
Push ()
Apply
Store
AtomicDec
Return
Jump 1153
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1153
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 962
Jump 965
ReadonlyDec
AtomicDec
Jump 954
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1153
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1153
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1153
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1004
Jump 1007
ReadonlyDec
AtomicDec
Jump 995
ReadonlyDec
Push PC(52)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(61)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1153
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(39)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Jump 1153
Frame Barrier required
DelVar result
Push ()
Push "mutex"
Push PC(768)
Push ()
Apply
3-ary DictAdd
Push "cond"
Push PC(827)
Push ()
Apply
3-ary DictAdd
Push "required"
LoadVar required
3-ary DictAdd
Push "left"
LoadVar required
DelVar required
3-ary DictAdd
Push "cycle"
Push 0
3-ary DictAdd
StoreVar result
Return
Jump 1153
Frame bwait b
Push PC(784)
LoadVar b
Push "mutex"
Address
Apply
Pop
LoadVar b
Push "left"
Address
Dup
Load
Push 1
2-ary -
Store
LoadVar b
Push "left"
Address
Load
Push 0
2-ary ==
JumpCond False 1117
LoadVar b
Push "cycle"
Address
LoadVar b
Push "cycle"
Address
Load
Push 1
2-ary +
Push 2
2-ary %
Store
LoadVar b
Push "left"
Address
LoadVar b
Push "required"
Address
Load
Store
Push PC(935)
LoadVar b
Push "cond"
Address
Apply
Pop
Jump 1144
LoadVar b
Push "cycle"
Address
Load
StoreVar cycle
LoadVar b
Push "cycle"
Address
Load
LoadVar cycle
2-ary ==
JumpCond False 1144
Push PC(835)
Push ()
Push 0
LoadVar b
Push "cond"
Address
3-ary DictAdd
Push 1
LoadVar b
Push "mutex"
Address
3-ary DictAdd
Apply
Pop
Jump 1122
DelVar cycle
Push PC(803)
LoadVar b
DelVar b
Push "mutex"
Address
Apply
Pop
Return
Push [0, 0, 0]
Store round
Invariant 1164
Load round
1-ary max
Load round
1-ary min
2-ary -
Push 1
2-ary <=
Continue
Return
Push 0
Store phase
Push PC(1042)
Push 3
Apply
Store barr
Jump 1219
Frame thread self
Push { 0, 1, 2, 3 }
StoreVar $s1017
LoadVar $s1017
1-ary IsEmpty
JumpCond True 1216
Cut($s1017, r)
DelVar r
LoadVar self
Push 0
2-ary ==
JumpCond False 1188
Load phase
Push 1
2-ary +
Store phase
Push PC(1068)
Push ?barr
Apply
Pop
Push ?round
LoadVar self
Address
Dup
Load
Push 1
2-ary +
Store
ReadonlyInc
AtomicInc(lazy)
Push ?round
LoadVar self
Address
Load
Load phase
2-ary ==
Assert
AtomicDec
ReadonlyDec
Push PC(1068)
Push ?barr
Apply
Pop
Jump 1175
DelVar $s1017
DelVar self
Return
Push { 0, 1, 2 }
StoreVar $s1060
LoadVar $s1060
1-ary IsEmpty
JumpCond True 1231
Cut($s1060, i)
Push PC(1172)
LoadVar i
DelVar i
Push ()
Spawn
Jump 1221
DelVar $s1060
Return
DelVar result
```

Duration: 0.0016410000000000036

---
##  code/queuefix.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store synch
Push ()
Store list
Jump 369
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 369
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 369
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 369
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 369
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 369
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 369
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 369
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 369
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 369
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 369
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 369
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 369
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Push ()
Store bag
Jump 1039
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1039
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s311
LoadVar $s311
1-ary IsEmpty
JumpCond True 393
Cut($s311, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 384
DelVar $s311
StoreVar result
Return
Jump 1039
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s327
LoadVar $s327
1-ary IsEmpty
JumpCond True 430
Cut($s327, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 423
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 404
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 404
DelVar $s327
Return
Jump 1039
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 456
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 460
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1039
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s391
LoadVar $s391
1-ary IsEmpty
JumpCond True 489
Cut($s391, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 478
DelVar $s391
Return
Jump 1039
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1039
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1039
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1039
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 566
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 572
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1039
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 599
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 600
Push False
JumpCond False 609
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 620
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1039
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 638
DelVar bg
DelVar k
Push {}
Push PC(372)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 723
Push PC(462)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 652
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 723
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 664
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 723
Push PC(492)
LoadVar bg
Apply
StoreVar hd
Push PC(574)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(623)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s568
LoadVar $s568
1-ary IsEmpty
JumpCond True 708
Cut($s568, x)
Push PC(537)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 692
DelVar $s568
DelVar hd
Push PC(623)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1039
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1039
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 754
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1039
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1039
Frame Lock ()
DelVar result
Push PC(759)
Push False
Apply
StoreVar result
Return
Jump 1039
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1039
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 790
Jump 793
ReadonlyDec
AtomicDec
Jump 783
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1039
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1039
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1039
Frame Condition ()
DelVar result
Push PC(372)
Push ()
Apply
StoreVar result
Return
Jump 1039
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(537)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 887
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 888
Push False
JumpCond False 893
DelVar c
DelVar cnt
DelVar ctx
Jump 896
ReadonlyDec
AtomicDec
Jump 868
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1039
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(372)
Push ()
Apply
2-ary !=
JumpCond False 929
LoadVar c
Push PC(574)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(519)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1039
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(372)
Push ()
Apply
Store
AtomicDec
Return
Jump 1039
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1039
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 960
Jump 963
ReadonlyDec
AtomicDec
Jump 952
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1039
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1039
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1039
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1002
Jump 1005
ReadonlyDec
AtomicDec
Jump 993
ReadonlyDec
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1039
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Push ()
Store alloc
Push ()
Store alloc.pool
Push 0
Store alloc.next
Jump 1237
Frame malloc v
DelVar result
AtomicInc(lazy)
Push ?alloc"pool"
Load alloc.next
Address
LoadVar v
DelVar v
Store
Push ?alloc"pool"
Load alloc.next
Address
StoreVar result
Load alloc.next
Push 1
2-ary +
Store alloc.next
AtomicDec
Return
Jump 1237
Frame free r
AtomicInc(lazy)
LoadVar r
DelVar r
Del
AtomicDec
Return
Jump 1237
Frame leak_check ()
ReadonlyInc
AtomicInc(lazy)
Load alloc.pool
Push ()
2-ary ==
Push "alloc_leak"
Assert2
AtomicDec
ReadonlyDec
Return
Jump 1237
Frame Queue ()
DelVar result
Push ()
Push "next"
Push None
3-ary DictAdd
Push "value"
Push None
3-ary DictAdd
Push "lock"
Push PC(766)
Push ()
Apply
3-ary DictAdd
StoreVar result
Return
Jump 1237
Frame put (q, v)
LoadVar q
DelVar q
StoreVar nq
Push PC(1046)
Push ()
Push "next"
Push None
3-ary DictAdd
Push "value"
LoadVar v
DelVar v
3-ary DictAdd
Push "lock"
Push PC(766)
Push ()
Apply
3-ary DictAdd
Apply
StoreVar node
Push PC(782)
LoadVar nq
Push "lock"
Address
Apply
Pop
LoadVar nq
Push "next"
Address
Load
StoreVar n
LoadVar n
Push None
2-ary !=
JumpCond False 1160
Push PC(782)
LoadVar n
Push "lock"
Address
Apply
Pop
Push PC(801)
LoadVar nq
DelVar nq
Push "lock"
Address
Apply
Pop
LoadVar n
StoreVar nq
LoadVar n
DelVar n
Push "next"
Address
Load
StoreVar n
Jump 1134
DelVar n
LoadVar nq
Push "next"
Address
LoadVar node
DelVar node
Store
Push PC(801)
LoadVar nq
DelVar nq
Push "lock"
Address
Apply
Pop
Return
Jump 1237
Frame get q
DelVar result
Push PC(782)
LoadVar q
Push "lock"
Address
Apply
Pop
LoadVar q
Push "next"
Address
Load
Push None
2-ary ==
JumpCond False 1194
Push None
StoreVar result
Jump 1229
LoadVar q
Push "next"
Address
Load
StoreVar node
Push PC(782)
LoadVar node
Push "lock"
Address
Apply
Pop
LoadVar q
Push "next"
Address
LoadVar node
Push "next"
Address
Load
Store
LoadVar node
Push "value"
Address
Load
StoreVar result
Push PC(801)
LoadVar node
Push "lock"
Address
Apply
Pop
Push PC(1066)
LoadVar node
DelVar node
Apply
Pop
Push PC(801)
LoadVar q
DelVar q
Push "lock"
Address
Apply
Pop
Return
Return
DelVar result
```

Duration: 0.0022832000000000408

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push ()
Store synch
Push ()
Store list
Jump 369
Frame subseq (s, b, e)
DelVar result
Push 0
StoreVar $n7
Push ()
LoadVar b
DelVar b
LoadVar e
DelVar e
Push 1
2-ary -
2-ary ..
StoreVar $s10
LoadVar $s10
1-ary IsEmpty
JumpCond True 31
Cut($s10, x)
LoadVar $n7
LoadVar s
LoadVar x
DelVar x
Apply
3-ary DictAdd
IncVar $n7
Jump 19
DelVar $n7
DelVar $s10
DelVar s
StoreVar result
Return
Jump 369
Frame append (s, e)
DelVar result
LoadVar s
DelVar s
Push ()
Push 0
LoadVar e
DelVar e
3-ary DictAdd
2-ary +
StoreVar result
Return
Jump 369
Frame head s
DelVar result
LoadVar s
DelVar s
Push 0
Apply
StoreVar result
Return
Jump 369
Frame tail s
DelVar result
Push PC(6)
Push ()
Push 0
LoadVar s
3-ary DictAdd
Push 1
Push 1
3-ary DictAdd
Push 2
LoadVar s
DelVar s
1-ary len
3-ary DictAdd
Apply
StoreVar result
Return
Jump 369
Frame sum a
DelVar result
Push 0
StoreVar result
LoadVar a
DelVar a
StoreVar $s67
LoadVar $s67
1-ary IsEmpty
JumpCond True 96
Cut($s67, v)
LoadVar result
DelVar result
LoadVar v
DelVar v
2-ary +
StoreVar result
Jump 85
DelVar $s67
Return
Jump 369
Frame set a
DelVar result
Push {}
LoadVar a
DelVar a
StoreVar $s82
LoadVar $s82
1-ary IsEmpty
JumpCond True 113
Cut($s82, v)
LoadVar v
DelVar v
2-ary SetAdd
Jump 105
DelVar $s82
StoreVar result
Return
Jump 369
Frame list a
DelVar result
Push 0
StoreVar $n95
Push ()
LoadVar a
DelVar a
StoreVar $s98
LoadVar $s98
1-ary IsEmpty
JumpCond True 135
Cut($s98, v)
LoadVar $n95
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n95
Jump 125
DelVar $n95
DelVar $s98
StoreVar result
Return
Jump 369
Frame values d
DelVar result
Push 0
StoreVar $n113
Push ()
LoadVar d
1-ary keys
StoreVar $s116
LoadVar $s116
1-ary IsEmpty
JumpCond True 160
Cut($s116, k)
LoadVar $n113
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
IncVar $n113
Jump 148
DelVar $n113
DelVar $s116
DelVar d
StoreVar result
Return
Jump 369
Frame items d
DelVar result
Push 0
StoreVar $n134
Push ()
LoadVar d
1-ary keys
StoreVar $s137
LoadVar $s137
1-ary IsEmpty
JumpCond True 192
Cut($s137, k)
LoadVar $n134
Push ()
Push 0
LoadVar k
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
IncVar $n134
Jump 174
DelVar $n134
DelVar $s137
DelVar d
StoreVar result
Return
Jump 369
Frame enumerate d
DelVar result
Push 0
StoreVar index
Push ()
StoreVar result
LoadVar d
1-ary keys
StoreVar $s165
LoadVar $s165
1-ary IsEmpty
JumpCond True 234
Cut($s165, k)
LoadVar result
DelVar result
Push ()
Push 0
Push ()
Push 0
LoadVar index
3-ary DictAdd
Push 1
LoadVar d
LoadVar k
DelVar k
Apply
3-ary DictAdd
3-ary DictAdd
2-ary +
StoreVar result
LoadVar index
DelVar index
Push 1
2-ary +
StoreVar index
Jump 207
DelVar $s165
DelVar d
DelVar index
Return
Jump 369
Frame qsort a
DelVar result
LoadVar a
Push ()
2-ary ==
JumpCond False 249
DelVar a
Push ()
StoreVar result
Jump 324
Push ()
Push 0
Push PC(50)
LoadVar a
Apply
3-ary DictAdd
Push 1
Push PC(59)
LoadVar a
DelVar a
Apply
3-ary DictAdd
StoreVar (pivot, rest)
Push 0
StoreVar $n214
Push ()
LoadVar rest
StoreVar $s217
DelVar v
LoadVar $s217
1-ary IsEmpty
JumpCond True 282
Cut($s217, v)
LoadVar v
LoadVar pivot
2-ary <
JumpCond False 267
LoadVar $n214
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n214
Jump 267
DelVar $n214
DelVar $s217
StoreVar lower
Push 0
StoreVar $n233
Push ()
LoadVar rest
DelVar rest
StoreVar $s236
DelVar v
LoadVar $s236
1-ary IsEmpty
JumpCond True 306
Cut($s236, v)
LoadVar v
LoadVar pivot
2-ary >=
JumpCond False 291
LoadVar $n233
LoadVar v
DelVar v
3-ary DictAdd
IncVar $n233
Jump 291
DelVar $n233
DelVar $s236
StoreVar higher
Push PC(239)
LoadVar lower
DelVar lower
Apply
Push ()
Push 0
LoadVar pivot
DelVar pivot
3-ary DictAdd
Push PC(239)
LoadVar higher
DelVar higher
Apply
3-ary +
StoreVar result
Return
Jump 369
Frame sorted d
DelVar result
Push PC(239)
Push PC(117)
LoadVar d
DelVar d
Apply
Apply
StoreVar result
Return
Jump 369
Frame reversed d
DelVar result
LoadVar d
1-ary len
StoreVar n
Push 0
StoreVar $n279
Push ()
Push 1
LoadVar n
2-ary ..
StoreVar $s282
LoadVar $s282
1-ary IsEmpty
JumpCond True 363
Cut($s282, i)
LoadVar $n279
LoadVar d
LoadVar n
LoadVar i
DelVar i
2-ary -
Apply
3-ary DictAdd
IncVar $n279
Jump 349
DelVar $n279
DelVar $s282
DelVar d
DelVar n
StoreVar result
Return
Push ()
Store bag
Jump 1039
Frame empty ()
DelVar result
Push ()
StoreVar result
Return
Jump 1039
Frame fromSet s
DelVar result
Push ()
LoadVar s
DelVar s
StoreVar $s311
LoadVar $s311
1-ary IsEmpty
JumpCond True 393
Cut($s311, elt)
LoadVar elt
DelVar elt
Push 1
3-ary DictAdd
Jump 384
DelVar $s311
StoreVar result
Return
Jump 1039
Frame fromList a
DelVar result
Push ()
StoreVar result
LoadVar a
DelVar a
StoreVar $s327
LoadVar $s327
1-ary IsEmpty
JumpCond True 430
Cut($s327, v)
LoadVar v
LoadVar result
1-ary keys
2-ary in
JumpCond False 423
Push ?result
LoadVar v
DelVar v
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 404
Push ?result
LoadVar v
DelVar v
Address
Push 1
StoreVar [result]
Jump 404
DelVar $s327
Return
Jump 1039
Frame multiplicity (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar elt
LoadVar bg
1-ary keys
2-ary in
JumpCond False 456
LoadVar bg
DelVar bg
LoadVar elt
DelVar elt
Apply
StoreVar result
Jump 460
DelVar bg
DelVar elt
Push 0
StoreVar result
Return
Jump 1039
Frame size bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
Push 0
StoreVar result
LoadVar bg
DelVar bg
StoreVar $s391
LoadVar $s391
1-ary IsEmpty
JumpCond True 489
Cut($s391, c)
LoadVar result
DelVar result
LoadVar c
DelVar c
2-ary +
StoreVar result
Jump 478
DelVar $s391
Return
Jump 1039
Frame bmin bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
1-ary min
StoreVar result
Return
Jump 1039
Frame bmax bg
DelVar result
LoadVar bg
DelVar bg
1-ary keys
1-ary max
StoreVar result
Return
Jump 1039
Frame bchoose bg
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
1-ary keys
Choose
StoreVar result
Return
Jump 1039
Frame add (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 566
Push ?result
LoadVar elt
DelVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary +
StoreVar [result]
Jump 572
Push ?result
LoadVar elt
DelVar elt
Address
Push 1
StoreVar [result]
Return
Jump 1039
Frame remove (bg, elt)
DelVar result
ReadonlyInc
AtomicInc(lazy)
Push 0
LoadVar bg
2-ary in
1-ary not
Assert
AtomicDec
ReadonlyDec
LoadVar bg
DelVar bg
StoreVar result
LoadVar elt
LoadVar result
1-ary keys
2-ary in
JumpCond False 599
LoadVar result
LoadVar elt
Apply
Push 0
2-ary >
Jump 600
Push False
JumpCond False 609
Push ?result
LoadVar elt
Address
Dup
LoadVar [result]
Push 1
2-ary -
StoreVar [result]
LoadVar result
LoadVar elt
Apply
Push 0
2-ary <=
JumpCond False 620
Push ?result
LoadVar elt
DelVar elt
Address
DelVar [result]
DelVar elt
Return
Jump 1039
Frame combinations (bg, k)
DelVar result
LoadVar k
Push 0
2-ary ==
JumpCond False 638
DelVar bg
DelVar k
Push {}
Push PC(372)
Push ()
Apply
2-ary SetAdd
StoreVar result
Jump 723
Push PC(462)
LoadVar bg
Apply
StoreVar n
LoadVar k
LoadVar n
2-ary >
JumpCond False 652
DelVar bg
DelVar k
DelVar n
Push {}
StoreVar result
Jump 723
LoadVar k
LoadVar n
DelVar n
2-ary ==
JumpCond False 664
DelVar k
Push {}
LoadVar bg
DelVar bg
2-ary SetAdd
StoreVar result
Jump 723
Push PC(492)
LoadVar bg
Apply
StoreVar hd
Push PC(574)
Push ()
Push 0
LoadVar bg
DelVar bg
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
StoreVar tl
Push {}
Push PC(623)
Push ()
Push 0
LoadVar tl
3-ary DictAdd
Push 1
LoadVar k
Push 1
2-ary -
3-ary DictAdd
Apply
StoreVar $s568
LoadVar $s568
1-ary IsEmpty
JumpCond True 708
Cut($s568, x)
Push PC(537)
Push ()
Push 0
LoadVar x
DelVar x
3-ary DictAdd
Push 1
LoadVar hd
3-ary DictAdd
Apply
2-ary SetAdd
Jump 692
DelVar $s568
DelVar hd
Push PC(623)
Push ()
Push 0
LoadVar tl
DelVar tl
3-ary DictAdd
Push 1
LoadVar k
DelVar k
3-ary DictAdd
Apply
2-ary |
StoreVar result
Return
Jump 1039
Frame tas lk
DelVar result
AtomicInc(lazy)
LoadVar lk
Load
StoreVar result
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1039
Frame cas (p, old, new)
DelVar result
AtomicInc(lazy)
LoadVar p
Load
LoadVar old
DelVar old
2-ary ==
StoreVar result
LoadVar result
JumpCond False 754
LoadVar p
DelVar p
LoadVar new
DelVar new
Store
DelVar new
DelVar p
AtomicDec
Return
Jump 1039
Frame BinSema acquired
DelVar result
LoadVar acquired
DelVar acquired
StoreVar result
Return
Jump 1039
Frame Lock ()
DelVar result
Push PC(759)
Push False
Apply
StoreVar result
Return
Jump 1039
Frame acquired binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1039
Frame acquire binsema
AtomicInc(lazy)
ReadonlyInc
LoadVar binsema
Load
1-ary not
JumpCond False 790
Jump 793
ReadonlyDec
AtomicDec
Jump 783
ReadonlyDec
LoadVar binsema
DelVar binsema
Push True
Store
AtomicDec
Return
Jump 1039
Frame release binsema
ReadonlyInc
AtomicInc(lazy)
LoadVar binsema
Load
Assert
AtomicDec
ReadonlyDec
AtomicInc(lazy)
LoadVar binsema
DelVar binsema
Push False
Store
AtomicDec
Return
Jump 1039
Frame held binsema
DelVar result
LoadVar binsema
DelVar binsema
Load
StoreVar result
Return
Jump 1039
Frame Condition ()
DelVar result
Push PC(372)
Push ()
Apply
StoreVar result
Return
Jump 1039
Frame wait (c, lk)
Push 0
StoreVar cnt
DelVar cnt
Push ()
1-ary get_context
StoreVar ctx
AtomicInc(lazy)
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
StoreVar cnt
LoadVar c
Push PC(537)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
Store
LoadVar lk
Push False
Store
AtomicDec
AtomicInc(lazy)
ReadonlyInc
LoadVar lk
Load
1-ary not
JumpCond False 887
Push PC(433)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
LoadVar ctx
3-ary DictAdd
Apply
LoadVar cnt
2-ary <=
Jump 888
Push False
JumpCond False 893
DelVar c
DelVar cnt
DelVar ctx
Jump 896
ReadonlyDec
AtomicDec
Jump 868
ReadonlyDec
LoadVar lk
DelVar lk
Push True
Store
AtomicDec
Return
Jump 1039
Frame notify c
AtomicInc(lazy)
LoadVar c
Load
Push PC(372)
Push ()
Apply
2-ary !=
JumpCond False 929
LoadVar c
Push PC(574)
Push ()
Push 0
LoadVar c
Load
3-ary DictAdd
Push 1
Push PC(519)
LoadVar c
DelVar c
Load
Apply
3-ary DictAdd
Apply
Store
DelVar c
AtomicDec
Return
Jump 1039
Frame notifyAll c
AtomicInc(lazy)
LoadVar c
DelVar c
Push PC(372)
Push ()
Apply
Store
AtomicDec
Return
Jump 1039
Frame Semaphore cnt
DelVar result
LoadVar cnt
DelVar cnt
StoreVar result
Return
Jump 1039
Frame P sema
AtomicInc(lazy)
ReadonlyInc
LoadVar sema
Load
Push 0
2-ary >
JumpCond False 960
Jump 963
ReadonlyDec
AtomicDec
Jump 952
ReadonlyDec
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary -
Store
AtomicDec
Return
Jump 1039
Frame V sema
AtomicInc(lazy)
LoadVar sema
DelVar sema
Dup
Load
Push 1
2-ary +
Store
AtomicDec
Return
Jump 1039
Frame Queue ()
DelVar result
Push ()
StoreVar result
Return
Jump 1039
Frame get q
DelVar result
AtomicInc(lazy)
ReadonlyInc
LoadVar q
Load
Push ()
2-ary !=
JumpCond False 1002
Jump 1005
ReadonlyDec
AtomicDec
Jump 993
ReadonlyDec
Push PC(50)
LoadVar q
Load
Apply
StoreVar result
LoadVar q
Push PC(59)
LoadVar q
DelVar q
Load
Apply
Store
AtomicDec
Return
Jump 1039
Frame put (q, item)
AtomicInc(lazy)
LoadVar q
Push PC(37)
Push ()
Push 0
LoadVar q
DelVar q
Load
3-ary DictAdd
Push 1
LoadVar item
DelVar item
3-ary DictAdd
Apply
Store
AtomicDec
Return
Push ()
Store alloc
Push ()
Store alloc.pool
Push 0
Store alloc.next
Jump 1237
Frame malloc v
DelVar result
AtomicInc(lazy)
Push ?alloc"pool"
Load alloc.next
Address
LoadVar v
DelVar v
Store
Push ?alloc"pool"
Load alloc.next
Address
StoreVar result
Load alloc.next
Push 1
2-ary +
Store alloc.next
AtomicDec
Return
Jump 1237
Frame free r
AtomicInc(lazy)
LoadVar r
DelVar r
Del
AtomicDec
Return
Jump 1237
Frame leak_check ()
ReadonlyInc
AtomicInc(lazy)
Load alloc.pool
Push ()
2-ary ==
Push "alloc_leak"
Assert2
AtomicDec
ReadonlyDec
Return
Jump 1237
Frame Queue ()
DelVar result
Push ()
Push "next"
Push None
3-ary DictAdd
Push "value"
Push None
3-ary DictAdd
Push "lock"
Push PC(766)
Push ()
Apply
3-ary DictAdd
StoreVar result
Return
Jump 1237
Frame put (q, v)
LoadVar q
DelVar q
StoreVar nq
Push PC(1046)
Push ()
Push "next"
Push None
3-ary DictAdd
Push "value"
LoadVar v
DelVar v
3-ary DictAdd
Push "lock"
Push PC(766)
Push ()
Apply
3-ary DictAdd
Apply
StoreVar node
Push PC(782)
LoadVar nq
Push "lock"
Address
Apply
Pop
LoadVar nq
Push "next"
Address
Load
StoreVar n
LoadVar n
Push None
2-ary !=
JumpCond False 1160
Push PC(782)
LoadVar n
Push "lock"
Address
Apply
Pop
Push PC(801)
LoadVar nq
DelVar nq
Push "lock"
Address
Apply
Pop
LoadVar n
StoreVar nq
LoadVar n
DelVar n
Push "next"
Address
Load
StoreVar n
Jump 1134
DelVar n
LoadVar nq
Push "next"
Address
LoadVar node
DelVar node
Store
Push PC(801)
LoadVar nq
DelVar nq
Push "lock"
Address
Apply
Pop
Return
Jump 1237
Frame get q
DelVar result
Push PC(782)
LoadVar q
Push "lock"
Address
Apply
Pop
LoadVar q
Push "next"
Address
Load
Push None
2-ary ==
JumpCond False 1194
Push None
StoreVar result
Jump 1229
LoadVar q
Push "next"
Address
Load
StoreVar node
Push PC(782)
LoadVar node
Push "lock"
Address
Apply
Pop
LoadVar q
Push "next"
Address
LoadVar node
Push "next"
Address
Load
Store
LoadVar node
Push "value"
Address
Load
StoreVar result
Push PC(801)
LoadVar node
Push "lock"
Address
Apply
Pop
Push PC(1066)
LoadVar node
DelVar node
Apply
Pop
Push PC(801)
LoadVar q
DelVar q
Push "lock"
Address
Apply
Pop
Return
Return
DelVar result
```

Duration: 0.001388300000000009

---
##  code/hello3.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push { "hello", "world" }
Choose
Print
Return
DelVar result
```

Duration: 0.0012934

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push { "hello", "world" }
Choose
Print
Return
DelVar result
```

Duration: 0.001466699999999932

---
##  code/queueseq.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Jump 69
Frame Queue ()
DelVar result
Push { "data":(), "head":0, "tail":0 }
StoreVar result
Return
Jump 69
Frame put (q, v)
LoadVar q
Push "tail"
Address
Load
StoreVar i
LoadVar q
Push "data"
Address
LoadVar i
Address
LoadVar v
DelVar v
Store
LoadVar q
DelVar q
Push "tail"
Address
LoadVar i
DelVar i
Push 1
2-ary +
Store
Return
Jump 69
Frame get q
DelVar result
LoadVar q
Push "head"
Address
Load
StoreVar i
LoadVar i
LoadVar q
Push "tail"
Address
Load
2-ary ==
JumpCond False 52
DelVar i
DelVar q
Push None
StoreVar result
Jump 68
LoadVar q
Push "data"
Address
LoadVar i
Address
Load
StoreVar result
LoadVar q
DelVar q
Push "head"
Address
LoadVar i
DelVar i
Push 1
2-ary +
Store
Return
Return
DelVar result
```

Duration: 0.001577399999999951

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Jump 69
Frame Queue ()
DelVar result
Push { "data":(), "head":0, "tail":0 }
StoreVar result
Return
Jump 69
Frame put (q, v)
LoadVar q
Push "tail"
Address
Load
StoreVar i
LoadVar q
Push "data"
Address
LoadVar i
Address
LoadVar v
DelVar v
Store
LoadVar q
DelVar q
Push "tail"
Address
LoadVar i
DelVar i
Push 1
2-ary +
Store
Return
Jump 69
Frame get q
DelVar result
LoadVar q
Push "head"
Address
Load
StoreVar i
LoadVar i
LoadVar q
Push "tail"
Address
Load
2-ary ==
JumpCond False 52
DelVar i
DelVar q
Push None
StoreVar result
Jump 68
LoadVar q
Push "data"
Address
LoadVar i
Address
Load
StoreVar result
LoadVar q
DelVar q
Push "head"
Address
LoadVar i
DelVar i
Push 1
2-ary +
Store
Return
Return
DelVar result
```

Duration: 0.0016347999999999363

---
##  code/hello1.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push "hello world"
Print
Return
DelVar result
```

Duration: 0.0014104000000000338

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push "hello world"
Print
Return
DelVar result
```

Duration: 0.0017508000000000523

---
##  code/consensus.hny

### Summary

Duration is good: ✅

Output is good: ✅

### Baseline Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push 0
StoreVar $n1
Push ()
Push { 0, 1, 2, 3 }
StoreVar $s4
LoadVar $s4
1-ary IsEmpty
JumpCond True 17
Cut($s4, i)
DelVar i
LoadVar $n1
Push { 0, 1 }
Choose
3-ary DictAdd
IncVar $n1
Jump 6
DelVar $n1
DelVar $s4
Store proposals
Push {}
Load proposals
StoreVar $s18
LoadVar $s18
1-ary IsEmpty
JumpCond True 31
Cut($s18, x)
LoadVar x
DelVar x
2-ary SetAdd
Jump 23
DelVar $s18
Choose
Store decision
Jump 43
Frame processor proposal
DelVar proposal
Push { False, True }
Choose
JumpCond False 42
Load decision
Print
Return
Load proposals
Print
Push { 0, 1, 2, 3 }
StoreVar $s39
LoadVar $s39
1-ary IsEmpty
JumpCond True 60
Cut($s39, i)
Push PC(35)
Push ?proposals
LoadVar i
DelVar i
Address
Load
Push ()
Spawn
Jump 47
DelVar $s39
Return
DelVar result
```

Duration: 0.0012381000000000197

### Current Output

```
Phase 1: compile Harmony program to bytecode
Frame __init__ ()
Push 0
StoreVar $n1
Push ()
Push { 0, 1, 2, 3 }
StoreVar $s4
LoadVar $s4
1-ary IsEmpty
JumpCond True 17
Cut($s4, i)
DelVar i
LoadVar $n1
Push { 0, 1 }
Choose
3-ary DictAdd
IncVar $n1
Jump 6
DelVar $n1
DelVar $s4
Store proposals
Push {}
Load proposals
StoreVar $s18
LoadVar $s18
1-ary IsEmpty
JumpCond True 31
Cut($s18, x)
LoadVar x
DelVar x
2-ary SetAdd
Jump 23
DelVar $s18
Choose
Store decision
Jump 43
Frame processor proposal
DelVar proposal
Push { False, True }
Choose
JumpCond False 42
Load decision
Print
Return
Load proposals
Print
Push { 0, 1, 2, 3 }
StoreVar $s39
LoadVar $s39
1-ary IsEmpty
JumpCond True 60
Cut($s39, i)
Push PC(35)
Push ?proposals
LoadVar i
DelVar i
Address
Load
Push ()
Spawn
Jump 47
DelVar $s39
Return
DelVar result
```

Duration: 0.0012327000000000865

---