\>{\tiny 1}\'\>\texttt{\textbf{from}}~synch~\texttt{\textbf{import}}~Lock,~acquire,~release\\

\>{\tiny 2}\'\>\\

\>{\tiny 3}\'\>\textit{countlock}~=~Lock()\\

\>{\tiny 4}\'\>\textit{count}~=~0\\

\>{\tiny 5}\'\>\textit{done}~=~\texttt{\textbf{False}}\\

\>{\tiny 6}\'\>\\

\>{\tiny 7}\'\>\texttt{\textbf{def}}~handler():\\

\>{\tiny 8}\'\>~~~~acquire(?\textit{countlock})\\

\>{\tiny 9}\'\>~~~~~~~~\textit{count}~+=~1\\

\>{\tiny 10}\'\>~~~~release(?\textit{countlock})\\

\>{\tiny 11}\'\>~~~~\textit{done}~=~\texttt{\textbf{True}}\\

\>{\tiny 12}\'\>\\

\>{\tiny 13}\'\>\texttt{\textbf{def}}~main():\\

\>{\tiny 14}\'\>~~~~\texttt{\textbf{trap}}~handler()\\

\>{\tiny 15}\'\>~~~~acquire(?\textit{countlock})\\

\>{\tiny 16}\'\>~~~~~~~~\textit{count}~+=~1\\

\>{\tiny 17}\'\>~~~~release(?\textit{countlock})\\

\>{\tiny 18}\'\>~~~~\texttt{\textbf{await}}~\textit{done}\\

\>{\tiny 19}\'\>~~~~\texttt{\textbf{assert}}~\textit{count}~==~2\\

\>{\tiny 20}\'\>\\

\>{\tiny 21}\'\>\texttt{\textbf{spawn}}~main()