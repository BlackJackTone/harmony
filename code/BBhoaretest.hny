import BBhoare;

def producer(bb, v):
    BBhoare.enqueue(bb, v);
;
def consumer(bb):
    let v = BBhoare.dequeue(bb):
        assert v in { 1, 2 };
    ;
;

testbb = BBhoare.BB(1);
spawn producer(?testbb, 1);
spawn producer(?testbb, 2);
spawn consumer(?testbb);
spawn consumer(?testbb);
