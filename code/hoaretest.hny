import hoare;

def acquire():
    mon_enter();
        if busy:
            wait(?nonbusy);
        ;
        busy = True;
    mon_exit();
;
def release():
    mon_enter();
        busy = False;
        signal(?nonbusy);
    mon_exit();
;
mutex = Semaphore(1);
nonbusy = Condition(?mutex);
busy = False;

def process():
    acquire();
    release();
;
spawn process();
spawn process();
