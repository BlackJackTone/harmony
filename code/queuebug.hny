def Queue():
    result = { .data: [], .head: 0, .tail: 0 }

def put(q, v):
    let i = q->tail:
        q->data[i] = v
        q->tail = i + 1

def get(q):
    atomically:
        if q->head == q->tail:
            result = None
        else:
            result = q->data[q->head]
            q->head += 1
