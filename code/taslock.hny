def tas(s):
    atomically:
        result = !s
        !s = True

def clear(s):
    atomically !s = False

def Lock():
    result = False

def acquire(lk):
    while tas(lk):
        pass

def release(lk):
    clear(lk)
